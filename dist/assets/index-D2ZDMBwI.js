import{g as Ei,c as _f,a as Ya}from"./index-CZ_mv_nT.js";var Ve=63710088e-1,Ef={centimeters:Ve*100,centimetres:Ve*100,degrees:Ve/111325,feet:Ve*3.28084,inches:Ve*39.37,kilometers:Ve/1e3,kilometres:Ve/1e3,meters:Ve,metres:Ve,miles:Ve/1609.344,millimeters:Ve*1e3,millimetres:Ve*1e3,nauticalmiles:Ve/1852,radians:1,yards:Ve/1.0936},tv={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:1/1e3,kilometres:1/1e3,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/Ve,yards:1/1.0936},Uu={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046};function ze(e,t,r){r===void 0&&(r={});var n={type:"Feature"};return(r.id===0||r.id)&&(n.id=r.id),r.bbox&&(n.bbox=r.bbox),n.properties=t||{},n.geometry=e,n}function ev(e,t,r){switch(e){case"Point":return gt(t).geometry;case"LineString":return Jt(t).geometry;case"Polygon":return pt(t).geometry;case"MultiPoint":return xf(t).geometry;case"MultiLineString":return co(t).geometry;case"MultiPolygon":return Qn(t).geometry;default:throw new Error(e+" is invalid")}}function gt(e,t,r){if(r===void 0&&(r={}),!e)throw new Error("coordinates is required");if(!Array.isArray(e))throw new Error("coordinates must be an Array");if(e.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!Je(e[0])||!Je(e[1]))throw new Error("coordinates must contain numbers");var n={type:"Point",coordinates:e};return ze(n,t,r)}function rv(e,t,r){return r===void 0&&(r={}),et(e.map(function(n){return gt(n,t)}),r)}function pt(e,t,r){r===void 0&&(r={});for(var n=0,i=e;n<i.length;n++){var o=i[n];if(o.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var s=0;s<o[o.length-1].length;s++)if(o[o.length-1][s]!==o[0][s])throw new Error("First and last Position are not equivalent.")}var a={type:"Polygon",coordinates:e};return ze(a,t,r)}function nv(e,t,r){return r===void 0&&(r={}),et(e.map(function(n){return pt(n,t)}),r)}function Jt(e,t,r){if(r===void 0&&(r={}),e.length<2)throw new Error("coordinates must be an array of two or more positions");var n={type:"LineString",coordinates:e};return ze(n,t,r)}function iv(e,t,r){return r===void 0&&(r={}),et(e.map(function(n){return Jt(n,t)}),r)}function et(e,t){t===void 0&&(t={});var r={type:"FeatureCollection"};return t.id&&(r.id=t.id),t.bbox&&(r.bbox=t.bbox),r.features=e,r}function co(e,t,r){r===void 0&&(r={});var n={type:"MultiLineString",coordinates:e};return ze(n,t,r)}function xf(e,t,r){r===void 0&&(r={});var n={type:"MultiPoint",coordinates:e};return ze(n,t,r)}function Qn(e,t,r){r===void 0&&(r={});var n={type:"MultiPolygon",coordinates:e};return ze(n,t,r)}function Nh(e,t,r){r===void 0&&(r={});var n={type:"GeometryCollection",geometries:e};return ze(n,t,r)}function ov(e,t){if(t===void 0&&(t=0),t&&!(t>=0))throw new Error("precision must be a positive number");var r=Math.pow(10,t||0);return Math.round(e*r)/r}function Va(e,t){t===void 0&&(t="kilometers");var r=Ef[t];if(!r)throw new Error(t+" units is invalid");return e*r}function Zs(e,t){t===void 0&&(t="kilometers");var r=Ef[t];if(!r)throw new Error(t+" units is invalid");return e/r}function Ph(e,t){return bo(Zs(e,t))}function Ss(e){var t=e%360;return t<0&&(t+=360),t}function bo(e){var t=e%(2*Math.PI);return t*180/Math.PI}function tr(e){var t=e%360;return t*Math.PI/180}function Qs(e,t,r){if(t===void 0&&(t="kilometers"),r===void 0&&(r="kilometers"),!(e>=0))throw new Error("length must be a positive number");return Va(Zs(e,t),r)}function sv(e,t,r){if(t===void 0&&(t="meters"),r===void 0&&(r="kilometers"),!(e>=0))throw new Error("area must be a positive number");var n=Uu[t];if(!n)throw new Error("invalid original units");var i=Uu[r];if(!i)throw new Error("invalid final units");return e/n*i}function Je(e){return!isNaN(e)&&e!==null&&!Array.isArray(e)}function re(e){return!!e&&e.constructor===Object}function av(e){if(!e)throw new Error("bbox is required");if(!Array.isArray(e))throw new Error("bbox must be an Array");if(e.length!==4&&e.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");e.forEach(function(t){if(!Je(t))throw new Error("bbox must only contain numbers")})}function uv(e){if(!e)throw new Error("id is required");if(["string","number"].indexOf(typeof e)===-1)throw new Error("id must be a number or a string")}const fv=Object.freeze(Object.defineProperty({__proto__:null,areaFactors:Uu,bearingToAzimuth:Ss,convertArea:sv,convertLength:Qs,degreesToRadians:tr,earthRadius:Ve,factors:Ef,feature:ze,featureCollection:et,geometry:ev,geometryCollection:Nh,isNumber:Je,isObject:re,lengthToDegrees:Ph,lengthToRadians:Zs,lineString:Jt,lineStrings:iv,multiLineString:co,multiPoint:xf,multiPolygon:Qn,point:gt,points:rv,polygon:pt,polygons:nv,radiansToDegrees:bo,radiansToLength:Va,round:ov,unitsFactors:tv,validateBBox:av,validateId:uv},Symbol.toStringTag,{value:"Module"}));function se(e){if(!e)throw new Error("coord is required");if(!Array.isArray(e)){if(e.type==="Feature"&&e.geometry!==null&&e.geometry.type==="Point")return e.geometry.coordinates;if(e.type==="Point")return e.coordinates}if(Array.isArray(e)&&e.length>=2&&!Array.isArray(e[0])&&!Array.isArray(e[1]))return e;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function ot(e){if(Array.isArray(e))return e;if(e.type==="Feature"){if(e.geometry!==null)return e.geometry.coordinates}else if(e.coordinates)return e.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function Lh(e){if(e.length>1&&Je(e[0])&&Je(e[1]))return!0;if(Array.isArray(e[0])&&e[0].length)return Lh(e[0]);throw new Error("coordinates must only contain numbers")}function lv(e,t,r){if(!t||!r)throw new Error("type and name required");if(!e||e.type!==t)throw new Error("Invalid input to "+r+": must be a "+t+", given "+e.type)}function Sa(e,t,r){if(!e)throw new Error("No feature passed");if(!r)throw new Error(".featureOf() requires a name");if(!e||e.type!=="Feature"||!e.geometry)throw new Error("Invalid input to "+r+", Feature with geometry required");if(!e.geometry||e.geometry.type!==t)throw new Error("Invalid input to "+r+": must be a "+t+", given "+e.geometry.type)}function Xi(e,t,r){if(!e)throw new Error("No featureCollection passed");if(!r)throw new Error(".collectionOf() requires a name");if(!e||e.type!=="FeatureCollection")throw new Error("Invalid input to "+r+", FeatureCollection required");for(var n=0,i=e.features;n<i.length;n++){var o=i[n];if(!o||o.type!=="Feature"||!o.geometry)throw new Error("Invalid input to "+r+", Feature with geometry required");if(!o.geometry||o.geometry.type!==t)throw new Error("Invalid input to "+r+": must be a "+t+", given "+o.geometry.type)}}function fe(e){return e.type==="Feature"?e.geometry:e}function Br(e,t){return e.type==="FeatureCollection"?"FeatureCollection":e.type==="GeometryCollection"?"GeometryCollection":e.type==="Feature"&&e.geometry!==null?e.geometry.type:e.type}const Sx=Object.freeze(Object.defineProperty({__proto__:null,collectionOf:Xi,containsNumber:Lh,featureOf:Sa,geojsonType:lv,getCoord:se,getCoords:ot,getGeom:fe,getType:Br},Symbol.toStringTag,{value:"Module"}));function be(e,t,r){if(e!==null)for(var n,i,o,s,a,u,f,l=0,c=0,h,p=e.type,v=p==="FeatureCollection",y=p==="Feature",E=v?e.features.length:1,x=0;x<E;x++){f=v?e.features[x].geometry:y?e.geometry:e,h=f?f.type==="GeometryCollection":!1,a=h?f.geometries.length:1;for(var g=0;g<a;g++){var d=0,_=0;if(s=h?f.geometries[g]:f,s!==null){u=s.coordinates;var w=s.type;switch(l=r&&(w==="Polygon"||w==="MultiPolygon")?1:0,w){case null:break;case"Point":if(t(u,c,x,d,_)===!1)return!1;c++,d++;break;case"LineString":case"MultiPoint":for(n=0;n<u.length;n++){if(t(u[n],c,x,d,_)===!1)return!1;c++,w==="MultiPoint"&&d++}w==="LineString"&&d++;break;case"Polygon":case"MultiLineString":for(n=0;n<u.length;n++){for(i=0;i<u[n].length-l;i++){if(t(u[n][i],c,x,d,_)===!1)return!1;c++}w==="MultiLineString"&&d++,w==="Polygon"&&_++}w==="Polygon"&&d++;break;case"MultiPolygon":for(n=0;n<u.length;n++){for(_=0,i=0;i<u[n].length;i++){for(o=0;o<u[n][i].length-l;o++){if(t(u[n][i][o],c,x,d,_)===!1)return!1;c++}_++}d++}break;case"GeometryCollection":for(n=0;n<s.geometries.length;n++)if(be(s.geometries[n],t,r)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function Mh(e,t,r,n){var i=r;return be(e,function(o,s,a,u,f){s===0&&r===void 0?i=o:i=t(i,o,s,a,u,f)},n),i}function Oh(e,t){var r;switch(e.type){case"FeatureCollection":for(r=0;r<e.features.length&&t(e.features[r].properties,r)!==!1;r++);break;case"Feature":t(e.properties,0);break}}function cv(e,t,r){var n=r;return Oh(e,function(i,o){o===0&&r===void 0?n=i:n=t(n,i,o)}),n}function Qt(e,t){if(e.type==="Feature")t(e,0);else if(e.type==="FeatureCollection")for(var r=0;r<e.features.length&&t(e.features[r],r)!==!1;r++);}function Rh(e,t,r){var n=r;return Qt(e,function(i,o){o===0&&r===void 0?n=i:n=t(n,i,o)}),n}function Zi(e){var t=[];return be(e,function(r){t.push(r)}),t}function wn(e,t){var r,n,i,o,s,a,u,f,l,c,h=0,p=e.type==="FeatureCollection",v=e.type==="Feature",y=p?e.features.length:1;for(r=0;r<y;r++){for(a=p?e.features[r].geometry:v?e.geometry:e,f=p?e.features[r].properties:v?e.properties:{},l=p?e.features[r].bbox:v?e.bbox:void 0,c=p?e.features[r].id:v?e.id:void 0,u=a?a.type==="GeometryCollection":!1,s=u?a.geometries.length:1,i=0;i<s;i++){if(o=u?a.geometries[i]:a,o===null){if(t(null,h,f,l,c)===!1)return!1;continue}switch(o.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(t(o,h,f,l,c)===!1)return!1;break}case"GeometryCollection":{for(n=0;n<o.geometries.length;n++)if(t(o.geometries[n],h,f,l,c)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}h++}}function Ah(e,t,r){var n=r;return wn(e,function(i,o,s,a,u){o===0&&r===void 0?n=i:n=t(n,i,o,s,a,u)}),n}function Oe(e,t){wn(e,function(r,n,i,o,s){var a=r===null?null:r.type;switch(a){case null:case"Point":case"LineString":case"Polygon":return t(ze(r,i,{bbox:o,id:s}),n,0)===!1?!1:void 0}var u;switch(a){case"MultiPoint":u="Point";break;case"MultiLineString":u="LineString";break;case"MultiPolygon":u="Polygon";break}for(var f=0;f<r.coordinates.length;f++){var l=r.coordinates[f],c={type:u,coordinates:l};if(t(ze(c,i),n,f)===!1)return!1}})}function hv(e,t,r){var n=r;return Oe(e,function(i,o,s){o===0&&s===0&&r===void 0?n=i:n=t(n,i,o,s)}),n}function Pi(e,t){Oe(e,function(r,n,i){var o=0;if(r.geometry){var s=r.geometry.type;if(!(s==="Point"||s==="MultiPoint")){var a,u=0,f=0,l=0;if(be(r,function(c,h,p,v,y){if(a===void 0||n>u||v>f||y>l){a=c,u=n,f=v,l=y,o=0;return}var E=Jt([a,c],r.properties);if(t(E,n,i,y,o)===!1)return!1;o++,a=c})===!1)return!1}}})}function bh(e,t,r){var n=r,i=!1;return Pi(e,function(o,s,a,u,f){i===!1&&r===void 0?n=o:n=t(n,o,s,a,u,f),i=!0}),n}function Dh(e,t){if(!e)throw new Error("geojson is required");Oe(e,function(r,n,i){if(r.geometry!==null){var o=r.geometry.type,s=r.geometry.coordinates;switch(o){case"LineString":if(t(r,n,i,0,0)===!1)return!1;break;case"Polygon":for(var a=0;a<s.length;a++)if(t(Jt(s[a],r.properties),n,i,a)===!1)return!1;break}}})}function Th(e,t,r){var n=r;return Dh(e,function(i,o,s,a){o===0&&r===void 0?n=i:n=t(n,i,o,s,a)}),n}function pv(e,t){if(t=t||{},!re(t))throw new Error("options is invalid");var r=t.featureIndex||0,n=t.multiFeatureIndex||0,i=t.geometryIndex||0,o=t.segmentIndex||0,s=t.properties,a;switch(e.type){case"FeatureCollection":r<0&&(r=e.features.length+r),s=s||e.features[r].properties,a=e.features[r].geometry;break;case"Feature":s=s||e.properties,a=e.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":a=e;break;default:throw new Error("geojson is invalid")}if(a===null)return null;var u=a.coordinates;switch(a.type){case"Point":case"MultiPoint":return null;case"LineString":return o<0&&(o=u.length+o-1),Jt([u[o],u[o+1]],s,t);case"Polygon":return i<0&&(i=u.length+i),o<0&&(o=u[i].length+o-1),Jt([u[i][o],u[i][o+1]],s,t);case"MultiLineString":return n<0&&(n=u.length+n),o<0&&(o=u[n].length+o-1),Jt([u[n][o],u[n][o+1]],s,t);case"MultiPolygon":return n<0&&(n=u.length+n),i<0&&(i=u[n].length+i),o<0&&(o=u[n][i].length-o-1),Jt([u[n][i][o],u[n][i][o+1]],s,t)}throw new Error("geojson is invalid")}function gv(e,t){if(t=t||{},!re(t))throw new Error("options is invalid");var r=t.featureIndex||0,n=t.multiFeatureIndex||0,i=t.geometryIndex||0,o=t.coordIndex||0,s=t.properties,a;switch(e.type){case"FeatureCollection":r<0&&(r=e.features.length+r),s=s||e.features[r].properties,a=e.features[r].geometry;break;case"Feature":s=s||e.properties,a=e.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":a=e;break;default:throw new Error("geojson is invalid")}if(a===null)return null;var u=a.coordinates;switch(a.type){case"Point":return gt(u,s,t);case"MultiPoint":return n<0&&(n=u.length+n),gt(u[n],s,t);case"LineString":return o<0&&(o=u.length+o),gt(u[o],s,t);case"Polygon":return i<0&&(i=u.length+i),o<0&&(o=u[i].length+o),gt(u[i][o],s,t);case"MultiLineString":return n<0&&(n=u.length+n),o<0&&(o=u[n].length+o),gt(u[n][o],s,t);case"MultiPolygon":return n<0&&(n=u.length+n),i<0&&(i=u[n].length+i),o<0&&(o=u[n][i].length-o),gt(u[n][i][o],s,t)}throw new Error("geojson is invalid")}const vv=Object.freeze(Object.defineProperty({__proto__:null,coordAll:Zi,coordEach:be,coordReduce:Mh,featureEach:Qt,featureReduce:Rh,findPoint:gv,findSegment:pv,flattenEach:Oe,flattenReduce:hv,geomEach:wn,geomReduce:Ah,lineEach:Dh,lineReduce:Th,propEach:Oh,propReduce:cv,segmentEach:Pi,segmentReduce:bh},Symbol.toStringTag,{value:"Module"}));function Ee(e){var t=[1/0,1/0,-1/0,-1/0];return be(e,function(r){t[0]>r[0]&&(t[0]=r[0]),t[1]>r[1]&&(t[1]=r[1]),t[2]<r[0]&&(t[2]=r[0]),t[3]<r[1]&&(t[3]=r[1])}),t}Ee.default=Ee;const dv=Object.freeze(Object.defineProperty({__proto__:null,default:Ee},Symbol.toStringTag,{value:"Module"}));/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var yl=Object.getOwnPropertySymbols,yv=Object.prototype.hasOwnProperty,mv=Object.prototype.propertyIsEnumerable;function _v(e){if(e==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}function Ev(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de",Object.getOwnPropertyNames(e)[0]==="5")return!1;for(var t={},r=0;r<10;r++)t["_"+String.fromCharCode(r)]=r;var n=Object.getOwnPropertyNames(t).map(function(o){return t[o]});if(n.join("")!=="0123456789")return!1;var i={};return"abcdefghijklmnopqrst".split("").forEach(function(o){i[o]=o}),Object.keys(Object.assign({},i)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}var xv=Ev()?Object.assign:function(e,t){for(var r,n=_v(e),i,o=1;o<arguments.length;o++){r=Object(arguments[o]);for(var s in r)yv.call(r,s)&&(n[s]=r[s]);if(yl){i=yl(r);for(var a=0;a<i.length;a++)mv.call(r,i[a])&&(n[i[a]]=r[i[a]])}}return n};const wf=Ei(xv);/**
 * @license GNU Affero General Public License.
 * Copyright (c) 2015, 2015 Ronny Lorenz <ronny@tbi.univie.ac.at>
 * v. 1.2.0
 * https://github.com/RaumZeit/MarchingSquares.js
 *
 * MarchingSquaresJS is free software: you can redistribute it and/or modify
 * it under the terms of the GNU Affero General Public License as published by
 * the Free Software Foundation, either version 3 of the License, or
 * (at your option) any later version.
 *
 * MarchingSquaresJS is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU Affero General Public License for more details.
 *
 * As additional permission under GNU Affero General Public License version 3
 * section 7, third-party projects (personal or commercial) may distribute,
 * include, or link against UNMODIFIED VERSIONS of MarchingSquaresJS without the
 * requirement that said third-party project for that reason alone becomes
 * subject to any requirement of the GNU Affero General Public License version 3.
 * Any modifications to MarchingSquaresJS, however, must be shared with the public
 * and made available.
 *
 * In summary this:
 * - allows you to use MarchingSquaresJS at no cost
 * - allows you to use MarchingSquaresJS for both personal and commercial purposes
 * - allows you to distribute UNMODIFIED VERSIONS of MarchingSquaresJS under any
 *   license as long as this license notice is included
 * - enables you to keep the source code of your program that uses MarchingSquaresJS
 *   undisclosed
 * - forces you to share any modifications you have made to MarchingSquaresJS,
 *   e.g. bug-fixes
 *
 * You should have received a copy of the GNU Affero General Public License
 * along with MarchingSquaresJS.  If not, see <http://www.gnu.org/licenses/>.
 */var ml={successCallback:null,verbose:!1},aa={};function wv(e,t,r){r=r||{};for(var n=Object.keys(ml),i=0;i<n.length;i++){var o=n[i],s=r[o];s=typeof s<"u"&&s!==null?s:ml[o],aa[o]=s}aa.verbose&&console.log("MarchingSquaresJS-isoContours: computing isocontour for "+t);var a=Sv(Iv(e,t));return typeof aa.successCallback=="function"&&aa.successCallback(a),a}function $t(e,t,r){return(e-t)/(r-t)}function Iv(e,t){for(var r=e.length-1,n=e[0].length-1,i={rows:r,cols:n,cells:[]},o=0;o<r;++o){i.cells[o]=[];for(var s=0;s<n;++s){var a=0,u=e[o+1][s],f=e[o+1][s+1],l=e[o][s+1],c=e[o][s];if(!(isNaN(u)||isNaN(f)||isNaN(l)||isNaN(c))){a|=u>=t?8:0,a|=f>=t?4:0,a|=l>=t?2:0,a|=c>=t?1:0;var h=!1;if(a===5||a===10){var p=(u+f+l+c)/4;a===5&&p<t?(a=10,h=!0):a===10&&p<t&&(a=5,h=!0)}if(a!==0&&a!==15){var v,y,E,x;v=y=E=x=.5,a===1?(E=1-$t(t,u,c),y=1-$t(t,l,c)):a===2?(y=$t(t,c,l),x=1-$t(t,f,l)):a===3?(E=1-$t(t,u,c),x=1-$t(t,f,l)):a===4?(v=$t(t,u,f),x=$t(t,l,f)):a===5?(v=$t(t,u,f),x=$t(t,l,f),y=1-$t(t,l,c),E=1-$t(t,u,c)):a===6?(y=$t(t,c,l),v=$t(t,u,f)):a===7?(E=1-$t(t,u,c),v=$t(t,u,f)):a===8?(E=$t(t,c,u),v=1-$t(t,f,u)):a===9?(y=1-$t(t,l,c),v=1-$t(t,f,u)):a===10?(v=1-$t(t,f,u),x=1-$t(t,f,l),y=$t(t,c,l),E=$t(t,c,u)):a===11?(v=1-$t(t,f,u),x=1-$t(t,f,l)):a===12?(E=$t(t,c,u),x=$t(t,l,f)):a===13?(y=1-$t(t,l,c),x=$t(t,l,f)):a===14?(E=$t(t,c,u),y=$t(t,c,l)):console.log("MarchingSquaresJS-isoContours: Illegal cval detected: "+a),i.cells[o][s]={cval:a,flipped:h,top:v,right:x,bottom:y,left:E}}}}}return i}function Cv(e){return e.cval===5||e.cval===10}function Fh(e){return e.cval===0||e.cval===15}function _l(e){!Fh(e)&&e.cval!==5&&e.cval!==10&&(e.cval=15)}function vu(e,t){if(t==="top")return[e.top,1];if(t==="bottom")return[e.bottom,0];if(t==="right")return[1,e.right];if(t==="left")return[0,e.left]}function Sv(e){var t=[],r=0,n=1e-7;return e.cells.forEach(function(i,o){i.forEach(function(s,a){if(typeof s<"u"&&!Cv(s)&&!Fh(s)){var u=Nv(e.cells,o,a),f=!1;if(u.info==="mergeable"){for(var l=u.path[u.path.length-1][0],c=u.path[u.path.length-1][1],h=r-1;h>=0;h--)if(Math.abs(t[h][0][0]-l)<=n&&Math.abs(t[h][0][1]-c)<=n){for(var p=u.path.length-2;p>=0;--p)t[h].unshift(u.path[p]);f=!0;break}}f||(t[r++]=u.path)}})}),t}function Nv(e,t,r){var n=e.length,i=[],o=[0,0,1,1,0,0,0,0,-1,0,1,1,-1,0,-1,0],s=[0,-1,0,0,1,1,1,1,0,-1,0,0,0,-1,0,0],a,u,f=["none","left","bottom","left","right","none","bottom","left","top","top","none","top","right","right","bottom","none"],l=["none","bottom","right","right","top","top","top","top","left","bottom","right","right","left","bottom","left","none"],p,c=e[t][r],h=c.cval,p=f[h],v=vu(c,p);i.push([r+v[0],t+v[1]]),p=l[h],v=vu(c,p),i.push([r+v[0],t+v[1]]),_l(c);for(var y=r+o[h],E=t+s[h],x=h;y>=0&&E>=0&&E<n&&(y!=r||E!=t)&&(c=e[E][y],!(typeof c>"u"));){if(h=c.cval,h===0||h===15)return{path:i,info:"mergeable"};p=l[h],a=o[h],u=s[h],(h===5||h===10)&&(h===5?c.flipped?s[x]===-1?(p="left",a=-1,u=0):(p="right",a=1,u=0):o[x]===-1&&(p="bottom",a=0,u=-1):h===10&&(c.flipped?o[x]===-1?(p="top",a=0,u=1):(p="bottom",a=0,u=-1):s[x]===1&&(p="left",a=-1,u=0))),v=vu(c,p),i.push([y+v[0],E+v[1]]),_l(c),y+=a,E+=u,x=h}return{path:i,info:"closed"}}function Pv(e,t){if(t=t||{},!re(t))throw new Error("options is invalid");var r=t.zProperty||"elevation",n=t.flip,i=t.flags;Xi(e,"Point","input must contain Points");for(var o=Lv(e,n),s=[],a=0;a<o.length;a++){for(var u=o[a],f=[],l=0;l<u.length;l++){var c=u[l];c.properties[r]?f.push(c.properties[r]):f.push(0),i===!0&&(c.properties.matrixPosition=[a,l])}s.push(f)}return s}function Lv(e,t){var r={};Qt(e,function(o){var s=ot(o)[1];r[s]||(r[s]=[]),r[s].push(o)});var n=Object.keys(r).map(function(o){var s=r[o],a=s.sort(function(u,f){return ot(u)[0]-ot(f)[0]});return a}),i=n.sort(function(o,s){return t?ot(o[0])[1]-ot(s[0])[1]:ot(s[0])[1]-ot(o[0])[1]});return i}function Nx(e,t,r){if(r=r||{},!re(r))throw new Error("options is invalid");var n=r.zProperty||"elevation",i=r.commonProperties||{},o=r.breaksProperties||[];if(Xi(e,"Point","Input must contain Points"),!t)throw new Error("breaks is required");if(!Array.isArray(t))throw new Error("breaks must be an Array");if(!re(i))throw new Error("commonProperties must be an Object");if(!Array.isArray(o))throw new Error("breaksProperties must be an Array");var s=Pv(e,{zProperty:n,flip:!0}),a=Mv(s,t,n,i,o),u=Ov(a,s,e);return et(u)}function Mv(e,t,r,n,i){for(var o=[],s=1;s<t.length;s++){var a=+t[s],u=wf({},n,i[s]);u[r]=a;var f=co(wv(e,a),u);o.push(f)}return o}function Ov(e,t,r){var n=Ee(r),i=n[2]-n[0],o=n[3]-n[1],s=n[0],a=n[1],u=t[0].length-1,f=t.length-1,l=i/u,c=o/f,h=function(p){p[0]=p[0]*l+s,p[1]=p[1]*c+a};return e.forEach(function(p){be(p,h)}),e}var If={exports:{}},Bh={exports:{}};(function(e,t){(function(r,n){e.exports=n()})(_f,function(){function r(g,d,_,w,S){(function C(N,I,A,O,D){for(;O>A;){if(O-A>600){var T=O-A+1,R=I-A+1,q=Math.log(T),B=.5*Math.exp(2*q/3),j=.5*Math.sqrt(q*B*(T-B)/T)*(R-T/2<0?-1:1),Z=Math.max(A,Math.floor(I-R*B/T+j)),J=Math.min(O,Math.floor(I+(T-R)*B/T+j));C(N,I,Z,J,D)}var z=N[I],V=A,K=O;for(n(N,A,I),D(N[O],z)>0&&n(N,A,O);V<K;){for(n(N,V,K),V++,K--;D(N[V],z)<0;)V++;for(;D(N[K],z)>0;)K--}D(N[A],z)===0?n(N,A,K):n(N,++K,O),K<=I&&(A=K+1),I<=K&&(O=K-1)}})(g,d,_||0,w||g.length-1,S||i)}function n(g,d,_){var w=g[d];g[d]=g[_],g[_]=w}function i(g,d){return g<d?-1:g>d?1:0}var o=function(g){g===void 0&&(g=9),this._maxEntries=Math.max(4,g),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function s(g,d,_){if(!_)return d.indexOf(g);for(var w=0;w<d.length;w++)if(_(g,d[w]))return w;return-1}function a(g,d){u(g,0,g.children.length,d,g)}function u(g,d,_,w,S){S||(S=E(null)),S.minX=1/0,S.minY=1/0,S.maxX=-1/0,S.maxY=-1/0;for(var C=d;C<_;C++){var N=g.children[C];f(S,g.leaf?w(N):N)}return S}function f(g,d){return g.minX=Math.min(g.minX,d.minX),g.minY=Math.min(g.minY,d.minY),g.maxX=Math.max(g.maxX,d.maxX),g.maxY=Math.max(g.maxY,d.maxY),g}function l(g,d){return g.minX-d.minX}function c(g,d){return g.minY-d.minY}function h(g){return(g.maxX-g.minX)*(g.maxY-g.minY)}function p(g){return g.maxX-g.minX+(g.maxY-g.minY)}function v(g,d){return g.minX<=d.minX&&g.minY<=d.minY&&d.maxX<=g.maxX&&d.maxY<=g.maxY}function y(g,d){return d.minX<=g.maxX&&d.minY<=g.maxY&&d.maxX>=g.minX&&d.maxY>=g.minY}function E(g){return{children:g,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function x(g,d,_,w,S){for(var C=[d,_];C.length;)if(!((_=C.pop())-(d=C.pop())<=w)){var N=d+Math.ceil((_-d)/w/2)*w;r(g,N,d,_,S),C.push(d,N,N,_)}}return o.prototype.all=function(){return this._all(this.data,[])},o.prototype.search=function(g){var d=this.data,_=[];if(!y(g,d))return _;for(var w=this.toBBox,S=[];d;){for(var C=0;C<d.children.length;C++){var N=d.children[C],I=d.leaf?w(N):N;y(g,I)&&(d.leaf?_.push(N):v(g,I)?this._all(N,_):S.push(N))}d=S.pop()}return _},o.prototype.collides=function(g){var d=this.data;if(!y(g,d))return!1;for(var _=[];d;){for(var w=0;w<d.children.length;w++){var S=d.children[w],C=d.leaf?this.toBBox(S):S;if(y(g,C)){if(d.leaf||v(g,C))return!0;_.push(S)}}d=_.pop()}return!1},o.prototype.load=function(g){if(!g||!g.length)return this;if(g.length<this._minEntries){for(var d=0;d<g.length;d++)this.insert(g[d]);return this}var _=this._build(g.slice(),0,g.length-1,0);if(this.data.children.length)if(this.data.height===_.height)this._splitRoot(this.data,_);else{if(this.data.height<_.height){var w=this.data;this.data=_,_=w}this._insert(_,this.data.height-_.height-1,!0)}else this.data=_;return this},o.prototype.insert=function(g){return g&&this._insert(g,this.data.height-1),this},o.prototype.clear=function(){return this.data=E([]),this},o.prototype.remove=function(g,d){if(!g)return this;for(var _,w,S,C=this.data,N=this.toBBox(g),I=[],A=[];C||I.length;){if(C||(C=I.pop(),w=I[I.length-1],_=A.pop(),S=!0),C.leaf){var O=s(g,C.children,d);if(O!==-1)return C.children.splice(O,1),I.push(C),this._condense(I),this}S||C.leaf||!v(C,N)?w?(_++,C=w.children[_],S=!1):C=null:(I.push(C),A.push(_),_=0,w=C,C=C.children[0])}return this},o.prototype.toBBox=function(g){return g},o.prototype.compareMinX=function(g,d){return g.minX-d.minX},o.prototype.compareMinY=function(g,d){return g.minY-d.minY},o.prototype.toJSON=function(){return this.data},o.prototype.fromJSON=function(g){return this.data=g,this},o.prototype._all=function(g,d){for(var _=[];g;)g.leaf?d.push.apply(d,g.children):_.push.apply(_,g.children),g=_.pop();return d},o.prototype._build=function(g,d,_,w){var S,C=_-d+1,N=this._maxEntries;if(C<=N)return a(S=E(g.slice(d,_+1)),this.toBBox),S;w||(w=Math.ceil(Math.log(C)/Math.log(N)),N=Math.ceil(C/Math.pow(N,w-1))),(S=E([])).leaf=!1,S.height=w;var I=Math.ceil(C/N),A=I*Math.ceil(Math.sqrt(N));x(g,d,_,A,this.compareMinX);for(var O=d;O<=_;O+=A){var D=Math.min(O+A-1,_);x(g,O,D,I,this.compareMinY);for(var T=O;T<=D;T+=I){var R=Math.min(T+I-1,D);S.children.push(this._build(g,T,R,w-1))}}return a(S,this.toBBox),S},o.prototype._chooseSubtree=function(g,d,_,w){for(;w.push(d),!d.leaf&&w.length-1!==_;){for(var S=1/0,C=1/0,N=void 0,I=0;I<d.children.length;I++){var A=d.children[I],O=h(A),D=(T=g,R=A,(Math.max(R.maxX,T.maxX)-Math.min(R.minX,T.minX))*(Math.max(R.maxY,T.maxY)-Math.min(R.minY,T.minY))-O);D<C?(C=D,S=O<S?O:S,N=A):D===C&&O<S&&(S=O,N=A)}d=N||d.children[0]}var T,R;return d},o.prototype._insert=function(g,d,_){var w=_?g:this.toBBox(g),S=[],C=this._chooseSubtree(w,this.data,d,S);for(C.children.push(g),f(C,w);d>=0&&S[d].children.length>this._maxEntries;)this._split(S,d),d--;this._adjustParentBBoxes(w,S,d)},o.prototype._split=function(g,d){var _=g[d],w=_.children.length,S=this._minEntries;this._chooseSplitAxis(_,S,w);var C=this._chooseSplitIndex(_,S,w),N=E(_.children.splice(C,_.children.length-C));N.height=_.height,N.leaf=_.leaf,a(_,this.toBBox),a(N,this.toBBox),d?g[d-1].children.push(N):this._splitRoot(_,N)},o.prototype._splitRoot=function(g,d){this.data=E([g,d]),this.data.height=g.height+1,this.data.leaf=!1,a(this.data,this.toBBox)},o.prototype._chooseSplitIndex=function(g,d,_){for(var w,S,C,N,I,A,O,D=1/0,T=1/0,R=d;R<=_-d;R++){var q=u(g,0,R,this.toBBox),B=u(g,R,_,this.toBBox),j=(S=q,C=B,N=void 0,I=void 0,A=void 0,O=void 0,N=Math.max(S.minX,C.minX),I=Math.max(S.minY,C.minY),A=Math.min(S.maxX,C.maxX),O=Math.min(S.maxY,C.maxY),Math.max(0,A-N)*Math.max(0,O-I)),Z=h(q)+h(B);j<D?(D=j,w=R,T=Z<T?Z:T):j===D&&Z<T&&(T=Z,w=R)}return w||_-d},o.prototype._chooseSplitAxis=function(g,d,_){var w=g.leaf?this.compareMinX:l,S=g.leaf?this.compareMinY:c;this._allDistMargin(g,d,_,w)<this._allDistMargin(g,d,_,S)&&g.children.sort(w)},o.prototype._allDistMargin=function(g,d,_,w){g.children.sort(w);for(var S=this.toBBox,C=u(g,0,d,S),N=u(g,_-d,_,S),I=p(C)+p(N),A=d;A<_-d;A++){var O=g.children[A];f(C,g.leaf?S(O):O),I+=p(C)}for(var D=_-d-1;D>=d;D--){var T=g.children[D];f(N,g.leaf?S(T):T),I+=p(N)}return I},o.prototype._adjustParentBBoxes=function(g,d,_){for(var w=_;w>=0;w--)f(d[w],g)},o.prototype._condense=function(g){for(var d=g.length-1,_=void 0;d>=0;d--)g[d].children.length===0?d>0?(_=g[d-1].children).splice(_.indexOf(g[d]),1):this.clear():a(g[d],this.toBBox)},o})})(Bh);var Rv=Bh.exports;class Av{constructor(t=[],r=bv){if(this.data=t,this.length=this.data.length,this.compare=r,this.length>0)for(let n=(this.length>>1)-1;n>=0;n--)this._down(n)}push(t){this.data.push(t),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const t=this.data[0],r=this.data.pop();return this.length--,this.length>0&&(this.data[0]=r,this._down(0)),t}peek(){return this.data[0]}_up(t){const{data:r,compare:n}=this,i=r[t];for(;t>0;){const o=t-1>>1,s=r[o];if(n(i,s)>=0)break;r[t]=s,t=o}r[t]=i}_down(t){const{data:r,compare:n}=this,i=this.length>>1,o=r[t];for(;t<i;){let s=(t<<1)+1,a=r[s];const u=s+1;if(u<this.length&&n(r[u],a)<0&&(s=u,a=r[u]),n(a,o)>=0)break;r[t]=a,t=s}r[t]=o}}function bv(e,t){return e<t?-1:e>t?1:0}const Dv=Object.freeze(Object.defineProperty({__proto__:null,default:Av},Symbol.toStringTag,{value:"Module"})),Tv=Ya(Dv);var Ha={exports:{}},Fv=function(t,r,n,i){var o=t[0],s=t[1],a=!1;n===void 0&&(n=0),i===void 0&&(i=r.length);for(var u=(i-n)/2,f=0,l=u-1;f<u;l=f++){var c=r[n+f*2+0],h=r[n+f*2+1],p=r[n+l*2+0],v=r[n+l*2+1],y=h>s!=v>s&&o<(p-c)*(s-h)/(v-h)+c;y&&(a=!a)}return a},Bv=function(t,r,n,i){var o=t[0],s=t[1],a=!1;n===void 0&&(n=0),i===void 0&&(i=r.length);for(var u=i-n,f=0,l=u-1;f<u;l=f++){var c=r[f+n][0],h=r[f+n][1],p=r[l+n][0],v=r[l+n][1],y=h>s!=v>s&&o<(p-c)*(s-h)/(v-h)+c;y&&(a=!a)}return a},Gh=Fv,kh=Bv;Ha.exports=function(t,r,n,i){return r.length>0&&Array.isArray(r[0])?kh(t,r,n,i):Gh(t,r,n,i)};Ha.exports.nested=kh;Ha.exports.flat=Gh;var Gv=Ha.exports,Xu={exports:{}};(function(e,t){(function(r,n){n(t)})(_f,function(r){const i=33306690738754706e-32;function o(y,E,x,g,d){let _,w,S,C,N=E[0],I=g[0],A=0,O=0;I>N==I>-N?(_=N,N=E[++A]):(_=I,I=g[++O]);let D=0;if(A<y&&O<x)for(I>N==I>-N?(S=_-((w=N+_)-N),N=E[++A]):(S=_-((w=I+_)-I),I=g[++O]),_=w,S!==0&&(d[D++]=S);A<y&&O<x;)I>N==I>-N?(S=_-((w=_+N)-(C=w-_))+(N-C),N=E[++A]):(S=_-((w=_+I)-(C=w-_))+(I-C),I=g[++O]),_=w,S!==0&&(d[D++]=S);for(;A<y;)S=_-((w=_+N)-(C=w-_))+(N-C),N=E[++A],_=w,S!==0&&(d[D++]=S);for(;O<x;)S=_-((w=_+I)-(C=w-_))+(I-C),I=g[++O],_=w,S!==0&&(d[D++]=S);return _===0&&D!==0||(d[D++]=_),D}function s(y){return new Float64Array(y)}const a=33306690738754716e-32,u=22204460492503146e-32,f=11093356479670487e-47,l=s(4),c=s(8),h=s(12),p=s(16),v=s(4);r.orient2d=function(y,E,x,g,d,_){const w=(E-_)*(x-d),S=(y-d)*(g-_),C=w-S;if(w===0||S===0||w>0!=S>0)return C;const N=Math.abs(w+S);return Math.abs(C)>=a*N?C:-function(I,A,O,D,T,R,q){let B,j,Z,J,z,V,K,ft,it,vt,ht,ne,mr,Ae,lr,cr,Un,br;const Xr=I-T,Yr=O-T,Nn=A-R,Pn=D-R;z=(lr=(ft=Xr-(K=(V=134217729*Xr)-(V-Xr)))*(vt=Pn-(it=(V=134217729*Pn)-(V-Pn)))-((Ae=Xr*Pn)-K*it-ft*it-K*vt))-(ht=lr-(Un=(ft=Nn-(K=(V=134217729*Nn)-(V-Nn)))*(vt=Yr-(it=(V=134217729*Yr)-(V-Yr)))-((cr=Nn*Yr)-K*it-ft*it-K*vt))),l[0]=lr-(ht+z)+(z-Un),z=(mr=Ae-((ne=Ae+ht)-(z=ne-Ae))+(ht-z))-(ht=mr-cr),l[1]=mr-(ht+z)+(z-cr),z=(br=ne+ht)-ne,l[2]=ne-(br-z)+(ht-z),l[3]=br;let wi=function($g,vl){let dl=vl[0];for(let gu=1;gu<$g;gu++)dl+=vl[gu];return dl}(4,l),ls=u*q;if(wi>=ls||-wi>=ls||(B=I-(Xr+(z=I-Xr))+(z-T),Z=O-(Yr+(z=O-Yr))+(z-T),j=A-(Nn+(z=A-Nn))+(z-R),J=D-(Pn+(z=D-Pn))+(z-R),B===0&&j===0&&Z===0&&J===0)||(ls=f*q+i*Math.abs(wi),(wi+=Xr*J+Pn*B-(Nn*Z+Yr*j))>=ls||-wi>=ls))return wi;z=(lr=(ft=B-(K=(V=134217729*B)-(V-B)))*(vt=Pn-(it=(V=134217729*Pn)-(V-Pn)))-((Ae=B*Pn)-K*it-ft*it-K*vt))-(ht=lr-(Un=(ft=j-(K=(V=134217729*j)-(V-j)))*(vt=Yr-(it=(V=134217729*Yr)-(V-Yr)))-((cr=j*Yr)-K*it-ft*it-K*vt))),v[0]=lr-(ht+z)+(z-Un),z=(mr=Ae-((ne=Ae+ht)-(z=ne-Ae))+(ht-z))-(ht=mr-cr),v[1]=mr-(ht+z)+(z-cr),z=(br=ne+ht)-ne,v[2]=ne-(br-z)+(ht-z),v[3]=br;const Zg=o(4,l,4,v,c);z=(lr=(ft=Xr-(K=(V=134217729*Xr)-(V-Xr)))*(vt=J-(it=(V=134217729*J)-(V-J)))-((Ae=Xr*J)-K*it-ft*it-K*vt))-(ht=lr-(Un=(ft=Nn-(K=(V=134217729*Nn)-(V-Nn)))*(vt=Z-(it=(V=134217729*Z)-(V-Z)))-((cr=Nn*Z)-K*it-ft*it-K*vt))),v[0]=lr-(ht+z)+(z-Un),z=(mr=Ae-((ne=Ae+ht)-(z=ne-Ae))+(ht-z))-(ht=mr-cr),v[1]=mr-(ht+z)+(z-cr),z=(br=ne+ht)-ne,v[2]=ne-(br-z)+(ht-z),v[3]=br;const Qg=o(Zg,c,4,v,h);z=(lr=(ft=B-(K=(V=134217729*B)-(V-B)))*(vt=J-(it=(V=134217729*J)-(V-J)))-((Ae=B*J)-K*it-ft*it-K*vt))-(ht=lr-(Un=(ft=j-(K=(V=134217729*j)-(V-j)))*(vt=Z-(it=(V=134217729*Z)-(V-Z)))-((cr=j*Z)-K*it-ft*it-K*vt))),v[0]=lr-(ht+z)+(z-Un),z=(mr=Ae-((ne=Ae+ht)-(z=ne-Ae))+(ht-z))-(ht=mr-cr),v[1]=mr-(ht+z)+(z-cr),z=(br=ne+ht)-ne,v[2]=ne-(br-z)+(ht-z),v[3]=br;const jg=o(Qg,h,4,v,p);return p[jg-1]}(y,E,x,g,d,_,N)},r.orient2dfast=function(y,E,x,g,d,_){return(E-_)*(x-d)-(y-d)*(g-_)},Object.defineProperty(r,"__esModule",{value:!0})})})(Xu,Xu.exports);var kv=Xu.exports,El=Rv,qv=Tv,zv=Gv;const Uv=kv.orient2d;If.exports=qh;If.exports.default=qh;function qh(e,t,r){t=Math.max(0,t===void 0?2:t),r=r||0;var n=Wv(e),i=new El(16);i.toBBox=function(g){return{minX:g[0],minY:g[1],maxX:g[0],maxY:g[1]}},i.compareMinX=function(g,d){return g[0]-d[0]},i.compareMinY=function(g,d){return g[1]-d[1]},i.load(e);for(var o=[],s=0,a;s<n.length;s++){var u=n[s];i.remove(u),a=Il(u,a),o.push(a)}var f=new El(16);for(s=0;s<o.length;s++)f.insert(du(o[s]));for(var l=t*t,c=r*r;o.length;){var h=o.shift(),p=h.p,v=h.next.p,y=yu(p,v);if(!(y<c)){var E=y/l;u=Xv(i,h.prev.p,p,v,h.next.next.p,E,f),u&&Math.min(yu(u,p),yu(u,v))<=E&&(o.push(h),o.push(Il(u,h)),i.remove(u),f.remove(h),f.insert(du(h)),f.insert(du(h.next)))}}h=a;var x=[];do x.push(h.p),h=h.next;while(h!==a);return x.push(h.p),x}function Xv(e,t,r,n,i,o,s){for(var a=new qv([],Yv),u=e.data;u;){for(var f=0;f<u.children.length;f++){var l=u.children[f],c=u.leaf?mu(l,r,n):Vv(r,n,l);c>o||a.push({node:l,dist:c})}for(;a.length&&!a.peek().node.children;){var h=a.pop(),p=h.node,v=mu(p,t,r),y=mu(p,n,i);if(h.dist<v&&h.dist<y&&wl(r,p,s)&&wl(n,p,s))return p}u=a.pop(),u&&(u=u.node)}return null}function Yv(e,t){return e.dist-t.dist}function Vv(e,t,r){if(xl(e,r)||xl(t,r))return 0;var n=ua(e[0],e[1],t[0],t[1],r.minX,r.minY,r.maxX,r.minY);if(n===0)return 0;var i=ua(e[0],e[1],t[0],t[1],r.minX,r.minY,r.minX,r.maxY);if(i===0)return 0;var o=ua(e[0],e[1],t[0],t[1],r.maxX,r.minY,r.maxX,r.maxY);if(o===0)return 0;var s=ua(e[0],e[1],t[0],t[1],r.minX,r.maxY,r.maxX,r.maxY);return s===0?0:Math.min(n,i,o,s)}function xl(e,t){return e[0]>=t.minX&&e[0]<=t.maxX&&e[1]>=t.minY&&e[1]<=t.maxY}function wl(e,t,r){for(var n=Math.min(e[0],t[0]),i=Math.min(e[1],t[1]),o=Math.max(e[0],t[0]),s=Math.max(e[1],t[1]),a=r.search({minX:n,minY:i,maxX:o,maxY:s}),u=0;u<a.length;u++)if(Hv(a[u].p,a[u].next.p,e,t))return!1;return!0}function Io(e,t,r){return Uv(e[0],e[1],t[0],t[1],r[0],r[1])}function Hv(e,t,r,n){return e!==n&&t!==r&&Io(e,t,r)>0!=Io(e,t,n)>0&&Io(r,n,e)>0!=Io(r,n,t)>0}function du(e){var t=e.p,r=e.next.p;return e.minX=Math.min(t[0],r[0]),e.minY=Math.min(t[1],r[1]),e.maxX=Math.max(t[0],r[0]),e.maxY=Math.max(t[1],r[1]),e}function Wv(e){for(var t=e[0],r=e[0],n=e[0],i=e[0],o=0;o<e.length;o++){var s=e[o];s[0]<t[0]&&(t=s),s[0]>n[0]&&(n=s),s[1]<r[1]&&(r=s),s[1]>i[1]&&(i=s)}var a=[t,r,n,i],u=a.slice();for(o=0;o<e.length;o++)zv(e[o],a)||u.push(e[o]);return Kv(u)}function Il(e,t){var r={p:e,prev:null,next:null,minX:0,minY:0,maxX:0,maxY:0};return t?(r.next=t.next,r.prev=t,t.next.prev=r,t.next=r):(r.prev=r,r.next=r),r}function yu(e,t){var r=e[0]-t[0],n=e[1]-t[1];return r*r+n*n}function mu(e,t,r){var n=t[0],i=t[1],o=r[0]-n,s=r[1]-i;if(o!==0||s!==0){var a=((e[0]-n)*o+(e[1]-i)*s)/(o*o+s*s);a>1?(n=r[0],i=r[1]):a>0&&(n+=o*a,i+=s*a)}return o=e[0]-n,s=e[1]-i,o*o+s*s}function ua(e,t,r,n,i,o,s,a){var u=r-e,f=n-t,l=s-i,c=a-o,h=e-i,p=t-o,v=u*u+f*f,y=u*l+f*c,E=l*l+c*c,x=u*h+f*p,g=l*h+c*p,d=v*E-y*y,_,w,S,C,N=d,I=d;d===0?(w=0,N=1,C=g,I=E):(w=y*g-E*x,C=v*g-y*x,w<0?(w=0,C=g,I=E):w>N&&(w=N,C=g+y,I=E)),C<0?(C=0,-x<0?w=0:-x>v?w=N:(w=-x,N=v)):C>I&&(C=I,-x+y<0?w=0:-x+y>v?w=N:(w=-x+y,N=v)),_=w===0?0:w/N,S=C===0?0:C/I;var A=(1-_)*e+_*r,O=(1-_)*t+_*n,D=(1-S)*i+S*s,T=(1-S)*o+S*a,R=D-A,q=T-O;return R*R+q*q}function Jv(e,t){return e[0]===t[0]?e[1]-t[1]:e[0]-t[0]}function Kv(e){e.sort(Jv);for(var t=[],r=0;r<e.length;r++){for(;t.length>=2&&Io(t[t.length-2],t[t.length-1],e[r])<=0;)t.pop();t.push(e[r])}for(var n=[],i=e.length-1;i>=0;i--){for(;n.length>=2&&Io(n[n.length-2],n[n.length-1],e[i])<=0;)n.pop();n.push(e[i])}return n.pop(),t.pop(),t.concat(n)}var Zv=If.exports;const Qv=Ei(Zv);function jv(e,t){t===void 0&&(t={}),t.concavity=t.concavity||1/0;var r=[];if(be(e,function(i){r.push([i[0],i[1]])}),!r.length)return null;var n=Qv(r,t.concavity);return n.length>3?pt([n]):null}function ge(e,t,r){if(r===void 0&&(r={}),!e)throw new Error("point is required");if(!t)throw new Error("polygon is required");var n=se(e),i=fe(t),o=i.type,s=t.bbox,a=i.coordinates;if(s&&$v(n,s)===!1)return!1;o==="Polygon"&&(a=[a]);for(var u=!1,f=0;f<a.length&&!u;f++)if(Cl(n,a[f][0],r.ignoreBoundary)){for(var l=!1,c=1;c<a[f].length&&!l;)Cl(n,a[f][c],!r.ignoreBoundary)&&(l=!0),c++;l||(u=!0)}return u}function Cl(e,t,r){var n=!1;t[0][0]===t[t.length-1][0]&&t[0][1]===t[t.length-1][1]&&(t=t.slice(0,t.length-1));for(var i=0,o=t.length-1;i<t.length;o=i++){var s=t[i][0],a=t[i][1],u=t[o][0],f=t[o][1],l=e[1]*(s-u)+a*(u-e[0])+f*(e[0]-s)===0&&(s-e[0])*(u-e[0])<=0&&(a-e[1])*(f-e[1])<=0;if(l)return!r;var c=a>e[1]!=f>e[1]&&e[0]<(u-s)*(e[1]-a)/(f-a)+s;c&&(n=!n)}return n}function $v(e,t){return t[0]<=e[0]&&t[1]<=e[1]&&t[2]>=e[0]&&t[3]>=e[1]}function td(e,t){var r=[];return Qt(e,function(n){var i=!1;wn(t,function(o){ge(n,o)&&(i=!0)}),i&&r.push(n)}),et(r)}function ee(e,t,r){r===void 0&&(r={});var n=se(e),i=se(t),o=tr(i[1]-n[1]),s=tr(i[0]-n[0]),a=tr(n[1]),u=tr(i[1]),f=Math.pow(Math.sin(o/2),2)+Math.pow(Math.sin(s/2),2)*Math.cos(a)*Math.cos(u);return Va(2*Math.atan2(Math.sqrt(f),Math.sqrt(1-f)),r.units)}function ed(e,t){var r=!1;return et(id(e.features.map(function(n){var i={x:n.geometry.coordinates[0],y:n.geometry.coordinates[1]};return t?i.z=n.properties[t]:n.geometry.coordinates.length===3&&(r=!0,i.z=n.geometry.coordinates[2]),i})).map(function(n){var i=[n.a.x,n.a.y],o=[n.b.x,n.b.y],s=[n.c.x,n.c.y],a={};return r?(i.push(n.a.z),o.push(n.b.z),s.push(n.c.z)):a={a:n.a.z,b:n.b.z,c:n.c.z},pt([[i,o,s,i]],a)}))}var Sl=function(){function e(t,r,n){this.a=t,this.b=r,this.c=n;var i=r.x-t.x,o=r.y-t.y,s=n.x-t.x,a=n.y-t.y,u=i*(t.x+r.x)+o*(t.y+r.y),f=s*(t.x+n.x)+a*(t.y+n.y),l=2*(i*(n.y-r.y)-o*(n.x-r.x)),c,h;this.x=(a*u-o*f)/l,this.y=(i*f-s*u)/l,c=this.x-t.x,h=this.y-t.y,this.r=c*c+h*h}return e}();function rd(e,t){return t.x-e.x}function nd(e){var t=e.length,r,n,i,o,s;t:for(;t;)for(n=e[--t],r=e[--t],i=t;i;)if(s=e[--i],o=e[--i],r===o&&n===s||r===s&&n===o){e.splice(t,2),e.splice(i,2),t-=2;continue t}}function id(e){if(e.length<3)return[];e.sort(rd);for(var t=e.length-1,r=e[t].x,n=e[0].x,i=e[t].y,o=i,s=1e-12,a,u,f,l,c,h;t--;)e[t].y<i&&(i=e[t].y),e[t].y>o&&(o=e[t].y);var p=n-r,v=o-i,y=p>v?p:v,E=(n+r)*.5,x=(o+i)*.5,g=[new Sl({__sentinel:!0,x:E-20*y,y:x-y},{__sentinel:!0,x:E,y:x+20*y},{__sentinel:!0,x:E+20*y,y:x-y})],d=[],_=[],w;for(t=e.length;t--;){for(_.length=0,w=g.length;w--;){if(p=e[t].x-g[w].x,p>0&&p*p>g[w].r){d.push(g[w]),g.splice(w,1);continue}v=e[t].y-g[w].y,!(p*p+v*v>g[w].r)&&(_.push(g[w].a,g[w].b,g[w].b,g[w].c,g[w].c,g[w].a),g.splice(w,1))}for(nd(_),w=_.length;w;)u=_[--w],a=_[--w],f=e[t],l=u.x-a.x,c=u.y-a.y,h=2*(l*(f.y-u.y)-c*(f.x-u.x)),Math.abs(h)>s&&g.push(new Sl(a,u,f))}for(Array.prototype.push.apply(d,g),t=d.length;t--;)(d[t].a.__sentinel||d[t].b.__sentinel||d[t].c.__sentinel)&&d.splice(t,1);return d}function or(e){if(!e)throw new Error("geojson is required");switch(e.type){case"Feature":return zh(e);case"FeatureCollection":return od(e);case"Point":case"LineString":case"Polygon":case"MultiPoint":case"MultiLineString":case"MultiPolygon":case"GeometryCollection":return Cf(e);default:throw new Error("unknown GeoJSON type")}}function zh(e){var t={type:"Feature"};return Object.keys(e).forEach(function(r){switch(r){case"type":case"properties":case"geometry":return;default:t[r]=e[r]}}),t.properties=Uh(e.properties),t.geometry=Cf(e.geometry),t}function Uh(e){var t={};return e&&Object.keys(e).forEach(function(r){var n=e[r];typeof n=="object"?n===null?t[r]=null:Array.isArray(n)?t[r]=n.map(function(i){return i}):t[r]=Uh(n):t[r]=n}),t}function od(e){var t={type:"FeatureCollection"};return Object.keys(e).forEach(function(r){switch(r){case"type":case"features":return;default:t[r]=e[r]}}),t.features=e.features.map(function(r){return zh(r)}),t}function Cf(e){var t={type:e.type};return e.bbox&&(t.bbox=e.bbox),e.type==="GeometryCollection"?(t.geometries=e.geometries.map(function(r){return Cf(r)}),t):(t.coordinates=Xh(e.coordinates),t)}function Xh(e){var t=e;return typeof t[0]!="object"?t.slice():t.map(function(r){return Xh(r)})}function sd(e,t){if(t===void 0&&(t={}),t=t||{},!re(t))throw new Error("options is invalid");var r=t.mutate;if(Br(e)!=="FeatureCollection")throw new Error("geojson must be a FeatureCollection");if(!e.features.length)throw new Error("geojson is empty");(r===!1||r===void 0)&&(e=or(e));var n=[],i=Th(e,function(o,s){var a=ad(o,s);return a||(n.push(o),s)});return i&&n.push(i),n.length?n.length===1?n[0]:co(n.map(function(o){return o.coordinates})):null}function fa(e){return e[0].toString()+","+e[1].toString()}function ad(e,t){var r=e.geometry.coordinates,n=t.geometry.coordinates,i=fa(r[0]),o=fa(r[r.length-1]),s=fa(n[0]),a=fa(n[n.length-1]),u;if(i===a)u=n.concat(r.slice(1));else if(s===o)u=r.concat(n.slice(1));else if(i===s)u=r.slice(1).reverse().concat(n);else if(o===a)u=r.concat(n.reverse().slice(1));else return null;return Jt(u)}function ud(e){return e}function fd(e){if(e==null)return ud;var t,r,n=e.scale[0],i=e.scale[1],o=e.translate[0],s=e.translate[1];return function(a,u){u||(t=r=0);var f=2,l=a.length,c=new Array(l);for(c[0]=(t+=a[0])*n+o,c[1]=(r+=a[1])*i+s;f<l;)c[f]=a[f],++f;return c}}function ld(e,t){for(var r,n=e.length,i=n-t;i<--n;)r=e[i],e[i++]=e[n],e[n]=r}function Yh(e,t){var r=fd(e.transform),n=e.arcs;function i(l,c){c.length&&c.pop();for(var h=n[l<0?~l:l],p=0,v=h.length;p<v;++p)c.push(r(h[p],p));l<0&&ld(c,v)}function o(l){return r(l)}function s(l){for(var c=[],h=0,p=l.length;h<p;++h)i(l[h],c);return c.length<2&&c.push(c[0]),c}function a(l){for(var c=s(l);c.length<4;)c.push(c[0]);return c}function u(l){return l.map(a)}function f(l){var c=l.type,h;switch(c){case"GeometryCollection":return{type:c,geometries:l.geometries.map(f)};case"Point":h=o(l.coordinates);break;case"MultiPoint":h=l.coordinates.map(o);break;case"LineString":h=s(l.arcs);break;case"MultiLineString":h=l.arcs.map(s);break;case"Polygon":h=u(l.arcs);break;case"MultiPolygon":h=l.arcs.map(u);break;default:return null}return{type:c,coordinates:h}}return f(t)}function cd(e,t){var r={},n={},i={},o=[],s=-1;t.forEach(function(f,l){var c=e.arcs[f<0?~f:f],h;c.length<3&&!c[1][0]&&!c[1][1]&&(h=t[++s],t[s]=f,t[l]=h)}),t.forEach(function(f){var l=a(f),c=l[0],h=l[1],p,v;if(p=i[c])if(delete i[p.end],p.push(f),p.end=h,v=n[h]){delete n[v.start];var y=v===p?p:p.concat(v);n[y.start=p.start]=i[y.end=v.end]=y}else n[p.start]=i[p.end]=p;else if(p=n[h])if(delete n[p.start],p.unshift(f),p.start=c,v=i[c]){delete i[v.end];var E=v===p?p:v.concat(p);n[E.start=v.start]=i[E.end=p.end]=E}else n[p.start]=i[p.end]=p;else p=[f],n[p.start=c]=i[p.end=h]=p});function a(f){var l=e.arcs[f<0?~f:f],c=l[0],h;return e.transform?(h=[0,0],l.forEach(function(p){h[0]+=p[0],h[1]+=p[1]})):h=l[l.length-1],f<0?[h,c]:[c,h]}function u(f,l){for(var c in f){var h=f[c];delete l[h.start],delete h.start,delete h.end,h.forEach(function(p){r[p<0?~p:p]=1}),o.push(h)}}return u(i,n),u(n,i),t.forEach(function(f){r[f<0?~f:f]||o.push([f])}),o}function hd(e){for(var t=-1,r=e.length,n,i=e[r-1],o=0;++t<r;)n=i,i=e[t],o+=n[0]*i[1]-n[1]*i[0];return Math.abs(o)}function pd(e){return Yh(e,gd.apply(this,arguments))}function gd(e,t){var r={},n=[],i=[];t.forEach(o);function o(u){switch(u.type){case"GeometryCollection":u.geometries.forEach(o);break;case"Polygon":s(u.arcs);break;case"MultiPolygon":u.arcs.forEach(s);break}}function s(u){u.forEach(function(f){f.forEach(function(l){(r[l=l<0?~l:l]||(r[l]=[])).push(u)})}),n.push(u)}function a(u){return hd(Yh(e,{type:"Polygon",arcs:[u]}).coordinates[0])}return n.forEach(function(u){if(!u._){var f=[],l=[u];for(u._=1,i.push(f);u=l.pop();)f.push(u),u.forEach(function(c){c.forEach(function(h){r[h<0?~h:h].forEach(function(p){p._||(p._=1,l.push(p))})})})}}),n.forEach(function(u){delete u._}),{type:"MultiPolygon",arcs:i.map(function(u){var f=[],l;if(u.forEach(function(y){y.forEach(function(E){E.forEach(function(x){r[x<0?~x:x].length<2&&f.push(x)})})}),f=cd(e,f),(l=f.length)>1)for(var c=1,h=a(f[0]),p,v;c<l;++c)(p=a(f[c]))>h&&(v=f[0],f[0]=f[c],f[c]=v,h=p);return f})}}function vd(e){var t=1/0,r=1/0,n=-1/0,i=-1/0;function o(c){c!=null&&s.hasOwnProperty(c.type)&&s[c.type](c)}var s={GeometryCollection:function(c){c.geometries.forEach(o)},Point:function(c){a(c.coordinates)},MultiPoint:function(c){c.coordinates.forEach(a)},LineString:function(c){u(c.arcs)},MultiLineString:function(c){c.arcs.forEach(u)},Polygon:function(c){c.arcs.forEach(u)},MultiPolygon:function(c){c.arcs.forEach(f)}};function a(c){var h=c[0],p=c[1];h<t&&(t=h),h>n&&(n=h),p<r&&(r=p),p>i&&(i=p)}function u(c){c.forEach(a)}function f(c){c.forEach(u)}for(var l in e)o(e[l]);return n>=t&&i>=r?[t,r,n,i]:void 0}function dd(e,t,r,n,i){arguments.length===3&&(n=Array,i=null);for(var o=new n(e=1<<Math.max(4,Math.ceil(Math.log(e)/Math.LN2))),s=e-1,a=0;a<e;++a)o[a]=i;function u(c){for(var h=t(c)&s,p=o[h],v=0;p!=i;){if(r(p,c))return!0;if(++v>=e)throw new Error("full hashset");p=o[h=h+1&s]}return o[h]=c,!0}function f(c){for(var h=t(c)&s,p=o[h],v=0;p!=i;){if(r(p,c))return!0;if(++v>=e)break;p=o[h=h+1&s]}return!1}function l(){for(var c=[],h=0,p=o.length;h<p;++h){var v=o[h];v!=i&&c.push(v)}return c}return{add:u,has:f,values:l}}function Sf(e,t,r,n,i,o){arguments.length===3&&(n=o=Array,i=null);for(var s=new n(e=1<<Math.max(4,Math.ceil(Math.log(e)/Math.LN2))),a=new o(e),u=e-1,f=0;f<e;++f)s[f]=i;function l(v,y){for(var E=t(v)&u,x=s[E],g=0;x!=i;){if(r(x,v))return a[E]=y;if(++g>=e)throw new Error("full hashmap");x=s[E=E+1&u]}return s[E]=v,a[E]=y,y}function c(v,y){for(var E=t(v)&u,x=s[E],g=0;x!=i;){if(r(x,v))return a[E];if(++g>=e)throw new Error("full hashmap");x=s[E=E+1&u]}return s[E]=v,a[E]=y,y}function h(v,y){for(var E=t(v)&u,x=s[E],g=0;x!=i;){if(r(x,v))return a[E];if(++g>=e)break;x=s[E=E+1&u]}return y}function p(){for(var v=[],y=0,E=s.length;y<E;++y){var x=s[y];x!=i&&v.push(x)}return v}return{set:l,maybeSet:c,get:h,keys:p}}function Wi(e,t){return e[0]===t[0]&&e[1]===t[1]}var Vh=new ArrayBuffer(16),Nl=new Float64Array(Vh),la=new Uint32Array(Vh);function Yu(e){Nl[0]=e[0],Nl[1]=e[1];var t=la[0]^la[1];return t=t<<5^t>>7^la[2]^la[3],t&2147483647}function yd(e){var t=e.coordinates,r=e.lines,n=e.rings,i=S(),o=new Int32Array(t.length),s=new Int32Array(t.length),a=new Int32Array(t.length),u=new Int8Array(t.length),f=0,l,c,h,p,v;for(l=0,c=t.length;l<c;++l)o[l]=s[l]=a[l]=-1;for(l=0,c=r.length;l<c;++l){var y=r[l],E=y[0],x=y[1];for(p=i[E],v=i[++E],++f,u[p]=1;++E<=x;)w(l,h=p,p=v,v=i[E]);++f,u[v]=1}for(l=0,c=t.length;l<c;++l)o[l]=-1;for(l=0,c=n.length;l<c;++l){var g=n[l],d=g[0]+1,_=g[1];for(h=i[_-1],p=i[d-1],v=i[d],w(l,h,p,v);++d<=_;)w(l,h=p,p=v,v=i[d])}function w(O,D,T,R){if(o[T]!==O){o[T]=O;var q=s[T];if(q>=0){var B=a[T];(q!==D||B!==R)&&(q!==R||B!==D)&&(++f,u[T]=1)}else s[T]=D,a[T]=R}}function S(){for(var O=Sf(t.length*1.4,C,N,Int32Array,-1,Int32Array),D=new Int32Array(t.length),T=0,R=t.length;T<R;++T)D[T]=O.maybeSet(T,T);return D}function C(O){return Yu(t[O])}function N(O,D){return Wi(t[O],t[D])}o=s=a=null;var I=dd(f*1.4,Yu,Wi),A;for(l=0,c=t.length;l<c;++l)u[A=i[l]]&&I.add(t[A]);return I}function md(e){var t=yd(e),r=e.coordinates,n=e.lines,i=e.rings,o,s,a;for(s=0,a=n.length;s<a;++s)for(var u=n[s],f=u[0],l=u[1];++f<l;)t.has(r[f])&&(o={0:f,1:u[1]},u[1]=f,u=u.next=o);for(s=0,a=i.length;s<a;++s)for(var c=i[s],h=c[0],p=h,v=c[1],y=t.has(r[h]);++p<v;)t.has(r[p])&&(y?(o={0:p,1:c[1]},c[1]=p,c=c.next=o):(_d(r,h,v,v-p),r[v]=r[h],y=!0,p=h));return e}function _d(e,t,r,n){_u(e,t,r),_u(e,t,t+n),_u(e,t+n,r)}function _u(e,t,r){for(var n=t+(r---t>>1),i;t<n;++t,--r)i=e[t],e[t]=e[r],e[r]=i}function Ed(e){var t=e.coordinates,r=e.lines,n,i=e.rings,o,s=r.length+i.length,a,u;for(delete e.lines,delete e.rings,a=0,u=r.length;a<u;++a)for(n=r[a];n=n.next;)++s;for(a=0,u=i.length;a<u;++a)for(o=i[a];o=o.next;)++s;var f=Sf(s*2*1.4,Yu,Wi),l=e.arcs=[];for(a=0,u=r.length;a<u;++a){n=r[a];do c(n);while(n=n.next)}for(a=0,u=i.length;a<u;++a)if(o=i[a],o.next)do c(o);while(o=o.next);else h(o);function c(g){var d,_,w,S,C,N,I,A;if(w=f.get(d=t[g[0]])){for(I=0,A=w.length;I<A;++I)if(S=w[I],p(S,g)){g[0]=S[0],g[1]=S[1];return}}if(C=f.get(_=t[g[1]])){for(I=0,A=C.length;I<A;++I)if(N=C[I],v(N,g)){g[1]=N[0],g[0]=N[1];return}}w?w.push(g):f.set(d,[g]),C?C.push(g):f.set(_,[g]),l.push(g)}function h(g){var d,_,w,S,C;if(_=f.get(d=t[g[0]]))for(S=0,C=_.length;S<C;++S){if(w=_[S],y(w,g)){g[0]=w[0],g[1]=w[1];return}if(E(w,g)){g[0]=w[1],g[1]=w[0];return}}if(_=f.get(d=t[g[0]+x(g)]))for(S=0,C=_.length;S<C;++S){if(w=_[S],y(w,g)){g[0]=w[0],g[1]=w[1];return}if(E(w,g)){g[0]=w[1],g[1]=w[0];return}}_?_.push(g):f.set(d,[g]),l.push(g)}function p(g,d){var _=g[0],w=d[0],S=g[1],C=d[1];if(_-S!==w-C)return!1;for(;_<=S;++_,++w)if(!Wi(t[_],t[w]))return!1;return!0}function v(g,d){var _=g[0],w=d[0],S=g[1],C=d[1];if(_-S!==w-C)return!1;for(;_<=S;++_,--C)if(!Wi(t[_],t[C]))return!1;return!0}function y(g,d){var _=g[0],w=d[0],S=g[1],C=d[1],N=S-_;if(N!==C-w)return!1;for(var I=x(g),A=x(d),O=0;O<N;++O)if(!Wi(t[_+(O+I)%N],t[w+(O+A)%N]))return!1;return!0}function E(g,d){var _=g[0],w=d[0],S=g[1],C=d[1],N=S-_;if(N!==C-w)return!1;for(var I=x(g),A=N-x(d),O=0;O<N;++O)if(!Wi(t[_+(O+I)%N],t[C-(O+A)%N]))return!1;return!0}function x(g){for(var d=g[0],_=g[1],w=d,S=w,C=t[w];++w<_;){var N=t[w];(N[0]<C[0]||N[0]===C[0]&&N[1]<C[1])&&(S=w,C=N)}return S-d}return e}function xd(e){var t=-1,r=[],n=[],i=[];function o(c){c&&s.hasOwnProperty(c.type)&&s[c.type](c)}var s={GeometryCollection:function(c){c.geometries.forEach(o)},LineString:function(c){c.arcs=a(c.arcs)},MultiLineString:function(c){c.arcs=c.arcs.map(a)},Polygon:function(c){c.arcs=c.arcs.map(u)},MultiPolygon:function(c){c.arcs=c.arcs.map(f)}};function a(c){for(var h=0,p=c.length;h<p;++h)i[++t]=c[h];var v={0:t-p+1,1:t};return r.push(v),v}function u(c){for(var h=0,p=c.length;h<p;++h)i[++t]=c[h];var v={0:t-p+1,1:t};return n.push(v),v}function f(c){return c.map(u)}for(var l in e)o(e[l]);return{type:"Topology",coordinates:i,lines:r,rings:n,objects:e}}function wd(e){var t={},r;for(r in e)t[r]=Id(e[r]);return t}function Id(e){return e==null?{type:null}:(e.type==="FeatureCollection"?Cd:e.type==="Feature"?Hh:Nf)(e)}function Cd(e){var t={type:"GeometryCollection",geometries:e.features.map(Hh)};return e.bbox!=null&&(t.bbox=e.bbox),t}function Hh(e){var t=Nf(e.geometry),r;e.id!=null&&(t.id=e.id),e.bbox!=null&&(t.bbox=e.bbox);for(r in e.properties){t.properties=e.properties;break}return t}function Nf(e){if(e==null)return{type:null};var t=e.type==="GeometryCollection"?{type:"GeometryCollection",geometries:e.geometries.map(Nf)}:e.type==="Point"||e.type==="MultiPoint"?{type:e.type,coordinates:e.coordinates}:{type:e.type,arcs:e.coordinates};return e.bbox!=null&&(t.bbox=e.bbox),t}function Sd(e,t){var r=vd(e=wd(e)),n=Ed(md(xd(e))),i=n.coordinates,o=Sf(n.arcs.length*1.4,Nd,Pd);e=n.objects,n.bbox=r,n.arcs=n.arcs.map(function(c,h){return o.set(c,h),i.slice(c[0],c[1]+1)}),delete n.coordinates,i=null;function s(c){c&&a.hasOwnProperty(c.type)&&a[c.type](c)}var a={GeometryCollection:function(c){c.geometries.forEach(s)},LineString:function(c){c.arcs=u(c.arcs)},MultiLineString:function(c){c.arcs=c.arcs.map(u)},Polygon:function(c){c.arcs=c.arcs.map(u)},MultiPolygon:function(c){c.arcs=c.arcs.map(f)}};function u(c){var h=[];do{var p=o.get(c);h.push(c[0]<c[1]?p:~p)}while(c=c.next);return h}function f(c){return c.map(u)}for(var l in e)s(e[l]);return n}function Nd(e){var t=e[0],r=e[1],n;return r<t&&(n=t,t=r,r=n),t+31*r}function Pd(e,t){var r=e[0],n=e[1],i=t[0],o=t[1],s;return n<r&&(s=r,r=n,n=s),o<i&&(s=i,i=o,o=s),r===i&&n===o}function Ld(e,t){if(t===void 0&&(t={}),Br(e)!=="FeatureCollection")throw new Error("geojson must be a FeatureCollection");if(!e.features.length)throw new Error("geojson is empty");(t.mutate===!1||t.mutate===void 0)&&(e=or(e));var r=[];Oe(e,function(o){r.push(o.geometry)});var n=Sd({geoms:Nh(r).geometry}),i=pd(n,n.objects.geoms.geometries);return i}function Md(e,t){if(t===void 0&&(t={}),t=t||{},!re(t))throw new Error("options is invalid");var r=t.mutate;if(Br(e)!=="FeatureCollection")throw new Error("geojson must be a FeatureCollection");if(!e.features.length)throw new Error("geojson is empty");(r===!1||r===void 0)&&(e=or(e));var n=Od(e);if(!n)throw new Error("geojson must be homogenous");var i=e;switch(n){case"LineString":return sd(i,t);case"Polygon":return Ld(i,t);default:throw new Error(n+" is not supported")}}function Od(e){var t={};Oe(e,function(n){t[n.geometry.type]=!0});var r=Object.keys(t);return r.length===1?r[0]:null}function Px(e,t){t===void 0&&(t={});var r=t.maxEdge||1/0,n=Rd(e),i=ed(n);if(i.features=i.features.filter(function(s){var a=s.geometry.coordinates[0][0],u=s.geometry.coordinates[0][1],f=s.geometry.coordinates[0][2],l=ee(a,u,t),c=ee(u,f,t),h=ee(a,f,t);return l<=r&&c<=r&&h<=r}),i.features.length<1)return null;var o=Md(i);return o.coordinates.length===1&&(o.coordinates=o.coordinates[0],o.type="Polygon"),ze(o)}function Rd(e){var t=[],r={};return Qt(e,function(n){if(n.geometry){var i=n.geometry.coordinates.join("-");r.hasOwnProperty(i)||(t.push(n),r[i]=!0)}}),et(t)}var Pf={exports:{}},Wh={exports:{}};(function(e,t){(function(r,n){e.exports=n()})(_f,function(){function r(s,a,u,f,l){n(s,a,u||0,f||s.length-1,l||o)}function n(s,a,u,f,l){for(;f>u;){if(f-u>600){var c=f-u+1,h=a-u+1,p=Math.log(c),v=.5*Math.exp(2*p/3),y=.5*Math.sqrt(p*v*(c-v)/c)*(h-c/2<0?-1:1),E=Math.max(u,Math.floor(a-h*v/c+y)),x=Math.min(f,Math.floor(a+(c-h)*v/c+y));n(s,a,E,x,l)}var g=s[a],d=u,_=f;for(i(s,u,a),l(s[f],g)>0&&i(s,u,f);d<_;){for(i(s,d,_),d++,_--;l(s[d],g)<0;)d++;for(;l(s[_],g)>0;)_--}l(s[u],g)===0?i(s,u,_):(_++,i(s,_,f)),_<=a&&(u=_+1),a<=_&&(f=_-1)}}function i(s,a,u){var f=s[a];s[a]=s[u],s[u]=f}function o(s,a){return s<a?-1:s>a?1:0}return r})})(Wh);var Ad=Wh.exports;Pf.exports=Ns;Pf.exports.default=Ns;var bd=Ad;function Ns(e,t){if(!(this instanceof Ns))return new Ns(e,t);this._maxEntries=Math.max(4,e||9),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),t&&this._initFormat(t),this.clear()}Ns.prototype={all:function(){return this._all(this.data,[])},search:function(e){var t=this.data,r=[],n=this.toBBox;if(!ha(e,t))return r;for(var i=[],o,s,a,u;t;){for(o=0,s=t.children.length;o<s;o++)a=t.children[o],u=t.leaf?n(a):a,ha(e,u)&&(t.leaf?r.push(a):xu(e,u)?this._all(a,r):i.push(a));t=i.pop()}return r},collides:function(e){var t=this.data,r=this.toBBox;if(!ha(e,t))return!1;for(var n=[],i,o,s,a;t;){for(i=0,o=t.children.length;i<o;i++)if(s=t.children[i],a=t.leaf?r(s):s,ha(e,a)){if(t.leaf||xu(e,a))return!0;n.push(s)}t=n.pop()}return!1},load:function(e){if(!(e&&e.length))return this;if(e.length<this._minEntries){for(var t=0,r=e.length;t<r;t++)this.insert(e[t]);return this}var n=this._build(e.slice(),0,e.length-1,0);if(!this.data.children.length)this.data=n;else if(this.data.height===n.height)this._splitRoot(this.data,n);else{if(this.data.height<n.height){var i=this.data;this.data=n,n=i}this._insert(n,this.data.height-n.height-1,!0)}return this},insert:function(e){return e&&this._insert(e,this.data.height-1),this},clear:function(){return this.data=xo([]),this},remove:function(e,t){if(!e)return this;for(var r=this.data,n=this.toBBox(e),i=[],o=[],s,a,u,f;r||i.length;){if(r||(r=i.pop(),a=i[i.length-1],s=o.pop(),f=!0),r.leaf&&(u=Dd(e,r.children,t),u!==-1))return r.children.splice(u,1),i.push(r),this._condense(i),this;!f&&!r.leaf&&xu(r,n)?(i.push(r),o.push(s),s=0,a=r,r=r.children[0]):a?(s++,r=a.children[s],f=!1):r=null}return this},toBBox:function(e){return e},compareMinX:Pl,compareMinY:Ll,toJSON:function(){return this.data},fromJSON:function(e){return this.data=e,this},_all:function(e,t){for(var r=[];e;)e.leaf?t.push.apply(t,e.children):r.push.apply(r,e.children),e=r.pop();return t},_build:function(e,t,r,n){var i=r-t+1,o=this._maxEntries,s;if(i<=o)return s=xo(e.slice(t,r+1)),mo(s,this.toBBox),s;n||(n=Math.ceil(Math.log(i)/Math.log(o)),o=Math.ceil(i/Math.pow(o,n-1))),s=xo([]),s.leaf=!1,s.height=n;var a=Math.ceil(i/o),u=a*Math.ceil(Math.sqrt(o)),f,l,c,h;for(Ml(e,t,r,u,this.compareMinX),f=t;f<=r;f+=u)for(c=Math.min(f+u-1,r),Ml(e,f,c,a,this.compareMinY),l=f;l<=c;l+=a)h=Math.min(l+a-1,c),s.children.push(this._build(e,l,h,n-1));return mo(s,this.toBBox),s},_chooseSubtree:function(e,t,r,n){for(var i,o,s,a,u,f,l,c;n.push(t),!(t.leaf||n.length-1===r);){for(l=c=1/0,i=0,o=t.children.length;i<o;i++)s=t.children[i],u=Eu(s),f=Td(e,s)-u,f<c?(c=f,l=u<l?u:l,a=s):f===c&&u<l&&(l=u,a=s);t=a||t.children[0]}return t},_insert:function(e,t,r){var n=this.toBBox,i=r?e:n(e),o=[],s=this._chooseSubtree(i,this.data,t,o);for(s.children.push(e),ys(s,i);t>=0&&o[t].children.length>this._maxEntries;)this._split(o,t),t--;this._adjustParentBBoxes(i,o,t)},_split:function(e,t){var r=e[t],n=r.children.length,i=this._minEntries;this._chooseSplitAxis(r,i,n);var o=this._chooseSplitIndex(r,i,n),s=xo(r.children.splice(o,r.children.length-o));s.height=r.height,s.leaf=r.leaf,mo(r,this.toBBox),mo(s,this.toBBox),t?e[t-1].children.push(s):this._splitRoot(r,s)},_splitRoot:function(e,t){this.data=xo([e,t]),this.data.height=e.height+1,this.data.leaf=!1,mo(this.data,this.toBBox)},_chooseSplitIndex:function(e,t,r){var n,i,o,s,a,u,f,l;for(u=f=1/0,n=t;n<=r-t;n++)i=ds(e,0,n,this.toBBox),o=ds(e,n,r,this.toBBox),s=Fd(i,o),a=Eu(i)+Eu(o),s<u?(u=s,l=n,f=a<f?a:f):s===u&&a<f&&(f=a,l=n);return l},_chooseSplitAxis:function(e,t,r){var n=e.leaf?this.compareMinX:Pl,i=e.leaf?this.compareMinY:Ll,o=this._allDistMargin(e,t,r,n),s=this._allDistMargin(e,t,r,i);o<s&&e.children.sort(n)},_allDistMargin:function(e,t,r,n){e.children.sort(n);var i=this.toBBox,o=ds(e,0,t,i),s=ds(e,r-t,r,i),a=ca(o)+ca(s),u,f;for(u=t;u<r-t;u++)f=e.children[u],ys(o,e.leaf?i(f):f),a+=ca(o);for(u=r-t-1;u>=t;u--)f=e.children[u],ys(s,e.leaf?i(f):f),a+=ca(s);return a},_adjustParentBBoxes:function(e,t,r){for(var n=r;n>=0;n--)ys(t[n],e)},_condense:function(e){for(var t=e.length-1,r;t>=0;t--)e[t].children.length===0?t>0?(r=e[t-1].children,r.splice(r.indexOf(e[t]),1)):this.clear():mo(e[t],this.toBBox)},_initFormat:function(e){var t=["return a"," - b",";"];this.compareMinX=new Function("a","b",t.join(e[0])),this.compareMinY=new Function("a","b",t.join(e[1])),this.toBBox=new Function("a","return {minX: a"+e[0]+", minY: a"+e[1]+", maxX: a"+e[2]+", maxY: a"+e[3]+"};")}};function Dd(e,t,r){if(!r)return t.indexOf(e);for(var n=0;n<t.length;n++)if(r(e,t[n]))return n;return-1}function mo(e,t){ds(e,0,e.children.length,t,e)}function ds(e,t,r,n,i){i||(i=xo(null)),i.minX=1/0,i.minY=1/0,i.maxX=-1/0,i.maxY=-1/0;for(var o=t,s;o<r;o++)s=e.children[o],ys(i,e.leaf?n(s):s);return i}function ys(e,t){return e.minX=Math.min(e.minX,t.minX),e.minY=Math.min(e.minY,t.minY),e.maxX=Math.max(e.maxX,t.maxX),e.maxY=Math.max(e.maxY,t.maxY),e}function Pl(e,t){return e.minX-t.minX}function Ll(e,t){return e.minY-t.minY}function Eu(e){return(e.maxX-e.minX)*(e.maxY-e.minY)}function ca(e){return e.maxX-e.minX+(e.maxY-e.minY)}function Td(e,t){return(Math.max(t.maxX,e.maxX)-Math.min(t.minX,e.minX))*(Math.max(t.maxY,e.maxY)-Math.min(t.minY,e.minY))}function Fd(e,t){var r=Math.max(e.minX,t.minX),n=Math.max(e.minY,t.minY),i=Math.min(e.maxX,t.maxX),o=Math.min(e.maxY,t.maxY);return Math.max(0,i-r)*Math.max(0,o-n)}function xu(e,t){return e.minX<=t.minX&&e.minY<=t.minY&&t.maxX<=e.maxX&&t.maxY<=e.maxY}function ha(e,t){return t.minX<=e.maxX&&t.minY<=e.maxY&&t.maxX>=e.minX&&t.maxY>=e.minY}function xo(e){return{children:e,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function Ml(e,t,r,n,i){for(var o=[t,r],s;o.length;)r=o.pop(),t=o.pop(),!(r-t<=n)&&(s=t+Math.ceil((r-t)/n/2)*n,bd(e,s,t,r,i),o.push(t,s,s,r))}var Jh=Pf.exports;const Wa=Ei(Jh);function Lx(e,t,r,n){var i=Wa(6),o=t.features.map(function(s){return{minX:s.geometry.coordinates[0],minY:s.geometry.coordinates[1],maxX:s.geometry.coordinates[0],maxY:s.geometry.coordinates[1],property:s.properties[r]}});return i.load(o),e.features.forEach(function(s){s.properties||(s.properties={});var a=Ee(s),u=i.search({minX:a[0],minY:a[1],maxX:a[2],maxY:a[3]}),f=[];u.forEach(function(l){ge([l.minX,l.minY],s)&&f.push(l.property)}),s.properties[n]=f}),e}function Mx(e,t){if(t=t||{},!re(t))throw new Error("options is invalid");var r=t.mutate;if(!e)throw new Error("geojson is required");return(r===!1||r===void 0)&&(e=or(e)),be(e,function(n){var i=n[0],o=n[1];n[0]=o,n[1]=i}),e}function Do(e,t){t===void 0&&(t={});var r=typeof t=="object"?t.mutate:t;if(!e)throw new Error("geojson is required");var n=Br(e),i=[];switch(n){case"LineString":i=wu(e);break;case"MultiLineString":case"Polygon":ot(e).forEach(function(s){i.push(wu(s))});break;case"MultiPolygon":ot(e).forEach(function(s){var a=[];s.forEach(function(u){a.push(wu(u))}),i.push(a)});break;case"Point":return e;case"MultiPoint":var o={};ot(e).forEach(function(s){var a=s.join("-");o.hasOwnProperty(a)||(i.push(s),o[a]=!0)});break;default:throw new Error(n+" geometry not supported")}return e.coordinates?r===!0?(e.coordinates=i,e):{type:n,coordinates:i}:r===!0?(e.geometry.coordinates=i,e):ze({type:n,coordinates:i},e.properties,{bbox:e.bbox,id:e.id})}function wu(e){var t=ot(e);if(t.length===2&&!Ol(t[0],t[1]))return t;var r=[],n=t.length-1,i=r.length;r.push(t[0]);for(var o=1;o<n;o++){var s=r[r.length-1];t[o][0]===s[0]&&t[o][1]===s[1]||(r.push(t[o]),i=r.length,i>2&&Rl(r[i-3],r[i-1],r[i-2])&&r.splice(r.length-2,1))}if(r.push(t[t.length-1]),i=r.length,Ol(t[0],t[t.length-1])&&i<4)throw new Error("invalid polygon");return Rl(r[i-3],r[i-1],r[i-2])&&r.splice(r.length-2,1),r}function Ol(e,t){return e[0]===t[0]&&e[1]===t[1]}function Rl(e,t,r){var n=r[0],i=r[1],o=e[0],s=e[1],a=t[0],u=t[1],f=n-o,l=i-s,c=a-o,h=u-s,p=f*h-l*c;return p!==0?!1:Math.abs(c)>=Math.abs(h)?c>0?o<=n&&n<=a:a<=n&&n<=o:h>0?s<=i&&i<=u:u<=i&&i<=s}function Bd(e,t){var r=e.x-t.x,n=e.y-t.y;return r*r+n*n}function Gd(e,t,r){var n=t.x,i=t.y,o=r.x-n,s=r.y-i;if(o!==0||s!==0){var a=((e.x-n)*o+(e.y-i)*s)/(o*o+s*s);a>1?(n=r.x,i=r.y):a>0&&(n+=o*a,i+=s*a)}return o=e.x-n,s=e.y-i,o*o+s*s}function kd(e,t){for(var r=e[0],n=[r],i,o=1,s=e.length;o<s;o++)i=e[o],Bd(i,r)>t&&(n.push(i),r=i);return r!==i&&n.push(i),n}function Vu(e,t,r,n,i){for(var o=n,s,a=t+1;a<r;a++){var u=Gd(e[a],e[t],e[r]);u>o&&(s=a,o=u)}o>n&&(s-t>1&&Vu(e,t,s,n,i),i.push(e[s]),r-s>1&&Vu(e,s,r,n,i))}function qd(e,t){var r=e.length-1,n=[e[0]];return Vu(e,0,r,t,n),n.push(e[r]),n}function Hu(e,t,r){if(e.length<=2)return e;var n=t!==void 0?t*t:1;return e=r?e:kd(e,n),e=qd(e,n),e}function Ox(e,t){if(t=t||{},!re(t))throw new Error("options is invalid");var r=t.tolerance!==void 0?t.tolerance:1,n=t.highQuality||!1,i=t.mutate||!1;if(!e)throw new Error("geojson is required");if(r&&r<0)throw new Error("invalid tolerance");return i!==!0&&(e=or(e)),wn(e,function(o){zd(o,r,n)}),e}function zd(e,t,r){var n=e.type;if(n==="Point"||n==="MultiPoint")return e;Do(e,!0);var i=e.coordinates;switch(n){case"LineString":e.coordinates=Al(i,t,r);break;case"MultiLineString":e.coordinates=i.map(function(o){return Al(o,t,r)});break;case"Polygon":e.coordinates=bl(i,t,r);break;case"MultiPolygon":e.coordinates=i.map(function(o){return bl(o,t,r)})}return e}function Al(e,t,r){return Hu(e.map(function(n){return{x:n[0],y:n[1],z:n[2]}}),t,r).map(function(n){return n.z?[n.x,n.y,n.z]:[n.x,n.y]})}function bl(e,t,r){return e.map(function(n){var i=n.map(function(s){return{x:s[0],y:s[1]}});if(i.length<4)throw new Error("invalid polygon");for(var o=Hu(i,t,r).map(function(s){return[s.x,s.y]});!Ud(o);)t-=t*.01,o=Hu(i,t,r).map(function(s){return[s.x,s.y]});return(o[o.length-1][0]!==o[0][0]||o[o.length-1][1]!==o[0][1])&&o.push(o[0]),o})}function Ud(e){return e.length<3?!1:!(e.length===3&&e[2][0]===e[0][0]&&e[2][1]===e[0][1])}var Xd=function(){function e(t){this.points=t.points||[],this.duration=t.duration||1e4,this.sharpness=t.sharpness||.85,this.centers=[],this.controls=[],this.stepLength=t.stepLength||60,this.length=this.points.length,this.delay=0;for(var r=0;r<this.length;r++)this.points[r].z=this.points[r].z||0;for(var r=0;r<this.length-1;r++){var n=this.points[r],i=this.points[r+1];this.centers.push({x:(n.x+i.x)/2,y:(n.y+i.y)/2,z:(n.z+i.z)/2})}this.controls.push([this.points[0],this.points[0]]);for(var r=0;r<this.centers.length-1;r++){var o=this.points[r+1].x-(this.centers[r].x+this.centers[r+1].x)/2,s=this.points[r+1].y-(this.centers[r].y+this.centers[r+1].y)/2,a=this.points[r+1].z-(this.centers[r].y+this.centers[r+1].z)/2;this.controls.push([{x:(1-this.sharpness)*this.points[r+1].x+this.sharpness*(this.centers[r].x+o),y:(1-this.sharpness)*this.points[r+1].y+this.sharpness*(this.centers[r].y+s),z:(1-this.sharpness)*this.points[r+1].z+this.sharpness*(this.centers[r].z+a)},{x:(1-this.sharpness)*this.points[r+1].x+this.sharpness*(this.centers[r+1].x+o),y:(1-this.sharpness)*this.points[r+1].y+this.sharpness*(this.centers[r+1].y+s),z:(1-this.sharpness)*this.points[r+1].z+this.sharpness*(this.centers[r+1].z+a)}])}return this.controls.push([this.points[this.length-1],this.points[this.length-1]]),this.steps=this.cacheSteps(this.stepLength),this}return e.prototype.cacheSteps=function(t){var r=[],n=this.pos(0);r.push(0);for(var i=0;i<this.duration;i+=10){var o=this.pos(i),s=Math.sqrt((o.x-n.x)*(o.x-n.x)+(o.y-n.y)*(o.y-n.y)+(o.z-n.z)*(o.z-n.z));s>t&&(r.push(i),n=o)}return r},e.prototype.vector=function(t){var r=this.pos(t+10),n=this.pos(t-10);return{angle:180*Math.atan2(r.y-n.y,r.x-n.x)/3.14,speed:Math.sqrt((n.x-r.x)*(n.x-r.x)+(n.y-r.y)*(n.y-r.y)+(n.z-r.z)*(n.z-r.z))}},e.prototype.pos=function(t){var r=t-this.delay;r<0&&(r=0),r>this.duration&&(r=this.duration-1);var n=r/this.duration;if(n>=1)return this.points[this.length-1];var i=Math.floor((this.points.length-1)*n),o=(this.length-1)*n-i;return Yd(o,this.points[i],this.controls[i][1],this.controls[i+1][0],this.points[i+1])},e}();function Yd(e,t,r,n,i){var o=Vd(e),s={x:i.x*o[0]+n.x*o[1]+r.x*o[2]+t.x*o[3],y:i.y*o[0]+n.y*o[1]+r.y*o[2]+t.y*o[3],z:i.z*o[0]+n.z*o[1]+r.z*o[2]+t.z*o[3]};return s}function Vd(e){var t=e*e,r=t*e;return[r,3*t*(1-e),3*e*(1-e)*(1-e),(1-e)*(1-e)*(1-e)]}function Rx(e,t){t===void 0&&(t={});for(var r=t.resolution||1e4,n=t.sharpness||.85,i=[],o=fe(e).coordinates.map(function(f){return{x:f[0],y:f[1]}}),s=new Xd({duration:r,points:o,sharpness:n}),a=0;a<s.duration;a+=10){var u=s.pos(a);Math.floor(a/100)%2===0&&i.push([u.x,u.y])}return Jt(i,t.properties)}function Ax(e,t,r,n){return e=or(e),t=or(t),Qt(e,function(i){i.properties||(i.properties={}),Qt(t,function(o){i.properties[n]===void 0&&ge(i,o)&&(i.properties[n]=o.properties[r])})}),e}function bx(e,t){if(!e)throw new Error("featurecollection is required");if(t==null)throw new Error("num is required");if(typeof t!="number")throw new Error("num must be a number");var r=et(Hd(e.features,t));return r}function Hd(e,t){for(var r=e.slice(0),n=e.length,i=n-t,o,s;n-- >i;)s=Math.floor((n+1)*Math.random()),o=r[s],r[s]=r[n],r[n]=o;return r.slice(i)}function Kh(e,t){t===void 0&&(t={});var r=Number(e[0]),n=Number(e[1]),i=Number(e[2]),o=Number(e[3]);if(e.length===6)throw new Error("@turf/bbox-polygon does not support BBox with 6 positions");var s=[r,n],a=[r,o],u=[i,o],f=[i,n];return pt([[s,f,u,a,s]],t.properties,{bbox:e,id:t.id})}function Wd(e){return Kh(Ee(e))}function Jd(e){var t=e[0],r=e[1],n=e[2],i=e[3],o=ee(e.slice(0,2),[n,r]),s=ee(e.slice(0,2),[t,i]);if(o>=s){var a=(r+i)/2;return[t,a-(n-t)/2,n,a+(n-t)/2]}else{var u=(t+n)/2;return[u-(i-r)/2,r,u+(i-r)/2,i]}}function li(e,t,r,n){n===void 0&&(n={});var i=se(e),o=tr(i[0]),s=tr(i[1]),a=tr(r),u=Zs(t,n.units),f=Math.asin(Math.sin(s)*Math.cos(u)+Math.cos(s)*Math.sin(u)*Math.cos(a)),l=o+Math.atan2(Math.sin(a)*Math.sin(u)*Math.cos(s),Math.cos(u)-Math.sin(s)*Math.sin(f)),c=bo(l),h=bo(f);return gt([c,h],n.properties)}function Zh(e,t,r){r===void 0&&(r={});for(var n=r.steps||64,i=r.properties?r.properties:!Array.isArray(e)&&e.type==="Feature"&&e.properties?e.properties:{},o=[],s=0;s<n;s++)o.push(li(e,t,s*-360/n,r).geometry.coordinates);return o.push(o[0]),pt([o],i)}function Ri(e,t,r){if(r===void 0&&(r={}),r.final===!0)return Kd(e,t);var n=se(e),i=se(t),o=tr(n[0]),s=tr(i[0]),a=tr(n[1]),u=tr(i[1]),f=Math.sin(s-o)*Math.cos(u),l=Math.cos(a)*Math.sin(u)-Math.sin(a)*Math.cos(u)*Math.cos(s-o);return bo(Math.atan2(f,l))}function Kd(e,t){var r=Ri(t,e);return r=(r+180)%360,r}function Dx(e,t){var r=ee(e,t),n=Ri(e,t),i=li(e,r/2,n);return i}function Lf(e,t){t===void 0&&(t={});var r=Ee(e),n=(r[0]+r[2])/2,i=(r[1]+r[3])/2;return gt([n,i],t.properties,t)}function Qi(e,t){t===void 0&&(t={});var r=0,n=0,i=0;return be(e,function(o){r+=o[0],n+=o[1],i++},!0),gt([r/i,n/i],t.properties)}function Zd(e,t){switch(t===void 0&&(t={}),Br(e)){case"Point":return gt(se(e),t.properties);case"Polygon":var r=[];be(e,function(_){r.push(_)});var n=Qi(e,{properties:t.properties}),i=n.geometry.coordinates,o=0,s=0,a=0,u,f,l,c,h,p,v,y,E=r.map(function(_){return[_[0]-i[0],_[1]-i[1]]});for(u=0;u<r.length-1;u++)f=E[u],c=f[0],p=f[1],l=E[u+1],h=l[0],v=l[1],y=c*v-h*p,a+=y,o+=(c+h)*y,s+=(p+v)*y;if(a===0)return n;var x=a*.5,g=1/(6*x);return gt([i[0]+g*o,i[1]+g*s],t.properties);default:var d=jv(e);return d?Zd(d,{properties:t.properties}):Qi(e,{properties:t.properties})}}function Tx(e){var t={MultiPoint:{coordinates:[],properties:[]},MultiLineString:{coordinates:[],properties:[]},MultiPolygon:{coordinates:[],properties:[]}},r=Object.keys(t).reduce(function(i,o){return i[o.replace("Multi","")]=o,i},{});function n(i,o,s){s?t[o].coordinates=t[o].coordinates.concat(i.geometry.coordinates):t[o].coordinates.push(i.geometry.coordinates),t[o].properties.push(i.properties)}return Qt(e,function(i){i.geometry&&(t[i.geometry.type]?n(i,i.geometry.type,!0):r[i.geometry.type]&&n(i,r[i.geometry.type],!1))}),et(Object.keys(t).filter(function(i){return t[i].coordinates.length}).sort().map(function(i){var o={type:i,coordinates:t[i].coordinates},s={collectedProperties:t[i].properties};return ze(o,s)}))}function Mf(e){var t=[];return e.type==="FeatureCollection"?Qt(e,function(r){be(r,function(n){t.push(gt(n,r.properties))})}):be(e,function(r){t.push(gt(r,e.properties))}),et(t)}var Of={exports:{}};Of.exports=Ja;Of.exports.default=Ja;function Ja(e,t,r){r=r||2;var n=t&&t.length,i=n?t[0]*r:e.length,o=Qh(e,0,i,r,!0),s=[];if(!o||o.next===o.prev)return s;var a,u,f,l,c,h,p;if(n&&(o=ey(e,t,o,r)),e.length>80*r){a=f=e[0],u=l=e[1];for(var v=r;v<i;v+=r)c=e[v],h=e[v+1],c<a&&(a=c),h<u&&(u=h),c>f&&(f=c),h>l&&(l=h);p=Math.max(f-a,l-u),p=p!==0?1/p:0}return Ps(o,s,r,a,u,p),s}function Qh(e,t,r,n,i){var o,s;if(i===Ku(e,t,r,n)>0)for(o=t;o<r;o+=n)s=Dl(o,e[o],e[o+1],s);else for(o=r-n;o>=t;o-=n)s=Dl(o,e[o],e[o+1],s);return s&&Ka(s,s.next)&&(Ms(s),s=s.next),s}function Ai(e,t){if(!e)return e;t||(t=e);var r=e,n;do if(n=!1,!r.steiner&&(Ka(r,r.next)||Le(r.prev,r,r.next)===0)){if(Ms(r),r=t=r.prev,r===r.next)break;n=!0}else r=r.next;while(n||r!==t);return t}function Ps(e,t,r,n,i,o,s){if(e){!s&&o&&sy(e,n,i,o);for(var a=e,u,f;e.prev!==e.next;){if(u=e.prev,f=e.next,o?jd(e,n,i,o):Qd(e)){t.push(u.i/r),t.push(e.i/r),t.push(f.i/r),Ms(e),e=f.next,a=f.next;continue}if(e=f,e===a){s?s===1?(e=$d(Ai(e),t,r),Ps(e,t,r,n,i,o,2)):s===2&&ty(e,t,r,n,i,o):Ps(Ai(e),t,r,n,i,o,1);break}}}}function Qd(e){var t=e.prev,r=e,n=e.next;if(Le(t,r,n)>=0)return!1;for(var i=e.next.next;i!==e.prev;){if(Co(t.x,t.y,r.x,r.y,n.x,n.y,i.x,i.y)&&Le(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function jd(e,t,r,n){var i=e.prev,o=e,s=e.next;if(Le(i,o,s)>=0)return!1;for(var a=i.x<o.x?i.x<s.x?i.x:s.x:o.x<s.x?o.x:s.x,u=i.y<o.y?i.y<s.y?i.y:s.y:o.y<s.y?o.y:s.y,f=i.x>o.x?i.x>s.x?i.x:s.x:o.x>s.x?o.x:s.x,l=i.y>o.y?i.y>s.y?i.y:s.y:o.y>s.y?o.y:s.y,c=Wu(a,u,t,r,n),h=Wu(f,l,t,r,n),p=e.prevZ,v=e.nextZ;p&&p.z>=c&&v&&v.z<=h;){if(p!==e.prev&&p!==e.next&&Co(i.x,i.y,o.x,o.y,s.x,s.y,p.x,p.y)&&Le(p.prev,p,p.next)>=0||(p=p.prevZ,v!==e.prev&&v!==e.next&&Co(i.x,i.y,o.x,o.y,s.x,s.y,v.x,v.y)&&Le(v.prev,v,v.next)>=0))return!1;v=v.nextZ}for(;p&&p.z>=c;){if(p!==e.prev&&p!==e.next&&Co(i.x,i.y,o.x,o.y,s.x,s.y,p.x,p.y)&&Le(p.prev,p,p.next)>=0)return!1;p=p.prevZ}for(;v&&v.z<=h;){if(v!==e.prev&&v!==e.next&&Co(i.x,i.y,o.x,o.y,s.x,s.y,v.x,v.y)&&Le(v.prev,v,v.next)>=0)return!1;v=v.nextZ}return!0}function $d(e,t,r){var n=e;do{var i=n.prev,o=n.next.next;!Ka(i,o)&&jh(i,n,n.next,o)&&Ls(i,o)&&Ls(o,i)&&(t.push(i.i/r),t.push(n.i/r),t.push(o.i/r),Ms(n),Ms(n.next),n=e=o),n=n.next}while(n!==e);return Ai(n)}function ty(e,t,r,n,i,o){var s=e;do{for(var a=s.next.next;a!==s.prev;){if(s.i!==a.i&&fy(s,a)){var u=$h(s,a);s=Ai(s,s.next),u=Ai(u,u.next),Ps(s,t,r,n,i,o),Ps(u,t,r,n,i,o);return}a=a.next}s=s.next}while(s!==e)}function ey(e,t,r,n){var i=[],o,s,a,u,f;for(o=0,s=t.length;o<s;o++)a=t[o]*n,u=o<s-1?t[o+1]*n:e.length,f=Qh(e,a,u,n,!1),f===f.next&&(f.steiner=!0),i.push(uy(f));for(i.sort(ry),o=0;o<i.length;o++)ny(i[o],r),r=Ai(r,r.next);return r}function ry(e,t){return e.x-t.x}function ny(e,t){if(t=iy(e,t),t){var r=$h(t,e);Ai(t,t.next),Ai(r,r.next)}}function iy(e,t){var r=t,n=e.x,i=e.y,o=-1/0,s;do{if(i<=r.y&&i>=r.next.y&&r.next.y!==r.y){var a=r.x+(i-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(a<=n&&a>o){if(o=a,a===n){if(i===r.y)return r;if(i===r.next.y)return r.next}s=r.x<r.next.x?r:r.next}}r=r.next}while(r!==t);if(!s)return null;if(n===o)return s;var u=s,f=s.x,l=s.y,c=1/0,h;r=s;do n>=r.x&&r.x>=f&&n!==r.x&&Co(i<l?n:o,i,f,l,i<l?o:n,i,r.x,r.y)&&(h=Math.abs(i-r.y)/(n-r.x),Ls(r,e)&&(h<c||h===c&&(r.x>s.x||r.x===s.x&&oy(s,r)))&&(s=r,c=h)),r=r.next;while(r!==u);return s}function oy(e,t){return Le(e.prev,e,t.prev)<0&&Le(t.next,e,e.next)<0}function sy(e,t,r,n){var i=e;do i.z===null&&(i.z=Wu(i.x,i.y,t,r,n)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;while(i!==e);i.prevZ.nextZ=null,i.prevZ=null,ay(i)}function ay(e){var t,r,n,i,o,s,a,u,f=1;do{for(r=e,e=null,o=null,s=0;r;){for(s++,n=r,a=0,t=0;t<f&&(a++,n=n.nextZ,!!n);t++);for(u=f;a>0||u>0&&n;)a!==0&&(u===0||!n||r.z<=n.z)?(i=r,r=r.nextZ,a--):(i=n,n=n.nextZ,u--),o?o.nextZ=i:e=i,i.prevZ=o,o=i;r=n}o.nextZ=null,f*=2}while(s>1);return e}function Wu(e,t,r,n,i){return e=32767*(e-r)*i,t=32767*(t-n)*i,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,e|t<<1}function uy(e){var t=e,r=e;do(t.x<r.x||t.x===r.x&&t.y<r.y)&&(r=t),t=t.next;while(t!==e);return r}function Co(e,t,r,n,i,o,s,a){return(i-s)*(t-a)-(e-s)*(o-a)>=0&&(e-s)*(n-a)-(r-s)*(t-a)>=0&&(r-s)*(o-a)-(i-s)*(n-a)>=0}function fy(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!ly(e,t)&&(Ls(e,t)&&Ls(t,e)&&cy(e,t)&&(Le(e.prev,e,t.prev)||Le(e,t.prev,t))||Ka(e,t)&&Le(e.prev,e,e.next)>0&&Le(t.prev,t,t.next)>0)}function Le(e,t,r){return(t.y-e.y)*(r.x-t.x)-(t.x-e.x)*(r.y-t.y)}function Ka(e,t){return e.x===t.x&&e.y===t.y}function jh(e,t,r,n){var i=ga(Le(e,t,r)),o=ga(Le(e,t,n)),s=ga(Le(r,n,e)),a=ga(Le(r,n,t));return!!(i!==o&&s!==a||i===0&&pa(e,r,t)||o===0&&pa(e,n,t)||s===0&&pa(r,e,n)||a===0&&pa(r,t,n))}function pa(e,t,r){return t.x<=Math.max(e.x,r.x)&&t.x>=Math.min(e.x,r.x)&&t.y<=Math.max(e.y,r.y)&&t.y>=Math.min(e.y,r.y)}function ga(e){return e>0?1:e<0?-1:0}function ly(e,t){var r=e;do{if(r.i!==e.i&&r.next.i!==e.i&&r.i!==t.i&&r.next.i!==t.i&&jh(r,r.next,e,t))return!0;r=r.next}while(r!==e);return!1}function Ls(e,t){return Le(e.prev,e,e.next)<0?Le(e,t,e.next)>=0&&Le(e,e.prev,t)>=0:Le(e,t,e.prev)<0||Le(e,e.next,t)<0}function cy(e,t){var r=e,n=!1,i=(e.x+t.x)/2,o=(e.y+t.y)/2;do r.y>o!=r.next.y>o&&r.next.y!==r.y&&i<(r.next.x-r.x)*(o-r.y)/(r.next.y-r.y)+r.x&&(n=!n),r=r.next;while(r!==e);return n}function $h(e,t){var r=new Ju(e.i,e.x,e.y),n=new Ju(t.i,t.x,t.y),i=e.next,o=t.prev;return e.next=t,t.prev=e,r.next=i,i.prev=r,n.next=r,r.prev=n,o.next=n,n.prev=o,n}function Dl(e,t,r,n){var i=new Ju(e,t,r);return n?(i.next=n.next,i.prev=n,n.next.prev=i,n.next=i):(i.prev=i,i.next=i),i}function Ms(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function Ju(e,t,r){this.i=e,this.x=t,this.y=r,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}Ja.deviation=function(e,t,r,n){var i=t&&t.length,o=i?t[0]*r:e.length,s=Math.abs(Ku(e,0,o,r));if(i)for(var a=0,u=t.length;a<u;a++){var f=t[a]*r,l=a<u-1?t[a+1]*r:e.length;s-=Math.abs(Ku(e,f,l,r))}var c=0;for(a=0;a<n.length;a+=3){var h=n[a]*r,p=n[a+1]*r,v=n[a+2]*r;c+=Math.abs((e[h]-e[v])*(e[p+1]-e[h+1])-(e[h]-e[p])*(e[v+1]-e[h+1]))}return s===0&&c===0?0:Math.abs((c-s)/s)};function Ku(e,t,r,n){for(var i=0,o=t,s=r-n;o<r;o+=n)i+=(e[s]-e[o])*(e[o+1]+e[s+1]),s=o;return i}Ja.flatten=function(e){for(var t=e[0][0].length,r={vertices:[],holes:[],dimensions:t},n=0,i=0;i<e.length;i++){for(var o=0;o<e[i].length;o++)for(var s=0;s<t;s++)r.vertices.push(e[i][o][s]);i>0&&(n+=e[i-1].length,r.holes.push(n))}return r};var hy=Of.exports;const py=Ei(hy);function Fx(e){if(!e.geometry||e.geometry.type!=="Polygon"&&e.geometry.type!=="MultiPolygon")throw new Error("input must be a Polygon or MultiPolygon");var t={type:"FeatureCollection",features:[]};return e.geometry.type==="Polygon"?t.features=Tl(e.geometry.coordinates):e.geometry.coordinates.forEach(function(r){t.features=t.features.concat(Tl(r))}),t}function Tl(e){var t=gy(e),r=2,n=py(t.vertices,t.holes,r),i=[],o=[];n.forEach(function(u,f){var l=n[f];o.push([t.vertices[l*r],t.vertices[l*r+1]])});for(var s=0;s<o.length;s+=3){var a=o.slice(s,s+3);a.push(o[s]),i.push(pt([a]))}return i}function gy(e){for(var t=e[0][0].length,r={vertices:[],holes:[],dimensions:t},n=0,i=0;i<e.length;i++){for(var o=0;o<e[i].length;o++)for(var s=0;s<t;s++)r.vertices.push(e[i][o][s]);i>0&&(n+=e[i-1].length,r.holes.push(n))}return r}function tp(e,t){if(!e)throw new Error("targetPoint is required");if(!t)throw new Error("points is required");var r,n=1/0,i=0;return Qt(t,function(o,s){var a=ee(e,o);a<n&&(i=s,n=a)}),r=or(t.features[i]),r.properties.featureIndex=i,r.properties.distanceToPoint=n,r}function To(e){if(!e)throw new Error("geojson is required");var t=[];return Oe(e,function(r){vy(r,t)}),et(t)}function vy(e,t){var r=[],n=e.geometry;if(n!==null){switch(n.type){case"Polygon":r=ot(n);break;case"LineString":r=[ot(n)]}r.forEach(function(i){var o=dy(i,e.properties);o.forEach(function(s){s.id=t.length,t.push(s)})})}}function dy(e,t){var r=[];return e.reduce(function(n,i){var o=Jt([n,i],t);return o.bbox=yy(n,i),r.push(o),i}),r}function yy(e,t){var r=e[0],n=e[1],i=t[0],o=t[1],s=r<i?r:i,a=n<o?n:o,u=r>i?r:i,f=n>o?n:o;return[s,a,u,f]}var Rf={exports:{}};const my=Ya(fv),_y=Ya(vv),Ey=Ya(dv);var Xn=Jh,ep=my,rp=_y,_o=Ey.default,xy=rp.featureEach;rp.coordEach;ep.polygon;var Fl=ep.featureCollection;function np(e){var t=Xn(e);return t.insert=function(r){if(r.type!=="Feature")throw new Error("invalid feature");return r.bbox=r.bbox?r.bbox:_o(r),Xn.prototype.insert.call(this,r)},t.load=function(r){var n=[];return Array.isArray(r)?r.forEach(function(i){if(i.type!=="Feature")throw new Error("invalid features");i.bbox=i.bbox?i.bbox:_o(i),n.push(i)}):xy(r,function(i){if(i.type!=="Feature")throw new Error("invalid features");i.bbox=i.bbox?i.bbox:_o(i),n.push(i)}),Xn.prototype.load.call(this,n)},t.remove=function(r,n){if(r.type!=="Feature")throw new Error("invalid feature");return r.bbox=r.bbox?r.bbox:_o(r),Xn.prototype.remove.call(this,r,n)},t.clear=function(){return Xn.prototype.clear.call(this)},t.search=function(r){var n=Xn.prototype.search.call(this,this.toBBox(r));return Fl(n)},t.collides=function(r){return Xn.prototype.collides.call(this,this.toBBox(r))},t.all=function(){var r=Xn.prototype.all.call(this);return Fl(r)},t.toJSON=function(){return Xn.prototype.toJSON.call(this)},t.fromJSON=function(r){return Xn.prototype.fromJSON.call(this,r)},t.toBBox=function(r){var n;if(r.bbox)n=r.bbox;else if(Array.isArray(r)&&r.length===4)n=r;else if(Array.isArray(r)&&r.length===6)n=[r[0],r[1],r[3],r[4]];else if(r.type==="Feature")n=_o(r);else if(r.type==="FeatureCollection")n=_o(r);else throw new Error("invalid geojson");return{minX:n[0],minY:n[1],maxX:n[2],maxY:n[3]}},t}Rf.exports=np;Rf.exports.default=np;var wy=Rf.exports;const js=Ei(wy);function xi(e,t){var r={},n=[];if(e.type==="LineString"&&(e=ze(e)),t.type==="LineString"&&(t=ze(t)),e.type==="Feature"&&t.type==="Feature"&&e.geometry!==null&&t.geometry!==null&&e.geometry.type==="LineString"&&t.geometry.type==="LineString"&&e.geometry.coordinates.length===2&&t.geometry.coordinates.length===2){var i=Bl(e,t);return i&&n.push(i),et(n)}var o=js();return o.load(To(t)),Qt(To(e),function(s){Qt(o.search(s),function(a){var u=Bl(s,a);if(u){var f=ot(u).join(",");r[f]||(r[f]=!0,n.push(u))}})}),et(n)}function Bl(e,t){var r=ot(e),n=ot(t);if(r.length!==2)throw new Error("<intersects> line1 must only contain 2 coordinates");if(n.length!==2)throw new Error("<intersects> line2 must only contain 2 coordinates");var i=r[0][0],o=r[0][1],s=r[1][0],a=r[1][1],u=n[0][0],f=n[0][1],l=n[1][0],c=n[1][1],h=(c-f)*(s-i)-(l-u)*(a-o),p=(l-u)*(o-f)-(c-f)*(i-u),v=(s-i)*(o-f)-(a-o)*(i-u);if(h===0)return null;var y=p/h,E=v/h;if(y>=0&&y<=1&&E>=0&&E<=1){var x=i+y*(s-i),g=o+y*(a-o);return gt([x,g])}return null}function Ji(e,t,r){r===void 0&&(r={});var n=gt([1/0,1/0],{dist:1/0}),i=0;return Oe(e,function(o){for(var s=ot(o),a=0;a<s.length-1;a++){var u=gt(s[a]);u.properties.dist=ee(t,u,r);var f=gt(s[a+1]);f.properties.dist=ee(t,f,r);var l=ee(u,f,r),c=Math.max(u.properties.dist,f.properties.dist),h=Ri(u,f),p=li(t,c,h+90,r),v=li(t,c,h-90,r),y=xi(Jt([p.geometry.coordinates,v.geometry.coordinates]),Jt([u.geometry.coordinates,f.geometry.coordinates])),E=null;y.features.length>0&&(E=y.features[0],E.properties.dist=ee(t,E,r),E.properties.location=i+ee(u,E,r)),u.properties.dist<n.properties.dist&&(n=u,n.properties.index=a,n.properties.location=i),f.properties.dist<n.properties.dist&&(n=f,n.properties.index=a+1,n.properties.location=i+l),E&&E.properties.dist<n.properties.dist&&(n=E,n.properties.index=a),i+=l}}),n}function Af(e,t,r){r===void 0&&(r={});var n=se(e),i=se(t);i[0]+=i[0]-n[0]>180?-360:n[0]-i[0]>180?360:0;var o=Iy(n,i),s=Qs(o,"meters",r.units);return s}function Iy(e,t,r){r=r===void 0?Ve:Number(r);var n=r,i=e[1]*Math.PI/180,o=t[1]*Math.PI/180,s=o-i,a=Math.abs(t[0]-e[0])*Math.PI/180;a>Math.PI&&(a-=2*Math.PI);var u=Math.log(Math.tan(o/2+Math.PI/4)/Math.tan(i/2+Math.PI/4)),f=Math.abs(u)>1e-11?s/u:Math.cos(i),l=Math.sqrt(s*s+f*f*a*a),c=l*n;return c}function Cy(e,t,r){if(r===void 0&&(r={}),r.method||(r.method="geodesic"),r.units||(r.units="kilometers"),!e)throw new Error("pt is required");if(Array.isArray(e)?e=gt(e):e.type==="Point"?e=ze(e):Sa(e,"Point","point"),!t)throw new Error("line is required");Array.isArray(t)?t=Jt(t):t.type==="LineString"?t=ze(t):Sa(t,"LineString","line");var n=1/0,i=e.geometry.coordinates;return Pi(t,function(o){var s=o.geometry.coordinates[0],a=o.geometry.coordinates[1],u=Sy(i,s,a,r);u<n&&(n=u)}),Qs(n,"degrees",r.units)}function Sy(e,t,r,n){var i=[r[0]-t[0],r[1]-t[1]],o=[e[0]-t[0],e[1]-t[1]],s=Gl(o,i);if(s<=0)return Iu(e,t,{method:n.method,units:"degrees"});var a=Gl(i,i);if(a<=s)return Iu(e,r,{method:n.method,units:"degrees"});var u=s/a,f=[t[0]+u*i[0],t[1]+u*i[1]];return Iu(e,f,{method:n.method,units:"degrees"})}function Gl(e,t){return e[0]*t[0]+e[1]*t[1]}function Iu(e,t,r){return r.method==="planar"?Af(e,t,r):ee(e,t,r)}function Bx(e,t,r){r===void 0&&(r={});var n=r.units,i=r.properties||{},o=Ny(e);if(!o.features.length)throw new Error("points must contain features");if(!t)throw new Error("line is required");if(Br(t)!=="LineString")throw new Error("line must be a LineString");var s=1/0,a=null;return Qt(o,function(u){var f=Cy(u,t,{units:n});f<s&&(s=f,a=u)}),a&&(a.properties=wf({dist:s},a.properties,i)),a}function Ny(e){var t=[],r=e.geometry?e.geometry.type:e.type;switch(r){case"GeometryCollection":return wn(e,function(n){n.type==="Point"&&t.push({type:"Feature",properties:{},geometry:n})}),{type:"FeatureCollection",features:t};case"FeatureCollection":return e.features=e.features.filter(function(n){return n.geometry.type==="Point"}),e;default:throw new Error("points must be a Point Collection")}}function Gx(e,t){var r=se(e),n=fe(t),i=n.coordinates,o=i[0];if(o.length<4)throw new Error("OuterRing of a Polygon must have 4 or more Positions.");var s=t.properties||{},a=s.a,u=s.b,f=s.c,l=r[0],c=r[1],h=o[0][0],p=o[0][1],v=a!==void 0?a:o[0][2],y=o[1][0],E=o[1][1],x=u!==void 0?u:o[1][2],g=o[2][0],d=o[2][1],_=f!==void 0?f:o[2][2],w=(_*(l-h)*(c-E)+v*(l-y)*(c-d)+x*(l-g)*(c-p)-x*(l-h)*(c-d)-_*(l-y)*(c-p)-v*(l-g)*(c-E))/((l-h)*(c-E)+(l-y)*(c-d)+(l-g)*(c-p)-(l-h)*(c-d)-(l-y)*(c-p)-(l-g)*(c-E));return w}function kx(e){var t,r,n={type:"FeatureCollection",features:[]};if(e.type==="Feature"?r=e.geometry:r=e,r.type==="LineString")t=[r.coordinates];else if(r.type==="MultiLineString")t=r.coordinates;else if(r.type==="MultiPolygon")t=[].concat.apply([],r.coordinates);else if(r.type==="Polygon")t=r.coordinates;else throw new Error("Input must be a LineString, MultiLineString, Polygon, or MultiPolygon Feature or Geometry");return t.forEach(function(i){t.forEach(function(o){for(var s=0;s<i.length-1;s++)for(var a=s;a<o.length-1;a++)if(!(i===o&&(Math.abs(s-a)===1||s===0&&a===i.length-2&&i[s][0]===i[i.length-1][0]&&i[s][1]===i[i.length-1][1]))){var u=Py(i[s][0],i[s][1],i[s+1][0],i[s+1][1],o[a][0],o[a][1],o[a+1][0],o[a+1][1]);u&&n.features.push(gt([u[0],u[1]]))}})}),n}function Py(e,t,r,n,i,o,s,a){var u,f,l,c,h,p={x:null,y:null,onLine1:!1,onLine2:!1};return u=(a-o)*(r-e)-(s-i)*(n-t),u===0?p.x!==null&&p.y!==null?p:!1:(f=t-o,l=e-i,c=(s-i)*f-(a-o)*l,h=(r-e)*f-(n-t)*l,f=c/u,l=h/u,p.x=e+f*(r-e),p.y=t+f*(n-t),f>=0&&f<=1&&(p.onLine1=!0),l>=0&&l<=1&&(p.onLine2=!0),p.onLine1&&p.onLine2?[p.x,p.y]:!1)}function qx(e){for(var t=Ly(e),r=Lf(t),n=!1,i=0;!n&&i<t.features.length;){var o=t.features[i].geometry,s,a,u,f,l,c,h,p=!1;if(o.type==="Point")r.geometry.coordinates[0]===o.coordinates[0]&&r.geometry.coordinates[1]===o.coordinates[1]&&(n=!0);else if(o.type==="MultiPoint"){var v=!1;for(h=0;!v&&h<o.coordinates.length;)r.geometry.coordinates[0]===o.coordinates[h][0]&&r.geometry.coordinates[1]===o.coordinates[h][1]&&(n=!0,v=!0),h++}else if(o.type==="LineString")for(h=0;!p&&h<o.coordinates.length-1;)s=r.geometry.coordinates[0],a=r.geometry.coordinates[1],u=o.coordinates[h][0],f=o.coordinates[h][1],l=o.coordinates[h+1][0],c=o.coordinates[h+1][1],kl(s,a,u,f,l,c)&&(p=!0,n=!0),h++;else if(o.type==="MultiLineString")for(var y=0;y<o.coordinates.length;){p=!1,h=0;for(var E=o.coordinates[y];!p&&h<E.length-1;)s=r.geometry.coordinates[0],a=r.geometry.coordinates[1],u=E[h][0],f=E[h][1],l=E[h+1][0],c=E[h+1][1],kl(s,a,u,f,l,c)&&(p=!0,n=!0),h++;y++}else(o.type==="Polygon"||o.type==="MultiPolygon")&&ge(r,o)&&(n=!0);i++}if(n)return r;var x=et([]);for(i=0;i<t.features.length;i++)x.features=x.features.concat(Mf(t.features[i]).features);return gt(tp(r,x).geometry.coordinates)}function Ly(e){return e.type!=="FeatureCollection"?e.type!=="Feature"?et([ze(e)]):et([e]):e}function kl(e,t,r,n,i,o){var s=Math.sqrt((i-r)*(i-r)+(o-n)*(o-n)),a=Math.sqrt((e-r)*(e-r)+(t-n)*(t-n)),u=Math.sqrt((i-e)*(i-e)+(o-t)*(o-t));return s===a+u}var ql=6378137;function ip(e){return Ah(e,function(t,r){return t+My(r)},0)}function My(e){var t=0,r;switch(e.type){case"Polygon":return zl(e.coordinates);case"MultiPolygon":for(r=0;r<e.coordinates.length;r++)t+=zl(e.coordinates[r]);return t;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0}return 0}function zl(e){var t=0;if(e&&e.length>0){t+=Math.abs(Ul(e[0]));for(var r=1;r<e.length;r++)t-=Math.abs(Ul(e[r]))}return t}function Ul(e){var t,r,n,i,o,s,a,u=0,f=e.length;if(f>2){for(a=0;a<f;a++)a===f-2?(i=f-2,o=f-1,s=0):a===f-1?(i=f-1,o=0,s=1):(i=a,o=a+1,s=a+2),t=e[i],r=e[o],n=e[s],u+=(Cu(n[0])-Cu(t[0]))*Math.sin(Cu(r[1]));u=u*ql*ql/2}return u}function Cu(e){return e*Math.PI/180}function zx(e,t,r){r===void 0&&(r={});for(var n=fe(e),i=n.coordinates,o=0,s=0;s<i.length&&!(t>=o&&s===i.length-1);s++)if(o>=t){var a=t-o;if(a){var u=Ri(i[s],i[s-1])-180,f=li(i[s],a,u,r);return f}else return gt(i[s])}else o+=ee(i[s],i[s+1],r);return gt(i[i.length-1])}function Oy(e,t){return t===void 0&&(t={}),bh(e,function(r,n){var i=n.geometry.coordinates;return r+ee(i[0],i[1],t)},0)}function Ux(e,t,r){var n=ot(r);if(Br(r)!=="LineString")throw new Error("line must be a LineString");var i=Ji(r,e),o=Ji(r,t),s;i.properties.index<=o.properties.index?s=[i,o]:s=[o,i];for(var a=[s[0].geometry.coordinates],u=s[0].properties.index+1;u<s[1].properties.index+1;u++)a.push(n[u]);return a.push(s[1].geometry.coordinates),Jt(a,r.properties)}function Ry(e,t,r,n){if(n=n||{},!re(n))throw new Error("options is invalid");var i,o=[];if(e.type==="Feature")i=e.geometry.coordinates;else if(e.type==="LineString")i=e.coordinates;else throw new Error("input must be a LineString Feature or Geometry");for(var s=i.length,a=0,u,f,l,c=0;c<i.length&&!(t>=a&&c===i.length-1);c++){if(a>t&&o.length===0){if(u=t-a,!u)return o.push(i[c]),Jt(o);f=Ri(i[c],i[c-1])-180,l=li(i[c],u,f,n),o.push(l.geometry.coordinates)}if(a>=r)return u=r-a,u?(f=Ri(i[c],i[c-1])-180,l=li(i[c],u,f,n),o.push(l.geometry.coordinates),Jt(o)):(o.push(i[c]),Jt(o));if(a>=t&&o.push(i[c]),c===i.length-1)return Jt(o);a+=ee(i[c],i[c+1],n)}if(a<t&&i.length===s)throw new Error("Start position is beyond line");return Jt(i[i.length-1])}function Hr(e,t,r){r===void 0&&(r={});for(var n=se(e),i=ot(t),o=0;o<i.length-1;o++){var s=!1;if(r.ignoreEndVertices&&(o===0&&(s="start"),o===i.length-2&&(s="end"),o===0&&o+1===i.length-1&&(s="both")),Ay(i[o],i[o+1],n,s))return!0}return!1}function Ay(e,t,r,n){var i=r[0],o=r[1],s=e[0],a=e[1],u=t[0],f=t[1],l=r[0]-s,c=r[1]-a,h=u-s,p=f-a,v=l*p-c*h;if(v!==0)return!1;if(n){if(n==="start")return Math.abs(h)>=Math.abs(p)?h>0?s<i&&i<=u:u<=i&&i<s:p>0?a<o&&o<=f:f<=o&&o<a;if(n==="end")return Math.abs(h)>=Math.abs(p)?h>0?s<=i&&i<u:u<i&&i<=s:p>0?a<=o&&o<f:f<o&&o<=a;if(n==="both")return Math.abs(h)>=Math.abs(p)?h>0?s<i&&i<u:u<i&&i<s:p>0?a<o&&o<f:f<o&&o<a}else return Math.abs(h)>=Math.abs(p)?h>0?s<=i&&i<=u:u<=i&&i<=s:p>0?a<=o&&o<=f:f<=o&&o<=a;return!1}function by(e,t){var r=fe(e),n=fe(t),i=r.type,o=n.type;switch(i){case"Point":switch(o){case"MultiPoint":return Dy(r,n);case"LineString":return Hr(r,n,{ignoreEndVertices:!0});case"Polygon":case"MultiPolygon":return ge(r,n,{ignoreBoundary:!0});default:throw new Error("feature2 "+o+" geometry not supported")}case"MultiPoint":switch(o){case"MultiPoint":return Ty(r,n);case"LineString":return Fy(r,n);case"Polygon":case"MultiPolygon":return By(r,n);default:throw new Error("feature2 "+o+" geometry not supported")}case"LineString":switch(o){case"LineString":return Gy(r,n);case"Polygon":case"MultiPolygon":return ky(r,n);default:throw new Error("feature2 "+o+" geometry not supported")}case"Polygon":switch(o){case"Polygon":case"MultiPolygon":return qy(r,n);default:throw new Error("feature2 "+o+" geometry not supported")}default:throw new Error("feature1 "+i+" geometry not supported")}}function Dy(e,t){var r,n=!1;for(r=0;r<t.coordinates.length;r++)if(sp(t.coordinates[r],e.coordinates)){n=!0;break}return n}function Ty(e,t){for(var r=0;r<e.coordinates.length;r++){for(var n=!1,i=0;i<t.coordinates.length;i++)sp(e.coordinates[r],t.coordinates[i])&&(n=!0);if(!n)return!1}return!0}function Fy(e,t){for(var r=!1,n=0;n<e.coordinates.length;n++){if(!Hr(e.coordinates[n],t))return!1;r||(r=Hr(e.coordinates[n],t,{ignoreEndVertices:!0}))}return r}function By(e,t){for(var r=!0,n=0;n<e.coordinates.length;n++){var i=ge(e.coordinates[1],t);if(!i){r=!1;break}i=ge(e.coordinates[1],t,{ignoreBoundary:!0})}return r&&i}function Gy(e,t){for(var r=0;r<e.coordinates.length;r++)if(!Hr(e.coordinates[r],t))return!1;return!0}function ky(e,t){var r=Ee(t),n=Ee(e);if(!op(r,n))return!1;for(var i=!1,o=0;o<e.coordinates.length-1;o++){if(!ge(e.coordinates[o],t))return!1;if(i||(i=ge(e.coordinates[o],t,{ignoreBoundary:!0})),!i){var s=zy(e.coordinates[o],e.coordinates[o+1]);i=ge(s,t,{ignoreBoundary:!0})}}return i}function qy(e,t){var r=Ee(e),n=Ee(t);if(!op(n,r))return!1;for(var i=0;i<e.coordinates[0].length;i++)if(!ge(e.coordinates[0][i],t))return!1;return!0}function op(e,t){return!(e[0]>t[0]||e[2]<t[2]||e[1]>t[1]||e[3]<t[3])}function sp(e,t){return e[0]===t[0]&&e[1]===t[1]}function zy(e,t){return[(e[0]+t[0])/2,(e[1]+t[1])/2]}function Uy(e,t,r){r===void 0&&(r={}),r.mask&&!r.units&&(r.units="kilometers");for(var n=[],i=e[0],o=e[1],s=e[2],a=e[3],u=t/ee([i,o],[s,o],r),f=u*(s-i),l=t/ee([i,o],[i,a],r),c=l*(a-o),h=s-i,p=a-o,v=Math.floor(h/f),y=Math.floor(p/c),E=(h-v*f)/2,x=(p-y*c)/2,g=i+E;g<=s;){for(var d=o+x;d<=a;){var _=gt([g,d],r.properties);r.mask?by(_,r.mask)&&n.push(_):n.push(_),d+=c}g+=f}return et(n)}function Xy(e,t){t===void 0&&(t={});var r=t.precision,n=t.coordinates,i=t.mutate;if(r=r==null||isNaN(r)?6:r,n=n==null||isNaN(n)?3:n,!e)throw new Error("<geojson> is required");if(typeof r!="number")throw new Error("<precision> must be a number");if(typeof n!="number")throw new Error("<coordinates> must be a number");(i===!1||i===void 0)&&(e=JSON.parse(JSON.stringify(e)));var o=Math.pow(10,r);return be(e,function(s){Yy(s,o,n)}),e}function Yy(e,t,r){e.length>r&&e.splice(r,e.length);for(var n=0;n<e.length;n++)e[n]=Math.round(e[n]*t)/t;return e}function Xx(e){if(!e)throw new Error("geojson is required");var t=[];return Oe(e,function(r){t.push(r)}),et(t)}function Yx(e,t,r){if(r=r||{},!re(r))throw new Error("options is invalid");var n=r.units,i=r.reverse;if(!e)throw new Error("geojson is required");if(t<=0)throw new Error("segmentLength must be greater than 0");var o=[];return Oe(e,function(s){i&&(s.geometry.coordinates=s.geometry.coordinates.reverse()),Vy(s,t,n,function(a){o.push(a)})}),et(o)}function Vy(e,t,r,n){var i=Oy(e,{units:r});if(i<=t)return n(e);var o=i/t;Number.isInteger(o)||(o=Math.floor(o)+1);for(var s=0;s<o;s++){var a=Ry(e,t*s,t*(s+1),{units:r});n(a,s)}}function Hy(e,t,r){if(e.geometry.type!=="Polygon")throw new Error("The input feature must be a Polygon");r===void 0&&(r=1);var n=e.geometry.coordinates,i=[],o={};if(r){for(var s=[],a=0;a<n.length;a++)for(var u=0;u<n[a].length-1;u++)s.push(E(a,u));var f=Wa();f.load(s)}for(var l=0;l<n.length;l++)for(var c=0;c<n[l].length-1;c++)if(r){var h=f.search(E(l,c));h.forEach(function(x){var g=x.ring,d=x.edge;y(l,c,g,d)})}else for(var p=0;p<n.length;p++)for(var v=0;v<n[p].length-1;v++)y(l,c,p,v);return t||(i={type:"Feature",geometry:{type:"MultiPoint",coordinates:i}}),i;function y(x,g,d,_){var w=n[x][g],S=n[x][g+1],C=n[d][_],N=n[d][_+1],I=Wy(w,S,C,N);if(I!==null){var A,O;if(S[0]!==w[0]?A=(I[0]-w[0])/(S[0]-w[0]):A=(I[1]-w[1])/(S[1]-w[1]),N[0]!==C[0]?O=(I[0]-C[0])/(N[0]-C[0]):O=(I[1]-C[1])/(N[1]-C[1]),!(A>=1||A<=0||O>=1||O<=0)){var D=I,T=!o[D];T&&(o[D]=!0),t?i.push(t(I,x,g,w,S,A,d,_,C,N,O,T)):i.push(I)}}}function E(x,g){var d=n[x][g],_=n[x][g+1],w,S,C,N;return d[0]<_[0]?(w=d[0],S=_[0]):(w=_[0],S=d[0]),d[1]<_[1]?(C=d[1],N=_[1]):(C=_[1],N=d[1]),{minX:w,minY:C,maxX:S,maxY:N,ring:x,edge:g}}}function Wy(e,t,r,n){if(ms(e,r)||ms(e,n)||ms(t,r)||ms(n,r))return null;var i=e[0],o=e[1],s=t[0],a=t[1],u=r[0],f=r[1],l=n[0],c=n[1],h=(i-s)*(f-c)-(o-a)*(u-l);if(h===0)return null;var p=((i*a-o*s)*(u-l)-(i-s)*(u*c-f*l))/h,v=((i*a-o*s)*(f-c)-(o-a)*(u*c-f*l))/h;return[p,v]}function ms(e,t){if(!e||!t||e.length!==t.length)return!1;for(var r=0,n=e.length;r<n;r++)if(e[r]instanceof Array&&t[r]instanceof Array){if(!ms(e[r],t[r]))return!1}else if(e[r]!==t[r])return!1;return!0}function Jy(e){if(e.type!="Feature")throw new Error("The input must a geojson object of type Feature");if(e.geometry===void 0||e.geometry==null)throw new Error("The input must a geojson object with a non-empty geometry");if(e.geometry.type!="Polygon")throw new Error("The input must be a geojson Polygon");for(var t=e.geometry.coordinates.length,r=[],g=0;g<t;g++){var n=e.geometry.coordinates[g];_s(n[0],n[n.length-1])||n.push(n[0]),r.push.apply(r,n.slice(0,n.length-1))}if(!Zy(r))throw new Error("The input polygon may not have duplicate vertices (except for the first and last vertex of each ring)");var i=r.length,o=Hy(e,function(it,vt,ht,ne,mr,Ae,lr,cr,Un,br,Xr,Yr){return[it,vt,ht,ne,mr,Ae,lr,cr,Un,br,Xr,Yr]}),s=o.length;if(s==0){for(var C=[],g=0;g<t;g++)C.push(pt([e.geometry.coordinates[g]],{parent:-1,winding:Ky(e.geometry.coordinates[g])}));var J=et(C);return z(),V(),J}for(var a=[],u=[],g=0;g<t;g++){a.push([]);for(var f=0;f<e.geometry.coordinates[g].length-1;f++)a[g].push([new Xl(e.geometry.coordinates[g][So(f+1,e.geometry.coordinates[g].length-1)],1,[g,f],[g,So(f+1,e.geometry.coordinates[g].length-1)],void 0)]),u.push(new Yl(e.geometry.coordinates[g][f],[g,So(f-1,e.geometry.coordinates[g].length-1)],[g,f],void 0,void 0,!1,!0))}for(var g=0;g<s;g++)a[o[g][1]][o[g][2]].push(new Xl(o[g][0],o[g][5],[o[g][1],o[g][2]],[o[g][6],o[g][7]],void 0)),o[g][11]&&u.push(new Yl(o[g][0],[o[g][1],o[g][2]],[o[g][6],o[g][7]],void 0,void 0,!0,!0));for(var l=u.length,g=0;g<a.length;g++)for(var f=0;f<a[g].length;f++)a[g][f].sort(function(vt,ht){return vt.param<ht.param?-1:1});for(var c=[],g=0;g<l;g++)c.push({minX:u[g].coord[0],minY:u[g].coord[1],maxX:u[g].coord[0],maxY:u[g].coord[1],index:g});var h=Wa();h.load(c);for(var g=0;g<a.length;g++)for(var f=0;f<a[g].length;f++)for(var p=0;p<a[g][f].length;p++){var v;p==a[g][f].length-1?v=a[g][So(f+1,e.geometry.coordinates[g].length-1)][0].coord:v=a[g][f][p+1].coord;var y=h.search({minX:v[0],minY:v[1],maxX:v[0],maxY:v[1]})[0];a[g][f][p].nxtIsectAlongEdgeIn=y.index}for(var g=0;g<a.length;g++)for(var f=0;f<a[g].length;f++)for(var p=0;p<a[g][f].length;p++){var v=a[g][f][p].coord,y=h.search({minX:v[0],minY:v[1],maxX:v[0],maxY:v[1]})[0],E=y.index;E<i?u[E].nxtIsectAlongRingAndEdge2=a[g][f][p].nxtIsectAlongEdgeIn:_s(u[E].ringAndEdge1,a[g][f][p].ringAndEdgeIn)?u[E].nxtIsectAlongRingAndEdge1=a[g][f][p].nxtIsectAlongEdgeIn:u[E].nxtIsectAlongRingAndEdge2=a[g][f][p].nxtIsectAlongEdgeIn}for(var x=[],g=0,f=0;f<t;f++){for(var d=g,p=0;p<e.geometry.coordinates[f].length-1;p++)u[g].coord[0]<u[d].coord[0]&&(d=g),g++;for(var _=u[d].nxtIsectAlongRingAndEdge2,p=0;p<u.length;p++)if(u[p].nxtIsectAlongRingAndEdge1==d||u[p].nxtIsectAlongRingAndEdge2==d){var w=p;break}var S=Ea([u[w].coord,u[d].coord,u[_].coord],!0)?1:-1;x.push({isect:d,parent:-1,winding:S})}x.sort(function(ft,it){return u[ft.isect].coord>u[it.isect].coord?-1:1});for(var C=[];x.length>0;){var N=x.pop(),I=N.isect,A=N.parent,O=N.winding,D=C.length,T=[u[I].coord],R=I;if(u[I].ringAndEdge1Walkable)var q=u[I].ringAndEdge1,B=u[I].nxtIsectAlongRingAndEdge1;else var q=u[I].ringAndEdge2,B=u[I].nxtIsectAlongRingAndEdge2;for(;!_s(u[I].coord,u[B].coord);){T.push(u[B].coord);for(var j=void 0,g=0;g<x.length;g++)if(x[g].isect==B){j=g;break}if(j!=null&&x.splice(j,1),_s(q,u[B].ringAndEdge1)){if(q=u[B].ringAndEdge2,u[B].ringAndEdge2Walkable=!1,u[B].ringAndEdge1Walkable){var Z={isect:B};Ea([u[R].coord,u[B].coord,u[u[B].nxtIsectAlongRingAndEdge2].coord],O==1)?(Z.parent=A,Z.winding=-O):(Z.parent=D,Z.winding=O),x.push(Z)}R=B,B=u[B].nxtIsectAlongRingAndEdge2}else{if(q=u[B].ringAndEdge1,u[B].ringAndEdge1Walkable=!1,u[B].ringAndEdge2Walkable){var Z={isect:B};Ea([u[R].coord,u[B].coord,u[u[B].nxtIsectAlongRingAndEdge1].coord],O==1)?(Z.parent=A,Z.winding=-O):(Z.parent=D,Z.winding=O),x.push(Z)}R=B,B=u[B].nxtIsectAlongRingAndEdge1}}T.push(u[B].coord),C.push(pt([T],{index:D,parent:A,winding:O,netWinding:void 0}))}var J=et(C);z(),V();function z(){for(var ft=[],it=0;it<J.features.length;it++)J.features[it].properties.parent==-1&&ft.push(it);if(ft.length>1)for(var it=0;it<ft.length;it++){for(var vt=-1,ht=1/0,ne=0;ne<J.features.length;ne++)ft[it]!=ne&&ge(J.features[ft[it]].geometry.coordinates[0][0],J.features[ne],{ignoreBoundary:!0})&&ip(J.features[ne])<ht&&(vt=ne);J.features[ft[it]].properties.parent=vt}}function V(){for(var ft=0;ft<J.features.length;ft++)if(J.features[ft].properties.parent==-1){var it=J.features[ft].properties.winding;J.features[ft].properties.netWinding=it,K(ft,it)}}function K(ft,it){for(var vt=0;vt<J.features.length;vt++)if(J.features[vt].properties.parent==ft){var ht=it+J.features[vt].properties.winding;J.features[vt].properties.netWinding=ht,K(vt,ht)}}return J}var Xl=function(e,t,r,n,i){this.coord=e,this.param=t,this.ringAndEdgeIn=r,this.ringAndEdgeOut=n,this.nxtIsectAlongEdgeIn=i},Yl=function(e,t,r,n,i,o,s){this.coord=e,this.ringAndEdge1=t,this.ringAndEdge2=r,this.nxtIsectAlongRingAndEdge1=n,this.nxtIsectAlongRingAndEdge2=i,this.ringAndEdge1Walkable=o,this.ringAndEdge2Walkable=s};function Ea(e,t){if(typeof t>"u"&&(t=!0),e.length!=3)throw new Error("This function requires an array of three points [x,y]");var r=(e[1][0]-e[0][0])*(e[2][1]-e[0][1])-(e[1][1]-e[0][1])*(e[2][0]-e[0][0]);return r>=0==t}function Ky(e){for(var t=0,r=0;r<e.length-1;r++)e[r][0]<e[t][0]&&(t=r);if(Ea([e[So(t-1,e.length-1)],e[t],e[So(t+1,e.length-1)]],!0))var n=1;else var n=-1;return n}function _s(e,t){if(!e||!t||e.length!=t.length)return!1;for(var r=0,n=e.length;r<n;r++)if(e[r]instanceof Array&&t[r]instanceof Array){if(!_s(e[r],t[r]))return!1}else if(e[r]!=t[r])return!1;return!0}function So(e,t){return(e%t+t)%t}function Zy(e){for(var t={},r=1,n=0,i=e.length;n<i;++n){if(t.hasOwnProperty(e[n])){r=0;break}t[e[n]]=1}return r}function Vx(e){var t=[];return Oe(e,function(r){r.geometry.type==="Polygon"&&Qt(Jy(r),function(n){t.push(pt(n.geometry.coordinates,r.properties))})}),et(t)}var Vl=Math.PI/180,Hl=180/Math.PI,Os=function(e,t){this.lon=e,this.lat=t,this.x=Vl*e,this.y=Vl*t};Os.prototype.view=function(){return String(this.lon).slice(0,4)+","+String(this.lat).slice(0,4)};Os.prototype.antipode=function(){var e=-1*this.lat,t=this.lon<0?180+this.lon:(180-this.lon)*-1;return new Os(t,e)};var ap=function(){this.coords=[],this.length=0};ap.prototype.move_to=function(e){this.length++,this.coords.push(e)};var bf=function(e){this.properties=e||{},this.geometries=[]};bf.prototype.json=function(){if(this.geometries.length<=0)return{geometry:{type:"LineString",coordinates:null},type:"Feature",properties:this.properties};if(this.geometries.length===1)return{geometry:{type:"LineString",coordinates:this.geometries[0].coords},type:"Feature",properties:this.properties};for(var e=[],t=0;t<this.geometries.length;t++)e.push(this.geometries[t].coords);return{geometry:{type:"MultiLineString",coordinates:e},type:"Feature",properties:this.properties}};bf.prototype.wkt=function(){for(var e="",t="LINESTRING(",r=function(o){t+=o[0]+" "+o[1]+","},n=0;n<this.geometries.length;n++){if(this.geometries[n].coords.length===0)return"LINESTRING(empty)";var i=this.geometries[n].coords;i.forEach(r),e+=t.substring(0,t.length-1)+")"}return e};var Df=function(e,t,r){if(!e||e.x===void 0||e.y===void 0)throw new Error("GreatCircle constructor expects two args: start and end objects with x and y properties");if(!t||t.x===void 0||t.y===void 0)throw new Error("GreatCircle constructor expects two args: start and end objects with x and y properties");this.start=new Os(e.x,e.y),this.end=new Os(t.x,t.y),this.properties=r||{};var n=this.start.x-this.end.x,i=this.start.y-this.end.y,o=Math.pow(Math.sin(i/2),2)+Math.cos(this.start.y)*Math.cos(this.end.y)*Math.pow(Math.sin(n/2),2);if(this.g=2*Math.asin(Math.sqrt(o)),this.g===Math.PI)throw new Error("it appears "+e.view()+" and "+t.view()+" are 'antipodal', e.g diametrically opposite, thus there is no single route but rather infinite");if(isNaN(this.g))throw new Error("could not calculate great circle between "+e+" and "+t)};Df.prototype.interpolate=function(e){var t=Math.sin((1-e)*this.g)/Math.sin(this.g),r=Math.sin(e*this.g)/Math.sin(this.g),n=t*Math.cos(this.start.y)*Math.cos(this.start.x)+r*Math.cos(this.end.y)*Math.cos(this.end.x),i=t*Math.cos(this.start.y)*Math.sin(this.start.x)+r*Math.cos(this.end.y)*Math.sin(this.end.x),o=t*Math.sin(this.start.y)+r*Math.sin(this.end.y),s=Hl*Math.atan2(o,Math.sqrt(Math.pow(n,2)+Math.pow(i,2))),a=Hl*Math.atan2(i,n);return[a,s]};Df.prototype.Arc=function(e,t){var r=[];if(!e||e<=2)r.push([this.start.lon,this.start.lat]),r.push([this.end.lon,this.end.lat]);else for(var n=1/(e-1),i=0;i<e;++i){var o=n*i,s=this.interpolate(o);r.push(s)}for(var a=!1,u=0,f=t&&t.offset?t.offset:10,l=180-f,c=-180+f,h=360-f,p=1;p<r.length;++p){var v=r[p-1][0],y=r[p][0],E=Math.abs(y-v);E>h&&(y>l&&v<c||v>l&&y<c)?a=!0:E>u&&(u=E)}var x=[];if(a&&u<f){var g=[];x.push(g);for(var d=0;d<r.length;++d){var _=parseFloat(r[d][0]);if(d>0&&Math.abs(_-r[d-1][0])>h){var w=parseFloat(r[d-1][0]),S=parseFloat(r[d-1][1]),C=parseFloat(r[d][0]),N=parseFloat(r[d][1]);if(w>-180&&w<c&&C===180&&d+1<r.length&&r[d-1][0]>-180&&r[d-1][0]<c){g.push([-180,r[d][1]]),d++,g.push([r[d][0],r[d][1]]);continue}else if(w>l&&w<180&&C===-180&&d+1<r.length&&r[d-1][0]>l&&r[d-1][0]<180){g.push([180,r[d][1]]),d++,g.push([r[d][0],r[d][1]]);continue}if(w<c&&C>l){var I=w;w=C,C=I;var A=S;S=N,N=A}if(w>l&&C<c&&(C+=360),w<=180&&C>=180&&w<C){var O=(180-w)/(C-w),D=O*N+(1-O)*S;g.push([r[d-1][0]>l?180:-180,D]),g=[],g.push([r[d-1][0]>l?-180:180,D]),x.push(g)}else g=[],x.push(g);g.push([_,r[d][1]])}else g.push([r[d][0],r[d][1]])}}else{var T=[];x.push(T);for(var R=0;R<r.length;++R)T.push([r[R][0],r[R][1]])}for(var q=new bf(this.properties),B=0;B<x.length;++B){var j=new ap;q.geometries.push(j);for(var Z=x[B],J=0;J<Z.length;++J)j.move_to(Z[J])}return q};function Hx(e,t,r){if(r=r||{},typeof r!="object")throw new Error("options is invalid");var n=r.properties,i=r.npoints,o=r.offset;e=se(e),t=se(t),n=n||{},i=i||100,o=o||10;var s=new Df({x:e[0],y:e[1]},{x:t[0],y:t[1]},n),a=s.Arc(i,{offset:o});return a.json()}function Wx(e,t){if(!e)throw new Error("line is required");if(!t)throw new Error("splitter is required");var r=Br(e),n=Br(t);if(r!=="LineString")throw new Error("line must be LineString");if(n==="FeatureCollection")throw new Error("splitter cannot be a FeatureCollection");if(n==="GeometryCollection")throw new Error("splitter cannot be a GeometryCollection");var i=Xy(t,{precision:7});switch(n){case"Point":return Zu(e,i);case"MultiPoint":return Wl(e,i);case"LineString":case"MultiLineString":case"Polygon":case"MultiPolygon":return Wl(e,xi(e,i))}}function Wl(e,t){var r=[],n=js();return Oe(t,function(i){if(r.forEach(function(a,u){a.id=u}),!r.length)r=Zu(e,i).features,r.forEach(function(a){a.bbox||(a.bbox=Jd(Ee(a)))}),n.load(et(r));else{var o=n.search(i);if(o.features.length){var s=up(i,o);r=r.filter(function(a){return a.id!==s.id}),n.remove(s),Qt(Zu(s,i),function(a){r.push(a),n.insert(a)})}}}),et(r)}function Zu(e,t){var r=[],n=ot(e)[0],i=ot(e)[e.geometry.coordinates.length-1];if(Su(n,se(t))||Su(i,se(t)))return et([e]);var o=js(),s=To(e);o.load(s);var a=o.search(t);if(!a.features.length)return et([e]);var u=up(t,a),f=[n],l=Rh(s,function(c,h,p){var v=ot(h)[1],y=se(t);return p===u.id?(c.push(y),r.push(Jt(c)),Su(y,v)?[y]:[y,v]):(c.push(v),c)},f);return l.length>1&&r.push(Jt(l)),et(r)}function up(e,t){if(!t.features.length)throw new Error("lines must contain features");if(t.features.length===1)return t.features[0];var r,n=1/0;return Qt(t,function(i){var o=Ji(i,e),s=o.properties.dist;s<n&&(r=i,n=s)}),r}function Su(e,t){return e[0]===t[0]&&e[1]===t[1]}function Qy(e,t,r,n,i){i===void 0&&(i={});var o=i.steps||64,s=Jl(r),a=Jl(n),u=!Array.isArray(e)&&e.type==="Feature"?e.properties:{};if(s===a)return Jt(Zh(e,t,i).geometry.coordinates[0],u);for(var f=s,l=s<a?a:a+360,c=f,h=[],p=0;c<l;)h.push(li(e,t,c,i).geometry.coordinates),p++,c=f+p*360/o;return c>l&&h.push(li(e,t,l,i).geometry.coordinates),Jt(h,u)}function Jl(e){var t=e%360;return t<0&&(t+=360),t}function Qu(e,t){t===void 0&&(t={});var r=fe(e);switch(!t.properties&&e.type==="Feature"&&(t.properties=e.properties),r.type){case"Polygon":return fp(r,t);case"MultiPolygon":return jy(r,t);default:throw new Error("invalid poly")}}function fp(e,t){t===void 0&&(t={});var r=fe(e),n=r.coordinates,i=t.properties?t.properties:e.type==="Feature"?e.properties:{};return lp(n,i)}function jy(e,t){t===void 0&&(t={});var r=fe(e),n=r.coordinates,i=t.properties?t.properties:e.type==="Feature"?e.properties:{},o=[];return n.forEach(function(s){o.push(lp(s,i))}),et(o)}function lp(e,t){return e.length>1?co(e,t):Jt(e[0],t)}function Jx(e,t){t===void 0&&(t={});var r=t.properties,n=t.autoComplete,i=t.orderCoords,o=t.mutate;switch(n=n!==void 0?n:!0,i=i!==void 0?i:!0,o=o!==void 0?o:!1,o||(e=or(e)),e.type){case"FeatureCollection":var s=[];return e.features.forEach(function(a){s.push(ot(Kl(a,{},n,i)))}),Qn(s,r);default:return Kl(e,r,n,i)}}function Kl(e,t,r,n){t=t||(e.type==="Feature"?e.properties:{});var i=fe(e),o=i.coordinates,s=i.type;if(!o.length)throw new Error("line must contain coordinates");switch(s){case"LineString":return r&&(o=Zl(o)),pt([o],t);case"MultiLineString":var a=[],u=0;return o.forEach(function(f){if(r&&(f=Zl(f)),n){var l=$y(Ee(Jt(f)));l>u?(a.unshift(f),u=l):a.push(f)}else a.push(f)}),pt(a,t);default:throw new Error("geometry type "+s+" is not supported")}}function Zl(e){var t=e[0],r=t[0],n=t[1],i=e[e.length-1],o=i[0],s=i[1];return(r!==o||n!==s)&&e.push(t),e}function $y(e){var t=e[0],r=e[1],n=e[2],i=e[3];return Math.abs(t-n)*Math.abs(r-i)}function t0(e,t,r){var n=e.length,i=No(e[0],t),o=[],s,a,u,f,l;for(r||(r=[]),s=1;s<n;s++){for(a=e[s-1],u=e[s],f=l=No(u,t);;)if(i|f){if(i&f)break;i?(a=ju(a,u,i,t),i=No(a,t)):(u=ju(a,u,f,t),f=No(u,t))}else{o.push(a),f!==l?(o.push(u),s<n-1&&(r.push(o),o=[])):s===n-1&&o.push(u);break}i=l}return o.length&&r.push(o),r}function e0(e,t){var r,n,i,o,s,a,u;for(n=1;n<=8;n*=2){for(r=[],i=e[e.length-1],o=!(No(i,t)&n),s=0;s<e.length;s++)a=e[s],u=!(No(a,t)&n),u!==o&&r.push(ju(i,a,n,t)),u&&r.push(a),i=a,o=u;if(e=r,!e.length)break}return r}function ju(e,t,r,n){return r&8?[e[0]+(t[0]-e[0])*(n[3]-e[1])/(t[1]-e[1]),n[3]]:r&4?[e[0]+(t[0]-e[0])*(n[1]-e[1])/(t[1]-e[1]),n[1]]:r&2?[n[2],e[1]+(t[1]-e[1])*(n[2]-e[0])/(t[0]-e[0])]:r&1?[n[0],e[1]+(t[1]-e[1])*(n[0]-e[0])/(t[0]-e[0])]:null}function No(e,t){var r=0;return e[0]<t[0]?r|=1:e[0]>t[2]&&(r|=2),e[1]<t[1]?r|=4:e[1]>t[3]&&(r|=8),r}function Kx(e,t){var r=fe(e),n=r.type,i=e.type==="Feature"?e.properties:{},o=r.coordinates;switch(n){case"LineString":case"MultiLineString":var s=[];return n==="LineString"&&(o=[o]),o.forEach(function(a){t0(a,t,s)}),s.length===1?Jt(s[0],i):co(s,i);case"Polygon":return pt(Ql(o,t),i);case"MultiPolygon":return Qn(o.map(function(a){return Ql(a,t)}),i);default:throw new Error("geometry "+n+" not supported")}}function Ql(e,t){for(var r=[],n=0,i=e;n<i.length;n++){var o=i[n],s=e0(o,t);s.length>0&&((s[0][0]!==s[s.length-1][0]||s[0][1]!==s[s.length-1][1])&&s.push(s[0]),s.length>=4&&r.push(s))}return r}var jl=Object.prototype.toString,cp=function(t){var r=jl.call(t),n=r==="[object Arguments]";return n||(n=r!=="[object Array]"&&t!==null&&typeof t=="object"&&typeof t.length=="number"&&t.length>=0&&jl.call(t.callee)==="[object Function]"),n},Nu,$l;function r0(){if($l)return Nu;$l=1;var e;if(!Object.keys){var t=Object.prototype.hasOwnProperty,r=Object.prototype.toString,n=cp,i=Object.prototype.propertyIsEnumerable,o=!i.call({toString:null},"toString"),s=i.call(function(){},"prototype"),a=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],u=function(h){var p=h.constructor;return p&&p.prototype===h},f={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},l=function(){if(typeof window>"u")return!1;for(var h in window)try{if(!f["$"+h]&&t.call(window,h)&&window[h]!==null&&typeof window[h]=="object")try{u(window[h])}catch{return!0}}catch{return!0}return!1}(),c=function(h){if(typeof window>"u"||!l)return u(h);try{return u(h)}catch{return!1}};e=function(p){var v=p!==null&&typeof p=="object",y=r.call(p)==="[object Function]",E=n(p),x=v&&r.call(p)==="[object String]",g=[];if(!v&&!y&&!E)throw new TypeError("Object.keys called on a non-object");var d=s&&y;if(x&&p.length>0&&!t.call(p,0))for(var _=0;_<p.length;++_)g.push(String(_));if(E&&p.length>0)for(var w=0;w<p.length;++w)g.push(String(w));else for(var S in p)!(d&&S==="prototype")&&t.call(p,S)&&g.push(String(S));if(o)for(var C=c(p),N=0;N<a.length;++N)!(C&&a[N]==="constructor")&&t.call(p,a[N])&&g.push(a[N]);return g}}return Nu=e,Nu}var n0=Array.prototype.slice,i0=cp,tc=Object.keys,xa=tc?function(t){return tc(t)}:r0(),ec=Object.keys;xa.shim=function(){if(Object.keys){var t=function(){var r=Object.keys(arguments);return r&&r.length===arguments.length}(1,2);t||(Object.keys=function(n){return i0(n)?ec(n0.call(n)):ec(n)})}else Object.keys=xa;return Object.keys||xa};var hp=xa,pp=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var t={},r=Symbol("test"),n=Object(r);if(typeof r=="string"||Object.prototype.toString.call(r)!=="[object Symbol]"||Object.prototype.toString.call(n)!=="[object Symbol]")return!1;var i=42;t[r]=i;for(r in t)return!1;if(typeof Object.keys=="function"&&Object.keys(t).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(t).length!==0)return!1;var o=Object.getOwnPropertySymbols(t);if(o.length!==1||o[0]!==r||!Object.prototype.propertyIsEnumerable.call(t,r))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var s=Object.getOwnPropertyDescriptor(t,r);if(s.value!==i||s.enumerable!==!0)return!1}return!0},rc=typeof Symbol<"u"&&Symbol,o0=pp,s0=function(){return typeof rc!="function"||typeof Symbol!="function"||typeof rc("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:o0()},a0="Function.prototype.bind called on incompatible ",Pu=Array.prototype.slice,u0=Object.prototype.toString,f0="[object Function]",l0=function(t){var r=this;if(typeof r!="function"||u0.call(r)!==f0)throw new TypeError(a0+r);for(var n=Pu.call(arguments,1),i,o=function(){if(this instanceof i){var l=r.apply(this,n.concat(Pu.call(arguments)));return Object(l)===l?l:this}else return r.apply(t,n.concat(Pu.call(arguments)))},s=Math.max(0,r.length-n.length),a=[],u=0;u<s;u++)a.push("$"+u);if(i=Function("binder","return function ("+a.join(",")+"){ return binder.apply(this,arguments); }")(o),r.prototype){var f=function(){};f.prototype=r.prototype,i.prototype=new f,f.prototype=null}return i},c0=l0,Tf=Function.prototype.bind||c0,h0=Tf,p0=h0.call(Function.call,Object.prototype.hasOwnProperty),Zt,Rs=SyntaxError,gp=Function,Mo=TypeError,Lu=function(e){try{return gp('"use strict"; return ('+e+").constructor;")()}catch{}},Ki=Object.getOwnPropertyDescriptor;if(Ki)try{Ki({},"")}catch{Ki=null}var Mu=function(){throw new Mo},g0=Ki?function(){try{return arguments.callee,Mu}catch{try{return Ki(arguments,"callee").get}catch{return Mu}}}():Mu,Eo=s0(),Si=Object.getPrototypeOf||function(e){return e.__proto__},wo={},v0=typeof Uint8Array>"u"?Zt:Si(Uint8Array),Oo={"%AggregateError%":typeof AggregateError>"u"?Zt:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?Zt:ArrayBuffer,"%ArrayIteratorPrototype%":Eo?Si([][Symbol.iterator]()):Zt,"%AsyncFromSyncIteratorPrototype%":Zt,"%AsyncFunction%":wo,"%AsyncGenerator%":wo,"%AsyncGeneratorFunction%":wo,"%AsyncIteratorPrototype%":wo,"%Atomics%":typeof Atomics>"u"?Zt:Atomics,"%BigInt%":typeof BigInt>"u"?Zt:BigInt,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?Zt:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array>"u"?Zt:Float32Array,"%Float64Array%":typeof Float64Array>"u"?Zt:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?Zt:FinalizationRegistry,"%Function%":gp,"%GeneratorFunction%":wo,"%Int8Array%":typeof Int8Array>"u"?Zt:Int8Array,"%Int16Array%":typeof Int16Array>"u"?Zt:Int16Array,"%Int32Array%":typeof Int32Array>"u"?Zt:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":Eo?Si(Si([][Symbol.iterator]())):Zt,"%JSON%":typeof JSON=="object"?JSON:Zt,"%Map%":typeof Map>"u"?Zt:Map,"%MapIteratorPrototype%":typeof Map>"u"||!Eo?Zt:Si(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?Zt:Promise,"%Proxy%":typeof Proxy>"u"?Zt:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect>"u"?Zt:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?Zt:Set,"%SetIteratorPrototype%":typeof Set>"u"||!Eo?Zt:Si(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?Zt:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":Eo?Si(""[Symbol.iterator]()):Zt,"%Symbol%":Eo?Symbol:Zt,"%SyntaxError%":Rs,"%ThrowTypeError%":g0,"%TypedArray%":v0,"%TypeError%":Mo,"%Uint8Array%":typeof Uint8Array>"u"?Zt:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?Zt:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?Zt:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?Zt:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap>"u"?Zt:WeakMap,"%WeakRef%":typeof WeakRef>"u"?Zt:WeakRef,"%WeakSet%":typeof WeakSet>"u"?Zt:WeakSet},d0=function e(t){var r;if(t==="%AsyncFunction%")r=Lu("async function () {}");else if(t==="%GeneratorFunction%")r=Lu("function* () {}");else if(t==="%AsyncGeneratorFunction%")r=Lu("async function* () {}");else if(t==="%AsyncGenerator%"){var n=e("%AsyncGeneratorFunction%");n&&(r=n.prototype)}else if(t==="%AsyncIteratorPrototype%"){var i=e("%AsyncGenerator%");i&&(r=Si(i.prototype))}return Oo[t]=r,r},nc={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},Za=Tf,Na=p0,y0=Za.call(Function.call,Array.prototype.concat),m0=Za.call(Function.apply,Array.prototype.splice),ic=Za.call(Function.call,String.prototype.replace),Pa=Za.call(Function.call,String.prototype.slice),_0=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,E0=/\\(\\)?/g,x0=function(t){var r=Pa(t,0,1),n=Pa(t,-1);if(r==="%"&&n!=="%")throw new Rs("invalid intrinsic syntax, expected closing `%`");if(n==="%"&&r!=="%")throw new Rs("invalid intrinsic syntax, expected opening `%`");var i=[];return ic(t,_0,function(o,s,a,u){i[i.length]=a?ic(u,E0,"$1"):s||o}),i},w0=function(t,r){var n=t,i;if(Na(nc,n)&&(i=nc[n],n="%"+i[0]+"%"),Na(Oo,n)){var o=Oo[n];if(o===wo&&(o=d0(n)),typeof o>"u"&&!r)throw new Mo("intrinsic "+t+" exists, but is not available. Please file an issue!");return{alias:i,name:n,value:o}}throw new Rs("intrinsic "+t+" does not exist!")},vp=function(t,r){if(typeof t!="string"||t.length===0)throw new Mo("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof r!="boolean")throw new Mo('"allowMissing" argument must be a boolean');var n=x0(t),i=n.length>0?n[0]:"",o=w0("%"+i+"%",r),s=o.name,a=o.value,u=!1,f=o.alias;f&&(i=f[0],m0(n,y0([0,1],f)));for(var l=1,c=!0;l<n.length;l+=1){var h=n[l],p=Pa(h,0,1),v=Pa(h,-1);if((p==='"'||p==="'"||p==="`"||v==='"'||v==="'"||v==="`")&&p!==v)throw new Rs("property names with quotes must have matching quotes");if((h==="constructor"||!c)&&(u=!0),i+="."+h,s="%"+i+"%",Na(Oo,s))a=Oo[s];else if(a!=null){if(!(h in a)){if(!r)throw new Mo("base intrinsic for "+t+" exists, but the property is not available.");return}if(Ki&&l+1>=n.length){var y=Ki(a,h);c=!!y,c&&"get"in y&&!("originalValue"in y.get)?a=y.get:a=a[h]}else c=Na(a,h),a=a[h];c&&!u&&(Oo[s]=a)}}return a},dp={exports:{}};(function(e){var t=Tf,r=vp,n=r("%Function.prototype.apply%"),i=r("%Function.prototype.call%"),o=r("%Reflect.apply%",!0)||t.call(i,n),s=r("%Object.getOwnPropertyDescriptor%",!0),a=r("%Object.defineProperty%",!0),u=r("%Math.max%");if(a)try{a({},"a",{value:1})}catch{a=null}e.exports=function(c){var h=o(t,i,arguments);if(s&&a){var p=s(h,"length");p.configurable&&a(h,"length",{value:1+u(0,c.length-(arguments.length-1))})}return h};var f=function(){return o(t,n,arguments)};a?a(e.exports,"apply",{value:f}):e.exports.apply=f})(dp);var Ff=dp.exports,yp=vp,mp=Ff,I0=mp(yp("String.prototype.indexOf")),_p=function(t,r){var n=yp(t,!!r);return typeof n=="function"&&I0(t,".prototype.")>-1?mp(n):n},C0=typeof Symbol=="function"&&typeof Symbol.toStringTag=="symbol",S0=_p,$u=S0("Object.prototype.toString"),Qa=function(t){return C0&&t&&typeof t=="object"&&Symbol.toStringTag in t?!1:$u(t)==="[object Arguments]"},Ep=function(t){return Qa(t)?!0:t!==null&&typeof t=="object"&&typeof t.length=="number"&&t.length>=0&&$u(t)!=="[object Array]"&&$u(t.callee)==="[object Function]"},N0=function(){return Qa(arguments)}();Qa.isLegacyArguments=Ep;var P0=N0?Qa:Ep,L0=hp,M0=typeof Symbol=="function"&&typeof Symbol("foo")=="symbol",O0=Object.prototype.toString,R0=Array.prototype.concat,Bf=Object.defineProperty,A0=function(e){return typeof e=="function"&&O0.call(e)==="[object Function]"},b0=function(){var e={};try{Bf(e,"x",{enumerable:!1,value:e});for(var t in e)return!1;return e.x===e}catch{return!1}},xp=Bf&&b0(),D0=function(e,t,r,n){t in e&&(!A0(n)||!n())||(xp?Bf(e,t,{configurable:!0,enumerable:!1,value:r,writable:!0}):e[t]=r)},wp=function(e,t){var r=arguments.length>2?arguments[2]:{},n=L0(t);M0&&(n=R0.call(n,Object.getOwnPropertySymbols(t)));for(var i=0;i<n.length;i+=1)D0(e,n[i],t[n[i]],r[n[i]])};wp.supportsDescriptors=!!xp;var $s=wp,oc=function(e){return e!==e},Ip=function(t,r){return t===0&&r===0?1/t===1/r:!!(t===r||oc(t)&&oc(r))},T0=Ip,Cp=function(){return typeof Object.is=="function"?Object.is:T0},F0=Cp,B0=$s,G0=function(){var t=F0();return B0(Object,{is:t},{is:function(){return Object.is!==t}}),t},k0=$s,q0=Ff,z0=Ip,Sp=Cp,U0=G0,Np=q0(Sp(),Object);k0(Np,{getPolyfill:Sp,implementation:z0,shim:U0});var X0=Np,tf=_p,Y0=pp(),Pp=Y0&&!!Symbol.toStringTag,Lp,Mp,ef,rf;if(Pp){Lp=tf("Object.prototype.hasOwnProperty"),Mp=tf("RegExp.prototype.exec"),ef={};var Ou=function(){throw ef};rf={toString:Ou,valueOf:Ou},typeof Symbol.toPrimitive=="symbol"&&(rf[Symbol.toPrimitive]=Ou)}var V0=tf("Object.prototype.toString"),H0=Object.getOwnPropertyDescriptor,W0="[object RegExp]",J0=Pp?function(t){if(!t||typeof t!="object")return!1;var r=H0(t,"lastIndex"),n=r&&Lp(r,"value");if(!n)return!1;try{Mp(t,rf)}catch(i){return i===ef}}:function(t){return!t||typeof t!="object"&&typeof t!="function"?!1:V0(t)===W0},K0=Object,Z0=TypeError,Op=function(){if(this!=null&&this!==K0(this))throw new Z0("RegExp.prototype.flags getter called on non-object");var t="";return this.global&&(t+="g"),this.ignoreCase&&(t+="i"),this.multiline&&(t+="m"),this.dotAll&&(t+="s"),this.unicode&&(t+="u"),this.sticky&&(t+="y"),t},Q0=Op,j0=$s.supportsDescriptors,$0=Object.getOwnPropertyDescriptor,tm=TypeError,Rp=function(){if(!j0)throw new tm("RegExp.prototype.flags requires a true ES5 environment that supports property descriptors");if(/a/mig.flags==="gim"){var t=$0(RegExp.prototype,"flags");if(t&&typeof t.get=="function"&&typeof/a/.dotAll=="boolean")return t.get}return Q0},em=$s.supportsDescriptors,rm=Rp,nm=Object.getOwnPropertyDescriptor,im=Object.defineProperty,om=TypeError,sc=Object.getPrototypeOf,sm=/a/,am=function(){if(!em||!sc)throw new om("RegExp.prototype.flags requires a true ES5 environment that supports property descriptors");var t=rm(),r=sc(sm),n=nm(r,"flags");return(!n||n.get!==t)&&im(r,"flags",{configurable:!0,enumerable:!1,get:t}),t},um=$s,fm=Ff,Ap=Op,lm=Rp,cm=am,bp=fm(Ap);um(bp,{getPolyfill:lm,implementation:Ap,shim:cm});var hm=bp,pm=Date.prototype.getDay,gm=function(t){try{return pm.call(t),!0}catch{return!1}},vm=Object.prototype.toString,dm="[object Date]",ym=typeof Symbol=="function"&&!!Symbol.toStringTag,mm=function(t){return typeof t!="object"||t===null?!1:ym?gm(t):vm.call(t)===dm},ac=hp,uc=P0,fc=X0,lc=J0,cc=hm,hc=mm,pc=Date.prototype.getTime;function Dp(e,t,r){var n=r||{};return(n.strict?fc(e,t):e===t)?!0:!e||!t||typeof e!="object"&&typeof t!="object"?n.strict?fc(e,t):e==t:_m(e,t,n)}function gc(e){return e==null}function vc(e){return!(!e||typeof e!="object"||typeof e.length!="number"||typeof e.copy!="function"||typeof e.slice!="function"||e.length>0&&typeof e[0]!="number")}function _m(e,t,r){var n,i;if(typeof e!=typeof t||gc(e)||gc(t)||e.prototype!==t.prototype||uc(e)!==uc(t))return!1;var o=lc(e),s=lc(t);if(o!==s)return!1;if(o||s)return e.source===t.source&&cc(e)===cc(t);if(hc(e)&&hc(t))return pc.call(e)===pc.call(t);var a=vc(e),u=vc(t);if(a!==u)return!1;if(a||u){if(e.length!==t.length)return!1;for(n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}if(typeof e!=typeof t)return!1;try{var f=ac(e),l=ac(t)}catch{return!1}if(f.length!==l.length)return!1;for(f.sort(),l.sort(),n=f.length-1;n>=0;n--)if(f[n]!=l[n])return!1;for(n=f.length-1;n>=0;n--)if(i=f[n],!Dp(e[i],t[i],r))return!1;return!0}var Tp=Dp;const Es=Ei(Tp);function Em(e,t,r){if(r===void 0&&(r={}),r=r||{},!re(r))throw new Error("options is invalid");var n=r.tolerance||0,i=[],o=js(),s=To(e);o.load(s);var a;return Pi(t,function(u){var f=!1;Qt(o.search(u),function(l){if(f===!1){var c=ot(u).sort(),h=ot(l).sort();Es(c,h)||(n===0?Hr(c[0],l)&&Hr(c[1],l):Ji(l,c[0]).properties.dist<=n&&Ji(l,c[1]).properties.dist<=n)?(f=!0,a?a=Ru(a,u):a=u):(n===0?Hr(h[0],u)&&Hr(h[1],u):Ji(u,h[0]).properties.dist<=n&&Ji(u,h[1]).properties.dist<=n)&&(a?a=Ru(a,l):a=l)}}),f===!1&&a&&(i.push(a),a=void 0)}),a&&i.push(a),et(i)}function Ru(e,t){var r=ot(t),n=ot(e),i=n[0],o=n[n.length-1],s=e.geometry.coordinates;return Es(r[0],i)?s.unshift(r[1]):Es(r[0],o)?s.push(r[1]):Es(r[1],i)?s.unshift(r[0]):Es(r[1],o)&&s.push(r[0]),e}function Zx(e,t,r,n,i){if(i=i||{},!re(i))throw new Error("options is invalid");var o=i.properties;if(!e)throw new Error("center is required");if(r==null)throw new Error("bearing1 is required");if(n==null)throw new Error("bearing2 is required");if(!t)throw new Error("radius is required");if(typeof i!="object")throw new Error("options must be an object");if(dc(r)===dc(n))return Zh(e,t,i);var s=ot(e),a=Qy(e,t,r,n,i),u=[[s]];return be(a,function(f){u[0].push(f)}),u[0].push(s),pt(u,o)}function dc(e){var t=e%360;return t<0&&(t+=360),t}function Fo(e,t,r){r===void 0&&(r={});var n;r.final?n=yc(se(t),se(e)):n=yc(se(e),se(t));var i=n>180?-(360-n):n;return i}function yc(e,t){var r=tr(e[1]),n=tr(t[1]),i=tr(t[0]-e[0]);i>Math.PI&&(i-=2*Math.PI),i<-Math.PI&&(i+=2*Math.PI);var o=Math.log(Math.tan(n/2+Math.PI/4)/Math.tan(r/2+Math.PI/4)),s=Math.atan2(i,o);return(bo(s)+360)%360}function As(e,t,r,n){n===void 0&&(n={});var i=t<0,o=Qs(Math.abs(t),n.units,"meters");i&&(o=-Math.abs(o));var s=se(e),a=xm(s,o,r);return a[0]+=a[0]-s[0]>180?-360:s[0]-a[0]>180?360:0,gt(a,n.properties)}function xm(e,t,r,n){n=n===void 0?Ve:Number(n);var i=t/n,o=e[0]*Math.PI/180,s=tr(e[1]),a=tr(r),u=i*Math.cos(a),f=s+u;Math.abs(f)>Math.PI/2&&(f=f>0?Math.PI-f:-Math.PI-f);var l=Math.log(Math.tan(f/2+Math.PI/4)/Math.tan(s/2+Math.PI/4)),c=Math.abs(l)>1e-11?u/l:Math.cos(s),h=i*Math.sin(a)/c,p=o+h;return[(p*180/Math.PI+540)%360-180,f*180/Math.PI]}function Qx(e,t){var r=ot(e),n=ot(t),i,o,s,a,u=Ee(t),f=0,l=null;r[0]>u[0]&&r[0]<u[2]&&r[1]>u[1]&&r[1]<u[3]&&(l=tp(e,Mf(t)),f=l.properties.featureIndex);var c=Br(t);switch(c){case"Polygon":i=n[0][f],o=n[0][0],l!==null&&l.geometry.coordinates[1]<r[1]&&(o=n[0][f]),a=bs(n[0][0],n[0][n[0].length-1],r);var h=mc(n[0],r,a,s,i,o);i=h[0],o=h[1];break;case"MultiPolygon":for(var p=0,v=0,y=0,E=0;E<n[0].length;E++){p=E;for(var x=!1,g=0;g<n[0][E].length;g++){if(v=g,y===f){x=!0;break}y++}if(x)break}i=n[0][p][v],o=n[0][p][v],a=bs(n[0][0][0],n[0][0][n[0][0].length-1],r),n.forEach(function(d){var _=mc(d[0],r,a,s,i,o);i=_[0],o=_[1]});break}return et([gt(i),gt(o)])}function mc(e,t,r,n,i,o){for(var s=0;s<e.length;s++){var a=e[s],u=e[s+1];s===e.length-1&&(u=e[0]),n=bs(a,u,t),r<=0&&n>0?Im(t,a,i)||(i=a):r>0&&n<=0&&(wm(t,a,o)||(o=a)),r=n}return[i,o]}function wm(e,t,r){return bs(e,t,r)>0}function Im(e,t,r){return bs(e,t,r)<0}function bs(e,t,r){return(t[0]-e[0])*(r[1]-e[1])-(r[0]-e[0])*(t[1]-e[1])}function nf(e){for(var t=ot(e),r=0,n=1,i,o;n<t.length;)i=o||t[0],o=t[n],r+=(o[0]-i[0])*(o[1]+i[1]),n++;return r>0}function jx(e,t){if(t=t||{},!re(t))throw new Error("options is invalid");var r=t.reverse||!1,n=t.mutate||!1;if(!e)throw new Error("<geojson> is required");if(typeof r!="boolean")throw new Error("<reverse> must be a boolean");if(typeof n!="boolean")throw new Error("<mutate> must be a boolean");n===!1&&(e=or(e));var i=[];switch(e.type){case"GeometryCollection":return wn(e,function(o){wa(o,r)}),e;case"FeatureCollection":return Qt(e,function(o){Qt(wa(o,r),function(s){i.push(s)})}),et(i)}return wa(e,r)}function wa(e,t){var r=e.type==="Feature"?e.geometry.type:e.type;switch(r){case"GeometryCollection":return wn(e,function(n){wa(n,t)}),e;case"LineString":return _c(ot(e),t),e;case"Polygon":return Ec(ot(e),t),e;case"MultiLineString":return ot(e).forEach(function(n){_c(n,t)}),e;case"MultiPolygon":return ot(e).forEach(function(n){Ec(n,t)}),e;case"Point":case"MultiPoint":return e}}function _c(e,t){nf(e)===t&&e.reverse()}function Ec(e,t){nf(e[0])!==t&&e[0].reverse();for(var r=1;r<e.length;r++)nf(e[r])===t&&e[r].reverse()}function Cm(e,t){if(t=t||{},!re(t))throw new Error("options is invalid");var r=t.zProperty||"elevation",n=t.flip,i=t.flags;Xi(e,"Point","input must contain Points");for(var o=Sm(e,n),s=[],a=0;a<o.length;a++){for(var u=o[a],f=[],l=0;l<u.length;l++){var c=u[l];c.properties[r]?f.push(c.properties[r]):f.push(0),i===!0&&(c.properties.matrixPosition=[a,l])}s.push(f)}return s}function Sm(e,t){var r={};Qt(e,function(o){var s=ot(o)[1];r[s]||(r[s]=[]),r[s].push(o)});var n=Object.keys(r).map(function(o){var s=r[o],a=s.sort(function(u,f){return ot(u)[0]-ot(f)[0]});return a}),i=n.sort(function(o,s){return t?ot(o[0])[1]-ot(s[0])[1]:ot(s[0])[1]-ot(o[0])[1]});return i}/*!
 * @license GNU Affero General Public License.
 * Copyright (c) 2015, 2015 Ronny Lorenz <ronny@tbi.univie.ac.at>
 * v. 1.2.0
 * https://github.com/RaumZeit/MarchingSquares.js
 *
 * MarchingSquaresJS is free software: you can redistribute it and/or modify
 * it under the terms of the GNU Affero General Public License as published by
 * the Free Software Foundation, either version 3 of the License, or
 * (at your option) any later version.
 *
 * MarchingSquaresJS is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU Affero General Public License for more details.
 *
 * As additional permission under GNU Affero General Public License version 3
 * section 7, third-party projects (personal or commercial) may distribute,
 * include, or link against UNMODIFIED VERSIONS of MarchingSquaresJS without the
 * requirement that said third-party project for that reason alone becomes
 * subject to any requirement of the GNU Affero General Public License version 3.
 * Any modifications to MarchingSquaresJS, however, must be shared with the public
 * and made available.
 *
 * In summary this:
 * - allows you to use MarchingSquaresJS at no cost
 * - allows you to use MarchingSquaresJS for both personal and commercial purposes
 * - allows you to distribute UNMODIFIED VERSIONS of MarchingSquaresJS under any
 *   license as long as this license notice is included
 * - enables you to keep the source code of your program that uses MarchingSquaresJS
 *   undisclosed
 * - forces you to share any modifications you have made to MarchingSquaresJS,
 *   e.g. bug-fixes
 *
 * You should have received a copy of the GNU Affero General Public License
 * along with MarchingSquaresJS.  If not, see <http://www.gnu.org/licenses/>.
 */var xc={successCallback:null,verbose:!1,polygons:!1},Hi={};function Nm(e,t,r,n){n=n||{};for(var i=Object.keys(xc),o=0;o<i.length;o++){var s=i[o],a=n[s];a=typeof a<"u"&&a!==null?a:xc[s],Hi[s]=a}Hi.verbose&&console.log("MarchingSquaresJS-isoBands: computing isobands for ["+t+":"+(t+r)+"]");var u=o_(e,t,r),f;return Hi.polygons?(Hi.verbose&&console.log("MarchingSquaresJS-isoBands: returning single polygons for each grid cell"),f=c_(u)):(Hi.verbose&&console.log("MarchingSquaresJS-isoBands: returning polygon paths for entire data grid"),f=s_(u)),typeof Hi.successCallback=="function"&&Hi.successCallback(f),f}var pr=64,fn=16,He=4,je=1,mt=[],_t=[],Et=[],xt=[],wt=[],It=[],Ct=[],St=[],Nt=[],Pt=[],Lt=[],Mt=[],Ot=[],Rt=[],At=[],bt=[],Dt=[],Tt=[],Ft=[],Bt=[],Gt=[],kt=[],qt=[],zt=[];Ct[85]=Pt[85]=-1;St[85]=Lt[85]=0;Nt[85]=Mt[85]=1;Ft[85]=kt[85]=1;Bt[85]=qt[85]=0;Gt[85]=zt[85]=1;mt[85]=xt[85]=0;_t[85]=wt[85]=-1;Et[85]=At[85]=0;bt[85]=Ot[85]=0;Dt[85]=Rt[85]=1;It[85]=Tt[85]=1;kt[1]=kt[169]=0;qt[1]=qt[169]=-1;zt[1]=zt[169]=0;Ot[1]=Ot[169]=-1;Rt[1]=Rt[169]=0;At[1]=At[169]=0;Pt[4]=Pt[166]=0;Lt[4]=Lt[166]=-1;Mt[4]=Mt[166]=1;bt[4]=bt[166]=1;Dt[4]=Dt[166]=0;Tt[4]=Tt[166]=0;Ct[16]=Ct[154]=0;St[16]=St[154]=1;Nt[16]=Nt[154]=1;xt[16]=xt[154]=1;wt[16]=wt[154]=0;It[16]=It[154]=1;Ft[64]=Ft[106]=0;Bt[64]=Bt[106]=1;Gt[64]=Gt[106]=0;mt[64]=mt[106]=-1;_t[64]=_t[106]=0;Et[64]=Et[106]=1;Ft[2]=Ft[168]=0;Bt[2]=Bt[168]=-1;Gt[2]=Gt[168]=1;kt[2]=kt[168]=0;qt[2]=qt[168]=-1;zt[2]=zt[168]=0;Ot[2]=Ot[168]=-1;Rt[2]=Rt[168]=0;At[2]=At[168]=0;bt[2]=bt[168]=-1;Dt[2]=Dt[168]=0;Tt[2]=Tt[168]=1;Ct[8]=Ct[162]=0;St[8]=St[162]=-1;Nt[8]=Nt[162]=0;Pt[8]=Pt[162]=0;Lt[8]=Lt[162]=-1;Mt[8]=Mt[162]=1;Ot[8]=Ot[162]=1;Rt[8]=Rt[162]=0;At[8]=At[162]=1;bt[8]=bt[162]=1;Dt[8]=Dt[162]=0;Tt[8]=Tt[162]=0;Ct[32]=Ct[138]=0;St[32]=St[138]=1;Nt[32]=Nt[138]=1;Pt[32]=Pt[138]=0;Lt[32]=Lt[138]=1;Mt[32]=Mt[138]=0;mt[32]=mt[138]=1;_t[32]=_t[138]=0;Et[32]=Et[138]=0;xt[32]=xt[138]=1;wt[32]=wt[138]=0;It[32]=It[138]=1;kt[128]=kt[42]=0;qt[128]=qt[42]=1;zt[128]=zt[42]=1;Ft[128]=Ft[42]=0;Bt[128]=Bt[42]=1;Gt[128]=Gt[42]=0;mt[128]=mt[42]=-1;_t[128]=_t[42]=0;Et[128]=Et[42]=1;xt[128]=xt[42]=-1;wt[128]=wt[42]=0;It[128]=It[42]=0;Pt[5]=Pt[165]=-1;Lt[5]=Lt[165]=0;Mt[5]=Mt[165]=0;kt[5]=kt[165]=1;qt[5]=qt[165]=0;zt[5]=zt[165]=0;bt[20]=bt[150]=0;Dt[20]=Dt[150]=1;Tt[20]=Tt[150]=1;xt[20]=xt[150]=0;wt[20]=wt[150]=-1;It[20]=It[150]=1;Ct[80]=Ct[90]=-1;St[80]=St[90]=0;Nt[80]=Nt[90]=1;Ft[80]=Ft[90]=1;Bt[80]=Bt[90]=0;Gt[80]=Gt[90]=1;Ot[65]=Ot[105]=0;Rt[65]=Rt[105]=1;At[65]=At[105]=0;mt[65]=mt[105]=0;_t[65]=_t[105]=-1;Et[65]=Et[105]=0;Ct[160]=Ct[10]=-1;St[160]=St[10]=0;Nt[160]=Nt[10]=1;Pt[160]=Pt[10]=-1;Lt[160]=Lt[10]=0;Mt[160]=Mt[10]=0;kt[160]=kt[10]=1;qt[160]=qt[10]=0;zt[160]=zt[10]=0;Ft[160]=Ft[10]=1;Bt[160]=Bt[10]=0;Gt[160]=Gt[10]=1;bt[130]=bt[40]=0;Dt[130]=Dt[40]=1;Tt[130]=Tt[40]=1;Ot[130]=Ot[40]=0;Rt[130]=Rt[40]=1;At[130]=At[40]=0;mt[130]=mt[40]=0;_t[130]=_t[40]=-1;Et[130]=Et[40]=0;xt[130]=xt[40]=0;wt[130]=wt[40]=-1;It[130]=It[40]=1;Pt[37]=Pt[133]=0;Lt[37]=Lt[133]=1;Mt[37]=Mt[133]=1;kt[37]=kt[133]=0;qt[37]=qt[133]=1;zt[37]=zt[133]=0;mt[37]=mt[133]=-1;_t[37]=_t[133]=0;Et[37]=Et[133]=0;xt[37]=xt[133]=1;wt[37]=wt[133]=0;It[37]=It[133]=0;bt[148]=bt[22]=-1;Dt[148]=Dt[22]=0;Tt[148]=Tt[22]=0;kt[148]=kt[22]=0;qt[148]=qt[22]=-1;zt[148]=zt[22]=1;Ft[148]=Ft[22]=0;Bt[148]=Bt[22]=1;Gt[148]=Gt[22]=1;xt[148]=xt[22]=-1;wt[148]=wt[22]=0;It[148]=It[22]=1;Ct[82]=Ct[88]=0;St[82]=St[88]=-1;Nt[82]=Nt[88]=1;bt[82]=bt[88]=1;Dt[82]=Dt[88]=0;Tt[82]=Tt[88]=1;Ot[82]=Ot[88]=-1;Rt[82]=Rt[88]=0;At[82]=At[88]=1;Ft[82]=Ft[88]=0;Bt[82]=Bt[88]=-1;Gt[82]=Gt[88]=0;Ct[73]=Ct[97]=0;St[73]=St[97]=1;Nt[73]=Nt[97]=0;Pt[73]=Pt[97]=0;Lt[73]=Lt[97]=-1;Mt[73]=Mt[97]=0;Ot[73]=Ot[97]=1;Rt[73]=Rt[97]=0;At[73]=At[97]=0;mt[73]=mt[97]=1;_t[73]=_t[97]=0;Et[73]=Et[97]=1;Ct[145]=Ct[25]=0;St[145]=St[25]=-1;Nt[145]=Nt[25]=0;Ot[145]=Ot[25]=1;Rt[145]=Rt[25]=0;At[145]=At[25]=1;kt[145]=kt[25]=0;qt[145]=qt[25]=1;zt[145]=zt[25]=1;xt[145]=xt[25]=-1;wt[145]=wt[25]=0;It[145]=It[25]=0;Pt[70]=Pt[100]=0;Lt[70]=Lt[100]=1;Mt[70]=Mt[100]=0;bt[70]=bt[100]=-1;Dt[70]=Dt[100]=0;Tt[70]=Tt[100]=1;Ft[70]=Ft[100]=0;Bt[70]=Bt[100]=-1;Gt[70]=Gt[100]=1;mt[70]=mt[100]=1;_t[70]=_t[100]=0;Et[70]=Et[100]=0;Pt[101]=Pt[69]=0;Lt[101]=Lt[69]=1;Mt[101]=Mt[69]=0;mt[101]=mt[69]=1;_t[101]=_t[69]=0;Et[101]=Et[69]=0;kt[149]=kt[21]=0;qt[149]=qt[21]=1;zt[149]=zt[21]=1;xt[149]=xt[21]=-1;wt[149]=wt[21]=0;It[149]=It[21]=0;bt[86]=bt[84]=-1;Dt[86]=Dt[84]=0;Tt[86]=Tt[84]=1;Ft[86]=Ft[84]=0;Bt[86]=Bt[84]=-1;Gt[86]=Gt[84]=1;Ct[89]=Ct[81]=0;St[89]=St[81]=-1;Nt[89]=Nt[81]=0;Ot[89]=Ot[81]=1;Rt[89]=Rt[81]=0;At[89]=At[81]=1;Ct[96]=Ct[74]=0;St[96]=St[74]=1;Nt[96]=Nt[74]=0;Pt[96]=Pt[74]=-1;Lt[96]=Lt[74]=0;Mt[96]=Mt[74]=1;Ft[96]=Ft[74]=1;Bt[96]=Bt[74]=0;Gt[96]=Gt[74]=0;mt[96]=mt[74]=1;_t[96]=_t[74]=0;Et[96]=Et[74]=1;Ct[24]=Ct[146]=0;St[24]=St[146]=-1;Nt[24]=Nt[146]=1;bt[24]=bt[146]=1;Dt[24]=Dt[146]=0;Tt[24]=Tt[146]=1;Ot[24]=Ot[146]=0;Rt[24]=Rt[146]=1;At[24]=At[146]=1;xt[24]=xt[146]=0;wt[24]=wt[146]=-1;It[24]=It[146]=0;Pt[6]=Pt[164]=-1;Lt[6]=Lt[164]=0;Mt[6]=Mt[164]=1;bt[6]=bt[164]=-1;Dt[6]=Dt[164]=0;Tt[6]=Tt[164]=0;kt[6]=kt[164]=0;qt[6]=qt[164]=-1;zt[6]=zt[164]=1;Ft[6]=Ft[164]=1;Bt[6]=Bt[164]=0;Gt[6]=Gt[164]=0;Ot[129]=Ot[41]=0;Rt[129]=Rt[41]=1;At[129]=At[41]=1;kt[129]=kt[41]=0;qt[129]=qt[41]=1;zt[129]=zt[41]=0;mt[129]=mt[41]=-1;_t[129]=_t[41]=0;Et[129]=Et[41]=0;xt[129]=xt[41]=0;wt[129]=wt[41]=-1;It[129]=It[41]=0;bt[66]=bt[104]=0;Dt[66]=Dt[104]=1;Tt[66]=Tt[104]=0;Ot[66]=Ot[104]=-1;Rt[66]=Rt[104]=0;At[66]=At[104]=1;Ft[66]=Ft[104]=0;Bt[66]=Bt[104]=-1;Gt[66]=Gt[104]=0;mt[66]=mt[104]=0;_t[66]=_t[104]=-1;Et[66]=Et[104]=1;Ct[144]=Ct[26]=-1;St[144]=St[26]=0;Nt[144]=Nt[26]=0;kt[144]=kt[26]=1;qt[144]=qt[26]=0;zt[144]=zt[26]=1;Ft[144]=Ft[26]=0;Bt[144]=Bt[26]=1;Gt[144]=Gt[26]=1;xt[144]=xt[26]=-1;wt[144]=wt[26]=0;It[144]=It[26]=1;Pt[36]=Pt[134]=0;Lt[36]=Lt[134]=1;Mt[36]=Mt[134]=1;bt[36]=bt[134]=0;Dt[36]=Dt[134]=1;Tt[36]=Tt[134]=0;mt[36]=mt[134]=0;_t[36]=_t[134]=-1;Et[36]=Et[134]=1;xt[36]=xt[134]=1;wt[36]=wt[134]=0;It[36]=It[134]=0;Ct[9]=Ct[161]=-1;St[9]=St[161]=0;Nt[9]=Nt[161]=0;Pt[9]=Pt[161]=0;Lt[9]=Lt[161]=-1;Mt[9]=Mt[161]=0;Ot[9]=Ot[161]=1;Rt[9]=Rt[161]=0;At[9]=At[161]=0;kt[9]=kt[161]=1;qt[9]=qt[161]=0;zt[9]=zt[161]=1;Ct[136]=0;St[136]=1;Nt[136]=1;Pt[136]=0;Lt[136]=1;Mt[136]=0;bt[136]=-1;Dt[136]=0;Tt[136]=1;Ot[136]=-1;Rt[136]=0;At[136]=0;kt[136]=0;qt[136]=-1;zt[136]=0;Ft[136]=0;Bt[136]=-1;Gt[136]=1;mt[136]=1;_t[136]=0;Et[136]=0;xt[136]=1;wt[136]=0;It[136]=1;Ct[34]=0;St[34]=-1;Nt[34]=0;Pt[34]=0;Lt[34]=-1;Mt[34]=1;bt[34]=1;Dt[34]=0;Tt[34]=0;Ot[34]=1;Rt[34]=0;At[34]=1;kt[34]=0;qt[34]=1;zt[34]=1;Ft[34]=0;Bt[34]=1;Gt[34]=0;mt[34]=-1;_t[34]=0;Et[34]=1;xt[34]=-1;wt[34]=0;It[34]=0;Ct[35]=0;St[35]=1;Nt[35]=1;Pt[35]=0;Lt[35]=-1;Mt[35]=1;bt[35]=1;Dt[35]=0;Tt[35]=0;Ot[35]=-1;Rt[35]=0;At[35]=0;kt[35]=0;qt[35]=-1;zt[35]=0;Ft[35]=0;Bt[35]=1;Gt[35]=0;mt[35]=-1;_t[35]=0;Et[35]=1;xt[35]=1;wt[35]=0;It[35]=1;Ct[153]=0;St[153]=1;Nt[153]=1;Ot[153]=-1;Rt[153]=0;At[153]=0;kt[153]=0;qt[153]=-1;zt[153]=0;xt[153]=1;wt[153]=0;It[153]=1;Pt[102]=0;Lt[102]=-1;Mt[102]=1;bt[102]=1;Dt[102]=0;Tt[102]=0;Ft[102]=0;Bt[102]=1;Gt[102]=0;mt[102]=-1;_t[102]=0;Et[102]=1;Ct[155]=0;St[155]=-1;Nt[155]=0;Ot[155]=1;Rt[155]=0;At[155]=1;kt[155]=0;qt[155]=1;zt[155]=1;xt[155]=-1;wt[155]=0;It[155]=0;Pt[103]=0;Lt[103]=1;Mt[103]=0;bt[103]=-1;Dt[103]=0;Tt[103]=1;Ft[103]=0;Bt[103]=-1;Gt[103]=1;mt[103]=1;_t[103]=0;Et[103]=0;Ct[152]=0;St[152]=1;Nt[152]=1;bt[152]=-1;Dt[152]=0;Tt[152]=1;Ot[152]=-1;Rt[152]=0;At[152]=0;kt[152]=0;qt[152]=-1;zt[152]=0;Ft[152]=0;Bt[152]=-1;Gt[152]=1;xt[152]=1;wt[152]=0;It[152]=1;Ct[156]=0;St[156]=-1;Nt[156]=1;bt[156]=1;Dt[156]=0;Tt[156]=1;Ot[156]=-1;Rt[156]=0;At[156]=0;kt[156]=0;qt[156]=-1;zt[156]=0;Ft[156]=0;Bt[156]=1;Gt[156]=1;xt[156]=-1;wt[156]=0;It[156]=1;Ct[137]=0;St[137]=1;Nt[137]=1;Pt[137]=0;Lt[137]=1;Mt[137]=0;Ot[137]=-1;Rt[137]=0;At[137]=0;kt[137]=0;qt[137]=-1;zt[137]=0;mt[137]=1;_t[137]=0;Et[137]=0;xt[137]=1;wt[137]=0;It[137]=1;Ct[139]=0;St[139]=1;Nt[139]=1;Pt[139]=0;Lt[139]=-1;Mt[139]=0;Ot[139]=1;Rt[139]=0;At[139]=0;kt[139]=0;qt[139]=1;zt[139]=0;mt[139]=-1;_t[139]=0;Et[139]=0;xt[139]=1;wt[139]=0;It[139]=1;Ct[98]=0;St[98]=-1;Nt[98]=0;Pt[98]=0;Lt[98]=-1;Mt[98]=1;bt[98]=1;Dt[98]=0;Tt[98]=0;Ot[98]=1;Rt[98]=0;At[98]=1;Ft[98]=0;Bt[98]=1;Gt[98]=0;mt[98]=-1;_t[98]=0;Et[98]=1;Ct[99]=0;St[99]=1;Nt[99]=0;Pt[99]=0;Lt[99]=-1;Mt[99]=1;bt[99]=1;Dt[99]=0;Tt[99]=0;Ot[99]=-1;Rt[99]=0;At[99]=1;Ft[99]=0;Bt[99]=-1;Gt[99]=0;mt[99]=1;_t[99]=0;Et[99]=1;Pt[38]=0;Lt[38]=-1;Mt[38]=1;bt[38]=1;Dt[38]=0;Tt[38]=0;kt[38]=0;qt[38]=1;zt[38]=1;Ft[38]=0;Bt[38]=1;Gt[38]=0;mt[38]=-1;_t[38]=0;Et[38]=1;xt[38]=-1;wt[38]=0;It[38]=0;Pt[39]=0;Lt[39]=1;Mt[39]=1;bt[39]=-1;Dt[39]=0;Tt[39]=0;kt[39]=0;qt[39]=-1;zt[39]=1;Ft[39]=0;Bt[39]=1;Gt[39]=0;mt[39]=-1;_t[39]=0;Et[39]=1;xt[39]=1;wt[39]=0;It[39]=0;var Gf=function(e){return[[e.bottomleft,0],[0,0],[0,e.leftbottom]]},kf=function(e){return[[1,e.rightbottom],[1,0],[e.bottomright,0]]},qf=function(e){return[[e.topright,1],[1,1],[1,e.righttop]]},zf=function(e){return[[0,e.lefttop],[0,1],[e.topleft,1]]},Uf=function(e){return[[e.bottomright,0],[e.bottomleft,0],[0,e.leftbottom],[0,e.lefttop]]},Xf=function(e){return[[e.bottomright,0],[e.bottomleft,0],[1,e.righttop],[1,e.rightbottom]]},Yf=function(e){return[[1,e.righttop],[1,e.rightbottom],[e.topleft,1],[e.topright,1]]},Vf=function(e){return[[0,e.leftbottom],[0,e.lefttop],[e.topleft,1],[e.topright,1]]},Pm=function(e){return[[0,0],[0,e.leftbottom],[1,e.rightbottom],[1,0]]},Lm=function(e){return[[1,0],[e.bottomright,0],[e.topright,1],[1,1]]},Mm=function(e){return[[1,1],[1,e.righttop],[0,e.lefttop],[0,1]]},Om=function(e){return[[e.bottomleft,0],[0,0],[0,1],[e.topleft,1]]},Rm=function(e){return[[1,e.righttop],[1,e.rightbottom],[0,e.leftbottom],[0,e.lefttop]]},Am=function(e){return[[e.topleft,1],[e.topright,1],[e.bottomright,0],[e.bottomleft,0]]},bm=function(){return[[0,0],[0,1],[1,1],[1,0]]},Dm=function(e){return[[1,e.rightbottom],[1,0],[0,0],[0,1],[e.topleft,1]]},Tm=function(e){return[[e.topright,1],[1,1],[1,0],[0,0],[0,e.leftbottom]]},Fm=function(e){return[[1,0],[e.bottomright,0],[0,e.lefttop],[0,1],[1,1]]},Bm=function(e){return[[1,1],[1,e.righttop],[e.bottomleft,0],[0,0],[0,1]]},Gm=function(e){return[[1,e.righttop],[1,e.rightbottom],[0,e.lefttop],[0,1],[e.topleft,1]]},km=function(e){return[[1,1],[1,e.righttop],[e.bottomright,0],[e.bottomleft,0],[e.topright,1]]},qm=function(e){return[[1,e.rightbottom],[1,0],[e.bottomright,0],[0,e.leftbottom],[0,e.lefttop]]},zm=function(e){return[[e.topright,1],[e.bottomleft,0],[0,0],[0,e.leftbottom],[e.topleft,1]]},Um=function(e){return[[e.bottomright,0],[e.bottomleft,0],[0,e.lefttop],[0,1],[e.topleft,1]]},Xm=function(e){return[[1,1],[1,e.righttop],[0,e.leftbottom],[0,e.lefttop],[e.topright,1]]},Ym=function(e){return[[1,e.rightbottom],[1,0],[e.bottomright,0],[e.topleft,1],[e.topright,1]]},Vm=function(e){return[[1,e.righttop],[1,e.rightbottom],[e.bottomleft,0],[0,0],[0,e.leftbottom]]},Hm=function(e){return[[1,e.rightbottom],[1,0],[0,0],[0,e.leftbottom],[e.topleft,1],[e.topright,1]]},Wm=function(e){return[[1,1],[1,0],[e.bottomright,0],[0,e.leftbottom],[0,e.lefttop],[e.topright,1]]},Jm=function(e){return[[1,1],[1,e.righttop],[e.bottomright,0],[e.bottomleft,0],[0,e.lefttop],[0,1]]},Km=function(e){return[[1,e.righttop],[1,e.rightbottom],[e.bottomleft,0],[0,0],[0,1],[e.topleft,1]]},Zm=function(e){return[[1,1],[1,e.righttop],[e.bottomleft,0],[0,0],[0,e.leftbottom],[e.topright,1]]},Qm=function(e){return[[1,e.rightbottom],[1,0],[e.bottomright,0],[0,e.lefttop],[0,1],[e.topleft,1]]},jm=function(e){return[[1,e.righttop],[1,e.rightbottom],[e.bottomright,0],[e.bottomleft,0],[0,e.leftbottom],[0,e.lefttop],[e.topleft,1],[e.topright,1]]},$m=function(e){return[[1,1],[1,e.righttop],[e.bottomleft,0],[0,0],[0,e.leftbottom],[e.topright,1]]},t_=function(e){return[[1,e.rightbottom],[1,0],[e.bottomright,0],[0,e.lefttop],[0,1],[e.topleft,1]]},e_=function(e){return[[1,1],[1,e.righttop],[e.bottomright,0],[e.bottomleft,0],[0,e.leftbottom],[0,e.lefttop],[e.topright,1]]},r_=function(e){return[[1,e.righttop],[1,e.rightbottom],[e.bottomleft,0],[0,0],[0,e.leftbottom],[e.topleft,1],[e.topright,1]]},n_=function(e){return[[1,e.righttop],[1,e.rightbottom],[e.bottomright,0],[e.bottomleft,0],[0,e.lefttop],[0,1],[e.topleft,1]]},i_=function(e){return[[1,e.rightbottom],[1,0],[e.bottomright,0],[0,e.leftbottom],[0,e.lefttop],[e.topleft,1],[e.topright,1]]},X=[],U=[],Q=[],W=[],nt=[],rt=[],Ut=[],Xt=[];W[1]=nt[1]=18;W[169]=nt[169]=18;Q[4]=U[4]=12;Q[166]=U[166]=12;X[16]=Xt[16]=4;X[154]=Xt[154]=4;rt[64]=Ut[64]=22;rt[106]=Ut[106]=22;Q[2]=rt[2]=17;W[2]=nt[2]=18;Q[168]=rt[168]=17;W[168]=nt[168]=18;X[8]=W[8]=9;U[8]=Q[8]=12;X[162]=W[162]=9;U[162]=Q[162]=12;X[32]=Xt[32]=4;U[32]=Ut[32]=1;X[138]=Xt[138]=4;U[138]=Ut[138]=1;nt[128]=Xt[128]=21;rt[128]=Ut[128]=22;nt[42]=Xt[42]=21;rt[42]=Ut[42]=22;U[5]=nt[5]=14;U[165]=nt[165]=14;Q[20]=Xt[20]=6;Q[150]=Xt[150]=6;X[80]=rt[80]=11;X[90]=rt[90]=11;W[65]=Ut[65]=3;W[105]=Ut[105]=3;X[160]=rt[160]=11;U[160]=nt[160]=14;X[10]=rt[10]=11;U[10]=nt[10]=14;Q[130]=Xt[130]=6;W[130]=Ut[130]=3;Q[40]=Xt[40]=6;W[40]=Ut[40]=3;U[101]=Ut[101]=1;U[69]=Ut[69]=1;nt[149]=Xt[149]=21;nt[21]=Xt[21]=21;Q[86]=rt[86]=17;Q[84]=rt[84]=17;X[89]=W[89]=9;X[81]=W[81]=9;X[96]=Ut[96]=0;U[96]=rt[96]=15;X[74]=Ut[74]=0;U[74]=rt[74]=15;X[24]=Q[24]=8;W[24]=Xt[24]=7;X[146]=Q[146]=8;W[146]=Xt[146]=7;U[6]=rt[6]=15;Q[6]=nt[6]=16;U[164]=rt[164]=15;Q[164]=nt[164]=16;W[129]=Xt[129]=7;nt[129]=Ut[129]=20;W[41]=Xt[41]=7;nt[41]=Ut[41]=20;Q[66]=Ut[66]=2;W[66]=rt[66]=19;Q[104]=Ut[104]=2;W[104]=rt[104]=19;X[144]=nt[144]=10;rt[144]=Xt[144]=23;X[26]=nt[26]=10;rt[26]=Xt[26]=23;U[36]=Xt[36]=5;Q[36]=Ut[36]=2;U[134]=Xt[134]=5;Q[134]=Ut[134]=2;X[9]=nt[9]=10;U[9]=W[9]=13;X[161]=nt[161]=10;U[161]=W[161]=13;U[37]=Xt[37]=5;nt[37]=Ut[37]=20;U[133]=Xt[133]=5;nt[133]=Ut[133]=20;Q[148]=nt[148]=16;rt[148]=Xt[148]=23;Q[22]=nt[22]=16;rt[22]=Xt[22]=23;X[82]=Q[82]=8;W[82]=rt[82]=19;X[88]=Q[88]=8;W[88]=rt[88]=19;X[73]=Ut[73]=0;U[73]=W[73]=13;X[97]=Ut[97]=0;U[97]=W[97]=13;X[145]=W[145]=9;nt[145]=Xt[145]=21;X[25]=W[25]=9;nt[25]=Xt[25]=21;U[70]=Ut[70]=1;Q[70]=rt[70]=17;U[100]=Ut[100]=1;Q[100]=rt[100]=17;X[34]=W[34]=9;U[34]=Q[34]=12;nt[34]=Xt[34]=21;rt[34]=Ut[34]=22;X[136]=Xt[136]=4;U[136]=Ut[136]=1;Q[136]=rt[136]=17;W[136]=nt[136]=18;X[35]=Xt[35]=4;U[35]=Q[35]=12;W[35]=nt[35]=18;rt[35]=Ut[35]=22;X[153]=Xt[153]=4;W[153]=nt[153]=18;U[102]=Q[102]=12;rt[102]=Ut[102]=22;X[155]=W[155]=9;nt[155]=Xt[155]=23;U[103]=Ut[103]=1;Q[103]=rt[103]=17;X[152]=Xt[152]=4;Q[152]=rt[152]=17;W[152]=nt[152]=18;X[156]=Q[156]=8;W[156]=nt[156]=18;rt[156]=Xt[156]=23;X[137]=Xt[137]=4;U[137]=Ut[137]=1;W[137]=nt[137]=18;X[139]=Xt[139]=4;U[139]=W[139]=13;nt[139]=Ut[139]=20;X[98]=W[98]=9;U[98]=Q[98]=12;rt[98]=Ut[98]=22;X[99]=Ut[99]=0;U[99]=Q[99]=12;W[99]=rt[99]=19;U[38]=Q[38]=12;nt[38]=Xt[38]=21;rt[38]=Ut[38]=22;U[39]=Xt[39]=5;Q[39]=nt[39]=16;rt[39]=Ut[39]=22;var k=[];k[1]=k[169]=Gf;k[4]=k[166]=kf;k[16]=k[154]=qf;k[64]=k[106]=zf;k[168]=k[2]=Uf;k[162]=k[8]=Xf;k[138]=k[32]=Yf;k[42]=k[128]=Vf;k[5]=k[165]=Pm;k[20]=k[150]=Lm;k[80]=k[90]=Mm;k[65]=k[105]=Om;k[160]=k[10]=Rm;k[130]=k[40]=Am;k[85]=bm;k[101]=k[69]=Dm;k[149]=k[21]=Tm;k[86]=k[84]=Fm;k[89]=k[81]=Bm;k[96]=k[74]=Gm;k[24]=k[146]=km;k[6]=k[164]=qm;k[129]=k[41]=zm;k[66]=k[104]=Um;k[144]=k[26]=Xm;k[36]=k[134]=Ym;k[9]=k[161]=Vm;k[37]=k[133]=Hm;k[148]=k[22]=Wm;k[82]=k[88]=Jm;k[73]=k[97]=Km;k[145]=k[25]=Zm;k[70]=k[100]=Qm;k[34]=function(e){return[Vf(e),Xf(e)]};k[35]=jm;k[136]=function(e){return[Yf(e),Uf(e)]};k[153]=function(e){return[qf(e),Gf(e)]};k[102]=function(e){return[kf(e),zf(e)]};k[155]=$m;k[103]=t_;k[152]=function(e){return[qf(e),Uf(e)]};k[156]=e_;k[137]=function(e){return[Yf(e),Gf(e)]};k[139]=r_;k[98]=function(e){return[Xf(e),zf(e)]};k[99]=n_;k[38]=function(e){return[kf(e),Vf(e)]};k[39]=i_;function m(e,t,r){return(e-t)/(r-t)}function Au(e){return e.constructor.toString().indexOf("Array")>-1}function o_(e,t,r){for(var n=e.length-1,i=e[0].length-1,o={rows:n,cols:i,cells:[]},s=t+Math.abs(r),a=0;a<n;++a){o.cells[a]=[];for(var u=0;u<i;++u){var f=0,l=e[a+1][u],c=e[a+1][u+1],h=e[a][u+1],p=e[a][u];if(!(isNaN(l)||isNaN(c)||isNaN(h)||isNaN(p))){f|=l<t?0:l>s?128:64,f|=c<t?0:c>s?32:16,f|=h<t?0:h>s?8:4,f|=p<t?0:p>s?2:1;var v=+f,y=0;if(f===17||f===18||f===33||f===34||f===38||f===68||f===72||f===98||f===102||f===132||f===136||f===137||f===152||f===153){var E=(l+c+h+p)/4;y=E>s?2:E<t?0:1,f===34?y===1?f=35:y===0&&(f=136):f===136?y===1?(f=35,y=4):y===0&&(f=34):f===17?y===1?(f=155,y=4):y===0&&(f=153):f===68?y===1?(f=103,y=4):y===0&&(f=102):f===153?y===1&&(f=155):f===102?y===1&&(f=103):f===152?y<2&&(f=156,y=1):f===137?y<2&&(f=139,y=1):f===98?y<2&&(f=99,y=1):f===38?y<2&&(f=39,y=1):f===18?y>0?(f=156,y=4):f=152:f===33?y>0?(f=139,y=4):f=137:f===72?y>0?(f=99,y=4):f=98:f===132&&(y>0?(f=39,y=4):f=38)}if(f!=0&&f!=170){var x,g,d,_,w,S,C,N;x=g=d=_=w=S=C=N=.5;var I=[];f===1?(d=1-m(t,h,p),N=1-m(t,l,p),I.push(W[f])):f===169?(d=m(s,p,h),N=m(s,p,l),I.push(W[f])):f===4?(S=1-m(t,c,h),_=m(t,p,h),I.push(U[f])):f===166?(S=m(s,h,c),_=1-m(s,h,p),I.push(U[f])):f===16?(w=m(t,h,c),g=m(t,l,c),I.push(X[f])):f===154?(w=1-m(s,c,h),g=1-m(s,c,l),I.push(X[f])):f===64?(C=m(t,p,l),x=1-m(t,c,l),I.push(rt[f])):f===106?(C=1-m(s,l,p),x=m(s,l,c),I.push(rt[f])):f===168?(_=m(s,p,h),d=m(t,p,h),N=m(t,p,l),C=m(s,p,l),I.push(Q[f]),I.push(W[f])):f===2?(_=1-m(t,h,p),d=1-m(s,h,p),N=1-m(s,l,p),C=1-m(t,l,p),I.push(Q[f]),I.push(W[f])):f===162?(w=m(s,h,c),S=m(t,h,c),_=1-m(t,h,p),d=1-m(s,h,p),I.push(Q[f]),I.push(W[f])):f===8?(w=1-m(t,c,h),S=1-m(s,c,h),_=m(s,p,h),d=m(t,p,h),I.push(X[f]),I.push(U[f])):f===138?(w=1-m(t,c,h),S=1-m(s,c,h),x=1-m(s,c,l),g=1-m(t,c,l),I.push(X[f]),I.push(U[f])):f===32?(w=m(s,h,c),S=m(t,h,c),x=m(t,l,c),g=m(s,l,c),I.push(X[f]),I.push(U[f])):f===42?(N=1-m(s,l,p),C=1-m(t,l,p),x=m(t,l,c),g=m(s,l,c),I.push(nt[f]),I.push(rt[f])):f===128&&(N=m(t,p,l),C=m(s,p,l),x=1-m(s,c,l),g=1-m(t,c,l),I.push(nt[f]),I.push(rt[f])),f===5?(S=1-m(t,c,h),N=1-m(t,l,p),I.push(U[f])):f===165?(S=m(s,h,c),N=m(s,p,l),I.push(U[f])):f===20?(_=m(t,p,h),g=m(t,l,c),I.push(Q[f])):f===150?(_=1-m(s,h,p),g=1-m(s,c,l),I.push(Q[f])):f===80?(w=m(t,h,c),C=m(t,p,l),I.push(X[f])):f===90?(w=1-m(s,c,h),C=1-m(s,l,p),I.push(X[f])):f===65?(d=1-m(t,h,p),x=1-m(t,c,l),I.push(W[f])):f===105?(d=m(s,p,h),x=m(s,l,c),I.push(W[f])):f===160?(w=m(s,h,c),S=m(t,h,c),N=m(t,p,l),C=m(s,p,l),I.push(X[f]),I.push(U[f])):f===10?(w=1-m(t,c,h),S=1-m(s,c,h),N=1-m(s,l,p),C=1-m(t,l,p),I.push(X[f]),I.push(U[f])):f===130?(_=1-m(t,h,p),d=1-m(s,h,p),x=1-m(s,c,l),g=1-m(t,c,l),I.push(Q[f]),I.push(W[f])):f===40?(_=m(s,p,h),d=m(t,p,h),x=m(t,l,c),g=m(s,l,c),I.push(Q[f]),I.push(W[f])):f===101?(S=m(s,h,c),x=m(s,l,c),I.push(U[f])):f===69?(S=1-m(t,c,h),x=1-m(t,c,l),I.push(U[f])):f===149?(N=m(s,p,l),g=1-m(s,c,l),I.push(nt[f])):f===21?(N=1-m(t,l,p),g=m(t,l,c),I.push(nt[f])):f===86?(_=1-m(s,h,p),C=1-m(s,l,p),I.push(Q[f])):f===84?(_=m(t,p,h),C=m(t,p,l),I.push(Q[f])):f===89?(w=1-m(s,c,h),d=m(s,p,h),I.push(W[f])):f===81?(w=m(t,h,c),d=1-m(t,h,p),I.push(W[f])):f===96?(w=m(s,h,c),S=m(t,h,c),C=m(t,p,l),x=m(s,l,c),I.push(X[f]),I.push(U[f])):f===74?(w=1-m(t,c,h),S=1-m(s,c,h),C=1-m(s,l,p),x=1-m(t,c,l),I.push(X[f]),I.push(U[f])):f===24?(w=1-m(s,c,h),_=m(s,p,h),d=m(t,p,h),g=m(t,l,c),I.push(X[f]),I.push(W[f])):f===146?(w=m(t,h,c),_=1-m(t,h,p),d=1-m(s,h,p),g=1-m(s,c,l),I.push(X[f]),I.push(W[f])):f===6?(S=1-m(t,c,h),_=1-m(s,h,p),N=1-m(s,l,p),C=1-m(t,l,p),I.push(U[f]),I.push(Q[f])):f===164?(S=m(s,h,c),_=m(t,p,h),N=m(t,p,l),C=m(s,p,l),I.push(U[f]),I.push(Q[f])):f===129?(d=1-m(t,h,p),N=m(s,p,l),x=1-m(s,c,l),g=1-m(t,c,l),I.push(W[f]),I.push(nt[f])):f===41?(d=m(s,p,h),N=1-m(t,l,p),x=m(t,l,c),g=m(s,l,c),I.push(W[f]),I.push(nt[f])):f===66?(_=1-m(t,h,p),d=1-m(s,h,p),C=1-m(s,l,p),x=1-m(t,c,l),I.push(Q[f]),I.push(W[f])):f===104?(_=m(s,p,h),d=m(t,p,h),C=m(t,p,l),x=m(s,l,c),I.push(W[f]),I.push(Ut[f])):f===144?(w=m(t,h,c),N=m(t,p,l),C=m(s,p,l),g=1-m(s,c,l),I.push(X[f]),I.push(rt[f])):f===26?(w=1-m(s,c,h),N=1-m(s,l,p),C=1-m(t,l,p),g=m(t,l,c),I.push(X[f]),I.push(rt[f])):f===36?(S=m(s,h,c),_=m(t,p,h),x=m(t,l,c),g=m(s,l,c),I.push(U[f]),I.push(Q[f])):f===134?(S=1-m(t,c,h),_=1-m(s,h,p),x=1-m(s,c,l),g=1-m(t,c,l),I.push(U[f]),I.push(Q[f])):f===9?(w=1-m(t,c,h),S=1-m(s,c,h),d=m(s,p,h),N=1-m(t,l,p),I.push(X[f]),I.push(U[f])):f===161?(w=m(s,h,c),S=m(t,h,c),d=1-m(t,h,p),N=m(s,p,l),I.push(X[f]),I.push(U[f])):f===37?(S=m(s,h,c),N=1-m(t,l,p),x=m(t,l,c),g=m(s,l,c),I.push(U[f]),I.push(nt[f])):f===133?(S=1-m(t,c,h),N=m(s,p,l),x=1-m(s,c,l),g=1-m(t,c,l),I.push(U[f]),I.push(nt[f])):f===148?(_=m(t,p,h),N=m(t,p,l),C=m(s,p,l),g=1-m(s,c,l),I.push(Q[f]),I.push(rt[f])):f===22?(_=1-m(s,h,p),N=1-m(s,l,p),C=1-m(t,l,p),g=m(t,l,c),I.push(Q[f]),I.push(rt[f])):f===82?(w=m(t,h,c),_=1-m(t,h,p),d=1-m(s,h,p),C=1-m(s,l,p),I.push(X[f]),I.push(W[f])):f===88?(w=1-m(s,c,h),_=m(s,p,h),d=m(t,p,h),C=m(t,p,l),I.push(X[f]),I.push(W[f])):f===73?(w=1-m(t,c,h),S=1-m(s,c,h),d=m(s,p,h),x=1-m(t,c,l),I.push(X[f]),I.push(U[f])):f===97?(w=m(s,h,c),S=m(t,h,c),d=1-m(t,h,p),x=m(s,l,c),I.push(X[f]),I.push(U[f])):f===145?(w=m(t,h,c),d=1-m(t,h,p),N=m(s,p,l),g=1-m(s,c,l),I.push(X[f]),I.push(nt[f])):f===25?(w=1-m(s,c,h),d=m(s,p,h),N=1-m(t,l,p),g=m(t,l,c),I.push(X[f]),I.push(nt[f])):f===70?(S=1-m(t,c,h),_=1-m(s,h,p),C=1-m(s,l,p),x=1-m(t,c,l),I.push(U[f]),I.push(Q[f])):f===100?(S=m(s,h,c),_=m(t,p,h),C=m(t,p,l),x=m(s,l,c),I.push(U[f]),I.push(Q[f])):f===34?(y===0?(w=1-m(t,c,h),S=1-m(s,c,h),_=m(s,p,h),d=m(t,p,h),N=m(t,p,l),C=m(s,p,l),x=1-m(s,c,l),g=1-m(t,c,l)):(w=m(s,h,c),S=m(t,h,c),_=1-m(t,h,p),d=1-m(s,h,p),N=1-m(s,l,p),C=1-m(t,l,p),x=m(t,l,c),g=m(s,l,c)),I.push(X[f]),I.push(U[f]),I.push(nt[f]),I.push(rt[f])):f===35?(y===4?(w=1-m(t,c,h),S=1-m(s,c,h),_=m(s,p,h),d=m(t,p,h),N=m(t,p,l),C=m(s,p,l),x=1-m(s,c,l),g=1-m(t,c,l)):(w=m(s,h,c),S=m(t,h,c),_=1-m(t,h,p),d=1-m(s,h,p),N=1-m(s,l,p),C=1-m(t,l,p),x=m(t,l,c),g=m(s,l,c)),I.push(X[f]),I.push(U[f]),I.push(W[f]),I.push(rt[f])):f===136?(y===0?(w=m(s,h,c),S=m(t,h,c),_=1-m(t,h,p),d=1-m(s,h,p),N=1-m(s,l,p),C=1-m(t,l,p),x=m(t,l,c),g=m(s,l,c)):(w=1-m(t,c,h),S=1-m(s,c,h),_=m(s,p,h),d=m(t,p,h),N=m(t,p,l),C=m(s,p,l),x=1-m(s,c,l),g=1-m(t,c,l)),I.push(X[f]),I.push(U[f]),I.push(nt[f]),I.push(rt[f])):f===153?(y===0?(w=m(t,h,c),d=1-m(t,h,p),N=1-m(t,l,p),g=m(t,l,c)):(w=1-m(s,c,h),d=m(s,p,h),N=m(s,p,l),g=1-m(s,c,l)),I.push(X[f]),I.push(W[f])):f===102?(y===0?(S=1-m(t,c,h),_=m(t,p,h),C=m(t,p,l),x=1-m(t,c,l)):(S=m(s,h,c),_=1-m(s,h,p),C=1-m(s,l,p),x=m(s,l,c)),I.push(U[f]),I.push(rt[f])):f===155?(y===4?(w=m(t,h,c),d=1-m(t,h,p),N=1-m(t,l,p),g=m(t,l,c)):(w=1-m(s,c,h),d=m(s,p,h),N=m(s,p,l),g=1-m(s,c,l)),I.push(X[f]),I.push(nt[f])):f===103?(y===4?(S=1-m(t,c,h),_=m(t,p,h),C=m(t,p,l),x=1-m(t,c,l)):(S=m(s,h,c),_=1-m(s,h,p),C=1-m(s,l,p),x=m(s,l,c)),I.push(U[f]),I.push(Q[f])):f===152?(y===0?(w=m(t,h,c),_=1-m(t,h,p),d=1-m(s,h,p),N=1-m(s,l,p),C=1-m(t,l,p),g=m(t,l,c)):(w=1-m(s,c,h),_=m(s,p,h),d=m(t,p,h),N=m(t,p,l),C=m(s,p,l),g=1-m(s,c,l)),I.push(X[f]),I.push(Q[f]),I.push(W[f])):f===156?(y===4?(w=m(t,h,c),_=1-m(t,h,p),d=1-m(s,h,p),N=1-m(s,l,p),C=1-m(t,l,p),g=m(t,l,c)):(w=1-m(s,c,h),_=m(s,p,h),d=m(t,p,h),N=m(t,p,l),C=m(s,p,l),g=1-m(s,c,l)),I.push(X[f]),I.push(W[f]),I.push(rt[f])):f===137?(y===0?(w=m(s,h,c),S=m(t,h,c),d=1-m(t,h,p),N=1-m(t,l,p),x=m(t,l,c),g=m(s,l,c)):(w=1-m(t,c,h),S=1-m(s,c,h),d=m(s,p,h),N=m(s,p,l),x=1-m(s,c,l),g=1-m(t,c,l)),I.push(X[f]),I.push(U[f]),I.push(W[f])):f===139?(y===4?(w=m(s,h,c),S=m(t,h,c),d=1-m(t,h,p),N=1-m(t,l,p),x=m(t,l,c),g=m(s,l,c)):(w=1-m(t,c,h),S=1-m(s,c,h),d=m(s,p,h),N=m(s,p,l),x=1-m(s,c,l),g=1-m(t,c,l)),I.push(X[f]),I.push(U[f]),I.push(nt[f])):f===98?(y===0?(w=1-m(t,c,h),S=1-m(s,c,h),_=m(s,p,h),d=m(t,p,h),C=m(t,p,l),x=1-m(t,c,l)):(w=m(s,h,c),S=m(t,h,c),_=1-m(t,h,p),d=1-m(s,h,p),C=1-m(s,l,p),x=m(s,l,c)),I.push(X[f]),I.push(U[f]),I.push(rt[f])):f===99?(y===4?(w=1-m(t,c,h),S=1-m(s,c,h),_=m(s,p,h),d=m(t,p,h),C=m(t,p,l),x=1-m(t,c,l)):(w=m(s,h,c),S=m(t,h,c),_=1-m(t,h,p),d=1-m(s,h,p),C=1-m(s,l,p),x=m(s,l,c)),I.push(X[f]),I.push(U[f]),I.push(W[f])):f===38?(y===0?(S=1-m(t,c,h),_=m(t,p,h),N=m(t,p,l),C=m(s,p,l),x=1-m(s,c,l),g=1-m(t,c,l)):(S=m(s,h,c),_=1-m(s,h,p),N=1-m(s,l,p),C=1-m(t,l,p),x=m(t,l,c),g=m(s,l,c)),I.push(U[f]),I.push(nt[f]),I.push(rt[f])):f===39?(y===4?(S=1-m(t,c,h),_=m(t,p,h),N=m(t,p,l),C=m(s,p,l),x=1-m(s,c,l),g=1-m(t,c,l)):(S=m(s,h,c),_=1-m(s,h,p),N=1-m(s,l,p),C=1-m(t,l,p),x=m(t,l,c),g=m(s,l,c)),I.push(U[f]),I.push(Q[f]),I.push(rt[f])):f===85&&(w=1,S=0,_=1,d=0,N=0,C=1,x=0,g=1),(x<0||x>1||g<0||g>1||w<0||w>1||_<0||_>1||N<0||N>1||C<0||C>1)&&console.log("MarchingSquaresJS-isoBands: "+f+" "+v+" "+l+","+c+","+h+","+p+" "+y+" "+x+" "+g+" "+w+" "+S+" "+_+" "+d+" "+N+" "+C),o.cells[a][u]={cval:f,cval_real:v,flipped:y,topleft:x,topright:g,righttop:w,rightbottom:S,bottomright:_,bottomleft:d,leftbottom:N,lefttop:C,edges:I}}}}}return o}function s_(e){for(var t=[],r=e.rows,n=e.cols,i=[],o=0;o<r;o++)for(var s=0;s<n;s++)if(typeof e.cells[o][s]<"u"&&e.cells[o][s].edges.length>0){var a=e.cells[o][s],u=f_(a),f=null,l=s,c=o;u!==null&&i.push([u.p[0]+l,u.p[1]+c]);do{if(f=l_(e.cells[c][l],u.x,u.y,u.o),f!==null)i.push([f.p[0]+l,f.p[1]+c]),l+=f.x,c+=f.y,u=f;else break;if(c<0||c>=r||l<0||l>=n||typeof e.cells[c][l]>"u"){l-=f.x,c-=f.y;var h=a_(e,l,c,f.x,f.y,f.o);if(h!==null)h.path.forEach(function(p){i.push(p)}),l=h.i,c=h.j,u=h;else break}}while(typeof e.cells[c][l]<"u"&&e.cells[c][l].edges.length>0);t.push(i),i=[],e.cells[o][s].edges.length>0&&s--}return t}function a_(e,t,r,n,i,o){for(var s=e.cells[r][t],a=s.cval_real,u=t+n,f=r+i,l=[],c=!1;!c;){if(typeof e.cells[f]>"u"||typeof e.cells[f][u]>"u")if(f-=i,u-=n,s=e.cells[f][u],a=s.cval_real,i===-1)if(o===0)if(a&je)l.push([u,f]),n=-1,i=0,o=0;else if(a&He)l.push([u+1,f]),n=1,i=0,o=0;else{l.push([u+s.bottomright,f]),n=0,i=1,o=1,c=!0;break}else if(a&je)l.push([u,f]),n=-1,i=0,o=0;else if(a&He){l.push([u+s.bottomright,f]),n=0,i=1,o=1,c=!0;break}else{l.push([u+s.bottomleft,f]),n=0,i=1,o=0,c=!0;break}else if(i===1)if(o===0)if(a&fn)l.push([u+1,f+1]),n=1,i=0,o=1;else if(a&pr){l.push([u+s.topleft,f+1]),n=0,i=-1,o=0,c=!0;break}else{l.push([u+s.topright,f+1]),n=0,i=-1,o=1,c=!0;break}else a&fn?(l.push([u+1,f+1]),n=1,i=0,o=1):(l.push([u+1,f+1]),n=1,i=0,o=1);else if(n===-1)if(o===0)if(a&pr)l.push([u,f+1]),n=0,i=1,o=0;else if(a&je){l.push([u,f+s.leftbottom]),n=1,i=0,o=0,c=!0;break}else{l.push([u,f+s.lefttop]),n=1,i=0,o=1,c=!0;break}else if(a&pr)l.push([u,f+1]),n=0,i=1,o=0;else{console.log("MarchingSquaresJS-isoBands: wtf");break}else if(n===1)if(o===0)if(a&He)l.push([u+1,f]),n=0,i=-1,o=1;else{l.push([u+1,f+s.rightbottom]),n=-1,i=0,o=0,c=!0;break}else if(a&He)l.push([u+1,f]),n=0,i=-1,o=1;else if(a&fn){l.push([u+1,f+s.righttop]),n=-1,i=0,o=1;break}else{l.push([u+1,f+s.rightbottom]),n=-1,i=0,o=0,c=!0;break}else{console.log("MarchingSquaresJS-isoBands: we came from nowhere!");break}else if(s=e.cells[f][u],a=s.cval_real,n===-1)if(o===0)if(typeof e.cells[f-1]<"u"&&typeof e.cells[f-1][u]<"u")n=0,i=-1,o=1;else if(a&je)l.push([u,f]);else{l.push([u+s.bottomright,f]),n=0,i=1,o=1,c=!0;break}else if(a&pr)console.log("MarchingSquaresJS-isoBands: proceeding in x-direction!");else{console.log("MarchingSquaresJS-isoBands: found entry from top at "+u+","+f);break}else if(n===1)if(o===0){console.log("MarchingSquaresJS-isoBands: wtf");break}else if(typeof e.cells[f+1]<"u"&&typeof e.cells[f+1][u]<"u")n=0,i=1,o=0;else if(a&fn)l.push([u+1,f+1]),n=1,i=0,o=1;else{l.push([u+s.topleft,f+1]),n=0,i=-1,o=0,c=!0;break}else if(i===-1)if(o===1)if(typeof e.cells[f][u+1]<"u")n=1,i=0,o=1;else if(a&He)l.push([u+1,f]),n=0,i=-1,o=1;else{l.push([u+1,f+s.righttop]),n=-1,i=0,o=1,c=!0;break}else{console.log("MarchingSquaresJS-isoBands: wtf");break}else if(i===1)if(o===0)if(typeof e.cells[f][u-1]<"u")n=-1,i=0,o=0;else if(a&pr)l.push([u,f+1]),n=0,i=1,o=0;else{l.push([u,f+s.leftbottom]),n=1,i=0,o=0,c=!0;break}else{console.log("MarchingSquaresJS-isoBands: wtf");break}else{console.log("MarchingSquaresJS-isoBands: where did we came from???");break}if(u+=n,f+=i,u===t&&f===r)break}return{path:l,i:u,j:f,x:n,y:i,o}}function u_(e,t){delete e.edges[t];for(var r=t+1;r<e.edges.length;r++)e.edges[r-1]=e.edges[r];e.edges.pop()}function f_(e){if(e.edges.length>0){var t=e.edges[e.edges.length-1],r=e.cval_real;switch(t){case 0:return r&fn?{p:[1,e.righttop],x:-1,y:0,o:1}:{p:[e.topleft,1],x:0,y:-1,o:0};case 1:return r&He?{p:[e.topleft,1],x:0,y:-1,o:0}:{p:[1,e.rightbottom],x:-1,y:0,o:0};case 2:return r&He?{p:[e.bottomright,0],x:0,y:1,o:1}:{p:[e.topleft,1],x:0,y:-1,o:0};case 3:return r&je?{p:[e.topleft,1],x:0,y:-1,o:0}:{p:[e.bottomleft,0],x:0,y:1,o:0};case 4:return r&fn?{p:[1,e.righttop],x:-1,y:0,o:1}:{p:[e.topright,1],x:0,y:-1,o:1};case 5:return r&He?{p:[e.topright,1],x:0,y:-1,o:1}:{p:[1,e.rightbottom],x:-1,y:0,o:0};case 6:return r&He?{p:[e.bottomright,0],x:0,y:1,o:1}:{p:[e.topright,1],x:0,y:-1,o:1};case 7:return r&je?{p:[e.topright,1],x:0,y:-1,o:1}:{p:[e.bottomleft,0],x:0,y:1,o:0};case 8:return r&He?{p:[e.bottomright,0],x:0,y:1,o:1}:{p:[1,e.righttop],x:-1,y:0,o:1};case 9:return r&je?{p:[1,e.righttop],x:-1,y:0,o:1}:{p:[e.bottomleft,0],x:0,y:1,o:0};case 10:return r&je?{p:[0,e.leftbottom],x:1,y:0,o:0}:{p:[1,e.righttop],x:-1,y:0,o:1};case 11:return r&pr?{p:[1,e.righttop],x:-1,y:0,o:1}:{p:[0,e.lefttop],x:1,y:0,o:1};case 12:return r&He?{p:[e.bottomright,0],x:0,y:1,o:1}:{p:[1,e.rightbottom],x:-1,y:0,o:0};case 13:return r&je?{p:[1,e.rightbottom],x:-1,y:0,o:0}:{p:[e.bottomleft,0],x:0,y:1,o:0};case 14:return r&je?{p:[0,e.leftbottom],x:1,y:0,o:0}:{p:[1,e.rightbottom],x:-1,y:0,o:0};case 15:return r&pr?{p:[1,e.rightbottom],x:-1,y:0,o:0}:{p:[0,e.lefttop],x:1,y:0,o:1};case 16:return r&He?{p:[e.bottomright,0],x:0,y:1,o:1}:{p:[0,e.leftbottom],x:1,y:0,o:0};case 17:return r&pr?{p:[e.bottomright,0],x:0,y:1,o:1}:{p:[0,e.lefttop],x:1,y:0,o:1};case 18:return r&je?{p:[0,e.leftbottom],x:1,y:0,o:0}:{p:[e.bottomleft,0],x:0,y:1,o:0};case 19:return r&pr?{p:[e.bottomleft,0],x:0,y:1,o:0}:{p:[0,e.lefttop],x:1,y:0,o:1};case 20:return r&pr?{p:[e.topleft,1],x:0,y:-1,o:0}:{p:[0,e.leftbottom],x:1,y:0,o:0};case 21:return r&fn?{p:[0,e.leftbottom],x:1,y:0,o:0}:{p:[e.topright,1],x:0,y:-1,o:1};case 22:return r&pr?{p:[e.topleft,1],x:0,y:-1,o:0}:{p:[0,e.lefttop],x:1,y:0,o:1};case 23:return r&fn?{p:[0,e.lefttop],x:1,y:0,o:1}:{p:[e.topright,1],x:0,y:-1,o:1};default:console.log("MarchingSquaresJS-isoBands: edge index out of range!"),console.log(e);break}}return null}function l_(e,t,r,n){var i,o,s,a,u=e.cval,f;switch(t){case-1:switch(n){case 0:i=U[u],s=Pt[u],a=Lt[u],f=Mt[u];break;default:i=X[u],s=Ct[u],a=St[u],f=Nt[u];break}break;case 1:switch(n){case 0:i=nt[u],s=kt[u],a=qt[u],f=zt[u];break;default:i=rt[u],s=Ft[u],a=Bt[u],f=Gt[u];break}break;default:switch(r){case-1:switch(n){case 0:i=Ut[u],s=mt[u],a=_t[u],f=Et[u];break;default:i=Xt[u],s=xt[u],a=wt[u],f=It[u];break}break;case 1:switch(n){case 0:i=W[u],s=Ot[u],a=Rt[u],f=At[u];break;default:i=Q[u],s=bt[u],a=Dt[u],f=Tt[u];break}break}break}if(o=e.edges.indexOf(i),typeof e.edges[o]<"u")u_(e,o);else return null;switch(u=e.cval_real,i){case 0:u&fn?(t=e.topleft,r=1):(t=1,r=e.righttop);break;case 1:u&He?(t=1,r=e.rightbottom):(t=e.topleft,r=1);break;case 2:u&He?(t=e.topleft,r=1):(t=e.bottomright,r=0);break;case 3:u&je?(t=e.bottomleft,r=0):(t=e.topleft,r=1);break;case 4:u&fn?(t=e.topright,r=1):(t=1,r=e.righttop);break;case 5:u&He?(t=1,r=e.rightbottom):(t=e.topright,r=1);break;case 6:u&He?(t=e.topright,r=1):(t=e.bottomright,r=0);break;case 7:u&je?(t=e.bottomleft,r=0):(t=e.topright,r=1);break;case 8:u&He?(t=1,r=e.righttop):(t=e.bottomright,r=0);break;case 9:u&je?(t=e.bottomleft,r=0):(t=1,r=e.righttop);break;case 10:u&je?(t=1,r=e.righttop):(t=0,r=e.leftbottom);break;case 11:u&pr?(t=0,r=e.lefttop):(t=1,r=e.righttop);break;case 12:u&He?(t=1,r=e.rightbottom):(t=e.bottomright,r=0);break;case 13:u&je?(t=e.bottomleft,r=0):(t=1,r=e.rightbottom);break;case 14:u&je?(t=1,r=e.rightbottom):(t=0,r=e.leftbottom);break;case 15:u&pr?(t=0,r=e.lefttop):(t=1,r=e.rightbottom);break;case 16:u&He?(t=0,r=e.leftbottom):(t=e.bottomright,r=0);break;case 17:u&pr?(t=0,r=e.lefttop):(t=e.bottomright,r=0);break;case 18:u&je?(t=e.bottomleft,r=0):(t=0,r=e.leftbottom);break;case 19:u&pr?(t=0,r=e.lefttop):(t=e.bottomleft,r=0);break;case 20:u&pr?(t=0,r=e.leftbottom):(t=e.topleft,r=1);break;case 21:u&fn?(t=e.topright,r=1):(t=0,r=e.leftbottom);break;case 22:u&pr?(t=0,r=e.lefttop):(t=e.topleft,r=1);break;case 23:u&fn?(t=e.topright,r=1):(t=0,r=e.lefttop);break;default:return console.log("MarchingSquaresJS-isoBands: edge index out of range!"),console.log(e),null}return(typeof t>"u"||typeof r>"u"||typeof s>"u"||typeof a>"u"||typeof f>"u")&&(console.log("MarchingSquaresJS-isoBands: undefined value!"),console.log(e),console.log(t+" "+r+" "+s+" "+a+" "+f)),{p:[t,r],x:s,y:a,o:f}}function c_(e){var t=[],r=0;return e.cells.forEach(function(n,i){n.forEach(function(o,s){if(typeof o<"u"){var a=k[o.cval](o);typeof a=="object"&&Au(a)?typeof a[0]=="object"&&Au(a[0])?typeof a[0][0]=="object"&&Au(a[0][0])?a.forEach(function(u){u.forEach(function(f){f[0]+=s,f[1]+=i}),t[r++]=u}):(a.forEach(function(u){u[0]+=s,u[1]+=i}),t[r++]=a):console.log("MarchingSquaresJS-isoBands: bandcell polygon with malformed coordinates"):console.log("MarchingSquaresJS-isoBands: bandcell polygon with null coordinates")}})}),t}function $x(e,t,r){if(r=r||{},!re(r))throw new Error("options is invalid");var n=r.zProperty||"elevation",i=r.commonProperties||{},o=r.breaksProperties||[];if(Xi(e,"Point","Input must contain Points"),!t)throw new Error("breaks is required");if(!Array.isArray(t))throw new Error("breaks is not an Array");if(!re(i))throw new Error("commonProperties is not an Object");if(!Array.isArray(o))throw new Error("breaksProperties is not an Array");var s=Cm(e,{zProperty:n,flip:!0}),a=h_(s,t,n);a=p_(a,s,e);var u=a.map(function(f,l){if(o[l]&&!re(o[l]))throw new Error("Each mappedProperty is required to be an Object");var c=wf({},i,o[l]);c[n]=f[n];var h=Qn(f.groupedRings,c);return h});return et(u)}function h_(e,t,r){for(var n=[],i=1;i<t.length;i++){var o=+t[i-1],s=+t[i],a=Nm(e,o,s-o),u=g_(a),f=v_(u),l={};l.groupedRings=f,l[r]=o+"-"+s,n.push(l)}return n}function p_(e,t,r){var n=Ee(r),i=n[2]-n[0],o=n[3]-n[1],s=n[0],a=n[1],u=t[0].length-1,f=t.length-1,l=i/u,c=o/f,h=function(p){p[0]=p[0]*l+s,p[1]=p[1]*c+a};return e.forEach(function(p){p.groupedRings.forEach(function(v){v.forEach(function(y){y.forEach(h)})})}),e}function g_(e){var t=[],r=[];e.forEach(function(i){var o=ip(pt([i]));r.push(o),t.push({ring:i,area:o})}),r.sort(function(i,o){return o-i});var n=[];return r.forEach(function(i){for(var o=0;o<t.length;o++)if(t[o].area===i){n.push(t[o].ring),t.splice(o,1);break}}),n}function v_(e){for(var t=e.map(function(u){return{lrCoordinates:u,grouped:!1}}),r=[];!y_(t);)for(var n=0;n<t.length;n++)if(!t[n].grouped){var i=[];i.push(t[n].lrCoordinates),t[n].grouped=!0;for(var o=pt([t[n].lrCoordinates]),s=n+1;s<t.length;s++)if(!t[s].grouped){var a=pt([t[s].lrCoordinates]);d_(a,o)&&(i.push(t[s].lrCoordinates),t[s].grouped=!0)}r.push(i)}return r}function d_(e,t){for(var r=Mf(e),n=0;n<r.features.length;n++)if(!ge(r.features[n],t))return!1;return!0}function y_(e){for(var t=0;t<e.length;t++)if(e[t].grouped===!1)return!1;return!0}function m_(e,t,r){if(r=r||{},!re(r))throw new Error("options is invalid");var n=r.pivot,i=r.mutate;if(!e)throw new Error("geojson is required");if(t==null||isNaN(t))throw new Error("angle is required");return t===0||(n||(n=Qi(e)),(i===!1||i===void 0)&&(e=or(e)),be(e,function(o){var s=Fo(n,o),a=s+t,u=Af(n,o),f=ot(As(n,u,a));o[0]=f[0],o[1]=f[1]})),e}function __(e,t,r){if(r=r||{},!re(r))throw new Error("options is invalid");var n=r.origin,i=r.mutate;if(!e)throw new Error("geojson required");if(typeof t!="number"||t===0)throw new Error("invalid factor");var o=Array.isArray(n)||typeof n=="object";return i!==!0&&(e=or(e)),e.type==="FeatureCollection"&&!o?(Qt(e,function(s,a){e.features[a]=wc(s,t,n)}),e):wc(e,t,n)}function wc(e,t,r){var n=Br(e)==="Point";return r=E_(e,r),t===1||n||be(e,function(i){var o=Af(r,i),s=Fo(r,i),a=o*t,u=ot(As(r,a,s));i[0]=u[0],i[1]=u[1],i.length===3&&(i[2]*=t)}),e}function E_(e,t){if(t==null&&(t="centroid"),Array.isArray(t)||typeof t=="object")return se(t);var r=e.bbox?e.bbox:Ee(e),n=r[0],i=r[1],o=r[2],s=r[3];switch(t){case"sw":case"southwest":case"westsouth":case"bottomleft":return gt([n,i]);case"se":case"southeast":case"eastsouth":case"bottomright":return gt([o,i]);case"nw":case"northwest":case"westnorth":case"topleft":return gt([n,s]);case"ne":case"northeast":case"eastnorth":case"topright":return gt([o,s]);case"center":return Lf(e);case void 0:case null:case"centroid":return Qi(e);default:throw new Error("invalid origin")}}function tw(e,t,r,n){if(n=n||{},!re(n))throw new Error("options is invalid");var i=n.units,o=n.zTranslation,s=n.mutate;if(!e)throw new Error("geojson is required");if(t==null||isNaN(t))throw new Error("distance is required");if(o&&typeof o!="number"&&isNaN(o))throw new Error("zTranslation is not a number");if(o=o!==void 0?o:0,t===0&&o===0)return e;if(r==null||isNaN(r))throw new Error("direction is required");return t<0&&(t=-t,r=r+180),(s===!1||s===void 0)&&(e=or(e)),be(e,function(a){var u=ot(As(a,t,r,{units:i}));a[0]=u[0],a[1]=u[1],o&&a.length===3&&(a[2]+=o)}),e}function La(e){var t=e[0],r=e[1];return[r[0]-t[0],r[1]-t[1]]}function of(e,t){return e[0]*t[1]-t[0]*e[1]}function x_(e,t){return[e[0]+t[0],e[1]+t[1]]}function w_(e,t){return[e[0]-t[0],e[1]-t[1]]}function I_(e,t){return[e*t[0],e*t[1]]}function C_(e,t){var r=e[0],n=La(e),i=t[0],o=La(t),s=of(n,o),a=w_(i,r),u=of(a,o),f=u/s,l=x_(r,I_(f,n));return l}function S_(e,t){var r=La(e),n=La(t);return of(r,n)===0}function N_(e,t){return S_(e,t)?!1:C_(e,t)}function ew(e,t,r){if(r=r||{},!re(r))throw new Error("options is invalid");var n=r.units;if(!e)throw new Error("geojson is required");if(t==null||isNaN(t))throw new Error("distance is required");var i=Br(e),o=e.properties;switch(i){case"LineString":return Ic(e,t,n);case"MultiLineString":var s=[];return Oe(e,function(a){s.push(Ic(a,t,n).geometry.coordinates)}),co(s,o);default:throw new Error("geometry "+i+" is not supported")}}function Ic(e,t,r){var n=[],i=Ph(t,r),o=ot(e),s=[];return o.forEach(function(a,u){if(u!==o.length-1){var f=P_(a,o[u+1],i);if(n.push(f),u>0){var l=n[u-1],c=N_(f,l);c!==!1&&(l[1]=c,f[0]=c),s.push(l[0]),u===o.length-2&&(s.push(f[0]),s.push(f[1]))}o.length===2&&(s.push(f[0]),s.push(f[1]))}}),Jt(s,e.properties)}function P_(e,t,r){var n=Math.sqrt((e[0]-t[0])*(e[0]-t[0])+(e[1]-t[1])*(e[1]-t[1])),i=e[0]+r*(t[1]-e[1])/n,o=t[0]+r*(t[1]-e[1])/n,s=e[1]+r*(e[0]-t[0])/n,a=t[1]+r*(e[0]-t[0])/n;return[[i,s],[o,a]]}function L_(e){return(e>0)-(e<0)||+e}function Hf(e,t,r){var n=t[0]-e[0],i=t[1]-e[1],o=r[0]-t[0],s=r[1]-t[1];return L_(n*s-o*i)}function M_(e,t){var r=e.geometry.coordinates.map(function(s){return s[0]}),n=e.geometry.coordinates.map(function(s){return s[1]}),i=t.geometry.coordinates.map(function(s){return s[0]}),o=t.geometry.coordinates.map(function(s){return s[1]});return Math.max(null,r)===Math.max(null,i)&&Math.max(null,n)===Math.max(null,o)&&Math.min(null,r)===Math.min(null,i)&&Math.min(null,n)===Math.min(null,o)}function Cc(e,t){return t.geometry.coordinates[0].every(function(r){return ge(gt(r),e)})}function O_(e,t){return e[0]===t[0]&&e[1]===t[1]}var Sc=function(){function e(t){this.id=e.buildId(t),this.coordinates=t,this.innerEdges=[],this.outerEdges=[],this.outerEdgesSorted=!1}return e.buildId=function(t){return t.join(",")},e.prototype.removeInnerEdge=function(t){this.innerEdges=this.innerEdges.filter(function(r){return r.from.id!==t.from.id})},e.prototype.removeOuterEdge=function(t){this.outerEdges=this.outerEdges.filter(function(r){return r.to.id!==t.to.id})},e.prototype.addOuterEdge=function(t){this.outerEdges.push(t),this.outerEdgesSorted=!1},e.prototype.sortOuterEdges=function(){var t=this;this.outerEdgesSorted||(this.outerEdges.sort(function(r,n){var i=r.to,o=n.to;if(i.coordinates[0]-t.coordinates[0]>=0&&o.coordinates[0]-t.coordinates[0]<0)return 1;if(i.coordinates[0]-t.coordinates[0]<0&&o.coordinates[0]-t.coordinates[0]>=0)return-1;if(i.coordinates[0]-t.coordinates[0]===0&&o.coordinates[0]-t.coordinates[0]===0)return i.coordinates[1]-t.coordinates[1]>=0||o.coordinates[1]-t.coordinates[1]>=0?i.coordinates[1]-o.coordinates[1]:o.coordinates[1]-i.coordinates[1];var s=Hf(t.coordinates,i.coordinates,o.coordinates);if(s<0)return 1;if(s>0)return-1;var a=Math.pow(i.coordinates[0]-t.coordinates[0],2)+Math.pow(i.coordinates[1]-t.coordinates[1],2),u=Math.pow(o.coordinates[0]-t.coordinates[0],2)+Math.pow(o.coordinates[1]-t.coordinates[1],2);return a-u}),this.outerEdgesSorted=!0)},e.prototype.getOuterEdges=function(){return this.sortOuterEdges(),this.outerEdges},e.prototype.getOuterEdge=function(t){return this.sortOuterEdges(),this.outerEdges[t]},e.prototype.addInnerEdge=function(t){this.innerEdges.push(t)},e}(),R_=function(){function e(t,r){this.from=t,this.to=r,this.next=void 0,this.label=void 0,this.symetric=void 0,this.ring=void 0,this.from.addOuterEdge(this),this.to.addInnerEdge(this)}return e.prototype.getSymetric=function(){return this.symetric||(this.symetric=new e(this.to,this.from),this.symetric.symetric=this),this.symetric},e.prototype.deleteEdge=function(){this.from.removeOuterEdge(this),this.to.removeInnerEdge(this)},e.prototype.isEqual=function(t){return this.from.id===t.from.id&&this.to.id===t.to.id},e.prototype.toString=function(){return"Edge { "+this.from.id+" -> "+this.to.id+" }"},e.prototype.toLineString=function(){return Jt([this.from.coordinates,this.to.coordinates])},e.prototype.compareTo=function(t){return Hf(t.from.coordinates,t.to.coordinates,this.to.coordinates)},e}(),Fp=function(){function e(){this.edges=[],this.polygon=void 0,this.envelope=void 0}return e.prototype.push=function(t){this[this.edges.length]=t,this.edges.push(t),this.polygon=this.envelope=void 0},e.prototype.get=function(t){return this.edges[t]},Object.defineProperty(e.prototype,"length",{get:function(){return this.edges.length},enumerable:!0,configurable:!0}),e.prototype.forEach=function(t){this.edges.forEach(t)},e.prototype.map=function(t){return this.edges.map(t)},e.prototype.some=function(t){return this.edges.some(t)},e.prototype.isValid=function(){return!0},e.prototype.isHole=function(){var t=this,r=this.edges.reduce(function(s,a,u){return a.from.coordinates[1]>t.edges[s].from.coordinates[1]&&(s=u),s},0),n=(r===0?this.length:r)-1,i=(r+1)%this.length,o=Hf(this.edges[n].from.coordinates,this.edges[r].from.coordinates,this.edges[i].from.coordinates);return o===0?this.edges[n].from.coordinates[0]>this.edges[i].from.coordinates[0]:o>0},e.prototype.toMultiPoint=function(){return xf(this.edges.map(function(t){return t.from.coordinates}))},e.prototype.toPolygon=function(){if(this.polygon)return this.polygon;var t=this.edges.map(function(r){return r.from.coordinates});return t.push(this.edges[0].from.coordinates),this.polygon=pt([t])},e.prototype.getEnvelope=function(){return this.envelope?this.envelope:this.envelope=Wd(this.toPolygon())},e.findEdgeRingContaining=function(t,r){var n=t.getEnvelope(),i,o;return r.forEach(function(s){var a=s.getEnvelope();if(o&&(i=o.getEnvelope()),!M_(a,n)&&Cc(a,n)){var u=t.map(function(f){return f.from.coordinates}).find(function(f){return!s.some(function(l){return O_(f,l.from.coordinates)})});u&&s.inside(gt(u))&&(!o||Cc(i,a))&&(o=s)}}),o},e.prototype.inside=function(t){return ge(t,this.toPolygon())},e}();function A_(e){if(!e)throw new Error("No geojson passed");if(e.type!=="FeatureCollection"&&e.type!=="GeometryCollection"&&e.type!=="MultiLineString"&&e.type!=="LineString"&&e.type!=="Feature")throw new Error("Invalid input type '"+e.type+"'. Geojson must be FeatureCollection, GeometryCollection, LineString, MultiLineString or Feature")}var b_=function(){function e(){this.edges=[],this.nodes={}}return e.fromGeoJson=function(t){A_(t);var r=new e;return Oe(t,function(n){Sa(n,"LineString","Graph::fromGeoJson"),Mh(n,function(i,o){if(i){var s=r.getNode(i),a=r.getNode(o);r.addEdge(s,a)}return o})}),r},e.prototype.getNode=function(t){var r=Sc.buildId(t),n=this.nodes[r];return n||(n=this.nodes[r]=new Sc(t)),n},e.prototype.addEdge=function(t,r){var n=new R_(t,r),i=n.getSymetric();this.edges.push(n),this.edges.push(i)},e.prototype.deleteDangles=function(){var t=this;Object.keys(this.nodes).map(function(r){return t.nodes[r]}).forEach(function(r){return t._removeIfDangle(r)})},e.prototype._removeIfDangle=function(t){var r=this;if(t.innerEdges.length<=1){var n=t.getOuterEdges().map(function(i){return i.to});this.removeNode(t),n.forEach(function(i){return r._removeIfDangle(i)})}},e.prototype.deleteCutEdges=function(){var t=this;this._computeNextCWEdges(),this._findLabeledEdgeRings(),this.edges.forEach(function(r){r.label===r.symetric.label&&(t.removeEdge(r.symetric),t.removeEdge(r))})},e.prototype._computeNextCWEdges=function(t){var r=this;typeof t>"u"?Object.keys(this.nodes).forEach(function(n){return r._computeNextCWEdges(r.nodes[n])}):t.getOuterEdges().forEach(function(n,i){t.getOuterEdge((i===0?t.getOuterEdges().length:i)-1).symetric.next=n})},e.prototype._computeNextCCWEdges=function(t,r){for(var n=t.getOuterEdges(),i,o,s=n.length-1;s>=0;--s){var a=n[s],u=a.symetric,f=void 0,l=void 0;a.label===r&&(f=a),u.label===r&&(l=u),!(!f||!l)&&(l&&(o=l),f&&(o&&(o.next=f,o=void 0),i||(i=f)))}o&&(o.next=i)},e.prototype._findLabeledEdgeRings=function(){var t=[],r=0;return this.edges.forEach(function(n){if(!(n.label>=0)){t.push(n);var i=n;do i.label=r,i=i.next;while(!n.isEqual(i));r++}}),t},e.prototype.getEdgeRings=function(){var t=this;this._computeNextCWEdges(),this.edges.forEach(function(n){n.label=void 0}),this._findLabeledEdgeRings().forEach(function(n){t._findIntersectionNodes(n).forEach(function(i){t._computeNextCCWEdges(i,n.label)})});var r=[];return this.edges.forEach(function(n){n.ring||r.push(t._findEdgeRing(n))}),r},e.prototype._findIntersectionNodes=function(t){var r=[],n=t,i=function(){var o=0;n.from.getOuterEdges().forEach(function(s){s.label===t.label&&++o}),o>1&&r.push(n.from),n=n.next};do i();while(!t.isEqual(n));return r},e.prototype._findEdgeRing=function(t){var r=t,n=new Fp;do n.push(r),r.ring=n,r=r.next;while(!t.isEqual(r));return n},e.prototype.removeNode=function(t){var r=this;t.getOuterEdges().forEach(function(n){return r.removeEdge(n)}),t.innerEdges.forEach(function(n){return r.removeEdge(n)}),delete this.nodes[t.id]},e.prototype.removeEdge=function(t){this.edges=this.edges.filter(function(r){return!r.isEqual(t)}),t.deleteEdge()},e}();function rw(e){var t=b_.fromGeoJson(e);t.deleteDangles(),t.deleteCutEdges();var r=[],n=[];return t.getEdgeRings().filter(function(i){return i.isValid()}).forEach(function(i){i.isHole()?r.push(i):n.push(i)}),r.forEach(function(i){Fp.findEdgeRingContaining(i,n)&&n.push(i)}),et(n.map(function(i){return i.toPolygon()}))}function D_(e,t){var r=!0;return Oe(e,function(n){Oe(t,function(i){if(r===!1)return!1;r=T_(n.geometry,i.geometry)})}),r}function T_(e,t){switch(e.type){case"Point":switch(t.type){case"Point":return!k_(e.coordinates,t.coordinates);case"LineString":return!Nc(t,e);case"Polygon":return!ge(e,t)}break;case"LineString":switch(t.type){case"Point":return!Nc(e,t);case"LineString":return!F_(e,t);case"Polygon":return!Pc(t,e)}break;case"Polygon":switch(t.type){case"Point":return!ge(t,e);case"LineString":return!Pc(e,t);case"Polygon":return!B_(t,e)}}return!1}function Nc(e,t){for(var r=0;r<e.coordinates.length-1;r++)if(G_(e.coordinates[r],e.coordinates[r+1],t.coordinates))return!0;return!1}function F_(e,t){var r=xi(e,t);return r.features.length>0}function Pc(e,t){for(var r=0,n=t.coordinates;r<n.length;r++){var i=n[r];if(ge(i,e))return!0}var o=xi(t,Qu(e));return o.features.length>0}function B_(e,t){for(var r=0,n=e.coordinates[0];r<n.length;r++){var i=n[r];if(ge(i,t))return!0}for(var o=0,s=t.coordinates[0];o<s.length;o++){var a=s[o];if(ge(a,e))return!0}var u=xi(Qu(e),Qu(t));return u.features.length>0}function G_(e,t,r){var n=r[0]-e[0],i=r[1]-e[1],o=t[0]-e[0],s=t[1]-e[1],a=n*s-i*o;return a!==0?!1:Math.abs(o)>=Math.abs(s)?o>0?e[0]<=r[0]&&r[0]<=t[0]:t[0]<=r[0]&&r[0]<=e[0]:s>0?e[1]<=r[1]&&r[1]<=t[1]:t[1]<=r[1]&&r[1]<=e[1]}function k_(e,t){return e[0]===t[0]&&e[1]===t[1]}function nw(e,t){var r=fe(e),n=fe(t),i=r.type,o=n.type,s=r.coordinates,a=n.coordinates;switch(i){case"Point":switch(o){case"Point":return Wf(s,a);default:throw new Error("feature2 "+o+" geometry not supported")}case"MultiPoint":switch(o){case"Point":return q_(r,n);case"MultiPoint":return z_(r,n);default:throw new Error("feature2 "+o+" geometry not supported")}case"LineString":switch(o){case"Point":return Hr(n,r,{ignoreEndVertices:!0});case"LineString":return Y_(r,n);case"MultiPoint":return U_(r,n);default:throw new Error("feature2 "+o+" geometry not supported")}case"Polygon":switch(o){case"Point":return ge(n,r,{ignoreBoundary:!0});case"LineString":return V_(r,n);case"Polygon":return H_(r,n);case"MultiPoint":return X_(r,n);default:throw new Error("feature2 "+o+" geometry not supported")}default:throw new Error("feature1 "+i+" geometry not supported")}}function q_(e,t){var r,n=!1;for(r=0;r<e.coordinates.length;r++)if(Wf(e.coordinates[r],t.coordinates)){n=!0;break}return n}function z_(e,t){for(var r=0,n=t.coordinates;r<n.length;r++){for(var i=n[r],o=!1,s=0,a=e.coordinates;s<a.length;s++){var u=a[s];if(Wf(i,u)){o=!0;break}}if(!o)return!1}return!0}function U_(e,t){for(var r=!1,n=0,i=t.coordinates;n<i.length;n++){var o=i[n];if(Hr(o,e,{ignoreEndVertices:!0})&&(r=!0),!Hr(o,e))return!1}return!!r}function X_(e,t){for(var r=0,n=t.coordinates;r<n.length;r++){var i=n[r];if(!ge(i,e,{ignoreBoundary:!0}))return!1}return!0}function Y_(e,t){for(var r=!1,n=0,i=t.coordinates;n<i.length;n++){var o=i[n];if(Hr({type:"Point",coordinates:o},e,{ignoreEndVertices:!0})&&(r=!0),!Hr({type:"Point",coordinates:o},e,{ignoreEndVertices:!1}))return!1}return r}function V_(e,t){var r=!1,n=0,i=Ee(e),o=Ee(t);if(!Bp(i,o))return!1;for(n;n<t.coordinates.length-1;n++){var s=W_(t.coordinates[n],t.coordinates[n+1]);if(ge({type:"Point",coordinates:s},e,{ignoreBoundary:!0})){r=!0;break}}return r}function H_(e,t){if(e.type==="Feature"&&e.geometry===null||t.type==="Feature"&&t.geometry===null)return!1;var r=Ee(e),n=Ee(t);if(!Bp(r,n))return!1;for(var i=fe(t).coordinates,o=0,s=i;o<s.length;o++)for(var a=s[o],u=0,f=a;u<f.length;u++){var l=f[u];if(!ge(l,e))return!1}return!0}function Bp(e,t){return!(e[0]>t[0]||e[2]<t[2]||e[1]>t[1]||e[3]<t[3])}function Wf(e,t){return e[0]===t[0]&&e[1]===t[1]}function W_(e,t){return[(e[0]+t[0])/2,(e[1]+t[1])/2]}function iw(e,t){var r=fe(e),n=fe(t),i=r.type,o=n.type;switch(i){case"MultiPoint":switch(o){case"LineString":return Lc(r,n);case"Polygon":return Oc(r,n);default:throw new Error("feature2 "+o+" geometry not supported")}case"LineString":switch(o){case"MultiPoint":return Lc(n,r);case"LineString":return J_(r,n);case"Polygon":return Mc(r,n);default:throw new Error("feature2 "+o+" geometry not supported")}case"Polygon":switch(o){case"MultiPoint":return Oc(n,r);case"LineString":return Mc(n,r);default:throw new Error("feature2 "+o+" geometry not supported")}default:throw new Error("feature1 "+i+" geometry not supported")}}function Lc(e,t){for(var r=!1,n=!1,i=e.coordinates.length,o=0;o<i&&!r&&!n;){for(var s=0;s<t.coordinates.length-1;s++){var a=!0;(s===0||s===t.coordinates.length-2)&&(a=!1),Gp(t.coordinates[s],t.coordinates[s+1],e.coordinates[o],a)?r=!0:n=!0}o++}return r&&n}function J_(e,t){var r=xi(e,t);if(r.features.length>0)for(var n=0;n<e.coordinates.length-1;n++)for(var i=0;i<t.coordinates.length-1;i++){var o=!0;if((i===0||i===t.coordinates.length-2)&&(o=!1),Gp(e.coordinates[n],e.coordinates[n+1],t.coordinates[i],o))return!0}return!1}function Mc(e,t){var r=fp(t),n=xi(e,r);return n.features.length>0}function Oc(e,t){for(var r=!1,n=!1,i=e.coordinates[0].length,o=0;o<i&&r&&n;)ge(gt(e.coordinates[0][o]),t)?r=!0:n=!0,o++;return n&&n}function Gp(e,t,r,n){var i=r[0]-e[0],o=r[1]-e[1],s=t[0]-e[0],a=t[1]-e[1],u=i*a-o*s;return u!==0?!1:n?Math.abs(s)>=Math.abs(a)?s>0?e[0]<=r[0]&&r[0]<=t[0]:t[0]<=r[0]&&r[0]<=e[0]:a>0?e[1]<=r[1]&&r[1]<=t[1]:t[1]<=r[1]&&r[1]<=e[1]:Math.abs(s)>=Math.abs(a)?s>0?e[0]<r[0]&&r[0]<t[0]:t[0]<r[0]&&r[0]<e[0]:a>0?e[1]<r[1]&&r[1]<t[1]:t[1]<r[1]&&r[1]<e[1]}var K_=Tp,ii=function(e){this.precision=e&&e.precision?e.precision:17,this.direction=e&&e.direction?e.direction:!1,this.pseudoNode=e&&e.pseudoNode?e.pseudoNode:!1,this.objectComparator=e&&e.objectComparator?e.objectComparator:Z_};ii.prototype.compare=function(e,t){if(e.type!==t.type||!kp(e,t))return!1;switch(e.type){case"Point":return this.compareCoord(e.coordinates,t.coordinates);case"LineString":return this.compareLine(e.coordinates,t.coordinates,0,!1);case"Polygon":return this.comparePolygon(e,t);case"Feature":return this.compareFeature(e,t);default:if(e.type.indexOf("Multi")===0){var r=this,n=Rc(e),i=Rc(t);return n.every(function(o){return this.some(function(s){return r.compare(o,s)})},i)}}return!1};function Rc(e){return e.coordinates.map(function(t){return{type:e.type.replace("Multi",""),coordinates:t}})}function kp(e,t){return e.hasOwnProperty("coordinates")?e.coordinates.length===t.coordinates.length:e.length===t.length}ii.prototype.compareCoord=function(e,t){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(e[r].toFixed(this.precision)!==t[r].toFixed(this.precision))return!1;return!0};ii.prototype.compareLine=function(e,t,r,n){if(!kp(e,t))return!1;var i=this.pseudoNode?e:this.removePseudo(e),o=this.pseudoNode?t:this.removePseudo(t);if(!(n&&!this.compareCoord(i[0],o[0])&&(o=this.fixStartIndex(o,i),!o))){var s=this.compareCoord(i[r],o[r]);return this.direction||s?this.comparePath(i,o):this.compareCoord(i[r],o[o.length-(1+r)])?this.comparePath(i.slice().reverse(),o):!1}};ii.prototype.fixStartIndex=function(e,t){for(var r,n=-1,i=0;i<e.length;i++)if(this.compareCoord(e[i],t[0])){n=i;break}return n>=0&&(r=[].concat(e.slice(n,e.length),e.slice(1,n+1))),r};ii.prototype.comparePath=function(e,t){var r=this;return e.every(function(n,i){return r.compareCoord(n,this[i])},t)};ii.prototype.comparePolygon=function(e,t){if(this.compareLine(e.coordinates[0],t.coordinates[0],1,!0)){var r=e.coordinates.slice(1,e.coordinates.length),n=t.coordinates.slice(1,t.coordinates.length),i=this;return r.every(function(o){return this.some(function(s){return i.compareLine(o,s,1,!0)})},n)}else return!1};ii.prototype.compareFeature=function(e,t){return e.id!==t.id||!this.objectComparator(e.properties,t.properties)||!this.compareBBox(e,t)?!1:this.compare(e.geometry,t.geometry)};ii.prototype.compareBBox=function(e,t){return!!(!e.bbox&&!t.bbox||e.bbox&&t.bbox&&this.compareCoord(e.bbox,t.bbox))};ii.prototype.removePseudo=function(e){return e};function Z_(e,t){return K_(e,t,{strict:!0})}var Q_=ii;const qp=Ei(Q_);function j_(e,t){var r=fe(e),n=fe(t),i=r.type,o=n.type;if(i==="MultiPoint"&&o!=="MultiPoint"||(i==="LineString"||i==="MultiLineString")&&o!=="LineString"&&o!=="MultiLineString"||(i==="Polygon"||i==="MultiPolygon")&&o!=="Polygon"&&o!=="MultiPolygon")throw new Error("features must be of the same type");if(i==="Point")throw new Error("Point geometry not supported");var s=new qp({precision:6});if(s.compare(e,t))return!1;var a=0;switch(i){case"MultiPoint":for(var u=0;u<r.coordinates.length;u++)for(var f=0;f<n.coordinates.length;f++){var l=r.coordinates[u],c=n.coordinates[f];if(l[0]===c[0]&&l[1]===c[1])return!0}return!1;case"LineString":case"MultiLineString":Pi(e,function(h){Pi(t,function(p){Em(h,p).features.length&&a++})});break;case"Polygon":case"MultiPolygon":Pi(e,function(h){Pi(t,function(p){xi(h,p).features.length&&a++})});break}return a>0}function ow(e,t){var r=fe(e).type,n=fe(t).type;if(r!==n)return!1;var i=new qp({precision:6});return i.compare(Do(e),Do(t))}function $_(e,t){var r=!1;return Oe(e,function(n){Oe(t,function(i){if(r===!0)return!0;r=!D_(n.geometry,i.geometry)})}),r}var zp={exports:{}},bu={exports:{}},Ac;function t1(){return Ac||(Ac=1,function(e){function t(r,n,i,o){this.dataset=[],this.epsilon=1,this.minPts=2,this.distance=this._euclideanDistance,this.clusters=[],this.noise=[],this._visited=[],this._assigned=[],this._datasetLength=0,this._init(r,n,i,o)}t.prototype.run=function(r,n,i,o){this._init(r,n,i,o);for(var s=0;s<this._datasetLength;s++)if(this._visited[s]!==1){this._visited[s]=1;var a=this._regionQuery(s);if(a.length<this.minPts)this.noise.push(s);else{var u=this.clusters.length;this.clusters.push([]),this._addToCluster(s,u),this._expandCluster(u,a)}}return this.clusters},t.prototype._init=function(r,n,i,o){if(r){if(!(r instanceof Array))throw Error("Dataset must be of type array, "+typeof r+" given");this.dataset=r,this.clusters=[],this.noise=[],this._datasetLength=r.length,this._visited=new Array(this._datasetLength),this._assigned=new Array(this._datasetLength)}n&&(this.epsilon=n),i&&(this.minPts=i),o&&(this.distance=o)},t.prototype._expandCluster=function(r,n){for(var i=0;i<n.length;i++){var o=n[i];if(this._visited[o]!==1){this._visited[o]=1;var s=this._regionQuery(o);s.length>=this.minPts&&(n=this._mergeArrays(n,s))}this._assigned[o]!==1&&this._addToCluster(o,r)}},t.prototype._addToCluster=function(r,n){this.clusters[n].push(r),this._assigned[r]=1},t.prototype._regionQuery=function(r){for(var n=[],i=0;i<this._datasetLength;i++){var o=this.distance(this.dataset[r],this.dataset[i]);o<this.epsilon&&n.push(i)}return n},t.prototype._mergeArrays=function(r,n){for(var i=n.length,o=0;o<i;o++){var s=n[o];r.indexOf(s)<0&&r.push(s)}return r},t.prototype._euclideanDistance=function(r,n){for(var i=0,o=Math.min(r.length,n.length);o--;)i+=(r[o]-n[o])*(r[o]-n[o]);return Math.sqrt(i)},e.exports&&(e.exports=t)}(bu)),bu.exports}var Du={exports:{}},bc;function e1(){return bc||(bc=1,function(e){function t(r,n,i){this.k=3,this.dataset=[],this.assignments=[],this.centroids=[],this.init(r,n,i)}t.prototype.init=function(r,n,i){this.assignments=[],this.centroids=[],typeof r<"u"&&(this.dataset=r),typeof n<"u"&&(this.k=n),typeof i<"u"&&(this.distance=i)},t.prototype.run=function(r,n){this.init(r,n);for(var i=this.dataset.length,o=0;o<this.k;o++)this.centroids[o]=this.randomCentroid();for(var s=!0;s;){s=this.assign();for(var a=0;a<this.k;a++){for(var u=new Array(h),f=0,l=0;l<h;l++)u[l]=0;for(var c=0;c<i;c++){var h=this.dataset[c].length;if(a===this.assignments[c]){for(var l=0;l<h;l++)u[l]+=this.dataset[c][l];f++}}if(f>0){for(var l=0;l<h;l++)u[l]/=f;this.centroids[a]=u}else this.centroids[a]=this.randomCentroid(),s=!0}}return this.getClusters()},t.prototype.randomCentroid=function(){var r=this.dataset.length-1,n,i;do i=Math.round(Math.random()*r),n=this.dataset[i];while(this.centroids.indexOf(n)>=0);return n},t.prototype.assign=function(){for(var r=!1,n=this.dataset.length,i,o=0;o<n;o++)i=this.argmin(this.dataset[o],this.centroids,this.distance),i!=this.assignments[o]&&(this.assignments[o]=i,r=!0);return r},t.prototype.getClusters=function(){for(var r=new Array(this.k),n,i=0;i<this.assignments.length;i++)n=this.assignments[i],typeof r[n]>"u"&&(r[n]=[]),r[n].push(i);return r},t.prototype.argmin=function(r,n,i){for(var o=Number.MAX_VALUE,s=0,a=n.length,u,f=0;f<a;f++)u=i(r,n[f]),u<o&&(o=u,s=f);return s},t.prototype.distance=function(r,n){for(var i=0,o=Math.min(r.length,n.length);o--;){var s=r[o]-n[o];i+=s*s}return Math.sqrt(i)},e.exports&&(e.exports=t)}(Du)),Du.exports}var Tu={exports:{}},Fu={exports:{}},Dc;function Up(){return Dc||(Dc=1,function(e){function t(r,n,i){this._queue=[],this._priorities=[],this._sorting="desc",this._init(r,n,i)}t.prototype.insert=function(r,n){for(var i=this._queue.length,o=i;o--;){var s=this._priorities[o];this._sorting==="desc"?n>s&&(i=o):n<s&&(i=o)}this._insertAt(r,n,i)},t.prototype.remove=function(r){for(var n=this._queue.length;n--;){var i=this._queue[n];if(r===i){this._queue.splice(n,1),this._priorities.splice(n,1);break}}},t.prototype.forEach=function(r){this._queue.forEach(r)},t.prototype.getElements=function(){return this._queue},t.prototype.getElementPriority=function(r){return this._priorities[r]},t.prototype.getPriorities=function(){return this._priorities},t.prototype.getElementsWithPriorities=function(){for(var r=[],n=0,i=this._queue.length;n<i;n++)r.push([this._queue[n],this._priorities[n]]);return r},t.prototype._init=function(r,n,i){if(r&&n){if(this._queue=[],this._priorities=[],r.length!==n.length)throw new Error("Arrays must have the same length");for(var o=0;o<r.length;o++)this.insert(r[o],n[o])}i&&(this._sorting=i)},t.prototype._insertAt=function(r,n,i){this._queue.length===i?(this._queue.push(r),this._priorities.push(n)):(this._queue.splice(i,0,r),this._priorities.splice(i,0,n))},e.exports&&(e.exports=t)}(Fu)),Fu.exports}var Tc;function r1(){return Tc||(Tc=1,function(e){if(e.exports)var t=Up();function r(n,i,o,s){this.epsilon=1,this.minPts=1,this.distance=this._euclideanDistance,this._reachability=[],this._processed=[],this._coreDistance=0,this._orderedList=[],this._init(n,i,o,s)}r.prototype.run=function(n,i,o,s){this._init(n,i,o,s);for(var a=0,u=this.dataset.length;a<u;a++)if(this._processed[a]!==1){this._processed[a]=1,this.clusters.push([a]);var f=this.clusters.length-1;this._orderedList.push(a);var l=new t(null,null,"asc"),c=this._regionQuery(a);this._distanceToCore(a)!==void 0&&(this._updateQueue(a,c,l),this._expandCluster(f,l))}return this.clusters},r.prototype.getReachabilityPlot=function(){for(var n=[],i=0,o=this._orderedList.length;i<o;i++){var s=this._orderedList[i],a=this._reachability[s];n.push([s,a])}return n},r.prototype._init=function(n,i,o,s){if(n){if(!(n instanceof Array))throw Error("Dataset must be of type array, "+typeof n+" given");this.dataset=n,this.clusters=[],this._reachability=new Array(this.dataset.length),this._processed=new Array(this.dataset.length),this._coreDistance=0,this._orderedList=[]}i&&(this.epsilon=i),o&&(this.minPts=o),s&&(this.distance=s)},r.prototype._updateQueue=function(n,i,o){var s=this;this._coreDistance=this._distanceToCore(n),i.forEach(function(a){if(s._processed[a]===void 0){var u=s.distance(s.dataset[n],s.dataset[a]),f=Math.max(s._coreDistance,u);s._reachability[a]===void 0?(s._reachability[a]=f,o.insert(a,f)):f<s._reachability[a]&&(s._reachability[a]=f,o.remove(a),o.insert(a,f))}})},r.prototype._expandCluster=function(n,i){for(var o=i.getElements(),s=0,a=o.length;s<a;s++){var u=o[s];if(this._processed[u]===void 0){var f=this._regionQuery(u);this._processed[u]=1,this.clusters[n].push(u),this._orderedList.push(u),this._distanceToCore(u)!==void 0&&(this._updateQueue(u,f,i),this._expandCluster(n,i))}}},r.prototype._distanceToCore=function(n){for(var i=this.epsilon,o=0;o<i;o++){var s=this._regionQuery(n,o);if(s.length>=this.minPts)return o}},r.prototype._regionQuery=function(n,i){i=i||this.epsilon;for(var o=[],s=0,a=this.dataset.length;s<a;s++)this.distance(this.dataset[n],this.dataset[s])<i&&o.push(s);return o},r.prototype._euclideanDistance=function(n,i){for(var o=0,s=Math.min(n.length,i.length);s--;)o+=(n[s]-i[s])*(n[s]-i[s]);return Math.sqrt(o)},e.exports&&(e.exports=r)}(Tu)),Tu.exports}(function(e){e.exports&&(e.exports={DBSCAN:t1(),KMEANS:e1(),OPTICS:r1(),PriorityQueue:Up()})})(zp);var n1=zp.exports;const i1=Ei(n1);function sw(e,t,r){r===void 0&&(r={}),r.mutate!==!0&&(e=or(e)),r.minPoints=r.minPoints||3;var n=new i1.DBSCAN,i=n.run(Zi(e),Qs(t,r.units),r.minPoints,ee),o=-1;return i.forEach(function(s){o++,s.forEach(function(a){var u=e.features[a];u.properties||(u.properties={}),u.properties.cluster=o,u.properties.dbscan="core"})}),n.noise.forEach(function(s){var a=e.features[s];a.properties||(a.properties={}),a.properties.cluster?a.properties.dbscan="edge":a.properties.dbscan="noise"}),e}var Xp={eudist:function(t,r,n){for(var i=t.length,o=0,s=0;s<i;s++){var a=(t[s]||0)-(r[s]||0);o+=a*a}return n?Math.sqrt(o):o},mandist:function(t,r,n){for(var i=t.length,o=0,s=0;s<i;s++)o+=Math.abs((t[s]||0)-(r[s]||0));return n?Math.sqrt(o):o},dist:function(t,r,n){var i=Math.abs(t-r);return n?i:i*i}},Yp=Xp,o1=Yp.eudist,s1=Yp.dist,a1={kmrand:function(t,r){for(var n={},i=[],o=r<<2,s=t.length,a=t[0].length>0;i.length<r&&o-- >0;){var u=t[Math.floor(Math.random()*s)],f=a?u.join("_"):""+u;n[f]||(n[f]=!0,i.push(u))}if(i.length<r)throw new Error("Error initializating clusters");return i},kmpp:function(t,r){var n=t[0].length?o1:s1,i=[],o=t.length,s=t[0].length>0,a=t[Math.floor(Math.random()*o)];for(s?a.join("_"):""+a,i.push(a);i.length<r;){for(var u=[],f=i.length,l=0,c=[],h=0;h<o;h++){for(var p=1/0,v=0;v<f;v++){var y=n(t[h],i[v]);y<=p&&(p=y)}u[h]=p}for(var E=0;E<o;E++)l+=u[E];for(var x=0;x<o;x++)c[x]={i:x,v:t[x],pr:u[x]/l,cs:0};c.sort(function(w,S){return w.pr-S.pr}),c[0].cs=c[0].pr;for(var g=1;g<o;g++)c[g].cs=c[g-1].cs+c[g].pr;for(var d=Math.random(),_=0;_<o-1&&c[_++].cs<d;);i.push(c[_-1].v)}return i}},Jf=Xp,Vp=a1,u1=Jf.eudist;Jf.mandist;Jf.dist;var f1=Vp.kmrand,l1=Vp.kmpp,Fc=1e4;function Bc(e,t,r){r=r||[];for(var n=0;n<e;n++)r[n]=t;return r}function c1(e,t,r,n){var i=[],o=[],s=[],a=[],u=!1,f=n||Fc,l=e.length,c=e[0].length,h=c>0,p=[];if(r)r=="kmrand"?i=f1(e,t):r=="kmpp"?i=l1(e,t):i=r;else for(var v={};i.length<t;){var y=Math.floor(Math.random()*l);v[y]||(v[y]=!0,i.push(e[y]))}do{Bc(t,0,p);for(var E=0;E<l;E++){for(var x=1/0,g=0,d=0;d<t;d++){var a=h?u1(e[E],i[d]):Math.abs(e[E]-i[d]);a<=x&&(x=a,g=d)}s[E]=g,p[g]++}for(var _=[],o=[],w=0;w<t;w++)_[w]=h?Bc(c,0,_[w]):0,o[w]=i[w];if(h){for(var S=0;S<t;S++)i[S]=[];for(var C=0;C<l;C++)for(var N=s[C],I=_[N],A=e[C],O=0;O<c;O++)I[O]+=A[O];u=!0;for(var D=0;D<t;D++){for(var T=i[D],R=_[D],q=o[D],B=p[D],j=0;j<c;j++)T[j]=R[j]/B||0;if(u){for(var Z=0;Z<c;Z++)if(q[Z]!=T[Z]){u=!1;break}}}}else{for(var J=0;J<l;J++){var z=s[J];_[z]+=e[J]}for(var V=0;V<t;V++)i[V]=_[V]/p[V]||0;u=!0;for(var K=0;K<t;K++)if(o[K]!=i[K]){u=!1;break}}u=u||--f<=0}while(!u);return{it:Fc-f,k:t,idxs:s,centroids:i}}var h1=c1;const p1=Ei(h1);function aw(e,t){t===void 0&&(t={});var r=e.features.length;t.numberOfClusters=t.numberOfClusters||Math.round(Math.sqrt(r/2)),t.numberOfClusters>r&&(t.numberOfClusters=r),t.mutate!==!0&&(e=or(e));var n=Zi(e),i=n.slice(0,t.numberOfClusters),o=p1(n,t.numberOfClusters,i),s={};return o.centroids.forEach(function(a,u){s[u]=a}),Qt(e,function(a,u){var f=o.idxs[u];a.properties.cluster=f,a.properties.centroid=s[f]}),e}function uw(e,t){if(!e)throw new Error("line1 is required");if(!t)throw new Error("line2 is required");var r=Gc(e,"line1");if(r!=="LineString")throw new Error("line1 must be a LineString");var n=Gc(t,"line2");if(n!=="LineString")throw new Error("line2 must be a LineString");for(var i=To(Do(e)).features,o=To(Do(t)).features,s=0;s<i.length;s++){var a=i[s].geometry.coordinates;if(!o[s])break;var u=o[s].geometry.coordinates;if(!g1(a,u))return!1}return!0}function g1(e,t){var r=Ss(Fo(e[0],e[1])),n=Ss(Fo(t[0],t[1]));return r===n}function Gc(e,t){if(e.geometry&&e.geometry.type)return e.geometry.type;if(e.type)return e.type;throw new Error("Invalid GeoJSON object for "+t)}function kc(e){for(var t=e,r=[];t.parent;)r.unshift(t),t=t.parent;return r}function v1(){return new Hp(function(e){return e.f})}var ja={search:function(e,t,r,n){e.cleanDirty(),n=n||{};var i=n.heuristic||ja.heuristics.manhattan,o=n.closest||!1,s=v1(),a=t;for(t.h=i(t,r),s.push(t);s.size()>0;){var u=s.pop();if(u===r)return kc(u);u.closed=!0;for(var f=e.neighbors(u),l=0,c=f.length;l<c;++l){var h=f[l];if(!(h.closed||h.isWall())){var p=u.g+h.getCost(u),v=h.visited;(!v||p<h.g)&&(h.visited=!0,h.parent=u,h.h=h.h||i(h,r),h.g=p,h.f=h.g+h.h,e.markDirty(h),o&&(h.h<a.h||h.h===a.h&&h.g<a.g)&&(a=h),v?s.rescoreElement(h):s.push(h))}}}return o?kc(a):[]},heuristics:{manhattan:function(e,t){var r=Math.abs(t.x-e.x),n=Math.abs(t.y-e.y);return r+n},diagonal:function(e,t){var r=1,n=Math.sqrt(2),i=Math.abs(t.x-e.x),o=Math.abs(t.y-e.y);return r*(i+o)+(n-2*r)*Math.min(i,o)}},cleanNode:function(e){e.f=0,e.g=0,e.h=0,e.visited=!1,e.closed=!1,e.parent=null}};function is(e,t){t=t||{},this.nodes=[],this.diagonal=!!t.diagonal,this.grid=[];for(var r=0;r<e.length;r++){this.grid[r]=[];for(var n=0,i=e[r];n<i.length;n++){var o=new $a(r,n,i[n]);this.grid[r][n]=o,this.nodes.push(o)}}this.init()}is.prototype.init=function(){this.dirtyNodes=[];for(var e=0;e<this.nodes.length;e++)ja.cleanNode(this.nodes[e])};is.prototype.cleanDirty=function(){for(var e=0;e<this.dirtyNodes.length;e++)ja.cleanNode(this.dirtyNodes[e]);this.dirtyNodes=[]};is.prototype.markDirty=function(e){this.dirtyNodes.push(e)};is.prototype.neighbors=function(e){var t=[],r=e.x,n=e.y,i=this.grid;return i[r-1]&&i[r-1][n]&&t.push(i[r-1][n]),i[r+1]&&i[r+1][n]&&t.push(i[r+1][n]),i[r]&&i[r][n-1]&&t.push(i[r][n-1]),i[r]&&i[r][n+1]&&t.push(i[r][n+1]),this.diagonal&&(i[r-1]&&i[r-1][n-1]&&t.push(i[r-1][n-1]),i[r+1]&&i[r+1][n-1]&&t.push(i[r+1][n-1]),i[r-1]&&i[r-1][n+1]&&t.push(i[r-1][n+1]),i[r+1]&&i[r+1][n+1]&&t.push(i[r+1][n+1])),t};is.prototype.toString=function(){for(var e=[],t=this.grid,r,n,i,o,s=0,a=t.length;s<a;s++){for(r=[],n=t[s],i=0,o=n.length;i<o;i++)r.push(n[i].weight);e.push(r.join(" "))}return e.join(`
`)};function $a(e,t,r){this.x=e,this.y=t,this.weight=r}$a.prototype.toString=function(){return"["+this.x+" "+this.y+"]"};$a.prototype.getCost=function(e){return e&&e.x!==this.x&&e.y!==this.y?this.weight*1.41421:this.weight};$a.prototype.isWall=function(){return this.weight===0};function Hp(e){this.content=[],this.scoreFunction=e}Hp.prototype={push:function(e){this.content.push(e),this.sinkDown(this.content.length-1)},pop:function(){var e=this.content[0],t=this.content.pop();return this.content.length>0&&(this.content[0]=t,this.bubbleUp(0)),e},remove:function(e){var t=this.content.indexOf(e),r=this.content.pop();t!==this.content.length-1&&(this.content[t]=r,this.scoreFunction(r)<this.scoreFunction(e)?this.sinkDown(t):this.bubbleUp(t))},size:function(){return this.content.length},rescoreElement:function(e){this.sinkDown(this.content.indexOf(e))},sinkDown:function(e){for(var t=this.content[e];e>0;){var r=(e+1>>1)-1,n=this.content[r];if(this.scoreFunction(t)<this.scoreFunction(n))this.content[r]=t,this.content[e]=n,e=r;else break}},bubbleUp:function(e){for(var t=this.content.length,r=this.content[e],n=this.scoreFunction(r);;){var i=e+1<<1,o=i-1,s=null,a;if(o<t){var u=this.content[o];a=this.scoreFunction(u),a<n&&(s=o)}if(i<t){var f=this.content[i],l=this.scoreFunction(f);l<(s===null?n:a)&&(s=i)}if(s!==null)this.content[e]=this.content[s],this.content[s]=r,e=s;else break}}};function fw(e,t,r){if(r=r||{},!re(r))throw new Error("options is invalid");var n=r.resolution,i=r.minDistance,o=r.obstacles||et([]);if(!e)throw new Error("start is required");if(!t)throw new Error("end is required");if(n&&!Je(n)||n<=0)throw new Error("options.resolution must be a number, greater than 0");if(i)throw new Error("options.minDistance is not yet implemented");var s=se(e),a=se(t);switch(e=gt(s),t=gt(a),Br(o)){case"FeatureCollection":if(o.features.length===0)return Jt([s,a]);break;case"Polygon":o=et([ze(fe(o))]);break;default:throw new Error("invalid obstacles")}var u=o;u.features.push(e),u.features.push(t);var f=Ee(__(Kh(Ee(u)),1.15));if(!n){var l=ee([f[0],f[1]],[f[2],f[1]],r);n=l/100}u.features.pop(),u.features.pop();for(var c=f[0],h=f[1],p=f[2],v=f[3],y=n/ee([c,h],[p,h],r),E=y*(p-c),x=n/ee([c,h],[c,v],r),g=x*(v-h),d=p-c,_=v-h,w=Math.floor(d/E),S=Math.floor(_/g),C=(d-w*E)/2,N=(_-S*g)/2,I=[],A=[],O=[],D=[],T=1/0,R=1/0,q=v-N,B=0;q>=h;){for(var j=[],Z=[],J=c+C,z=0;J<=p;){var V=gt([J,q]),K=d1(V,o);j.push(K?0:1),Z.push(J+"|"+q);var ft=ee(V,e);!K&&ft<T&&(T=ft,O={x:z,y:B});var it=ee(V,t);!K&&it<R&&(R=it,D={x:z,y:B}),J+=E,z++}A.push(j),I.push(Z),q-=g,B++}var vt=new is(A,{diagonal:!0}),ht=vt.grid[O.y][O.x],ne=vt.grid[D.y][D.x],mr=ja.search(vt,ht,ne),Ae=[s];return mr.forEach(function(lr){var cr=I[lr.x][lr.y].split("|");Ae.push([+cr[0],+cr[1]])}),Ae.push(a),Do(Jt(Ae))}function d1(e,t){for(var r=0;r<t.features.length;r++)if(ge(e,t.features[r]))return!0;return!1}function qc(e){return function(){return e}}function y1(e){return e[0]}function m1(e){return e[1]}function Ma(){this._=null}function tu(e){e.U=e.C=e.L=e.R=e.P=e.N=null}Ma.prototype={constructor:Ma,insert:function(e,t){var r,n,i;if(e){if(t.P=e,t.N=e.N,e.N&&(e.N.P=t),e.N=t,e.R){for(e=e.R;e.L;)e=e.L;e.L=t}else e.R=t;r=e}else this._?(e=zc(this._),t.P=null,t.N=e,e.P=e.L=t,r=e):(t.P=t.N=null,this._=t,r=null);for(t.L=t.R=null,t.U=r,t.C=!0,e=t;r&&r.C;)n=r.U,r===n.L?(i=n.R,i&&i.C?(r.C=i.C=!1,n.C=!0,e=n):(e===r.R&&(cs(this,r),e=r,r=e.U),r.C=!1,n.C=!0,hs(this,n))):(i=n.L,i&&i.C?(r.C=i.C=!1,n.C=!0,e=n):(e===r.L&&(hs(this,r),e=r,r=e.U),r.C=!1,n.C=!0,cs(this,n))),r=e.U;this._.C=!1},remove:function(e){e.N&&(e.N.P=e.P),e.P&&(e.P.N=e.N),e.N=e.P=null;var t=e.U,r,n=e.L,i=e.R,o,s;if(n?i?o=zc(i):o=n:o=i,t?t.L===e?t.L=o:t.R=o:this._=o,n&&i?(s=o.C,o.C=e.C,o.L=n,n.U=o,o!==i?(t=o.U,o.U=e.U,e=o.R,t.L=e,o.R=i,i.U=o):(o.U=t,t=o,e=o.R)):(s=e.C,e=o),e&&(e.U=t),!s){if(e&&e.C){e.C=!1;return}do{if(e===this._)break;if(e===t.L){if(r=t.R,r.C&&(r.C=!1,t.C=!0,cs(this,t),r=t.R),r.L&&r.L.C||r.R&&r.R.C){(!r.R||!r.R.C)&&(r.L.C=!1,r.C=!0,hs(this,r),r=t.R),r.C=t.C,t.C=r.R.C=!1,cs(this,t),e=this._;break}}else if(r=t.L,r.C&&(r.C=!1,t.C=!0,hs(this,t),r=t.L),r.L&&r.L.C||r.R&&r.R.C){(!r.L||!r.L.C)&&(r.R.C=!1,r.C=!0,cs(this,r),r=t.L),r.C=t.C,t.C=r.L.C=!1,hs(this,t),e=this._;break}r.C=!0,e=t,t=t.U}while(!e.C);e&&(e.C=!1)}}};function cs(e,t){var r=t,n=t.R,i=r.U;i?i.L===r?i.L=n:i.R=n:e._=n,n.U=i,r.U=n,r.R=n.L,r.R&&(r.R.U=r),n.L=r}function hs(e,t){var r=t,n=t.L,i=r.U;i?i.L===r?i.L=n:i.R=n:e._=n,n.U=i,r.U=n,r.L=n.R,r.L&&(r.L.U=r),n.R=r}function zc(e){for(;e.L;)e=e.L;return e}function xs(e,t,r,n){var i=[null,null],o=_r.push(i)-1;return i.left=e,i.right=t,r&&Oa(i,e,t,r),n&&Oa(i,t,e,n),Vr[e.index].halfedges.push(o),Vr[t.index].halfedges.push(o),i}function ps(e,t,r){var n=[t,r];return n.left=e,n}function Oa(e,t,r,n){!e[0]&&!e[1]?(e[0]=n,e.left=t,e.right=r):e.left===r?e[1]=n:e[0]=n}function _1(e,t,r,n,i){var o=e[0],s=e[1],a=o[0],u=o[1],f=s[0],l=s[1],c=0,h=1,p=f-a,v=l-u,y;if(y=t-a,!(!p&&y>0)){if(y/=p,p<0){if(y<c)return;y<h&&(h=y)}else if(p>0){if(y>h)return;y>c&&(c=y)}if(y=n-a,!(!p&&y<0)){if(y/=p,p<0){if(y>h)return;y>c&&(c=y)}else if(p>0){if(y<c)return;y<h&&(h=y)}if(y=r-u,!(!v&&y>0)){if(y/=v,v<0){if(y<c)return;y<h&&(h=y)}else if(v>0){if(y>h)return;y>c&&(c=y)}if(y=i-u,!(!v&&y<0)){if(y/=v,v<0){if(y>h)return;y>c&&(c=y)}else if(v>0){if(y<c)return;y<h&&(h=y)}return!(c>0)&&!(h<1)||(c>0&&(e[0]=[a+c*p,u+c*v]),h<1&&(e[1]=[a+h*p,u+h*v])),!0}}}}}function E1(e,t,r,n,i){var o=e[1];if(o)return!0;var s=e[0],a=e.left,u=e.right,f=a[0],l=a[1],c=u[0],h=u[1],p=(f+c)/2,v=(l+h)/2,y,E;if(h===l){if(p<t||p>=n)return;if(f>c){if(!s)s=[p,r];else if(s[1]>=i)return;o=[p,i]}else{if(!s)s=[p,i];else if(s[1]<r)return;o=[p,r]}}else if(y=(f-c)/(h-l),E=v-y*p,y<-1||y>1)if(f>c){if(!s)s=[(r-E)/y,r];else if(s[1]>=i)return;o=[(i-E)/y,i]}else{if(!s)s=[(i-E)/y,i];else if(s[1]<r)return;o=[(r-E)/y,r]}else if(l<h){if(!s)s=[t,y*t+E];else if(s[0]>=n)return;o=[n,y*n+E]}else{if(!s)s=[n,y*n+E];else if(s[0]<t)return;o=[t,y*t+E]}return e[0]=s,e[1]=o,!0}function x1(e,t,r,n){for(var i=_r.length,o;i--;)(!E1(o=_r[i],e,t,r,n)||!_1(o,e,t,r,n)||!(Math.abs(o[0][0]-o[1][0])>ue||Math.abs(o[0][1]-o[1][1])>ue))&&delete _r[i]}function w1(e){return Vr[e.index]={site:e,halfedges:[]}}function I1(e,t){var r=e.site,n=t.left,i=t.right;return r===i&&(i=n,n=r),i?Math.atan2(i[1]-n[1],i[0]-n[0]):(r===n?(n=t[1],i=t[0]):(n=t[0],i=t[1]),Math.atan2(n[0]-i[0],i[1]-n[1]))}function Wp(e,t){return t[+(t.left!==e.site)]}function C1(e,t){return t[+(t.left===e.site)]}function S1(){for(var e=0,t=Vr.length,r,n,i,o;e<t;++e)if((r=Vr[e])&&(o=(n=r.halfedges).length)){var s=new Array(o),a=new Array(o);for(i=0;i<o;++i)s[i]=i,a[i]=I1(r,_r[n[i]]);for(s.sort(function(u,f){return a[f]-a[u]}),i=0;i<o;++i)a[i]=n[s[i]];for(i=0;i<o;++i)n[i]=a[i]}}function N1(e,t,r,n){var i=Vr.length,o,s,a,u,f,l,c,h,p,v,y,E,x=!0;for(o=0;o<i;++o)if(s=Vr[o]){for(a=s.site,f=s.halfedges,u=f.length;u--;)_r[f[u]]||f.splice(u,1);for(u=0,l=f.length;u<l;)v=C1(s,_r[f[u]]),y=v[0],E=v[1],c=Wp(s,_r[f[++u%l]]),h=c[0],p=c[1],(Math.abs(y-h)>ue||Math.abs(E-p)>ue)&&(f.splice(u,0,_r.push(ps(a,v,Math.abs(y-e)<ue&&n-E>ue?[e,Math.abs(h-e)<ue?p:n]:Math.abs(E-n)<ue&&r-y>ue?[Math.abs(p-n)<ue?h:r,n]:Math.abs(y-r)<ue&&E-t>ue?[r,Math.abs(h-r)<ue?p:t]:Math.abs(E-t)<ue&&y-e>ue?[Math.abs(p-t)<ue?h:e,t]:null))-1),++l);l&&(x=!1)}if(x){var g,d,_,w=1/0;for(o=0,x=null;o<i;++o)(s=Vr[o])&&(a=s.site,g=a[0]-e,d=a[1]-t,_=g*g+d*d,_<w&&(w=_,x=s));if(x){var S=[e,t],C=[e,n],N=[r,n],I=[r,t];x.halfedges.push(_r.push(ps(a=x.site,S,C))-1,_r.push(ps(a,C,N))-1,_r.push(ps(a,N,I))-1,_r.push(ps(a,I,S))-1)}}for(o=0;o<i;++o)(s=Vr[o])&&(s.halfedges.length||delete Vr[o])}var Jp=[],Kf;function P1(){tu(this),this.x=this.y=this.arc=this.site=this.cy=null}function Po(e){var t=e.P,r=e.N;if(!(!t||!r)){var n=t.site,i=e.site,o=r.site;if(n!==o){var s=i[0],a=i[1],u=n[0]-s,f=n[1]-a,l=o[0]-s,c=o[1]-a,h=2*(u*c-f*l);if(!(h>=-A1)){var p=u*u+f*f,v=l*l+c*c,y=(c*p-f*v)/h,E=(u*v-l*p)/h,x=Jp.pop()||new P1;x.arc=e,x.site=i,x.x=y+s,x.y=(x.cy=E+a)+Math.sqrt(y*y+E*E),e.circle=x;for(var g=null,d=Ds._;d;)if(x.y<d.y||x.y===d.y&&x.x<=d.x)if(d.L)d=d.L;else{g=d.P;break}else if(d.R)d=d.R;else{g=d;break}Ds.insert(g,x),g||(Kf=x)}}}}function Ro(e){var t=e.circle;t&&(t.P||(Kf=t.N),Ds.remove(t),Jp.push(t),tu(t),e.circle=null)}var Kp=[];function L1(){tu(this),this.edge=this.site=this.circle=null}function Uc(e){var t=Kp.pop()||new L1;return t.site=e,t}function Bu(e){Ro(e),Ao.remove(e),Kp.push(e),tu(e)}function M1(e){var t=e.circle,r=t.x,n=t.cy,i=[r,n],o=e.P,s=e.N,a=[e];Bu(e);for(var u=o;u.circle&&Math.abs(r-u.circle.x)<ue&&Math.abs(n-u.circle.cy)<ue;)o=u.P,a.unshift(u),Bu(u),u=o;a.unshift(u),Ro(u);for(var f=s;f.circle&&Math.abs(r-f.circle.x)<ue&&Math.abs(n-f.circle.cy)<ue;)s=f.N,a.push(f),Bu(f),f=s;a.push(f),Ro(f);var l=a.length,c;for(c=1;c<l;++c)f=a[c],u=a[c-1],Oa(f.edge,u.site,f.site,i);u=a[0],f=a[l-1],f.edge=xs(u.site,f.site,null,i),Po(u),Po(f)}function O1(e){for(var t=e[0],r=e[1],n,i,o,s,a=Ao._;a;)if(o=Zp(a,r)-t,o>ue)a=a.L;else if(s=t-R1(a,r),s>ue){if(!a.R){n=a;break}a=a.R}else{o>-ue?(n=a.P,i=a):s>-ue?(n=a,i=a.N):n=i=a;break}w1(e);var u=Uc(e);if(Ao.insert(n,u),!(!n&&!i)){if(n===i){Ro(n),i=Uc(n.site),Ao.insert(u,i),u.edge=i.edge=xs(n.site,u.site),Po(n),Po(i);return}if(!i){u.edge=xs(n.site,u.site);return}Ro(n),Ro(i);var f=n.site,l=f[0],c=f[1],h=e[0]-l,p=e[1]-c,v=i.site,y=v[0]-l,E=v[1]-c,x=2*(h*E-p*y),g=h*h+p*p,d=y*y+E*E,_=[(E*g-p*d)/x+l,(h*d-y*g)/x+c];Oa(i.edge,f,v,_),u.edge=xs(f,e,null,_),i.edge=xs(e,v,null,_),Po(n),Po(i)}}function Zp(e,t){var r=e.site,n=r[0],i=r[1],o=i-t;if(!o)return n;var s=e.P;if(!s)return-1/0;r=s.site;var a=r[0],u=r[1],f=u-t;if(!f)return a;var l=a-n,c=1/o-1/f,h=l/f;return c?(-h+Math.sqrt(h*h-2*c*(l*l/(-2*f)-u+f/2+i-o/2)))/c+n:(n+a)/2}function R1(e,t){var r=e.N;if(r)return Zp(r,t);var n=e.site;return n[1]===t?n[0]:1/0}var ue=1e-6,A1=1e-12,Ao,Vr,Ds,_r;function b1(e,t,r){return(e[0]-r[0])*(t[1]-e[1])-(e[0]-t[0])*(r[1]-e[1])}function D1(e,t){return t[1]-e[1]||t[0]-e[0]}function sf(e,t){var r=e.sort(D1).pop(),n,i,o;for(_r=[],Vr=new Array(e.length),Ao=new Ma,Ds=new Ma;;)if(o=Kf,r&&(!o||r[1]<o.y||r[1]===o.y&&r[0]<o.x))(r[0]!==n||r[1]!==i)&&(O1(r),n=r[0],i=r[1]),r=e.pop();else if(o)M1(o.arc);else break;if(S1(),t){var s=+t[0][0],a=+t[0][1],u=+t[1][0],f=+t[1][1];x1(s,a,u,f),N1(s,a,u,f)}this.edges=_r,this.cells=Vr,Ao=Ds=_r=Vr=null}sf.prototype={constructor:sf,polygons:function(){var e=this.edges;return this.cells.map(function(t){var r=t.halfedges.map(function(n){return Wp(t,e[n])});return r.data=t.site.data,r})},triangles:function(){var e=[],t=this.edges;return this.cells.forEach(function(r,n){if(a=(o=r.halfedges).length)for(var i=r.site,o,s=-1,a,u,f=t[o[a-1]],l=f.left===i?f.right:f.left;++s<a;)u=l,f=t[o[s]],l=f.left===i?f.right:f.left,u&&l&&n<u.index&&n<l.index&&b1(i,u,l)<0&&e.push([i.data,u.data,l.data])}),e},links:function(){return this.edges.filter(function(e){return e.right}).map(function(e){return{source:e.left.data,target:e.right.data}})},find:function(e,t,r){for(var n=this,i,o=n._found||0,s=n.cells.length,a;!(a=n.cells[o]);)if(++o>=s)return null;var u=e-a.site[0],f=t-a.site[1],l=u*u+f*f;do a=n.cells[i=o],o=null,a.halfedges.forEach(function(c){var h=n.edges[c],p=h.left;if(!((p===a.site||!p)&&!(p=h.right))){var v=e-p[0],y=t-p[1],E=v*v+y*y;E<l&&(l=E,o=p.index)}});while(o!==null);return n._found=i,r==null||l<=r*r?a.site:null}};function T1(){var e=y1,t=m1,r=null;function n(i){return new sf(i.map(function(o,s){var a=[Math.round(e(o,s,i)/ue)*ue,Math.round(t(o,s,i)/ue)*ue];return a.index=s,a.data=o,a}),r)}return n.polygons=function(i){return n(i).polygons()},n.links=function(i){return n(i).links()},n.triangles=function(i){return n(i).triangles()},n.x=function(i){return arguments.length?(e=typeof i=="function"?i:qc(+i),n):e},n.y=function(i){return arguments.length?(t=typeof i=="function"?i:qc(+i),n):t},n.extent=function(i){return arguments.length?(r=i==null?null:[[+i[0][0],+i[0][1]],[+i[1][0],+i[1][1]]],n):r&&[[r[0][0],r[0][1]],[r[1][0],r[1][1]]]},n.size=function(i){return arguments.length?(r=i==null?null:[[0,0],[+i[0],+i[1]]],n):r&&[r[1][0]-r[0][0],r[1][1]-r[0][1]]},n}function F1(e){return e=e.slice(),e.push(e[0]),pt([e])}function lw(e,t){if(t=t||{},!re(t))throw new Error("options is invalid");var r=t.bbox||[-180,-85,180,85];if(!e)throw new Error("points is required");if(!Array.isArray(r))throw new Error("bbox is invalid");return Xi(e,"Point","points"),et(T1().x(function(n){return n.geometry.coordinates[0]}).y(function(n){return n.geometry.coordinates[1]}).extent([[r[0],r[1]],[r[2],r[3]]]).polygons(e.features).map(F1))}function B1(e,t,r,n){n=n||{};var i=n.steps||64,o=n.units||"kilometers",s=n.angle||0,a=n.pivot||e,u=n.properties||e.properties||{};if(!e)throw new Error("center is required");if(!t)throw new Error("xSemiAxis is required");if(!r)throw new Error("ySemiAxis is required");if(!re(n))throw new Error("options must be an object");if(!Je(i))throw new Error("steps must be a number");if(!Je(s))throw new Error("angle must be a number");var f=se(e);if(o==="degrees")var l=tr(s);else t=As(e,t,90,{units:o}),r=As(e,r,0,{units:o}),t=se(t)[0]-f[0],r=se(r)[1]-f[1];for(var c=[],h=0;h<i;h+=1){var p=h*-360/i,v=t*r/Math.sqrt(Math.pow(r,2)+Math.pow(t,2)*Math.pow(Xc(p),2)),y=t*r/Math.sqrt(Math.pow(t,2)+Math.pow(r,2)/Math.pow(Xc(p),2));if(p<-90&&p>=-270&&(v=-v),p<-180&&p>=-360&&(y=-y),o==="degrees"){var E=v*Math.cos(l)+y*Math.sin(l),x=y*Math.cos(l)-v*Math.sin(l);v=E,y=x}c.push([v+f[0],y+f[1]])}return c.push(c[0]),o==="degrees"?pt([c],u):m_(pt([c],u),s,{pivot:a})}function Xc(e){var t=e*Math.PI/180;return Math.tan(t)}function Qp(e,t){t===void 0&&(t={});var r=0,n=0,i=0;return wn(e,function(o,s,a){var u=a[t.weight];if(u=u??1,!Je(u))throw new Error("weight value must be a number for feature index "+s);u=Number(u),u>0&&be(o,function(f){r+=f[0]*u,n+=f[1]*u,i+=u})}),gt([r/i,n/i],t.properties,t)}function cw(e,t){if(t===void 0&&(t={}),t=t||{},!re(t))throw new Error("options is invalid");var r=t.counter||10;if(!Je(r))throw new Error("counter must be a number");var n=t.weight,i=Qp(e,{weight:t.weight}),o=et([]);return Qt(e,function(s){o.features.push(Qi(s,{properties:{weight:s.properties[n]}}))}),o.properties={tolerance:t.tolerance,medianCandidates:[]},jp(i.geometry.coordinates,[0,0],o,r)}function jp(e,t,r,n){var i=r.properties.tolerance||.001,o=0,s=0,a=0,u=0;if(Qt(r,function(c){var h=c.properties.weight,p=h??1;if(p=Number(p),!Je(p))throw new Error("weight value must be a number");if(p>0){u+=1;var v=p*ee(c,e);v===0&&(v=1);var y=p/v;o+=c.geometry.coordinates[0]*y,s+=c.geometry.coordinates[1]*y,a+=y}}),u<1)throw new Error("no features to measure");var f=o/a,l=s/a;return u===1||n===0||Math.abs(f-t[0])<i&&Math.abs(l-t[1])<i?gt([f,l],{medianCandidates:r.properties.medianCandidates}):(r.properties.medianCandidates.push([f,l]),jp([f,l],e,r,n-1))}function hw(e,t){if(t=t||{},!re(t))throw new Error("options is invalid");var r=t.steps||64,n=t.weight,i=t.properties||{};if(!Je(r))throw new Error("steps must be a number");if(!re(i))throw new Error("properties must be a number");var o=Zi(e).length,s=Qp(e,{weight:n}),a=0,u=0,f=0;Qt(e,function(C){var N=C.properties[n]||1,I=Yc(ot(C),ot(s));a+=Math.pow(I.x,2)*N,u+=Math.pow(I.y,2)*N,f+=I.x*I.y*N});var l=a-u,c=Math.sqrt(Math.pow(l,2)+4*Math.pow(f,2)),h=2*f,p=Math.atan((l+c)/h),v=p*180/Math.PI,y=0,E=0,x=0;Qt(e,function(C){var N=C.properties[n]||1,I=Yc(ot(C),ot(s));y+=Math.pow(I.x*Math.cos(p)-I.y*Math.sin(p),2)*N,E+=Math.pow(I.x*Math.sin(p)+I.y*Math.cos(p),2)*N,x+=N});var g=Math.sqrt(2*y/x),d=Math.sqrt(2*E/x),_=B1(s,g,d,{units:"degrees",angle:v,steps:r,properties:i}),w=td(e,et([_])),S={meanCenterCoordinates:ot(s),semiMajorAxis:g,semiMinorAxis:d,numberOfFeatures:o,angle:v,percentageWithinEllipse:100*Zi(w).length/o};return _.properties.standardDeviationalEllipse=S,_}function Yc(e,t){return{x:e[0]-t[0],y:e[1]-t[1]}}function pw(e,t,r,n){if(n===void 0&&(n={}),!re(n))throw new Error("options is invalid");if(!e)throw new Error("startPoint is required");if(!t)throw new Error("midPoint is required");if(!r)throw new Error("endPoint is required");var i=e,o=t,s=r,a=Ss(n.mercator!==!0?Ri(i,o):Fo(i,o)),u=Ss(n.mercator!==!0?Ri(s,o):Fo(s,o)),f=Math.abs(a-u);return n.explementary===!0?360-f:f}function gw(e,t){var r=[],n=t.iterations||1;if(!e)throw new Error("inputPolys is required");return wn(e,function(i,o,s){var a,u,f;switch(i.type){case"Polygon":a=[[]];for(var l=0;l<n;l++)f=[[]],u=i,l>0&&(u=pt(a).geometry),G1(u,f),a=f.slice(0);r.push(pt(a,s));break;case"MultiPolygon":a=[[[]]];for(var c=0;c<n;c++)f=[[[]]],u=i,c>0&&(u=Qn(a).geometry),k1(u,f),a=f.slice(0);r.push(Qn(a,s));break;default:throw new Error("geometry is invalid, must be Polygon or MultiPolygon")}}),et(r)}function G1(e,t){var r=0,n=0;be(e,function(i,o,s,a,u){u>r&&(r=u,n=o,t.push([]));var f=o-n,l=e.coordinates[u][f+1],c=i[0],h=i[1],p=l[0],v=l[1];t[u].push([.75*c+.25*p,.75*h+.25*v]),t[u].push([.25*c+.75*p,.25*h+.75*v])},!0),t.forEach(function(i){i.push(i[0])})}function k1(e,t){var r=0,n=0,i=0;be(e,function(o,s,a,u,f){u>i&&(i=u,n=s,t.push([[]])),f>r&&(r=f,n=s,t[u].push([]));var l=s-n,c=e.coordinates[u][f][l+1],h=o[0],p=o[1],v=c[0],y=c[1];t[u][f].push([.75*h+.25*v,.75*p+.25*y]),t[u][f].push([.25*h+.75*v,.25*p+.75*y])},!0),t.forEach(function(o){o.forEach(function(s){s.push(s[0])})})}function q1(e,t,r){r===void 0&&(r=2);var n=se(e),i=se(t),o=n[0]-i[0],s=n[1]-i[1];return r===1?Math.abs(o)+Math.abs(s):Math.pow(Math.pow(o,r)+Math.pow(s,r),1/r)}function z1(e,t){t=t||{};var r=t.threshold||1e4,n=t.p||2,i=t.binary||!1,o=t.alpha||-1,s=t.standardization||!1,a=[];Qt(e,function(p){a.push(Qi(p))});for(var u=[],f=0;f<a.length;f++)u[f]=[];for(var f=0;f<a.length;f++)for(var l=f;l<a.length;l++){f===l&&(u[f][l]=0);var c=q1(a[f],a[l],n);u[f][l]=c,u[l][f]=c}for(var f=0;f<a.length;f++)for(var l=0;l<a.length;l++){var c=u[f][l];c!==0&&(i?c<=r?u[f][l]=1:u[f][l]=0:c<=r?u[f][l]=Math.pow(c,o):u[f][l]=0)}if(s)for(var f=0;f<a.length;f++)for(var h=u[f].reduce(function(v,y){return v+y},0),l=0;l<a.length;l++)u[f][l]=u[f][l]/h;return u}function vw(e,t){var r=t.inputField,n=t.threshold||1e5,i=t.p||2,o=t.binary||!1,s=t.alpha||-1,a=t.standardization||!0,u=z1(e,{alpha:s,binary:o,p:i,standardization:a,threshold:n}),f=[];Qt(e,function(O){var D=O.properties||{};f.push(D[r])});for(var l=$p(f),c=U1(f),h=0,p=0,v=0,y=0,E=u.length,x=0;x<E;x++){for(var g=0,d=0;d<E;d++)h+=u[x][d]*(f[x]-l)*(f[d]-l),p+=u[x][d],v+=Math.pow(u[x][d]+u[d][x],2),g+=u[x][d]+u[d][x];y+=Math.pow(g,2)}v=.5*v;var _=h/p/c,w=-1/(E-1),S=E*E*v-E*y+3*(p*p),C=(E-1)*(E+1)*(p*p),N=S/C-w*w,I=Math.sqrt(N),A=(_-w)/I;return{expectedMoranIndex:w,moranIndex:_,stdNorm:I,zNorm:A}}function $p(e){for(var t=0,r=0,n=e;r<n.length;r++){var i=n[r];t+=i}return t/e.length}function U1(e){for(var t=$p(e),r=0,n=0,i=e;n<i.length;n++){var o=i[n];r+=Math.pow(o-t,2)}return r/e.length}function X1(e,t){return t===void 0&&(t={}),tg(e,"mercator",t)}function Y1(e,t){return t===void 0&&(t={}),tg(e,"wgs84",t)}function tg(e,t,r){r===void 0&&(r={}),r=r||{};var n=r.mutate;if(!e)throw new Error("geojson is required");return Array.isArray(e)&&Je(e[0])?e=t==="mercator"?Vc(e):Hc(e):(n!==!0&&(e=or(e)),be(e,function(i){var o=t==="mercator"?Vc(i):Hc(i);i[0]=o[0],i[1]=o[1]})),e}function Vc(e){var t=Math.PI/180,r=6378137,n=20037508342789244e-9,i=Math.abs(e[0])<=180?e[0]:e[0]-V1(e[0])*360,o=[r*i*t,r*Math.log(Math.tan(Math.PI*.25+.5*e[1]*t))];return o[0]>n&&(o[0]=n),o[0]<-n&&(o[0]=-n),o[1]>n&&(o[1]=n),o[1]<-n&&(o[1]=-n),o}function Hc(e){var t=180/Math.PI,r=6378137;return[e[0]*t/r,(Math.PI*.5-2*Math.atan(Math.exp(-e[1]/r)))*t]}function V1(e){return e<0?-1:e>0?1:0}const dw=Object.freeze(Object.defineProperty({__proto__:null,toMercator:X1,toWgs84:Y1},Symbol.toStringTag,{value:"Module"}));function eu(e){return Array.isArray(e)?Wc(e):e&&e.bbox?Wc(e.bbox):[Z1(),Q1()]}function H1(e,t){t===void 0&&(t={}),e==null&&(e=1);for(var r=[],n=0;n<e;n++)r.push(gt(eu(t.bbox)));return et(r)}function W1(e,t){t===void 0&&(t={}),e==null&&(e=1),(!Je(t.num_vertices)||t.num_vertices===void 0)&&(t.num_vertices=10),(!Je(t.max_radial_length)||t.max_radial_length===void 0)&&(t.max_radial_length=10);for(var r=[],n=function(o){var s=[],a=Array.apply(null,new Array(t.num_vertices+1)).map(Math.random);a.forEach(function(u,f,l){l[f]=f>0?u+l[f-1]:u}),a.forEach(function(u){u=u*2*Math.PI/a[a.length-1];var f=Math.random();s.push([f*(t.max_radial_length||10)*Math.sin(u),f*(t.max_radial_length||10)*Math.cos(u)])}),s[s.length-1]=s[0],s=s.map(K1(eu(t.bbox))),r.push(pt([s]))},i=0;i<e;i++)n();return et(r)}function J1(e,t){if(t===void 0&&(t={}),t=t||{},!re(t))throw new Error("options is invalid");var r=t.bbox,n=t.num_vertices,i=t.max_length,o=t.max_rotation;e==null&&(e=1),(!Je(n)||n===void 0||n<2)&&(n=10),(!Je(i)||i===void 0)&&(i=1e-4),(!Je(o)||o===void 0)&&(o=Math.PI/8);for(var s=[],a=0;a<e;a++){for(var u=eu(r),f=[u],l=0;l<n-1;l++){var c=l===0?Math.random()*2*Math.PI:Math.tan((f[l][1]-f[l-1][1])/(f[l][0]-f[l-1][0])),h=c+(Math.random()-.5)*o*2,p=Math.random()*i;f.push([f[l][0]+p*Math.cos(h),f[l][1]+p*Math.sin(h)])}s.push(Jt(f))}return et(s)}function K1(e){return function(t){return[t[0]+e[0],t[1]+e[1]]}}function eg(){return Math.random()-.5}function Z1(){return eg()*360}function Q1(){return eg()*180}function Wc(e){return[Math.random()*(e[2]-e[0])+e[0],Math.random()*(e[3]-e[1])+e[1]]}const yw=Object.freeze(Object.defineProperty({__proto__:null,randomLineString:J1,randomPoint:H1,randomPolygon:W1,randomPosition:eu},Symbol.toStringTag,{value:"Module"}));function j1(e,t){if(!e)throw new Error("geojson is required");if(e.type!=="FeatureCollection")throw new Error("geojson must be a FeatureCollection");if(t==null)throw new Error("filter is required");var r=[];return Qt(e,function(n){Zf(n.properties,t)&&r.push(n)}),et(r)}function rg(e,t,r){if(!e)throw new Error("geojson is required");if(e.type!=="FeatureCollection")throw new Error("geojson must be a FeatureCollection");if(t==null)throw new Error("property is required");for(var n=ng(e,t),i=Object.keys(n),o=0;o<i.length;o++){for(var s=i[o],a=n[s],u=[],f=0;f<a.length;f++)u.push(e.features[a[f]]);r(et(u),s,o)}}function $1(e,t,r,n){var i=n;return rg(e,t,function(o,s,a){a===0&&n===void 0?i=o:i=r(i,o,s,a)}),i}function ng(e,t){var r={};return Qt(e,function(n,i){var o=n.properties||{};if(o.hasOwnProperty(String(t))){var s=o[t];r.hasOwnProperty(s)?r[s].push(i):r[s]=[i]}}),r}function Zf(e,t){if(e===void 0)return!1;var r=typeof t;if(r==="number"||r==="string")return e.hasOwnProperty(t);if(Array.isArray(t)){for(var n=0;n<t.length;n++)if(!Zf(e,t[n]))return!1;return!0}else return ig(e,t)}function ig(e,t){for(var r=Object.keys(t),n=0;n<r.length;n++){var i=r[n];if(e[i]!==t[i])return!1}return!0}function tE(e,t){if(!t)return{};if(!t.length)return{};for(var r={},n=0;n<t.length;n++){var i=t[n];e.hasOwnProperty(i)&&(r[i]=e[i])}return r}const mw=Object.freeze(Object.defineProperty({__proto__:null,applyFilter:Zf,clusterEach:rg,clusterReduce:$1,createBins:ng,filterProperties:tE,getCluster:j1,propertiesContainsFilter:ig},Symbol.toStringTag,{value:"Module"}));/**
 * splaytree v3.1.0
 * Fast Splay tree for Node and browser
 *
 * @author Alexander Milevski <info@w8r.name>
 * @license MIT
 * @preserve
 */var bi=function(){function e(t,r){this.next=null,this.key=t,this.data=r,this.left=null,this.right=null}return e}();function eE(e,t){return e>t?1:e<t?-1:0}function Ni(e,t,r){for(var n=new bi(null,null),i=n,o=n;;){var s=r(e,t.key);if(s<0){if(t.left===null)break;if(r(e,t.left.key)<0){var a=t.left;if(t.left=a.right,a.right=t,t=a,t.left===null)break}o.left=t,o=t,t=t.left}else if(s>0){if(t.right===null)break;if(r(e,t.right.key)>0){var a=t.right;if(t.right=a.left,a.left=t,t=a,t.right===null)break}i.right=t,i=t,t=t.right}else break}return i.right=t.left,o.left=t.right,t.left=n.right,t.right=n.left,t}function Gu(e,t,r,n){var i=new bi(e,t);if(r===null)return i.left=i.right=null,i;r=Ni(e,r,n);var o=n(e,r.key);return o<0?(i.left=r.left,i.right=r,r.left=null):o>=0&&(i.right=r.right,i.left=r,r.right=null),i}function Jc(e,t,r){var n=null,i=null;if(t){t=Ni(e,t,r);var o=r(t.key,e);o===0?(n=t.left,i=t.right):o<0?(i=t.right,t.right=null,n=t):(n=t.left,t.left=null,i=t)}return{left:n,right:i}}function rE(e,t,r){return t===null?e:(e===null||(t=Ni(e.key,t,r),t.left=e),t)}function af(e,t,r,n,i){if(e){n(""+t+(r?"└── ":"├── ")+i(e)+`
`);var o=t+(r?"    ":"│   ");e.left&&af(e.left,o,!1,n,i),e.right&&af(e.right,o,!0,n,i)}}var Qf=function(){function e(t){t===void 0&&(t=eE),this._root=null,this._size=0,this._comparator=t}return e.prototype.insert=function(t,r){return this._size++,this._root=Gu(t,r,this._root,this._comparator)},e.prototype.add=function(t,r){var n=new bi(t,r);this._root===null&&(n.left=n.right=null,this._size++,this._root=n);var i=this._comparator,o=Ni(t,this._root,i),s=i(t,o.key);return s===0?this._root=o:(s<0?(n.left=o.left,n.right=o,o.left=null):s>0&&(n.right=o.right,n.left=o,o.right=null),this._size++,this._root=n),this._root},e.prototype.remove=function(t){this._root=this._remove(t,this._root,this._comparator)},e.prototype._remove=function(t,r,n){var i;if(r===null)return null;r=Ni(t,r,n);var o=n(t,r.key);return o===0?(r.left===null?i=r.right:(i=Ni(t,r.left,n),i.right=r.right),this._size--,i):r},e.prototype.pop=function(){var t=this._root;if(t){for(;t.left;)t=t.left;return this._root=Ni(t.key,this._root,this._comparator),this._root=this._remove(t.key,this._root,this._comparator),{key:t.key,data:t.data}}return null},e.prototype.findStatic=function(t){for(var r=this._root,n=this._comparator;r;){var i=n(t,r.key);if(i===0)return r;i<0?r=r.left:r=r.right}return null},e.prototype.find=function(t){return this._root&&(this._root=Ni(t,this._root,this._comparator),this._comparator(t,this._root.key)!==0)?null:this._root},e.prototype.contains=function(t){for(var r=this._root,n=this._comparator;r;){var i=n(t,r.key);if(i===0)return!0;i<0?r=r.left:r=r.right}return!1},e.prototype.forEach=function(t,r){for(var n=this._root,i=[],o=!1;!o;)n!==null?(i.push(n),n=n.left):i.length!==0?(n=i.pop(),t.call(r,n),n=n.right):o=!0;return this},e.prototype.range=function(t,r,n,i){for(var o=[],s=this._comparator,a=this._root,u;o.length!==0||a;)if(a)o.push(a),a=a.left;else{if(a=o.pop(),u=s(a.key,r),u>0)break;if(s(a.key,t)>=0&&n.call(i,a))return this;a=a.right}return this},e.prototype.keys=function(){var t=[];return this.forEach(function(r){var n=r.key;return t.push(n)}),t},e.prototype.values=function(){var t=[];return this.forEach(function(r){var n=r.data;return t.push(n)}),t},e.prototype.min=function(){return this._root?this.minNode(this._root).key:null},e.prototype.max=function(){return this._root?this.maxNode(this._root).key:null},e.prototype.minNode=function(t){if(t===void 0&&(t=this._root),t)for(;t.left;)t=t.left;return t},e.prototype.maxNode=function(t){if(t===void 0&&(t=this._root),t)for(;t.right;)t=t.right;return t},e.prototype.at=function(t){for(var r=this._root,n=!1,i=0,o=[];!n;)if(r)o.push(r),r=r.left;else if(o.length>0){if(r=o.pop(),i===t)return r;i++,r=r.right}else n=!0;return null},e.prototype.next=function(t){var r=this._root,n=null;if(t.right){for(n=t.right;n.left;)n=n.left;return n}for(var i=this._comparator;r;){var o=i(t.key,r.key);if(o===0)break;o<0?(n=r,r=r.left):r=r.right}return n},e.prototype.prev=function(t){var r=this._root,n=null;if(t.left!==null){for(n=t.left;n.right;)n=n.right;return n}for(var i=this._comparator;r;){var o=i(t.key,r.key);if(o===0)break;o<0?r=r.left:(n=r,r=r.right)}return n},e.prototype.clear=function(){return this._root=null,this._size=0,this},e.prototype.toList=function(){return iE(this._root)},e.prototype.load=function(t,r,n){r===void 0&&(r=[]),n===void 0&&(n=!1);var i=t.length,o=this._comparator;if(n&&lf(t,r,0,i-1,o),this._root===null)this._root=uf(t,r,0,i),this._size=i;else{var s=oE(this.toList(),nE(t,r),o);i=this._size+i,this._root=ff({head:s},0,i)}return this},e.prototype.isEmpty=function(){return this._root===null},Object.defineProperty(e.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){return this._root},enumerable:!0,configurable:!0}),e.prototype.toString=function(t){t===void 0&&(t=function(n){return String(n.key)});var r=[];return af(this._root,"",!0,function(n){return r.push(n)},t),r.join("")},e.prototype.update=function(t,r,n){var i=this._comparator,o=Jc(t,this._root,i),s=o.left,a=o.right;i(t,r)<0?a=Gu(r,n,a,i):s=Gu(r,n,s,i),this._root=rE(s,a,i)},e.prototype.split=function(t){return Jc(t,this._root,this._comparator)},e}();function uf(e,t,r,n){var i=n-r;if(i>0){var o=r+Math.floor(i/2),s=e[o],a=t[o],u=new bi(s,a);return u.left=uf(e,t,r,o),u.right=uf(e,t,o+1,n),u}return null}function nE(e,t){for(var r=new bi(null,null),n=r,i=0;i<e.length;i++)n=n.next=new bi(e[i],t[i]);return n.next=null,r.next}function iE(e){for(var t=e,r=[],n=!1,i=new bi(null,null),o=i;!n;)t?(r.push(t),t=t.left):r.length>0?(t=o=o.next=r.pop(),t=t.right):n=!0;return o.next=null,i.next}function ff(e,t,r){var n=r-t;if(n>0){var i=t+Math.floor(n/2),o=ff(e,t,i),s=e.head;return s.left=o,e.head=e.head.next,s.right=ff(e,i+1,r),s}return null}function oE(e,t,r){for(var n=new bi(null,null),i=n,o=e,s=t;o!==null&&s!==null;)r(o.key,s.key)<0?(i.next=o,o=o.next):(i.next=s,s=s.next),i=i.next;return o!==null?i.next=o:s!==null&&(i.next=s),n.next}function lf(e,t,r,n,i){if(!(r>=n)){for(var o=e[r+n>>1],s=r-1,a=n+1;;){do s++;while(i(e[s],o)<0);do a--;while(i(e[a],o)>0);if(s>=a)break;var u=e[s];e[s]=e[a],e[a]=u,u=t[s],t[s]=t[a],t[a]=u}lf(e,t,r,a,i),lf(e,t,a+1,n,i)}}var og={};function In(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Kc(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Pr(e,t,r){return t&&Kc(e.prototype,t),r&&Kc(e,r),e}var gs=function(t,r){return t.ll.x<=r.x&&r.x<=t.ur.x&&t.ll.y<=r.y&&r.y<=t.ur.y},cf=function(t,r){if(r.ur.x<t.ll.x||t.ur.x<r.ll.x||r.ur.y<t.ll.y||t.ur.y<r.ll.y)return null;var n=t.ll.x<r.ll.x?r.ll.x:t.ll.x,i=t.ur.x<r.ur.x?t.ur.x:r.ur.x,o=t.ll.y<r.ll.y?r.ll.y:t.ll.y,s=t.ur.y<r.ur.y?t.ur.y:r.ur.y;return{ll:{x:n,y:o},ur:{x:i,y:s}}},Li=Number.EPSILON;Li===void 0&&(Li=Math.pow(2,-52));var sE=Li*Li,hf=function(t,r){if(-Li<t&&t<Li&&-Li<r&&r<Li)return 0;var n=t-r;return n*n<sE*t*r?0:t<r?-1:1},aE=function(){function e(){In(this,e),this.reset()}return Pr(e,[{key:"reset",value:function(){this.xRounder=new Zc,this.yRounder=new Zc}},{key:"round",value:function(r,n){return{x:this.xRounder.round(r),y:this.yRounder.round(n)}}}]),e}(),Zc=function(){function e(){In(this,e),this.tree=new Qf,this.round(0)}return Pr(e,[{key:"round",value:function(r){var n=this.tree.add(r),i=this.tree.prev(n);if(i!==null&&hf(n.key,i.key)===0)return this.tree.remove(r),i.key;var o=this.tree.next(n);return o!==null&&hf(n.key,o.key)===0?(this.tree.remove(r),o.key):r}}]),e}(),Ts=new aE,Cs=function(t,r){return t.x*r.y-t.y*r.x},sg=function(t,r){return t.x*r.x+t.y*r.y},Qc=function(t,r,n){var i={x:r.x-t.x,y:r.y-t.y},o={x:n.x-t.x,y:n.y-t.y},s=Cs(i,o);return hf(s,0)},Ra=function(t){return Math.sqrt(sg(t,t))},uE=function(t,r,n){var i={x:r.x-t.x,y:r.y-t.y},o={x:n.x-t.x,y:n.y-t.y};return Cs(o,i)/Ra(o)/Ra(i)},fE=function(t,r,n){var i={x:r.x-t.x,y:r.y-t.y},o={x:n.x-t.x,y:n.y-t.y};return sg(o,i)/Ra(o)/Ra(i)},jc=function(t,r,n){return r.y===0?null:{x:t.x+r.x/r.y*(n-t.y),y:n}},$c=function(t,r,n){return r.x===0?null:{x:n,y:t.y+r.y/r.x*(n-t.x)}},lE=function(t,r,n,i){if(r.x===0)return $c(n,i,t.x);if(i.x===0)return $c(t,r,n.x);if(r.y===0)return jc(n,i,t.y);if(i.y===0)return jc(t,r,n.y);var o=Cs(r,i);if(o==0)return null;var s={x:n.x-t.x,y:n.y-t.y},a=Cs(s,r)/o,u=Cs(s,i)/o,f=t.x+u*r.x,l=n.x+a*i.x,c=t.y+u*r.y,h=n.y+a*i.y,p=(f+l)/2,v=(c+h)/2;return{x:p,y:v}},Wn=function(){Pr(e,null,[{key:"compare",value:function(r,n){var i=e.comparePoints(r.point,n.point);return i!==0?i:(r.point!==n.point&&r.link(n),r.isLeft!==n.isLeft?r.isLeft?1:-1:Aa.compare(r.segment,n.segment))}},{key:"comparePoints",value:function(r,n){return r.x<n.x?-1:r.x>n.x?1:r.y<n.y?-1:r.y>n.y?1:0}}]);function e(t,r){In(this,e),t.events===void 0?t.events=[this]:t.events.push(this),this.point=t,this.isLeft=r}return Pr(e,[{key:"link",value:function(r){if(r.point===this.point)throw new Error("Tried to link already linked events");for(var n=r.point.events,i=0,o=n.length;i<o;i++){var s=n[i];this.point.events.push(s),s.point=this.point}this.checkForConsuming()}},{key:"checkForConsuming",value:function(){for(var r=this.point.events.length,n=0;n<r;n++){var i=this.point.events[n];if(i.segment.consumedBy===void 0)for(var o=n+1;o<r;o++){var s=this.point.events[o];s.consumedBy===void 0&&i.otherSE.point.events===s.otherSE.point.events&&i.segment.consume(s.segment)}}}},{key:"getAvailableLinkedEvents",value:function(){for(var r=[],n=0,i=this.point.events.length;n<i;n++){var o=this.point.events[n];o!==this&&!o.segment.ringOut&&o.segment.isInResult()&&r.push(o)}return r}},{key:"getLeftmostComparator",value:function(r){var n=this,i=new Map,o=function(a){var u=a.otherSE;i.set(a,{sine:uE(n.point,r.point,u.point),cosine:fE(n.point,r.point,u.point)})};return function(s,a){i.has(s)||o(s),i.has(a)||o(a);var u=i.get(s),f=u.sine,l=u.cosine,c=i.get(a),h=c.sine,p=c.cosine;return f>=0&&h>=0?l<p?1:l>p?-1:0:f<0&&h<0?l<p?-1:l>p?1:0:h<f?-1:h>f?1:0}}}]),e}(),cE=0,Aa=function(){Pr(e,null,[{key:"compare",value:function(r,n){var i=r.leftSE.point.x,o=n.leftSE.point.x,s=r.rightSE.point.x,a=n.rightSE.point.x;if(a<i)return 1;if(s<o)return-1;var u=r.leftSE.point.y,f=n.leftSE.point.y,l=r.rightSE.point.y,c=n.rightSE.point.y;if(i<o){if(f<u&&f<l)return 1;if(f>u&&f>l)return-1;var h=r.comparePoint(n.leftSE.point);if(h<0)return 1;if(h>0)return-1;var p=n.comparePoint(r.rightSE.point);return p!==0?p:-1}if(i>o){if(u<f&&u<c)return-1;if(u>f&&u>c)return 1;var v=n.comparePoint(r.leftSE.point);if(v!==0)return v;var y=r.comparePoint(n.rightSE.point);return y<0?1:y>0?-1:1}if(u<f)return-1;if(u>f)return 1;if(s<a){var E=n.comparePoint(r.rightSE.point);if(E!==0)return E}if(s>a){var x=r.comparePoint(n.rightSE.point);if(x<0)return 1;if(x>0)return-1}if(s!==a){var g=l-u,d=s-i,_=c-f,w=a-o;if(g>d&&_<w)return 1;if(g<d&&_>w)return-1}return s>a?1:s<a||l<c?-1:l>c?1:r.id<n.id?-1:r.id>n.id?1:0}}]);function e(t,r,n,i){In(this,e),this.id=++cE,this.leftSE=t,t.segment=this,t.otherSE=r,this.rightSE=r,r.segment=this,r.otherSE=t,this.rings=n,this.windings=i}return Pr(e,[{key:"replaceRightSE",value:function(r){this.rightSE=r,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}},{key:"bbox",value:function(){var r=this.leftSE.point.y,n=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:r<n?r:n},ur:{x:this.rightSE.point.x,y:r>n?r:n}}}},{key:"vector",value:function(){return{x:this.rightSE.point.x-this.leftSE.point.x,y:this.rightSE.point.y-this.leftSE.point.y}}},{key:"isAnEndpoint",value:function(r){return r.x===this.leftSE.point.x&&r.y===this.leftSE.point.y||r.x===this.rightSE.point.x&&r.y===this.rightSE.point.y}},{key:"comparePoint",value:function(r){if(this.isAnEndpoint(r))return 0;var n=this.leftSE.point,i=this.rightSE.point,o=this.vector();if(n.x===i.x)return r.x===n.x?0:r.x<n.x?1:-1;var s=(r.y-n.y)/o.y,a=n.x+s*o.x;if(r.x===a)return 0;var u=(r.x-n.x)/o.x,f=n.y+u*o.y;return r.y===f?0:r.y<f?-1:1}},{key:"getIntersection",value:function(r){var n=this.bbox(),i=r.bbox(),o=cf(n,i);if(o===null)return null;var s=this.leftSE.point,a=this.rightSE.point,u=r.leftSE.point,f=r.rightSE.point,l=gs(n,u)&&this.comparePoint(u)===0,c=gs(i,s)&&r.comparePoint(s)===0,h=gs(n,f)&&this.comparePoint(f)===0,p=gs(i,a)&&r.comparePoint(a)===0;if(c&&l)return p&&!h?a:!p&&h?f:null;if(c)return h&&s.x===f.x&&s.y===f.y?null:s;if(l)return p&&a.x===u.x&&a.y===u.y?null:u;if(p&&h)return null;if(p)return a;if(h)return f;var v=lE(s,this.vector(),u,r.vector());return v===null||!gs(o,v)?null:Ts.round(v.x,v.y)}},{key:"split",value:function(r){var n=[],i=r.events!==void 0,o=new Wn(r,!0),s=new Wn(r,!1),a=this.rightSE;this.replaceRightSE(s),n.push(s),n.push(o);var u=new e(o,a,this.rings.slice(),this.windings.slice());return Wn.comparePoints(u.leftSE.point,u.rightSE.point)>0&&u.swapEvents(),Wn.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),i&&(o.checkForConsuming(),s.checkForConsuming()),n}},{key:"swapEvents",value:function(){var r=this.rightSE;this.rightSE=this.leftSE,this.leftSE=r,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(var n=0,i=this.windings.length;n<i;n++)this.windings[n]*=-1}},{key:"consume",value:function(r){for(var n=this,i=r;n.consumedBy;)n=n.consumedBy;for(;i.consumedBy;)i=i.consumedBy;var o=e.compare(n,i);if(o!==0){if(o>0){var s=n;n=i,i=s}if(n.prev===i){var a=n;n=i,i=a}for(var u=0,f=i.rings.length;u<f;u++){var l=i.rings[u],c=i.windings[u],h=n.rings.indexOf(l);h===-1?(n.rings.push(l),n.windings.push(c)):n.windings[h]+=c}i.rings=null,i.windings=null,i.consumedBy=n,i.leftSE.consumedBy=n.leftSE,i.rightSE.consumedBy=n.rightSE}}},{key:"prevInResult",value:function(){return this._prevInResult!==void 0?this._prevInResult:(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null,this._prevInResult)}},{key:"beforeState",value:function(){if(this._beforeState!==void 0)return this._beforeState;if(!this.prev)this._beforeState={rings:[],windings:[],multiPolys:[]};else{var r=this.prev.consumedBy||this.prev;this._beforeState=r.afterState()}return this._beforeState}},{key:"afterState",value:function(){if(this._afterState!==void 0)return this._afterState;var r=this.beforeState();this._afterState={rings:r.rings.slice(0),windings:r.windings.slice(0),multiPolys:[]};for(var n=this._afterState.rings,i=this._afterState.windings,o=this._afterState.multiPolys,s=0,a=this.rings.length;s<a;s++){var u=this.rings[s],f=this.windings[s],l=n.indexOf(u);l===-1?(n.push(u),i.push(f)):i[l]+=f}for(var c=[],h=[],p=0,v=n.length;p<v;p++)if(i[p]!==0){var y=n[p],E=y.poly;if(h.indexOf(E)===-1)if(y.isExterior)c.push(E);else{h.indexOf(E)===-1&&h.push(E);var x=c.indexOf(y.poly);x!==-1&&c.splice(x,1)}}for(var g=0,d=c.length;g<d;g++){var _=c[g].multiPoly;o.indexOf(_)===-1&&o.push(_)}return this._afterState}},{key:"isInResult",value:function(){if(this.consumedBy)return!1;if(this._isInResult!==void 0)return this._isInResult;var r=this.beforeState().multiPolys,n=this.afterState().multiPolys;switch(Mn.type){case"union":{var i=r.length===0,o=n.length===0;this._isInResult=i!==o;break}case"intersection":{var s,a;r.length<n.length?(s=r.length,a=n.length):(s=n.length,a=r.length),this._isInResult=a===Mn.numMultiPolys&&s<a;break}case"xor":{var u=Math.abs(r.length-n.length);this._isInResult=u%2===1;break}case"difference":{var f=function(c){return c.length===1&&c[0].isSubject};this._isInResult=f(r)!==f(n);break}default:throw new Error("Unrecognized operation type found ".concat(Mn.type))}return this._isInResult}}],[{key:"fromRing",value:function(r,n,i){var o,s,a,u=Wn.comparePoints(r,n);if(u<0)o=r,s=n,a=1;else if(u>0)o=n,s=r,a=-1;else throw new Error("Tried to create degenerate segment at [".concat(r.x,", ").concat(r.y,"]"));var f=new Wn(o,!0),l=new Wn(s,!1);return new e(f,l,[i],[a])}}]),e}(),th=function(){function e(t,r,n){if(In(this,e),!Array.isArray(t)||t.length===0)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=r,this.isExterior=n,this.segments=[],typeof t[0][0]!="number"||typeof t[0][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var i=Ts.round(t[0][0],t[0][1]);this.bbox={ll:{x:i.x,y:i.y},ur:{x:i.x,y:i.y}};for(var o=i,s=1,a=t.length;s<a;s++){if(typeof t[s][0]!="number"||typeof t[s][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var u=Ts.round(t[s][0],t[s][1]);u.x===o.x&&u.y===o.y||(this.segments.push(Aa.fromRing(o,u,this)),u.x<this.bbox.ll.x&&(this.bbox.ll.x=u.x),u.y<this.bbox.ll.y&&(this.bbox.ll.y=u.y),u.x>this.bbox.ur.x&&(this.bbox.ur.x=u.x),u.y>this.bbox.ur.y&&(this.bbox.ur.y=u.y),o=u)}(i.x!==o.x||i.y!==o.y)&&this.segments.push(Aa.fromRing(o,i,this))}return Pr(e,[{key:"getSweepEvents",value:function(){for(var r=[],n=0,i=this.segments.length;n<i;n++){var o=this.segments[n];r.push(o.leftSE),r.push(o.rightSE)}return r}}]),e}(),hE=function(){function e(t,r){if(In(this,e),!Array.isArray(t))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new th(t[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(var n=1,i=t.length;n<i;n++){var o=new th(t[n],this,!1);o.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=o.bbox.ll.x),o.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=o.bbox.ll.y),o.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=o.bbox.ur.x),o.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=o.bbox.ur.y),this.interiorRings.push(o)}this.multiPoly=r}return Pr(e,[{key:"getSweepEvents",value:function(){for(var r=this.exteriorRing.getSweepEvents(),n=0,i=this.interiorRings.length;n<i;n++)for(var o=this.interiorRings[n].getSweepEvents(),s=0,a=o.length;s<a;s++)r.push(o[s]);return r}}]),e}(),eh=function(){function e(t,r){if(In(this,e),!Array.isArray(t))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{typeof t[0][0][0]=="number"&&(t=[t])}catch{}this.polys=[],this.bbox={ll:{x:Number.POSITIVE_INFINITY,y:Number.POSITIVE_INFINITY},ur:{x:Number.NEGATIVE_INFINITY,y:Number.NEGATIVE_INFINITY}};for(var n=0,i=t.length;n<i;n++){var o=new hE(t[n],this);o.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=o.bbox.ll.x),o.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=o.bbox.ll.y),o.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=o.bbox.ur.x),o.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=o.bbox.ur.y),this.polys.push(o)}this.isSubject=r}return Pr(e,[{key:"getSweepEvents",value:function(){for(var r=[],n=0,i=this.polys.length;n<i;n++)for(var o=this.polys[n].getSweepEvents(),s=0,a=o.length;s<a;s++)r.push(o[s]);return r}}]),e}(),pE=function(){Pr(e,null,[{key:"factory",value:function(r){for(var n=[],i=0,o=r.length;i<o;i++){var s=r[i];if(!(!s.isInResult()||s.ringOut)){for(var a=null,u=s.leftSE,f=s.rightSE,l=[u],c=u.point,h=[];a=u,u=f,l.push(u),u.point!==c;)for(;;){var p=u.getAvailableLinkedEvents();if(p.length===0){var v=l[0].point,y=l[l.length-1].point;throw new Error("Unable to complete output ring starting at [".concat(v.x,",")+" ".concat(v.y,"]. Last matching segment found ends at")+" [".concat(y.x,", ").concat(y.y,"]."))}if(p.length===1){f=p[0].otherSE;break}for(var E=null,x=0,g=h.length;x<g;x++)if(h[x].point===u.point){E=x;break}if(E!==null){var d=h.splice(E)[0],_=l.splice(d.index);_.unshift(_[0].otherSE),n.push(new e(_.reverse()));continue}h.push({index:l.length,point:u.point});var w=u.getLeftmostComparator(a);f=p.sort(w)[0].otherSE;break}n.push(new e(l))}}return n}}]);function e(t){In(this,e),this.events=t;for(var r=0,n=t.length;r<n;r++)t[r].segment.ringOut=this;this.poly=null}return Pr(e,[{key:"getGeom",value:function(){for(var r=this.events[0].point,n=[r],i=1,o=this.events.length-1;i<o;i++){var s=this.events[i].point,a=this.events[i+1].point;Qc(s,r,a)!==0&&(n.push(s),r=s)}if(n.length===1)return null;var u=n[0],f=n[1];Qc(u,r,f)===0&&n.shift(),n.push(n[0]);for(var l=this.isExteriorRing()?1:-1,c=this.isExteriorRing()?0:n.length-1,h=this.isExteriorRing()?n.length:-1,p=[],v=c;v!=h;v+=l)p.push([n[v].x,n[v].y]);return p}},{key:"isExteriorRing",value:function(){if(this._isExteriorRing===void 0){var r=this.enclosingRing();this._isExteriorRing=r?!r.isExteriorRing():!0}return this._isExteriorRing}},{key:"enclosingRing",value:function(){return this._enclosingRing===void 0&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}},{key:"_calcEnclosingRing",value:function(){for(var r=this.events[0],n=1,i=this.events.length;n<i;n++){var o=this.events[n];Wn.compare(r,o)>0&&(r=o)}for(var s=r.segment.prevInResult(),a=s?s.prevInResult():null;;){if(!s)return null;if(!a)return s.ringOut;if(a.ringOut!==s.ringOut)return a.ringOut.enclosingRing()!==s.ringOut?s.ringOut:s.ringOut.enclosingRing();s=a.prevInResult(),a=s?s.prevInResult():null}}}]),e}(),rh=function(){function e(t){In(this,e),this.exteriorRing=t,t.poly=this,this.interiorRings=[]}return Pr(e,[{key:"addInterior",value:function(r){this.interiorRings.push(r),r.poly=this}},{key:"getGeom",value:function(){var r=[this.exteriorRing.getGeom()];if(r[0]===null)return null;for(var n=0,i=this.interiorRings.length;n<i;n++){var o=this.interiorRings[n].getGeom();o!==null&&r.push(o)}return r}}]),e}(),gE=function(){function e(t){In(this,e),this.rings=t,this.polys=this._composePolys(t)}return Pr(e,[{key:"getGeom",value:function(){for(var r=[],n=0,i=this.polys.length;n<i;n++){var o=this.polys[n].getGeom();o!==null&&r.push(o)}return r}},{key:"_composePolys",value:function(r){for(var n=[],i=0,o=r.length;i<o;i++){var s=r[i];if(!s.poly)if(s.isExteriorRing())n.push(new rh(s));else{var a=s.enclosingRing();a.poly||n.push(new rh(a)),a.poly.addInterior(s)}}return n}}]),e}(),vE=function(){function e(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Aa.compare;In(this,e),this.queue=t,this.tree=new Qf(r),this.segments=[]}return Pr(e,[{key:"process",value:function(r){var n=r.segment,i=[];if(r.consumedBy)return r.isLeft?this.queue.remove(r.otherSE):this.tree.remove(n),i;var o=r.isLeft?this.tree.insert(n):this.tree.find(n);if(!o)throw new Error("Unable to find segment #".concat(n.id," ")+"[".concat(n.leftSE.point.x,", ").concat(n.leftSE.point.y,"] -> ")+"[".concat(n.rightSE.point.x,", ").concat(n.rightSE.point.y,"] ")+"in SweepLine tree. Please submit a bug report.");for(var s=o,a=o,u=void 0,f=void 0;u===void 0;)s=this.tree.prev(s),s===null?u=null:s.key.consumedBy===void 0&&(u=s.key);for(;f===void 0;)a=this.tree.next(a),a===null?f=null:a.key.consumedBy===void 0&&(f=a.key);if(r.isLeft){var l=null;if(u){var c=u.getIntersection(n);if(c!==null&&(n.isAnEndpoint(c)||(l=c),!u.isAnEndpoint(c)))for(var h=this._splitSafely(u,c),p=0,v=h.length;p<v;p++)i.push(h[p])}var y=null;if(f){var E=f.getIntersection(n);if(E!==null&&(n.isAnEndpoint(E)||(y=E),!f.isAnEndpoint(E)))for(var x=this._splitSafely(f,E),g=0,d=x.length;g<d;g++)i.push(x[g])}if(l!==null||y!==null){var _=null;if(l===null)_=y;else if(y===null)_=l;else{var w=Wn.comparePoints(l,y);_=w<=0?l:y}this.queue.remove(n.rightSE),i.push(n.rightSE);for(var S=n.split(_),C=0,N=S.length;C<N;C++)i.push(S[C])}i.length>0?(this.tree.remove(n),i.push(r)):(this.segments.push(n),n.prev=u)}else{if(u&&f){var I=u.getIntersection(f);if(I!==null){if(!u.isAnEndpoint(I))for(var A=this._splitSafely(u,I),O=0,D=A.length;O<D;O++)i.push(A[O]);if(!f.isAnEndpoint(I))for(var T=this._splitSafely(f,I),R=0,q=T.length;R<q;R++)i.push(T[R])}}this.tree.remove(n)}return i}},{key:"_splitSafely",value:function(r,n){this.tree.remove(r);var i=r.rightSE;this.queue.remove(i);var o=r.split(n);return o.push(i),r.consumedBy===void 0&&this.tree.insert(r),o}}]),e}(),nh=typeof process<"u"&&og.POLYGON_CLIPPING_MAX_QUEUE_SIZE||1e6,dE=typeof process<"u"&&og.POLYGON_CLIPPING_MAX_SWEEPLINE_SEGMENTS||1e6,yE=function(){function e(){In(this,e)}return Pr(e,[{key:"run",value:function(r,n,i){Mn.type=r,Ts.reset();for(var o=[new eh(n,!0)],s=0,a=i.length;s<a;s++)o.push(new eh(i[s],!1));if(Mn.numMultiPolys=o.length,Mn.type==="difference")for(var u=o[0],f=1;f<o.length;)cf(o[f].bbox,u.bbox)!==null?f++:o.splice(f,1);if(Mn.type==="intersection"){for(var l=0,c=o.length;l<c;l++)for(var h=o[l],p=l+1,v=o.length;p<v;p++)if(cf(h.bbox,o[p].bbox)===null)return[]}for(var y=new Qf(Wn.compare),E=0,x=o.length;E<x;E++)for(var g=o[E].getSweepEvents(),d=0,_=g.length;d<_;d++)if(y.insert(g[d]),y.size>nh)throw new Error("Infinite loop when putting segment endpoints in a priority queue (queue size too big). Please file a bug report.");for(var w=new vE(y),S=y.size,C=y.pop();C;){var N=C.key;if(y.size===S){var I=N.segment;throw new Error("Unable to pop() ".concat(N.isLeft?"left":"right"," SweepEvent ")+"[".concat(N.point.x,", ").concat(N.point.y,"] from segment #").concat(I.id," ")+"[".concat(I.leftSE.point.x,", ").concat(I.leftSE.point.y,"] -> ")+"[".concat(I.rightSE.point.x,", ").concat(I.rightSE.point.y,"] from queue. ")+"Please file a bug report.")}if(y.size>nh)throw new Error("Infinite loop when passing sweep line over endpoints (queue size too big). Please file a bug report.");if(w.segments.length>dE)throw new Error("Infinite loop when passing sweep line over endpoints (too many sweep line segments). Please file a bug report.");for(var A=w.process(N),O=0,D=A.length;O<D;O++){var T=A[O];T.consumedBy===void 0&&y.insert(T)}S=y.size,C=y.pop()}Ts.reset();var R=pE.factory(w.segments),q=new gE(R);return q.getGeom()}}]),e}(),Mn=new yE,mE=function(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];return Mn.run("union",t,n)},_E=function(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];return Mn.run("intersection",t,n)},EE=function(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];return Mn.run("xor",t,n)},xE=function(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];return Mn.run("difference",t,n)},jf={union:mE,intersection:_E,xor:EE,difference:xE};function _w(e,t){var r=fe(e),n=fe(t),i=e.properties||{},o=jf.difference(r.coordinates,n.coordinates);return o.length===0?null:o.length===1?pt(o[0],i):Qn(o,i)}"fill"in Array.prototype||Object.defineProperty(Array.prototype,"fill",{configurable:!0,value:function(t){if(this===void 0||this===null)throw new TypeError(this+" is not an object");var r=Object(this),n=Math.max(Math.min(r.length,9007199254740991),0)||0,i=1 in arguments&&parseInt(Number(arguments[1]),10)||0;i=i<0?Math.max(n+i,0):Math.min(i,n);var o=2 in arguments&&arguments[2]!==void 0?parseInt(Number(arguments[2]),10)||0:n;for(o=o<0?Math.max(n+arguments[2],0):Math.min(o,n);i<o;)r[i]=t,++i;return r},writable:!0});Number.isFinite=Number.isFinite||function(e){return typeof e=="number"&&isFinite(e)};Number.isInteger=Number.isInteger||function(e){return typeof e=="number"&&isFinite(e)&&Math.floor(e)===e};Number.parseFloat=Number.parseFloat||parseFloat;Number.isNaN=Number.isNaN||function(e){return e!==e};Math.trunc=Math.trunc||function(e){return e<0?Math.ceil(e):Math.floor(e)};var ji=function(){};ji.prototype.interfaces_=function(){return[]};ji.prototype.getClass=function(){return ji};ji.prototype.equalsWithTolerance=function(t,r,n){return Math.abs(t-r)<=n};var le=function(e){function t(r){e.call(this,r),this.name="IllegalArgumentException",this.message=r,this.stack=new e().stack}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t}(Error),st=function(){},ag={MAX_VALUE:{configurable:!0}};st.isNaN=function(t){return Number.isNaN(t)};st.doubleToLongBits=function(t){return t};st.longBitsToDouble=function(t){return t};st.isInfinite=function(t){return!Number.isFinite(t)};ag.MAX_VALUE.get=function(){return Number.MAX_VALUE};Object.defineProperties(st,ag);var zr=function(){},ru=function(){},Bo=function(){};function Ur(){}var P=function e(){if(this.x=null,this.y=null,this.z=null,arguments.length===0)this.x=0,this.y=0,this.z=e.NULL_ORDINATE;else if(arguments.length===1){var t=arguments[0];this.x=t.x,this.y=t.y,this.z=t.z}else arguments.length===2?(this.x=arguments[0],this.y=arguments[1],this.z=e.NULL_ORDINATE):arguments.length===3&&(this.x=arguments[0],this.y=arguments[1],this.z=arguments[2])},ho={DimensionalComparator:{configurable:!0},serialVersionUID:{configurable:!0},NULL_ORDINATE:{configurable:!0},X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0}};P.prototype.setOrdinate=function(t,r){switch(t){case P.X:this.x=r;break;case P.Y:this.y=r;break;case P.Z:this.z=r;break;default:throw new le("Invalid ordinate index: "+t)}};P.prototype.equals2D=function(){if(arguments.length===1){var t=arguments[0];return!(this.x!==t.x||this.y!==t.y)}else if(arguments.length===2){var r=arguments[0],n=arguments[1];return!(!ji.equalsWithTolerance(this.x,r.x,n)||!ji.equalsWithTolerance(this.y,r.y,n))}};P.prototype.getOrdinate=function(t){switch(t){case P.X:return this.x;case P.Y:return this.y;case P.Z:return this.z}throw new le("Invalid ordinate index: "+t)};P.prototype.equals3D=function(t){return this.x===t.x&&this.y===t.y&&(this.z===t.z||st.isNaN(this.z))&&st.isNaN(t.z)};P.prototype.equals=function(t){return t instanceof P?this.equals2D(t):!1};P.prototype.equalInZ=function(t,r){return ji.equalsWithTolerance(this.z,t.z,r)};P.prototype.compareTo=function(t){var r=t;return this.x<r.x?-1:this.x>r.x?1:this.y<r.y?-1:this.y>r.y?1:0};P.prototype.clone=function(){};P.prototype.copy=function(){return new P(this)};P.prototype.toString=function(){return"("+this.x+", "+this.y+", "+this.z+")"};P.prototype.distance3D=function(t){var r=this.x-t.x,n=this.y-t.y,i=this.z-t.z;return Math.sqrt(r*r+n*n+i*i)};P.prototype.distance=function(t){var r=this.x-t.x,n=this.y-t.y;return Math.sqrt(r*r+n*n)};P.prototype.hashCode=function(){var t=17;return t=37*t+P.hashCode(this.x),t=37*t+P.hashCode(this.y),t};P.prototype.setCoordinate=function(t){this.x=t.x,this.y=t.y,this.z=t.z};P.prototype.interfaces_=function(){return[zr,ru,Ur]};P.prototype.getClass=function(){return P};P.hashCode=function(){if(arguments.length===1){var t=arguments[0],r=st.doubleToLongBits(t);return Math.trunc((r^r)>>>32)}};ho.DimensionalComparator.get=function(){return ai};ho.serialVersionUID.get=function(){return 6683108902428367e3};ho.NULL_ORDINATE.get=function(){return st.NaN};ho.X.get=function(){return 0};ho.Y.get=function(){return 1};ho.Z.get=function(){return 2};Object.defineProperties(P,ho);var ai=function(t){if(this._dimensionsToTest=2,arguments.length!==0){if(arguments.length===1){var r=arguments[0];if(r!==2&&r!==3)throw new le("only 2 or 3 dimensions may be specified");this._dimensionsToTest=r}}};ai.prototype.compare=function(t,r){var n=t,i=r,o=ai.compare(n.x,i.x);if(o!==0)return o;var s=ai.compare(n.y,i.y);if(s!==0)return s;if(this._dimensionsToTest<=2)return 0;var a=ai.compare(n.z,i.z);return a};ai.prototype.interfaces_=function(){return[Bo]};ai.prototype.getClass=function(){return ai};ai.compare=function(t,r){return t<r?-1:t>r?1:st.isNaN(t)?st.isNaN(r)?0:-1:st.isNaN(r)?1:0};var Go=function(){};Go.prototype.create=function(){};Go.prototype.interfaces_=function(){return[]};Go.prototype.getClass=function(){return Go};var L=function(){},ta={INTERIOR:{configurable:!0},BOUNDARY:{configurable:!0},EXTERIOR:{configurable:!0},NONE:{configurable:!0}};L.prototype.interfaces_=function(){return[]};L.prototype.getClass=function(){return L};L.toLocationSymbol=function(t){switch(t){case L.EXTERIOR:return"e";case L.BOUNDARY:return"b";case L.INTERIOR:return"i";case L.NONE:return"-"}throw new le("Unknown location value: "+t)};ta.INTERIOR.get=function(){return 0};ta.BOUNDARY.get=function(){return 1};ta.EXTERIOR.get=function(){return 2};ta.NONE.get=function(){return-1};Object.defineProperties(L,ta);var tt=function(e,t){return e.interfaces_&&e.interfaces_().indexOf(t)>-1},Lr=function(){},ug={LOG_10:{configurable:!0}};Lr.prototype.interfaces_=function(){return[]};Lr.prototype.getClass=function(){return Lr};Lr.log10=function(t){var r=Math.log(t);return st.isInfinite(r)||st.isNaN(r)?r:r/Lr.LOG_10};Lr.min=function(t,r,n,i){var o=t;return r<o&&(o=r),n<o&&(o=n),i<o&&(o=i),o};Lr.clamp=function(){if(typeof arguments[2]=="number"&&typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var t=arguments[0],r=arguments[1],n=arguments[2];return t<r?r:t>n?n:t}else if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var i=arguments[0],o=arguments[1],s=arguments[2];return i<o?o:i>s?s:i}};Lr.wrap=function(t,r){return t<0?r- -t%r:t%r};Lr.max=function(){if(arguments.length===3){var t=arguments[0],r=arguments[1],n=arguments[2],i=t;return r>i&&(i=r),n>i&&(i=n),i}else if(arguments.length===4){var o=arguments[0],s=arguments[1],a=arguments[2],u=arguments[3],f=o;return s>f&&(f=s),a>f&&(f=a),u>f&&(f=u),f}};Lr.average=function(t,r){return(t+r)/2};ug.LOG_10.get=function(){return Math.log(10)};Object.defineProperties(Lr,ug);var Cn=function(t){this.str=t};Cn.prototype.append=function(t){this.str+=t};Cn.prototype.setCharAt=function(t,r){this.str=this.str.substr(0,t)+r+this.str.substr(t+1)};Cn.prototype.toString=function(t){return this.str};var hn=function(t){this.value=t};hn.prototype.intValue=function(){return this.value};hn.prototype.compareTo=function(t){return this.value<t?-1:this.value>t?1:0};hn.isNaN=function(t){return Number.isNaN(t)};var Fs=function(){};Fs.isWhitespace=function(t){return t<=32&&t>=0||t===127};Fs.toUpperCase=function(t){return t.toUpperCase()};var M=function e(){if(this._hi=0,this._lo=0,arguments.length===0)this.init(0);else if(arguments.length===1){if(typeof arguments[0]=="number"){var t=arguments[0];this.init(t)}else if(arguments[0]instanceof e){var r=arguments[0];this.init(r)}else if(typeof arguments[0]=="string"){var n=arguments[0];e.call(this,e.parse(n))}}else if(arguments.length===2){var i=arguments[0],o=arguments[1];this.init(i,o)}},rn={PI:{configurable:!0},TWO_PI:{configurable:!0},PI_2:{configurable:!0},E:{configurable:!0},NaN:{configurable:!0},EPS:{configurable:!0},SPLIT:{configurable:!0},MAX_PRINT_DIGITS:{configurable:!0},TEN:{configurable:!0},ONE:{configurable:!0},SCI_NOT_EXPONENT_CHAR:{configurable:!0},SCI_NOT_ZERO:{configurable:!0}};M.prototype.le=function(t){return(this._hi<t._hi||this._hi===t._hi)&&this._lo<=t._lo};M.prototype.extractSignificantDigits=function(t,r){var n=this.abs(),i=M.magnitude(n._hi),o=M.TEN.pow(i);n=n.divide(o),n.gt(M.TEN)?(n=n.divide(M.TEN),i+=1):n.lt(M.ONE)&&(n=n.multiply(M.TEN),i-=1);for(var s=i+1,a=new Cn,u=M.MAX_PRINT_DIGITS-1,f=0;f<=u;f++){t&&f===s&&a.append(".");var l=Math.trunc(n._hi);if(l<0)break;var c=!1,h=0;l>9?(c=!0,h="9"):h="0"+l,a.append(h),n=n.subtract(M.valueOf(l)).multiply(M.TEN),c&&n.selfAdd(M.TEN);var p=!0,v=M.magnitude(n._hi);if(v<0&&Math.abs(v)>=u-f&&(p=!1),!p)break}return r[0]=i,a.toString()};M.prototype.sqr=function(){return this.multiply(this)};M.prototype.doubleValue=function(){return this._hi+this._lo};M.prototype.subtract=function(){if(arguments[0]instanceof M){var t=arguments[0];return this.add(t.negate())}else if(typeof arguments[0]=="number"){var r=arguments[0];return this.add(-r)}};M.prototype.equals=function(){if(arguments.length===1){var t=arguments[0];return this._hi===t._hi&&this._lo===t._lo}};M.prototype.isZero=function(){return this._hi===0&&this._lo===0};M.prototype.selfSubtract=function(){if(arguments[0]instanceof M){var t=arguments[0];return this.isNaN()?this:this.selfAdd(-t._hi,-t._lo)}else if(typeof arguments[0]=="number"){var r=arguments[0];return this.isNaN()?this:this.selfAdd(-r,0)}};M.prototype.getSpecialNumberString=function(){return this.isZero()?"0.0":this.isNaN()?"NaN ":null};M.prototype.min=function(t){return this.le(t)?this:t};M.prototype.selfDivide=function(){if(arguments.length===1){if(arguments[0]instanceof M){var t=arguments[0];return this.selfDivide(t._hi,t._lo)}else if(typeof arguments[0]=="number"){var r=arguments[0];return this.selfDivide(r,0)}}else if(arguments.length===2){var n=arguments[0],i=arguments[1],o=null,s=null,a=null,u=null,f=null,l=null,c=null,h=null;return f=this._hi/n,l=M.SPLIT*f,o=l-f,h=M.SPLIT*n,o=l-o,s=f-o,a=h-n,c=f*n,a=h-a,u=n-a,h=o*a-c+o*u+s*a+s*u,l=(this._hi-c-h+this._lo-f*i)/n,h=f+l,this._hi=h,this._lo=f-h+l,this}};M.prototype.dump=function(){return"DD<"+this._hi+", "+this._lo+">"};M.prototype.divide=function(){if(arguments[0]instanceof M){var t=arguments[0],r=null,n=null,i=null,o=null,s=null,a=null,u=null,f=null;s=this._hi/t._hi,a=M.SPLIT*s,r=a-s,f=M.SPLIT*t._hi,r=a-r,n=s-r,i=f-t._hi,u=s*t._hi,i=f-i,o=t._hi-i,f=r*i-u+r*o+n*i+n*o,a=(this._hi-u-f+this._lo-s*t._lo)/t._hi,f=s+a;var l=f,c=s-f+a;return new M(l,c)}else if(typeof arguments[0]=="number"){var h=arguments[0];return st.isNaN(h)?M.createNaN():M.copy(this).selfDivide(h,0)}};M.prototype.ge=function(t){return(this._hi>t._hi||this._hi===t._hi)&&this._lo>=t._lo};M.prototype.pow=function(t){if(t===0)return M.valueOf(1);var r=new M(this),n=M.valueOf(1),i=Math.abs(t);if(i>1)for(;i>0;)i%2===1&&n.selfMultiply(r),i/=2,i>0&&(r=r.sqr());else n=r;return t<0?n.reciprocal():n};M.prototype.ceil=function(){if(this.isNaN())return M.NaN;var t=Math.ceil(this._hi),r=0;return t===this._hi&&(r=Math.ceil(this._lo)),new M(t,r)};M.prototype.compareTo=function(t){var r=t;return this._hi<r._hi?-1:this._hi>r._hi?1:this._lo<r._lo?-1:this._lo>r._lo?1:0};M.prototype.rint=function(){if(this.isNaN())return this;var t=this.add(.5);return t.floor()};M.prototype.setValue=function(){if(arguments[0]instanceof M){var t=arguments[0];return this.init(t),this}else if(typeof arguments[0]=="number"){var r=arguments[0];return this.init(r),this}};M.prototype.max=function(t){return this.ge(t)?this:t};M.prototype.sqrt=function(){if(this.isZero())return M.valueOf(0);if(this.isNegative())return M.NaN;var t=1/Math.sqrt(this._hi),r=this._hi*t,n=M.valueOf(r),i=this.subtract(n.sqr()),o=i._hi*(t*.5);return n.add(o)};M.prototype.selfAdd=function(){if(arguments.length===1){if(arguments[0]instanceof M){var t=arguments[0];return this.selfAdd(t._hi,t._lo)}else if(typeof arguments[0]=="number"){var r=arguments[0],n=null,i=null,o=null,s=null,a=null,u=null;return o=this._hi+r,a=o-this._hi,s=o-a,s=r-a+(this._hi-s),u=s+this._lo,n=o+u,i=u+(o-n),this._hi=n+i,this._lo=i+(n-this._hi),this}}else if(arguments.length===2){var f=arguments[0],l=arguments[1],c=null,h=null,p=null,v=null,y=null,E=null,x=null,g=null;y=this._hi+f,p=this._lo+l,x=y-this._hi,g=p-this._lo,E=y-x,v=p-g,E=f-x+(this._hi-E),v=l-g+(this._lo-v),x=E+p,c=y+x,h=x+(y-c),x=v+h;var d=c+x,_=x+(c-d);return this._hi=d,this._lo=_,this}};M.prototype.selfMultiply=function(){if(arguments.length===1){if(arguments[0]instanceof M){var t=arguments[0];return this.selfMultiply(t._hi,t._lo)}else if(typeof arguments[0]=="number"){var r=arguments[0];return this.selfMultiply(r,0)}}else if(arguments.length===2){var n=arguments[0],i=arguments[1],o=null,s=null,a=null,u=null,f=null,l=null;f=M.SPLIT*this._hi,o=f-this._hi,l=M.SPLIT*n,o=f-o,s=this._hi-o,a=l-n,f=this._hi*n,a=l-a,u=n-a,l=o*a-f+o*u+s*a+s*u+(this._hi*i+this._lo*n);var c=f+l;o=f-c;var h=l+o;return this._hi=c,this._lo=h,this}};M.prototype.selfSqr=function(){return this.selfMultiply(this)};M.prototype.floor=function(){if(this.isNaN())return M.NaN;var t=Math.floor(this._hi),r=0;return t===this._hi&&(r=Math.floor(this._lo)),new M(t,r)};M.prototype.negate=function(){return this.isNaN()?this:new M(-this._hi,-this._lo)};M.prototype.clone=function(){};M.prototype.multiply=function(){if(arguments[0]instanceof M){var t=arguments[0];return t.isNaN()?M.createNaN():M.copy(this).selfMultiply(t)}else if(typeof arguments[0]=="number"){var r=arguments[0];return st.isNaN(r)?M.createNaN():M.copy(this).selfMultiply(r,0)}};M.prototype.isNaN=function(){return st.isNaN(this._hi)};M.prototype.intValue=function(){return Math.trunc(this._hi)};M.prototype.toString=function(){var t=M.magnitude(this._hi);return t>=-3&&t<=20?this.toStandardNotation():this.toSciNotation()};M.prototype.toStandardNotation=function(){var t=this.getSpecialNumberString();if(t!==null)return t;var r=new Array(1).fill(null),n=this.extractSignificantDigits(!0,r),i=r[0]+1,o=n;if(n.charAt(0)===".")o="0"+n;else if(i<0)o="0."+M.stringOfChar("0",-i)+n;else if(n.indexOf(".")===-1){var s=i-n.length,a=M.stringOfChar("0",s);o=n+a+".0"}return this.isNegative()?"-"+o:o};M.prototype.reciprocal=function(){var t=null,r=null,n=null,i=null,o=null,s=null,a=null,u=null;o=1/this._hi,s=M.SPLIT*o,t=s-o,u=M.SPLIT*this._hi,t=s-t,r=o-t,n=u-this._hi,a=o*this._hi,n=u-n,i=this._hi-n,u=t*n-a+t*i+r*n+r*i,s=(1-a-u-o*this._lo)/this._hi;var f=o+s,l=o-f+s;return new M(f,l)};M.prototype.toSciNotation=function(){if(this.isZero())return M.SCI_NOT_ZERO;var t=this.getSpecialNumberString();if(t!==null)return t;var r=new Array(1).fill(null),n=this.extractSignificantDigits(!1,r),i=M.SCI_NOT_EXPONENT_CHAR+r[0];if(n.charAt(0)==="0")throw new Error("Found leading zero: "+n);var o="";n.length>1&&(o=n.substring(1));var s=n.charAt(0)+"."+o;return this.isNegative()?"-"+s+i:s+i};M.prototype.abs=function(){return this.isNaN()?M.NaN:this.isNegative()?this.negate():new M(this)};M.prototype.isPositive=function(){return(this._hi>0||this._hi===0)&&this._lo>0};M.prototype.lt=function(t){return(this._hi<t._hi||this._hi===t._hi)&&this._lo<t._lo};M.prototype.add=function(){if(arguments[0]instanceof M){var t=arguments[0];return M.copy(this).selfAdd(t)}else if(typeof arguments[0]=="number"){var r=arguments[0];return M.copy(this).selfAdd(r)}};M.prototype.init=function(){if(arguments.length===1){if(typeof arguments[0]=="number"){var t=arguments[0];this._hi=t,this._lo=0}else if(arguments[0]instanceof M){var r=arguments[0];this._hi=r._hi,this._lo=r._lo}}else if(arguments.length===2){var n=arguments[0],i=arguments[1];this._hi=n,this._lo=i}};M.prototype.gt=function(t){return(this._hi>t._hi||this._hi===t._hi)&&this._lo>t._lo};M.prototype.isNegative=function(){return(this._hi<0||this._hi===0)&&this._lo<0};M.prototype.trunc=function(){return this.isNaN()?M.NaN:this.isPositive()?this.floor():this.ceil()};M.prototype.signum=function(){return this._hi>0?1:this._hi<0?-1:this._lo>0?1:this._lo<0?-1:0};M.prototype.interfaces_=function(){return[Ur,zr,ru]};M.prototype.getClass=function(){return M};M.sqr=function(t){return M.valueOf(t).selfMultiply(t)};M.valueOf=function(){if(typeof arguments[0]=="string"){var t=arguments[0];return M.parse(t)}else if(typeof arguments[0]=="number"){var r=arguments[0];return new M(r)}};M.sqrt=function(t){return M.valueOf(t).sqrt()};M.parse=function(t){for(var r=0,n=t.length;Fs.isWhitespace(t.charAt(r));)r++;var i=!1;if(r<n){var o=t.charAt(r);(o==="-"||o==="+")&&(r++,o==="-"&&(i=!0))}for(var s=new M,a=0,u=0,f=0;!(r>=n);){var l=t.charAt(r);if(r++,Fs.isDigit(l)){var c=l-"0";s.selfMultiply(M.TEN),s.selfAdd(c),a++;continue}if(l==="."){u=a;continue}if(l==="e"||l==="E"){var h=t.substring(r);try{f=hn.parseInt(h)}catch(x){throw x instanceof Error?new Error("Invalid exponent "+h+" in string "+t):x}finally{}break}throw new Error("Unexpected character '"+l+"' at position "+r+" in string "+t)}var p=s,v=a-u-f;if(v===0)p=s;else if(v>0){var y=M.TEN.pow(v);p=s.divide(y)}else if(v<0){var E=M.TEN.pow(-v);p=s.multiply(E)}return i?p.negate():p};M.createNaN=function(){return new M(st.NaN,st.NaN)};M.copy=function(t){return new M(t)};M.magnitude=function(t){var r=Math.abs(t),n=Math.log(r)/Math.log(10),i=Math.trunc(Math.floor(n)),o=Math.pow(10,i);return o*10<=r&&(i+=1),i};M.stringOfChar=function(t,r){for(var n=new Cn,i=0;i<r;i++)n.append(t);return n.toString()};rn.PI.get=function(){return new M(3.141592653589793,12246467991473532e-32)};rn.TWO_PI.get=function(){return new M(6.283185307179586,24492935982947064e-32)};rn.PI_2.get=function(){return new M(1.5707963267948966,6123233995736766e-32)};rn.E.get=function(){return new M(2.718281828459045,14456468917292502e-32)};rn.NaN.get=function(){return new M(st.NaN,st.NaN)};rn.EPS.get=function(){return 123259516440783e-46};rn.SPLIT.get=function(){return 134217729};rn.MAX_PRINT_DIGITS.get=function(){return 32};rn.TEN.get=function(){return M.valueOf(10)};rn.ONE.get=function(){return M.valueOf(1)};rn.SCI_NOT_EXPONENT_CHAR.get=function(){return"E"};rn.SCI_NOT_ZERO.get=function(){return"0.0E0"};Object.defineProperties(M,rn);var gr=function(){},fg={DP_SAFE_EPSILON:{configurable:!0}};gr.prototype.interfaces_=function(){return[]};gr.prototype.getClass=function(){return gr};gr.orientationIndex=function(t,r,n){var i=gr.orientationIndexFilter(t,r,n);if(i<=1)return i;var o=M.valueOf(r.x).selfAdd(-t.x),s=M.valueOf(r.y).selfAdd(-t.y),a=M.valueOf(n.x).selfAdd(-r.x),u=M.valueOf(n.y).selfAdd(-r.y);return o.selfMultiply(u).selfSubtract(s.selfMultiply(a)).signum()};gr.signOfDet2x2=function(t,r,n,i){var o=t.multiply(i).selfSubtract(r.multiply(n));return o.signum()};gr.intersection=function(t,r,n,i){var o=M.valueOf(i.y).selfSubtract(n.y).selfMultiply(M.valueOf(r.x).selfSubtract(t.x)),s=M.valueOf(i.x).selfSubtract(n.x).selfMultiply(M.valueOf(r.y).selfSubtract(t.y)),a=o.subtract(s),u=M.valueOf(i.x).selfSubtract(n.x).selfMultiply(M.valueOf(t.y).selfSubtract(n.y)),f=M.valueOf(i.y).selfSubtract(n.y).selfMultiply(M.valueOf(t.x).selfSubtract(n.x)),l=u.subtract(f),c=l.selfDivide(a).doubleValue(),h=M.valueOf(t.x).selfAdd(M.valueOf(r.x).selfSubtract(t.x).selfMultiply(c)).doubleValue(),p=M.valueOf(r.x).selfSubtract(t.x).selfMultiply(M.valueOf(t.y).selfSubtract(n.y)),v=M.valueOf(r.y).selfSubtract(t.y).selfMultiply(M.valueOf(t.x).selfSubtract(n.x)),y=p.subtract(v),E=y.selfDivide(a).doubleValue(),x=M.valueOf(n.y).selfAdd(M.valueOf(i.y).selfSubtract(n.y).selfMultiply(E)).doubleValue();return new P(h,x)};gr.orientationIndexFilter=function(t,r,n){var i=null,o=(t.x-n.x)*(r.y-n.y),s=(t.y-n.y)*(r.x-n.x),a=o-s;if(o>0){if(s<=0)return gr.signum(a);i=o+s}else if(o<0){if(s>=0)return gr.signum(a);i=-o-s}else return gr.signum(a);var u=gr.DP_SAFE_EPSILON*i;return a>=u||-a>=u?gr.signum(a):2};gr.signum=function(t){return t>0?1:t<0?-1:0};fg.DP_SAFE_EPSILON.get=function(){return 1e-15};Object.defineProperties(gr,fg);var yt=function(){},ea={X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0},M:{configurable:!0}};ea.X.get=function(){return 0};ea.Y.get=function(){return 1};ea.Z.get=function(){return 2};ea.M.get=function(){return 3};yt.prototype.setOrdinate=function(t,r,n){};yt.prototype.size=function(){};yt.prototype.getOrdinate=function(t,r){};yt.prototype.getCoordinate=function(){};yt.prototype.getCoordinateCopy=function(t){};yt.prototype.getDimension=function(){};yt.prototype.getX=function(t){};yt.prototype.clone=function(){};yt.prototype.expandEnvelope=function(t){};yt.prototype.copy=function(){};yt.prototype.getY=function(t){};yt.prototype.toCoordinateArray=function(){};yt.prototype.interfaces_=function(){return[ru]};yt.prototype.getClass=function(){return yt};Object.defineProperties(yt,ea);var lg=function(){},os=function(e){function t(){e.call(this,"Projective point not representable on the Cartesian plane.")}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(lg),qe=function(){};qe.arraycopy=function(t,r,n,i,o){for(var s=0,a=r;a<r+o;a++)n[i+s]=t[a],s++};qe.getProperty=function(t){return{"line.separator":`
`}[t]};var Wr=function e(){if(this.x=null,this.y=null,this.w=null,arguments.length===0)this.x=0,this.y=0,this.w=1;else if(arguments.length===1){var t=arguments[0];this.x=t.x,this.y=t.y,this.w=1}else if(arguments.length===2){if(typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var r=arguments[0],n=arguments[1];this.x=r,this.y=n,this.w=1}else if(arguments[0]instanceof e&&arguments[1]instanceof e){var i=arguments[0],o=arguments[1];this.x=i.y*o.w-o.y*i.w,this.y=o.x*i.w-i.x*o.w,this.w=i.x*o.y-o.x*i.y}else if(arguments[0]instanceof P&&arguments[1]instanceof P){var s=arguments[0],a=arguments[1];this.x=s.y-a.y,this.y=a.x-s.x,this.w=s.x*a.y-a.x*s.y}}else if(arguments.length===3){var u=arguments[0],f=arguments[1],l=arguments[2];this.x=u,this.y=f,this.w=l}else if(arguments.length===4){var c=arguments[0],h=arguments[1],p=arguments[2],v=arguments[3],y=c.y-h.y,E=h.x-c.x,x=c.x*h.y-h.x*c.y,g=p.y-v.y,d=v.x-p.x,_=p.x*v.y-v.x*p.y;this.x=E*_-d*x,this.y=g*x-y*_,this.w=y*d-g*E}};Wr.prototype.getY=function(){var t=this.y/this.w;if(st.isNaN(t)||st.isInfinite(t))throw new os;return t};Wr.prototype.getX=function(){var t=this.x/this.w;if(st.isNaN(t)||st.isInfinite(t))throw new os;return t};Wr.prototype.getCoordinate=function(){var t=new P;return t.x=this.getX(),t.y=this.getY(),t};Wr.prototype.interfaces_=function(){return[]};Wr.prototype.getClass=function(){return Wr};Wr.intersection=function(t,r,n,i){var o=t.y-r.y,s=r.x-t.x,a=t.x*r.y-r.x*t.y,u=n.y-i.y,f=i.x-n.x,l=n.x*i.y-i.x*n.y,c=s*l-f*a,h=u*a-o*l,p=o*f-u*s,v=c/p,y=h/p;if(st.isNaN(v)||st.isInfinite(v)||st.isNaN(y)||st.isInfinite(y))throw new os;return new P(v,y)};var Y=function e(){if(this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,arguments.length===0)this.init();else if(arguments.length===1){if(arguments[0]instanceof P){var t=arguments[0];this.init(t.x,t.x,t.y,t.y)}else if(arguments[0]instanceof e){var r=arguments[0];this.init(r)}}else if(arguments.length===2){var n=arguments[0],i=arguments[1];this.init(n.x,i.x,n.y,i.y)}else if(arguments.length===4){var o=arguments[0],s=arguments[1],a=arguments[2],u=arguments[3];this.init(o,s,a,u)}},cg={serialVersionUID:{configurable:!0}};Y.prototype.getArea=function(){return this.getWidth()*this.getHeight()};Y.prototype.equals=function(t){if(!(t instanceof Y))return!1;var r=t;return this.isNull()?r.isNull():this._maxx===r.getMaxX()&&this._maxy===r.getMaxY()&&this._minx===r.getMinX()&&this._miny===r.getMinY()};Y.prototype.intersection=function(t){if(this.isNull()||t.isNull()||!this.intersects(t))return new Y;var r=this._minx>t._minx?this._minx:t._minx,n=this._miny>t._miny?this._miny:t._miny,i=this._maxx<t._maxx?this._maxx:t._maxx,o=this._maxy<t._maxy?this._maxy:t._maxy;return new Y(r,i,n,o)};Y.prototype.isNull=function(){return this._maxx<this._minx};Y.prototype.getMaxX=function(){return this._maxx};Y.prototype.covers=function(){if(arguments.length===1){if(arguments[0]instanceof P){var t=arguments[0];return this.covers(t.x,t.y)}else if(arguments[0]instanceof Y){var r=arguments[0];return this.isNull()||r.isNull()?!1:r.getMinX()>=this._minx&&r.getMaxX()<=this._maxx&&r.getMinY()>=this._miny&&r.getMaxY()<=this._maxy}}else if(arguments.length===2){var n=arguments[0],i=arguments[1];return this.isNull()?!1:n>=this._minx&&n<=this._maxx&&i>=this._miny&&i<=this._maxy}};Y.prototype.intersects=function(){if(arguments.length===1){if(arguments[0]instanceof Y){var t=arguments[0];return this.isNull()||t.isNull()?!1:!(t._minx>this._maxx||t._maxx<this._minx||t._miny>this._maxy||t._maxy<this._miny)}else if(arguments[0]instanceof P){var r=arguments[0];return this.intersects(r.x,r.y)}}else if(arguments.length===2){var n=arguments[0],i=arguments[1];return this.isNull()?!1:!(n>this._maxx||n<this._minx||i>this._maxy||i<this._miny)}};Y.prototype.getMinY=function(){return this._miny};Y.prototype.getMinX=function(){return this._minx};Y.prototype.expandToInclude=function(){if(arguments.length===1){if(arguments[0]instanceof P){var t=arguments[0];this.expandToInclude(t.x,t.y)}else if(arguments[0]instanceof Y){var r=arguments[0];if(r.isNull())return null;this.isNull()?(this._minx=r.getMinX(),this._maxx=r.getMaxX(),this._miny=r.getMinY(),this._maxy=r.getMaxY()):(r._minx<this._minx&&(this._minx=r._minx),r._maxx>this._maxx&&(this._maxx=r._maxx),r._miny<this._miny&&(this._miny=r._miny),r._maxy>this._maxy&&(this._maxy=r._maxy))}}else if(arguments.length===2){var n=arguments[0],i=arguments[1];this.isNull()?(this._minx=n,this._maxx=n,this._miny=i,this._maxy=i):(n<this._minx&&(this._minx=n),n>this._maxx&&(this._maxx=n),i<this._miny&&(this._miny=i),i>this._maxy&&(this._maxy=i))}};Y.prototype.minExtent=function(){if(this.isNull())return 0;var t=this.getWidth(),r=this.getHeight();return t<r?t:r};Y.prototype.getWidth=function(){return this.isNull()?0:this._maxx-this._minx};Y.prototype.compareTo=function(t){var r=t;return this.isNull()?r.isNull()?0:-1:r.isNull()?1:this._minx<r._minx?-1:this._minx>r._minx?1:this._miny<r._miny?-1:this._miny>r._miny?1:this._maxx<r._maxx?-1:this._maxx>r._maxx?1:this._maxy<r._maxy?-1:this._maxy>r._maxy?1:0};Y.prototype.translate=function(t,r){if(this.isNull())return null;this.init(this.getMinX()+t,this.getMaxX()+t,this.getMinY()+r,this.getMaxY()+r)};Y.prototype.toString=function(){return"Env["+this._minx+" : "+this._maxx+", "+this._miny+" : "+this._maxy+"]"};Y.prototype.setToNull=function(){this._minx=0,this._maxx=-1,this._miny=0,this._maxy=-1};Y.prototype.getHeight=function(){return this.isNull()?0:this._maxy-this._miny};Y.prototype.maxExtent=function(){if(this.isNull())return 0;var t=this.getWidth(),r=this.getHeight();return t>r?t:r};Y.prototype.expandBy=function(){if(arguments.length===1){var t=arguments[0];this.expandBy(t,t)}else if(arguments.length===2){var r=arguments[0],n=arguments[1];if(this.isNull())return null;this._minx-=r,this._maxx+=r,this._miny-=n,this._maxy+=n,(this._minx>this._maxx||this._miny>this._maxy)&&this.setToNull()}};Y.prototype.contains=function(){if(arguments.length===1){if(arguments[0]instanceof Y){var t=arguments[0];return this.covers(t)}else if(arguments[0]instanceof P){var r=arguments[0];return this.covers(r)}}else if(arguments.length===2){var n=arguments[0],i=arguments[1];return this.covers(n,i)}};Y.prototype.centre=function(){return this.isNull()?null:new P((this.getMinX()+this.getMaxX())/2,(this.getMinY()+this.getMaxY())/2)};Y.prototype.init=function(){if(arguments.length===0)this.setToNull();else if(arguments.length===1){if(arguments[0]instanceof P){var t=arguments[0];this.init(t.x,t.x,t.y,t.y)}else if(arguments[0]instanceof Y){var r=arguments[0];this._minx=r._minx,this._maxx=r._maxx,this._miny=r._miny,this._maxy=r._maxy}}else if(arguments.length===2){var n=arguments[0],i=arguments[1];this.init(n.x,i.x,n.y,i.y)}else if(arguments.length===4){var o=arguments[0],s=arguments[1],a=arguments[2],u=arguments[3];o<s?(this._minx=o,this._maxx=s):(this._minx=s,this._maxx=o),a<u?(this._miny=a,this._maxy=u):(this._miny=u,this._maxy=a)}};Y.prototype.getMaxY=function(){return this._maxy};Y.prototype.distance=function(t){if(this.intersects(t))return 0;var r=0;this._maxx<t._minx?r=t._minx-this._maxx:this._minx>t._maxx&&(r=this._minx-t._maxx);var n=0;return this._maxy<t._miny?n=t._miny-this._maxy:this._miny>t._maxy&&(n=this._miny-t._maxy),r===0?n:n===0?r:Math.sqrt(r*r+n*n)};Y.prototype.hashCode=function(){var t=17;return t=37*t+P.hashCode(this._minx),t=37*t+P.hashCode(this._maxx),t=37*t+P.hashCode(this._miny),t=37*t+P.hashCode(this._maxy),t};Y.prototype.interfaces_=function(){return[zr,Ur]};Y.prototype.getClass=function(){return Y};Y.intersects=function(){if(arguments.length===3){var t=arguments[0],r=arguments[1],n=arguments[2];return n.x>=(t.x<r.x?t.x:r.x)&&n.x<=(t.x>r.x?t.x:r.x)&&n.y>=(t.y<r.y?t.y:r.y)&&n.y<=(t.y>r.y?t.y:r.y)}else if(arguments.length===4){var i=arguments[0],o=arguments[1],s=arguments[2],a=arguments[3],u=Math.min(s.x,a.x),f=Math.max(s.x,a.x),l=Math.min(i.x,o.x),c=Math.max(i.x,o.x);return!(l>f||c<u||(u=Math.min(s.y,a.y),f=Math.max(s.y,a.y),l=Math.min(i.y,o.y),c=Math.max(i.y,o.y),l>f)||c<u)}};cg.serialVersionUID.get=function(){return 5873921885273102e3};Object.defineProperties(Y,cg);var on={typeStr:/^\s*(\w+)\s*\(\s*(.*)\s*\)\s*$/,emptyTypeStr:/^\s*(\w+)\s*EMPTY\s*$/,spaces:/\s+/,parenComma:/\)\s*,\s*\(/,doubleParenComma:/\)\s*\)\s*,\s*\(\s*\(/,trimParens:/^\s*\(?(.*?)\)?\s*$/},nu=function(t){this.geometryFactory=t||new lt};nu.prototype.read=function(t){var r,n,i;t=t.replace(/[\n\r]/g," ");var o=on.typeStr.exec(t);if(t.search("EMPTY")!==-1&&(o=on.emptyTypeStr.exec(t),o[2]=void 0),o&&(n=o[1].toLowerCase(),i=o[2],Lo[n]&&(r=Lo[n].apply(this,[i]))),r===void 0)throw new Error("Could not parse WKT "+t);return r};nu.prototype.write=function(t){return this.extractGeometry(t)};nu.prototype.extractGeometry=function(t){var r=t.getGeometryType().toLowerCase();if(!Vn[r])return null;var n=r.toUpperCase(),i;return t.isEmpty()?i=n+" EMPTY":i=n+"("+Vn[r].apply(this,[t])+")",i};var Vn={coordinate:function(t){return t.x+" "+t.y},point:function(t){return Vn.coordinate.call(this,t._coordinates._coordinates[0])},multipoint:function(t){for(var r=this,n=[],i=0,o=t._geometries.length;i<o;++i)n.push("("+Vn.point.apply(r,[t._geometries[i]])+")");return n.join(",")},linestring:function(t){for(var r=this,n=[],i=0,o=t._points._coordinates.length;i<o;++i)n.push(Vn.coordinate.apply(r,[t._points._coordinates[i]]));return n.join(",")},linearring:function(t){for(var r=this,n=[],i=0,o=t._points._coordinates.length;i<o;++i)n.push(Vn.coordinate.apply(r,[t._points._coordinates[i]]));return n.join(",")},multilinestring:function(t){for(var r=this,n=[],i=0,o=t._geometries.length;i<o;++i)n.push("("+Vn.linestring.apply(r,[t._geometries[i]])+")");return n.join(",")},polygon:function(t){var r=this,n=[];n.push("("+Vn.linestring.apply(this,[t._shell])+")");for(var i=0,o=t._holes.length;i<o;++i)n.push("("+Vn.linestring.apply(r,[t._holes[i]])+")");return n.join(",")},multipolygon:function(t){for(var r=this,n=[],i=0,o=t._geometries.length;i<o;++i)n.push("("+Vn.polygon.apply(r,[t._geometries[i]])+")");return n.join(",")},geometrycollection:function(t){for(var r=this,n=[],i=0,o=t._geometries.length;i<o;++i)n.push(r.extractGeometry(t._geometries[i]));return n.join(",")}},Lo={point:function(t){if(t===void 0)return this.geometryFactory.createPoint();var r=t.trim().split(on.spaces);return this.geometryFactory.createPoint(new P(Number.parseFloat(r[0]),Number.parseFloat(r[1])))},multipoint:function(t){var r=this;if(t===void 0)return this.geometryFactory.createMultiPoint();for(var n,i=t.trim().split(","),o=[],s=0,a=i.length;s<a;++s)n=i[s].replace(on.trimParens,"$1"),o.push(Lo.point.apply(r,[n]));return this.geometryFactory.createMultiPoint(o)},linestring:function(t){if(t===void 0)return this.geometryFactory.createLineString();for(var r=t.trim().split(","),n=[],i,o=0,s=r.length;o<s;++o)i=r[o].trim().split(on.spaces),n.push(new P(Number.parseFloat(i[0]),Number.parseFloat(i[1])));return this.geometryFactory.createLineString(n)},linearring:function(t){if(t===void 0)return this.geometryFactory.createLinearRing();for(var r=t.trim().split(","),n=[],i,o=0,s=r.length;o<s;++o)i=r[o].trim().split(on.spaces),n.push(new P(Number.parseFloat(i[0]),Number.parseFloat(i[1])));return this.geometryFactory.createLinearRing(n)},multilinestring:function(t){var r=this;if(t===void 0)return this.geometryFactory.createMultiLineString();for(var n,i=t.trim().split(on.parenComma),o=[],s=0,a=i.length;s<a;++s)n=i[s].replace(on.trimParens,"$1"),o.push(Lo.linestring.apply(r,[n]));return this.geometryFactory.createMultiLineString(o)},polygon:function(t){var r=this;if(t===void 0)return this.geometryFactory.createPolygon();for(var n,i,o,s=t.trim().split(on.parenComma),a,u=[],f=0,l=s.length;f<l;++f)n=s[f].replace(on.trimParens,"$1"),i=Lo.linestring.apply(r,[n]),o=r.geometryFactory.createLinearRing(i._points),f===0?a=o:u.push(o);return this.geometryFactory.createPolygon(a,u)},multipolygon:function(t){var r=this;if(t===void 0)return this.geometryFactory.createMultiPolygon();for(var n,i=t.trim().split(on.doubleParenComma),o=[],s=0,a=i.length;s<a;++s)n=i[s].replace(on.trimParens,"$1"),o.push(Lo.polygon.apply(r,[n]));return this.geometryFactory.createMultiPolygon(o)},geometrycollection:function(t){var r=this;if(t===void 0)return this.geometryFactory.createGeometryCollection();t=t.replace(/,\s*([A-Za-z])/g,"|$1");for(var n=t.trim().split("|"),i=[],o=0,s=n.length;o<s;++o)i.push(r.read(n[o]));return this.geometryFactory.createGeometryCollection(i)}},Kr=function(t){this.parser=new nu(t)};Kr.prototype.write=function(t){return this.parser.write(t)};Kr.toLineString=function(t,r){if(arguments.length!==2)throw new Error("Not implemented");return"LINESTRING ( "+t.x+" "+t.y+", "+r.x+" "+r.y+" )"};var jn=function(e){function t(r){e.call(this,r),this.name="RuntimeException",this.message=r,this.stack=new e().stack}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t}(Error),ba=function(e){function t(){if(e.call(this),arguments.length===0)e.call(this);else if(arguments.length===1){var r=arguments[0];e.call(this,r)}}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(jn),ut=function(){};ut.prototype.interfaces_=function(){return[]};ut.prototype.getClass=function(){return ut};ut.shouldNeverReachHere=function(){if(arguments.length===0)ut.shouldNeverReachHere(null);else if(arguments.length===1){var t=arguments[0];throw new ba("Should never reach here"+(t!==null?": "+t:""))}};ut.isTrue=function(){var t,r;if(arguments.length===1)t=arguments[0],ut.isTrue(t,null);else if(arguments.length===2&&(t=arguments[0],r=arguments[1],!t))throw r===null?new ba:new ba(r)};ut.equals=function(){var t,r,n;if(arguments.length===2)t=arguments[0],r=arguments[1],ut.equals(t,r,null);else if(arguments.length===3&&(t=arguments[0],r=arguments[1],n=arguments[2],!r.equals(t)))throw new ba("Expected "+t+" but encountered "+r+(n!==null?": "+n:""))};var ce=function(){this._result=null,this._inputLines=Array(2).fill().map(function(){return Array(2)}),this._intPt=new Array(2).fill(null),this._intLineIndex=null,this._isProper=null,this._pa=null,this._pb=null,this._precisionModel=null,this._intPt[0]=new P,this._intPt[1]=new P,this._pa=this._intPt[0],this._pb=this._intPt[1],this._result=0},po={DONT_INTERSECT:{configurable:!0},DO_INTERSECT:{configurable:!0},COLLINEAR:{configurable:!0},NO_INTERSECTION:{configurable:!0},POINT_INTERSECTION:{configurable:!0},COLLINEAR_INTERSECTION:{configurable:!0}};ce.prototype.getIndexAlongSegment=function(t,r){return this.computeIntLineIndex(),this._intLineIndex[t][r]};ce.prototype.getTopologySummary=function(){var t=new Cn;return this.isEndPoint()&&t.append(" endpoint"),this._isProper&&t.append(" proper"),this.isCollinear()&&t.append(" collinear"),t.toString()};ce.prototype.computeIntersection=function(t,r,n,i){this._inputLines[0][0]=t,this._inputLines[0][1]=r,this._inputLines[1][0]=n,this._inputLines[1][1]=i,this._result=this.computeIntersect(t,r,n,i)};ce.prototype.getIntersectionNum=function(){return this._result};ce.prototype.computeIntLineIndex=function(){if(arguments.length===0)this._intLineIndex===null&&(this._intLineIndex=Array(2).fill().map(function(){return Array(2)}),this.computeIntLineIndex(0),this.computeIntLineIndex(1));else if(arguments.length===1){var t=arguments[0],r=this.getEdgeDistance(t,0),n=this.getEdgeDistance(t,1);r>n?(this._intLineIndex[t][0]=0,this._intLineIndex[t][1]=1):(this._intLineIndex[t][0]=1,this._intLineIndex[t][1]=0)}};ce.prototype.isProper=function(){return this.hasIntersection()&&this._isProper};ce.prototype.setPrecisionModel=function(t){this._precisionModel=t};ce.prototype.isInteriorIntersection=function(){var t=this;if(arguments.length===0)return!!(this.isInteriorIntersection(0)||this.isInteriorIntersection(1));if(arguments.length===1){for(var r=arguments[0],n=0;n<this._result;n++)if(!(t._intPt[n].equals2D(t._inputLines[r][0])||t._intPt[n].equals2D(t._inputLines[r][1])))return!0;return!1}};ce.prototype.getIntersection=function(t){return this._intPt[t]};ce.prototype.isEndPoint=function(){return this.hasIntersection()&&!this._isProper};ce.prototype.hasIntersection=function(){return this._result!==ce.NO_INTERSECTION};ce.prototype.getEdgeDistance=function(t,r){var n=ce.computeEdgeDistance(this._intPt[r],this._inputLines[t][0],this._inputLines[t][1]);return n};ce.prototype.isCollinear=function(){return this._result===ce.COLLINEAR_INTERSECTION};ce.prototype.toString=function(){return Kr.toLineString(this._inputLines[0][0],this._inputLines[0][1])+" - "+Kr.toLineString(this._inputLines[1][0],this._inputLines[1][1])+this.getTopologySummary()};ce.prototype.getEndpoint=function(t,r){return this._inputLines[t][r]};ce.prototype.isIntersection=function(t){for(var r=this,n=0;n<this._result;n++)if(r._intPt[n].equals2D(t))return!0;return!1};ce.prototype.getIntersectionAlongSegment=function(t,r){return this.computeIntLineIndex(),this._intPt[this._intLineIndex[t][r]]};ce.prototype.interfaces_=function(){return[]};ce.prototype.getClass=function(){return ce};ce.computeEdgeDistance=function(t,r,n){var i=Math.abs(n.x-r.x),o=Math.abs(n.y-r.y),s=-1;if(t.equals(r))s=0;else if(t.equals(n))i>o?s=i:s=o;else{var a=Math.abs(t.x-r.x),u=Math.abs(t.y-r.y);i>o?s=a:s=u,s===0&&!t.equals(r)&&(s=Math.max(a,u))}return ut.isTrue(!(s===0&&!t.equals(r)),"Bad distance calculation"),s};ce.nonRobustComputeEdgeDistance=function(t,r,n){var i=t.x-r.x,o=t.y-r.y,s=Math.sqrt(i*i+o*o);return ut.isTrue(!(s===0&&!t.equals(r)),"Invalid distance calculation"),s};po.DONT_INTERSECT.get=function(){return 0};po.DO_INTERSECT.get=function(){return 1};po.COLLINEAR.get=function(){return 2};po.NO_INTERSECTION.get=function(){return 0};po.POINT_INTERSECTION.get=function(){return 1};po.COLLINEAR_INTERSECTION.get=function(){return 2};Object.defineProperties(ce,po);var Yi=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.isInSegmentEnvelopes=function(n){var i=new Y(this._inputLines[0][0],this._inputLines[0][1]),o=new Y(this._inputLines[1][0],this._inputLines[1][1]);return i.contains(n)&&o.contains(n)},t.prototype.computeIntersection=function(){if(arguments.length===3){var n=arguments[0],i=arguments[1],o=arguments[2];if(this._isProper=!1,Y.intersects(i,o,n)&&G.orientationIndex(i,o,n)===0&&G.orientationIndex(o,i,n)===0)return this._isProper=!0,(n.equals(i)||n.equals(o))&&(this._isProper=!1),this._result=e.POINT_INTERSECTION,null;this._result=e.NO_INTERSECTION}else return e.prototype.computeIntersection.apply(this,arguments)},t.prototype.normalizeToMinimum=function(n,i,o,s,a){a.x=this.smallestInAbsValue(n.x,i.x,o.x,s.x),a.y=this.smallestInAbsValue(n.y,i.y,o.y,s.y),n.x-=a.x,n.y-=a.y,i.x-=a.x,i.y-=a.y,o.x-=a.x,o.y-=a.y,s.x-=a.x,s.y-=a.y},t.prototype.safeHCoordinateIntersection=function(n,i,o,s){var a=null;try{a=Wr.intersection(n,i,o,s)}catch(u){if(u instanceof os)a=t.nearestEndpoint(n,i,o,s);else throw u}finally{}return a},t.prototype.intersection=function(n,i,o,s){var a=this.intersectionWithNormalization(n,i,o,s);return this.isInSegmentEnvelopes(a)||(a=new P(t.nearestEndpoint(n,i,o,s))),this._precisionModel!==null&&this._precisionModel.makePrecise(a),a},t.prototype.smallestInAbsValue=function(n,i,o,s){var a=n,u=Math.abs(a);return Math.abs(i)<u&&(a=i,u=Math.abs(i)),Math.abs(o)<u&&(a=o,u=Math.abs(o)),Math.abs(s)<u&&(a=s),a},t.prototype.checkDD=function(n,i,o,s,a){var u=gr.intersection(n,i,o,s),f=this.isInSegmentEnvelopes(u);qe.out.println("DD in env = "+f+"  --------------------- "+u),a.distance(u)>1e-4&&qe.out.println("Distance = "+a.distance(u))},t.prototype.intersectionWithNormalization=function(n,i,o,s){var a=new P(n),u=new P(i),f=new P(o),l=new P(s),c=new P;this.normalizeToEnvCentre(a,u,f,l,c);var h=this.safeHCoordinateIntersection(a,u,f,l);return h.x+=c.x,h.y+=c.y,h},t.prototype.computeCollinearIntersection=function(n,i,o,s){var a=Y.intersects(n,i,o),u=Y.intersects(n,i,s),f=Y.intersects(o,s,n),l=Y.intersects(o,s,i);return a&&u?(this._intPt[0]=o,this._intPt[1]=s,e.COLLINEAR_INTERSECTION):f&&l?(this._intPt[0]=n,this._intPt[1]=i,e.COLLINEAR_INTERSECTION):a&&f?(this._intPt[0]=o,this._intPt[1]=n,o.equals(n)&&!u&&!l?e.POINT_INTERSECTION:e.COLLINEAR_INTERSECTION):a&&l?(this._intPt[0]=o,this._intPt[1]=i,o.equals(i)&&!u&&!f?e.POINT_INTERSECTION:e.COLLINEAR_INTERSECTION):u&&f?(this._intPt[0]=s,this._intPt[1]=n,s.equals(n)&&!a&&!l?e.POINT_INTERSECTION:e.COLLINEAR_INTERSECTION):u&&l?(this._intPt[0]=s,this._intPt[1]=i,s.equals(i)&&!a&&!f?e.POINT_INTERSECTION:e.COLLINEAR_INTERSECTION):e.NO_INTERSECTION},t.prototype.normalizeToEnvCentre=function(n,i,o,s,a){var u=n.x<i.x?n.x:i.x,f=n.y<i.y?n.y:i.y,l=n.x>i.x?n.x:i.x,c=n.y>i.y?n.y:i.y,h=o.x<s.x?o.x:s.x,p=o.y<s.y?o.y:s.y,v=o.x>s.x?o.x:s.x,y=o.y>s.y?o.y:s.y,E=u>h?u:h,x=l<v?l:v,g=f>p?f:p,d=c<y?c:y,_=(E+x)/2,w=(g+d)/2;a.x=_,a.y=w,n.x-=a.x,n.y-=a.y,i.x-=a.x,i.y-=a.y,o.x-=a.x,o.y-=a.y,s.x-=a.x,s.y-=a.y},t.prototype.computeIntersect=function(n,i,o,s){if(this._isProper=!1,!Y.intersects(n,i,o,s))return e.NO_INTERSECTION;var a=G.orientationIndex(n,i,o),u=G.orientationIndex(n,i,s);if(a>0&&u>0||a<0&&u<0)return e.NO_INTERSECTION;var f=G.orientationIndex(o,s,n),l=G.orientationIndex(o,s,i);if(f>0&&l>0||f<0&&l<0)return e.NO_INTERSECTION;var c=a===0&&u===0&&f===0&&l===0;return c?this.computeCollinearIntersection(n,i,o,s):(a===0||u===0||f===0||l===0?(this._isProper=!1,n.equals2D(o)||n.equals2D(s)?this._intPt[0]=n:i.equals2D(o)||i.equals2D(s)?this._intPt[0]=i:a===0?this._intPt[0]=new P(o):u===0?this._intPt[0]=new P(s):f===0?this._intPt[0]=new P(n):l===0&&(this._intPt[0]=new P(i))):(this._isProper=!0,this._intPt[0]=this.intersection(n,i,o,s)),e.POINT_INTERSECTION)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t.nearestEndpoint=function(n,i,o,s){var a=n,u=G.distancePointLine(n,o,s),f=G.distancePointLine(i,o,s);return f<u&&(u=f,a=i),f=G.distancePointLine(o,n,i),f<u&&(u=f,a=o),f=G.distancePointLine(s,n,i),f<u&&(u=f,a=s),a},t}(ce),$i=function(){};$i.prototype.interfaces_=function(){return[]};$i.prototype.getClass=function(){return $i};$i.orientationIndex=function(t,r,n){var i=r.x-t.x,o=r.y-t.y,s=n.x-r.x,a=n.y-r.y;return $i.signOfDet2x2(i,o,s,a)};$i.signOfDet2x2=function(t,r,n,i){var o=null,s=null,a=null;if(o=1,t===0||i===0)return r===0||n===0?0:r>0?n>0?-o:o:n>0?o:-o;if(r===0||n===0)return i>0?t>0?o:-o:t>0?-o:o;if(r>0?i>0?r<=i||(o=-o,s=t,t=n,n=s,s=r,r=i,i=s):r<=-i?(o=-o,n=-n,i=-i):(s=t,t=-n,n=s,s=r,r=-i,i=s):i>0?-r<=i?(o=-o,t=-t,r=-r):(s=-t,t=n,n=s,s=-r,r=i,i=s):r>=i?(t=-t,r=-r,n=-n,i=-i):(o=-o,s=-t,t=-n,n=s,s=-r,r=-i,i=s),t>0)if(n>0){if(!(t<=n))return o}else return o;else{if(n>0)return-o;if(t>=n)o=-o,t=-t,n=-n;else return-o}for(;;){if(a=Math.floor(n/t),n=n-a*t,i=i-a*r,i<0)return-o;if(i>r)return o;if(t>n+n){if(r<i+i)return o}else{if(r>i+i)return-o;n=t-n,i=r-i,o=-o}if(i===0)return n===0?0:-o;if(n===0||(a=Math.floor(t/n),t=t-a*n,r=r-a*i,r<0))return o;if(r>i)return-o;if(n>t+t){if(i<r+r)return-o}else{if(i>r+r)return o;t=n-t,r=i-r,o=-o}if(r===0)return t===0?0:o;if(t===0)return-o}};var ln=function(){this._p=null,this._crossingCount=0,this._isPointOnSegment=!1;var t=arguments[0];this._p=t};ln.prototype.countSegment=function(t,r){if(t.x<this._p.x&&r.x<this._p.x)return null;if(this._p.x===r.x&&this._p.y===r.y)return this._isPointOnSegment=!0,null;if(t.y===this._p.y&&r.y===this._p.y){var n=t.x,i=r.x;return n>i&&(n=r.x,i=t.x),this._p.x>=n&&this._p.x<=i&&(this._isPointOnSegment=!0),null}if(t.y>this._p.y&&r.y<=this._p.y||r.y>this._p.y&&t.y<=this._p.y){var o=t.x-this._p.x,s=t.y-this._p.y,a=r.x-this._p.x,u=r.y-this._p.y,f=$i.signOfDet2x2(o,s,a,u);if(f===0)return this._isPointOnSegment=!0,null;u<s&&(f=-f),f>0&&this._crossingCount++}};ln.prototype.isPointInPolygon=function(){return this.getLocation()!==L.EXTERIOR};ln.prototype.getLocation=function(){return this._isPointOnSegment?L.BOUNDARY:this._crossingCount%2===1?L.INTERIOR:L.EXTERIOR};ln.prototype.isOnSegment=function(){return this._isPointOnSegment};ln.prototype.interfaces_=function(){return[]};ln.prototype.getClass=function(){return ln};ln.locatePointInRing=function(){if(arguments[0]instanceof P&&tt(arguments[1],yt)){for(var t=arguments[0],r=arguments[1],n=new ln(t),i=new P,o=new P,s=1;s<r.size();s++)if(r.getCoordinate(s,i),r.getCoordinate(s-1,o),n.countSegment(i,o),n.isOnSegment())return n.getLocation();return n.getLocation()}else if(arguments[0]instanceof P&&arguments[1]instanceof Array){for(var a=arguments[0],u=arguments[1],f=new ln(a),l=1;l<u.length;l++){var c=u[l],h=u[l-1];if(f.countSegment(c,h),f.isOnSegment())return f.getLocation()}return f.getLocation()}};var G=function(){},go={CLOCKWISE:{configurable:!0},RIGHT:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},LEFT:{configurable:!0},COLLINEAR:{configurable:!0},STRAIGHT:{configurable:!0}};G.prototype.interfaces_=function(){return[]};G.prototype.getClass=function(){return G};G.orientationIndex=function(t,r,n){return gr.orientationIndex(t,r,n)};G.signedArea=function(){if(arguments[0]instanceof Array){var t=arguments[0];if(t.length<3)return 0;for(var r=0,n=t[0].x,i=1;i<t.length-1;i++){var o=t[i].x-n,s=t[i+1].y,a=t[i-1].y;r+=o*(a-s)}return r/2}else if(tt(arguments[0],yt)){var u=arguments[0],f=u.size();if(f<3)return 0;var l=new P,c=new P,h=new P;u.getCoordinate(0,c),u.getCoordinate(1,h);var p=c.x;h.x-=p;for(var v=0,y=1;y<f-1;y++)l.y=c.y,c.x=h.x,c.y=h.y,u.getCoordinate(y+1,h),h.x-=p,v+=c.x*(l.y-h.y);return v/2}};G.distanceLineLine=function(t,r,n,i){if(t.equals(r))return G.distancePointLine(t,n,i);if(n.equals(i))return G.distancePointLine(i,t,r);var o=!1;if(!Y.intersects(t,r,n,i))o=!0;else{var s=(r.x-t.x)*(i.y-n.y)-(r.y-t.y)*(i.x-n.x);if(s===0)o=!0;else{var a=(t.y-n.y)*(i.x-n.x)-(t.x-n.x)*(i.y-n.y),u=(t.y-n.y)*(r.x-t.x)-(t.x-n.x)*(r.y-t.y),f=u/s,l=a/s;(l<0||l>1||f<0||f>1)&&(o=!0)}}return o?Lr.min(G.distancePointLine(t,n,i),G.distancePointLine(r,n,i),G.distancePointLine(n,t,r),G.distancePointLine(i,t,r)):0};G.isPointInRing=function(t,r){return G.locatePointInRing(t,r)!==L.EXTERIOR};G.computeLength=function(t){var r=t.size();if(r<=1)return 0;var n=0,i=new P;t.getCoordinate(0,i);for(var o=i.x,s=i.y,a=1;a<r;a++){t.getCoordinate(a,i);var u=i.x,f=i.y,l=u-o,c=f-s;n+=Math.sqrt(l*l+c*c),o=u,s=f}return n};G.isCCW=function(t){var r=t.length-1;if(r<3)throw new le("Ring has fewer than 4 points, so orientation cannot be determined");for(var n=t[0],i=0,o=1;o<=r;o++){var s=t[o];s.y>n.y&&(n=s,i=o)}var a=i;do a=a-1,a<0&&(a=r);while(t[a].equals2D(n)&&a!==i);var u=i;do u=(u+1)%r;while(t[u].equals2D(n)&&u!==i);var f=t[a],l=t[u];if(f.equals2D(n)||l.equals2D(n)||f.equals2D(l))return!1;var c=G.computeOrientation(f,n,l),h=!1;return c===0?h=f.x>l.x:h=c>0,h};G.locatePointInRing=function(t,r){return ln.locatePointInRing(t,r)};G.distancePointLinePerpendicular=function(t,r,n){var i=(n.x-r.x)*(n.x-r.x)+(n.y-r.y)*(n.y-r.y),o=((r.y-t.y)*(n.x-r.x)-(r.x-t.x)*(n.y-r.y))/i;return Math.abs(o)*Math.sqrt(i)};G.computeOrientation=function(t,r,n){return G.orientationIndex(t,r,n)};G.distancePointLine=function(){if(arguments.length===2){var t=arguments[0],r=arguments[1];if(r.length===0)throw new le("Line array must contain at least one vertex");for(var n=t.distance(r[0]),i=0;i<r.length-1;i++){var o=G.distancePointLine(t,r[i],r[i+1]);o<n&&(n=o)}return n}else if(arguments.length===3){var s=arguments[0],a=arguments[1],u=arguments[2];if(a.x===u.x&&a.y===u.y)return s.distance(a);var f=(u.x-a.x)*(u.x-a.x)+(u.y-a.y)*(u.y-a.y),l=((s.x-a.x)*(u.x-a.x)+(s.y-a.y)*(u.y-a.y))/f;if(l<=0)return s.distance(a);if(l>=1)return s.distance(u);var c=((a.y-s.y)*(u.x-a.x)-(a.x-s.x)*(u.y-a.y))/f;return Math.abs(c)*Math.sqrt(f)}};G.isOnLine=function(t,r){for(var n=new Yi,i=1;i<r.length;i++){var o=r[i-1],s=r[i];if(n.computeIntersection(t,o,s),n.hasIntersection())return!0}return!1};go.CLOCKWISE.get=function(){return-1};go.RIGHT.get=function(){return G.CLOCKWISE};go.COUNTERCLOCKWISE.get=function(){return 1};go.LEFT.get=function(){return G.COUNTERCLOCKWISE};go.COLLINEAR.get=function(){return 0};go.STRAIGHT.get=function(){return G.COLLINEAR};Object.defineProperties(G,go);var $n=function(){};$n.prototype.filter=function(t){};$n.prototype.interfaces_=function(){return[]};$n.prototype.getClass=function(){return $n};var $=function(){var t=arguments[0];this._envelope=null,this._factory=null,this._SRID=null,this._userData=null,this._factory=t,this._SRID=t.getSRID()},zn={serialVersionUID:{configurable:!0},SORTINDEX_POINT:{configurable:!0},SORTINDEX_MULTIPOINT:{configurable:!0},SORTINDEX_LINESTRING:{configurable:!0},SORTINDEX_LINEARRING:{configurable:!0},SORTINDEX_MULTILINESTRING:{configurable:!0},SORTINDEX_POLYGON:{configurable:!0},SORTINDEX_MULTIPOLYGON:{configurable:!0},SORTINDEX_GEOMETRYCOLLECTION:{configurable:!0},geometryChangedFilter:{configurable:!0}};$.prototype.isGeometryCollection=function(){return this.getSortIndex()===$.SORTINDEX_GEOMETRYCOLLECTION};$.prototype.getFactory=function(){return this._factory};$.prototype.getGeometryN=function(t){return this};$.prototype.getArea=function(){return 0};$.prototype.isRectangle=function(){return!1};$.prototype.equals=function(){if(arguments[0]instanceof $){var t=arguments[0];return t===null?!1:this.equalsTopo(t)}else if(arguments[0]instanceof Object){var r=arguments[0];if(!(r instanceof $))return!1;var n=r;return this.equalsExact(n)}};$.prototype.equalsExact=function(t){return this===t||this.equalsExact(t,0)};$.prototype.geometryChanged=function(){this.apply($.geometryChangedFilter)};$.prototype.geometryChangedAction=function(){this._envelope=null};$.prototype.equalsNorm=function(t){return t===null?!1:this.norm().equalsExact(t.norm())};$.prototype.getLength=function(){return 0};$.prototype.getNumGeometries=function(){return 1};$.prototype.compareTo=function(){if(arguments.length===1){var t=arguments[0],r=t;return this.getSortIndex()!==r.getSortIndex()?this.getSortIndex()-r.getSortIndex():this.isEmpty()&&r.isEmpty()?0:this.isEmpty()?-1:r.isEmpty()?1:this.compareToSameClass(t)}else if(arguments.length===2){var n=arguments[0],i=arguments[1];return this.getSortIndex()!==n.getSortIndex()?this.getSortIndex()-n.getSortIndex():this.isEmpty()&&n.isEmpty()?0:this.isEmpty()?-1:n.isEmpty()?1:this.compareToSameClass(n,i)}};$.prototype.getUserData=function(){return this._userData};$.prototype.getSRID=function(){return this._SRID};$.prototype.getEnvelope=function(){return this.getFactory().toGeometry(this.getEnvelopeInternal())};$.prototype.checkNotGeometryCollection=function(t){if(t.getSortIndex()===$.SORTINDEX_GEOMETRYCOLLECTION)throw new le("This method does not support GeometryCollection arguments")};$.prototype.equal=function(t,r,n){return n===0?t.equals(r):t.distance(r)<=n};$.prototype.norm=function(){var t=this.copy();return t.normalize(),t};$.prototype.getPrecisionModel=function(){return this._factory.getPrecisionModel()};$.prototype.getEnvelopeInternal=function(){return this._envelope===null&&(this._envelope=this.computeEnvelopeInternal()),new Y(this._envelope)};$.prototype.setSRID=function(t){this._SRID=t};$.prototype.setUserData=function(t){this._userData=t};$.prototype.compare=function(t,r){for(var n=t.iterator(),i=r.iterator();n.hasNext()&&i.hasNext();){var o=n.next(),s=i.next(),a=o.compareTo(s);if(a!==0)return a}return n.hasNext()?1:i.hasNext()?-1:0};$.prototype.hashCode=function(){return this.getEnvelopeInternal().hashCode()};$.prototype.isGeometryCollectionOrDerived=function(){return this.getSortIndex()===$.SORTINDEX_GEOMETRYCOLLECTION||this.getSortIndex()===$.SORTINDEX_MULTIPOINT||this.getSortIndex()===$.SORTINDEX_MULTILINESTRING||this.getSortIndex()===$.SORTINDEX_MULTIPOLYGON};$.prototype.interfaces_=function(){return[ru,zr,Ur]};$.prototype.getClass=function(){return $};$.hasNonEmptyElements=function(t){for(var r=0;r<t.length;r++)if(!t[r].isEmpty())return!0;return!1};$.hasNullElements=function(t){for(var r=0;r<t.length;r++)if(t[r]===null)return!0;return!1};zn.serialVersionUID.get=function(){return 8763622679187377e3};zn.SORTINDEX_POINT.get=function(){return 0};zn.SORTINDEX_MULTIPOINT.get=function(){return 1};zn.SORTINDEX_LINESTRING.get=function(){return 2};zn.SORTINDEX_LINEARRING.get=function(){return 3};zn.SORTINDEX_MULTILINESTRING.get=function(){return 4};zn.SORTINDEX_POLYGON.get=function(){return 5};zn.SORTINDEX_MULTIPOLYGON.get=function(){return 6};zn.SORTINDEX_GEOMETRYCOLLECTION.get=function(){return 7};zn.geometryChangedFilter.get=function(){return $f};Object.defineProperties($,zn);var $f=function(){};$f.interfaces_=function(){return[$n]};$f.filter=function(t){t.geometryChangedAction()};var An=function(){};An.prototype.filter=function(t){};An.prototype.interfaces_=function(){return[]};An.prototype.getClass=function(){return An};var Gr=function(){},oi={Mod2BoundaryNodeRule:{configurable:!0},EndPointBoundaryNodeRule:{configurable:!0},MultiValentEndPointBoundaryNodeRule:{configurable:!0},MonoValentEndPointBoundaryNodeRule:{configurable:!0},MOD2_BOUNDARY_RULE:{configurable:!0},ENDPOINT_BOUNDARY_RULE:{configurable:!0},MULTIVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},MONOVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},OGC_SFS_BOUNDARY_RULE:{configurable:!0}};Gr.prototype.isInBoundary=function(t){};Gr.prototype.interfaces_=function(){return[]};Gr.prototype.getClass=function(){return Gr};oi.Mod2BoundaryNodeRule.get=function(){return ko};oi.EndPointBoundaryNodeRule.get=function(){return qo};oi.MultiValentEndPointBoundaryNodeRule.get=function(){return zo};oi.MonoValentEndPointBoundaryNodeRule.get=function(){return Uo};oi.MOD2_BOUNDARY_RULE.get=function(){return new ko};oi.ENDPOINT_BOUNDARY_RULE.get=function(){return new qo};oi.MULTIVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new zo};oi.MONOVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new Uo};oi.OGC_SFS_BOUNDARY_RULE.get=function(){return Gr.MOD2_BOUNDARY_RULE};Object.defineProperties(Gr,oi);var ko=function(){};ko.prototype.isInBoundary=function(t){return t%2===1};ko.prototype.interfaces_=function(){return[Gr]};ko.prototype.getClass=function(){return ko};var qo=function(){};qo.prototype.isInBoundary=function(t){return t>0};qo.prototype.interfaces_=function(){return[Gr]};qo.prototype.getClass=function(){return qo};var zo=function(){};zo.prototype.isInBoundary=function(t){return t>1};zo.prototype.interfaces_=function(){return[Gr]};zo.prototype.getClass=function(){return zo};var Uo=function(){};Uo.prototype.isInBoundary=function(t){return t===1};Uo.prototype.interfaces_=function(){return[Gr]};Uo.prototype.getClass=function(){return Uo};var Se=function(){};Se.prototype.add=function(){};Se.prototype.addAll=function(){};Se.prototype.isEmpty=function(){};Se.prototype.iterator=function(){};Se.prototype.size=function(){};Se.prototype.toArray=function(){};Se.prototype.remove=function(){};function tl(e){this.message=e||""}tl.prototype=new Error;tl.prototype.name="IndexOutOfBoundsException";var ss=function(){};ss.prototype.hasNext=function(){};ss.prototype.next=function(){};ss.prototype.remove=function(){};var Jr=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.get=function(){},t.prototype.set=function(){},t.prototype.isEmpty=function(){},t}(Se);function as(e){this.message=e||""}as.prototype=new Error;as.prototype.name="NoSuchElementException";var F=function(e){function t(){e.call(this),this.array_=[],arguments[0]instanceof Se&&this.addAll(arguments[0])}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.ensureCapacity=function(){},t.prototype.interfaces_=function(){return[e,Se]},t.prototype.add=function(n){return arguments.length===1?this.array_.push(n):this.array_.splice(arguments[0],arguments[1]),!0},t.prototype.clear=function(){this.array_=[]},t.prototype.addAll=function(n){for(var i=this,o=n.iterator();o.hasNext();)i.add(o.next());return!0},t.prototype.set=function(n,i){var o=this.array_[n];return this.array_[n]=i,o},t.prototype.iterator=function(){return new wE(this)},t.prototype.get=function(n){if(n<0||n>=this.size())throw new tl;return this.array_[n]},t.prototype.isEmpty=function(){return this.array_.length===0},t.prototype.size=function(){return this.array_.length},t.prototype.toArray=function(){for(var n=this,i=[],o=0,s=this.array_.length;o<s;o++)i.push(n.array_[o]);return i},t.prototype.remove=function(n){for(var i=this,o=!1,s=0,a=this.array_.length;s<a;s++)if(i.array_[s]===n){i.array_.splice(s,1),o=!0;break}return o},t}(Jr),wE=function(e){function t(r){e.call(this),this.arrayList_=r,this.position_=0}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.next=function(){if(this.position_===this.arrayList_.size())throw new as;return this.arrayList_.get(this.position_++)},t.prototype.hasNext=function(){return this.position_<this.arrayList_.size()},t.prototype.set=function(n){return this.arrayList_.set(this.position_-1,n)},t.prototype.remove=function(){this.arrayList_.remove(this.arrayList_.get(this.position_))},t}(ss),ra=function(e){function t(){if(e.call(this),arguments.length!==0){if(arguments.length===1){var n=arguments[0];this.ensureCapacity(n.length),this.add(n,!0)}else if(arguments.length===2){var i=arguments[0],o=arguments[1];this.ensureCapacity(i.length),this.add(i,o)}}}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var r={coordArrayType:{configurable:!0}};return r.coordArrayType.get=function(){return new Array(0).fill(null)},t.prototype.getCoordinate=function(i){return this.get(i)},t.prototype.addAll=function(){var i=this;if(arguments.length===2){for(var o=arguments[0],s=arguments[1],a=!1,u=o.iterator();u.hasNext();)i.add(u.next(),s),a=!0;return a}else return e.prototype.addAll.apply(this,arguments)},t.prototype.clone=function(){for(var i=this,o=e.prototype.clone.call(this),s=0;s<this.size();s++)o.add(s,i.get(s).copy());return o},t.prototype.toCoordinateArray=function(){return this.toArray(t.coordArrayType)},t.prototype.add=function(){var i=this;if(arguments.length===1){var o=arguments[0];e.prototype.add.call(this,o)}else if(arguments.length===2){if(arguments[0]instanceof Array&&typeof arguments[1]=="boolean"){var s=arguments[0],a=arguments[1];return this.add(s,a,!0),!0}else if(arguments[0]instanceof P&&typeof arguments[1]=="boolean"){var u=arguments[0],f=arguments[1];if(!f&&this.size()>=1){var l=this.get(this.size()-1);if(l.equals2D(u))return null}e.prototype.add.call(this,u)}else if(arguments[0]instanceof Object&&typeof arguments[1]=="boolean"){var c=arguments[0],h=arguments[1];return this.add(c,h),!0}}else if(arguments.length===3){if(typeof arguments[2]=="boolean"&&arguments[0]instanceof Array&&typeof arguments[1]=="boolean"){var p=arguments[0],v=arguments[1],y=arguments[2];if(y)for(var E=0;E<p.length;E++)i.add(p[E],v);else for(var x=p.length-1;x>=0;x--)i.add(p[x],v);return!0}else if(typeof arguments[2]=="boolean"&&Number.isInteger(arguments[0])&&arguments[1]instanceof P){var g=arguments[0],d=arguments[1],_=arguments[2];if(!_){var w=this.size();if(w>0){if(g>0){var S=this.get(g-1);if(S.equals2D(d))return null}if(g<w){var C=this.get(g);if(C.equals2D(d))return null}}}e.prototype.add.call(this,g,d)}}else if(arguments.length===4){var N=arguments[0],I=arguments[1],A=arguments[2],O=arguments[3],D=1;A>O&&(D=-1);for(var T=A;T!==O;T+=D)i.add(N[T],I);return!0}},t.prototype.closeRing=function(){this.size()>0&&this.add(new P(this.get(0)),!1)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},Object.defineProperties(t,r),t}(F),ct=function(){},iu={ForwardComparator:{configurable:!0},BidirectionalComparator:{configurable:!0},coordArrayType:{configurable:!0}};iu.ForwardComparator.get=function(){return Bs};iu.BidirectionalComparator.get=function(){return Xo};iu.coordArrayType.get=function(){return new Array(0).fill(null)};ct.prototype.interfaces_=function(){return[]};ct.prototype.getClass=function(){return ct};ct.isRing=function(t){return!(t.length<4||!t[0].equals2D(t[t.length-1]))};ct.ptNotInList=function(t,r){for(var n=0;n<t.length;n++){var i=t[n];if(ct.indexOf(i,r)<0)return i}return null};ct.scroll=function(t,r){var n=ct.indexOf(r,t);if(n<0)return null;var i=new Array(t.length).fill(null);qe.arraycopy(t,n,i,0,t.length-n),qe.arraycopy(t,0,i,t.length-n,n),qe.arraycopy(i,0,t,0,t.length)};ct.equals=function(){if(arguments.length===2){var t=arguments[0],r=arguments[1];if(t===r)return!0;if(t===null||r===null||t.length!==r.length)return!1;for(var n=0;n<t.length;n++)if(!t[n].equals(r[n]))return!1;return!0}else if(arguments.length===3){var i=arguments[0],o=arguments[1],s=arguments[2];if(i===o)return!0;if(i===null||o===null||i.length!==o.length)return!1;for(var a=0;a<i.length;a++)if(s.compare(i[a],o[a])!==0)return!1;return!0}};ct.intersection=function(t,r){for(var n=new ra,i=0;i<t.length;i++)r.intersects(t[i])&&n.add(t[i],!0);return n.toCoordinateArray()};ct.hasRepeatedPoints=function(t){for(var r=1;r<t.length;r++)if(t[r-1].equals(t[r]))return!0;return!1};ct.removeRepeatedPoints=function(t){if(!ct.hasRepeatedPoints(t))return t;var r=new ra(t,!1);return r.toCoordinateArray()};ct.reverse=function(t){for(var r=t.length-1,n=Math.trunc(r/2),i=0;i<=n;i++){var o=t[i];t[i]=t[r-i],t[r-i]=o}};ct.removeNull=function(t){for(var r=0,n=0;n<t.length;n++)t[n]!==null&&r++;var i=new Array(r).fill(null);if(r===0)return i;for(var o=0,s=0;s<t.length;s++)t[s]!==null&&(i[o++]=t[s]);return i};ct.copyDeep=function(){if(arguments.length===1){for(var t=arguments[0],r=new Array(t.length).fill(null),n=0;n<t.length;n++)r[n]=new P(t[n]);return r}else if(arguments.length===5)for(var i=arguments[0],o=arguments[1],s=arguments[2],a=arguments[3],u=arguments[4],f=0;f<u;f++)s[a+f]=new P(i[o+f])};ct.isEqualReversed=function(t,r){for(var n=0;n<t.length;n++){var i=t[n],o=r[t.length-n-1];if(i.compareTo(o)!==0)return!1}return!0};ct.envelope=function(t){for(var r=new Y,n=0;n<t.length;n++)r.expandToInclude(t[n]);return r};ct.toCoordinateArray=function(t){return t.toArray(ct.coordArrayType)};ct.atLeastNCoordinatesOrNothing=function(t,r){return r.length>=t?r:[]};ct.indexOf=function(t,r){for(var n=0;n<r.length;n++)if(t.equals(r[n]))return n;return-1};ct.increasingDirection=function(t){for(var r=0;r<Math.trunc(t.length/2);r++){var n=t.length-1-r,i=t[r].compareTo(t[n]);if(i!==0)return i}return 1};ct.compare=function(t,r){for(var n=0;n<t.length&&n<r.length;){var i=t[n].compareTo(r[n]);if(i!==0)return i;n++}return n<r.length?-1:n<t.length?1:0};ct.minCoordinate=function(t){for(var r=null,n=0;n<t.length;n++)(r===null||r.compareTo(t[n])>0)&&(r=t[n]);return r};ct.extract=function(t,r,n){r=Lr.clamp(r,0,t.length),n=Lr.clamp(n,-1,t.length);var i=n-r+1;n<0&&(i=0),r>=t.length&&(i=0),n<r&&(i=0);var o=new Array(i).fill(null);if(i===0)return o;for(var s=0,a=r;a<=n;a++)o[s++]=t[a];return o};Object.defineProperties(ct,iu);var Bs=function(){};Bs.prototype.compare=function(t,r){var n=t,i=r;return ct.compare(n,i)};Bs.prototype.interfaces_=function(){return[Bo]};Bs.prototype.getClass=function(){return Bs};var Xo=function(){};Xo.prototype.compare=function(t,r){var n=t,i=r;if(n.length<i.length)return-1;if(n.length>i.length)return 1;if(n.length===0)return 0;var o=ct.compare(n,i),s=ct.isEqualReversed(n,i);return s?0:o};Xo.prototype.OLDcompare=function(t,r){var n=t,i=r;if(n.length<i.length)return-1;if(n.length>i.length)return 1;if(n.length===0)return 0;for(var o=ct.increasingDirection(n),s=ct.increasingDirection(i),a=o>0?0:n.length-1,u=s>0?0:n.length-1,f=0;f<n.length;f++){var l=n[a].compareTo(i[u]);if(l!==0)return l;a+=o,u+=s}return 0};Xo.prototype.interfaces_=function(){return[Bo]};Xo.prototype.getClass=function(){return Xo};var vo=function(){};vo.prototype.get=function(){};vo.prototype.put=function(){};vo.prototype.size=function(){};vo.prototype.values=function(){};vo.prototype.entrySet=function(){};var IE=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t}(vo);function na(e){this.message=e||""}na.prototype=new Error;na.prototype.name="OperationNotSupported";function ou(){}ou.prototype=new Se;ou.prototype.contains=function(){};var el=function(e){function t(){e.call(this),this.array_=[],arguments[0]instanceof Se&&this.addAll(arguments[0])}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.contains=function(n){for(var i=this,o=0,s=this.array_.length;o<s;o++){var a=i.array_[o];if(a===n)return!0}return!1},t.prototype.add=function(n){return this.contains(n)?!1:(this.array_.push(n),!0)},t.prototype.addAll=function(n){for(var i=this,o=n.iterator();o.hasNext();)i.add(o.next());return!0},t.prototype.remove=function(n){throw new Error},t.prototype.size=function(){return this.array_.length},t.prototype.isEmpty=function(){return this.array_.length===0},t.prototype.toArray=function(){for(var n=this,i=[],o=0,s=this.array_.length;o<s;o++)i.push(n.array_[o]);return i},t.prototype.iterator=function(){return new CE(this)},t}(ou),CE=function(e){function t(r){e.call(this),this.hashSet_=r,this.position_=0}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.next=function(){if(this.position_===this.hashSet_.size())throw new as;return this.hashSet_.array_[this.position_++]},t.prototype.hasNext=function(){return this.position_<this.hashSet_.size()},t.prototype.remove=function(){throw new na},t}(ss),Jn=0,Ii=1;function ih(e){return e===null?Jn:e.color}function ie(e){return e===null?null:e.parent}function Yn(e,t){e!==null&&(e.color=t)}function ku(e){return e===null?null:e.left}function oh(e){return e===null?null:e.right}function Ke(){this.root_=null,this.size_=0}Ke.prototype=new IE;Ke.prototype.get=function(e){for(var t=this.root_;t!==null;){var r=e.compareTo(t.key);if(r<0)t=t.left;else if(r>0)t=t.right;else return t.value}return null};Ke.prototype.put=function(e,t){if(this.root_===null)return this.root_={key:e,value:t,left:null,right:null,parent:null,color:Jn,getValue:function(){return this.value},getKey:function(){return this.key}},this.size_=1,null;var r=this.root_,n,i;do if(n=r,i=e.compareTo(r.key),i<0)r=r.left;else if(i>0)r=r.right;else{var o=r.value;return r.value=t,o}while(r!==null);var s={key:e,left:null,right:null,value:t,parent:n,color:Jn,getValue:function(){return this.value},getKey:function(){return this.key}};return i<0?n.left=s:n.right=s,this.fixAfterInsertion(s),this.size_++,null};Ke.prototype.fixAfterInsertion=function(e){var t=this;for(e.color=Ii;e!=null&&e!==this.root_&&e.parent.color===Ii;)if(ie(e)===ku(ie(ie(e)))){var r=oh(ie(ie(e)));ih(r)===Ii?(Yn(ie(e),Jn),Yn(r,Jn),Yn(ie(ie(e)),Ii),e=ie(ie(e))):(e===oh(ie(e))&&(e=ie(e),t.rotateLeft(e)),Yn(ie(e),Jn),Yn(ie(ie(e)),Ii),t.rotateRight(ie(ie(e))))}else{var n=ku(ie(ie(e)));ih(n)===Ii?(Yn(ie(e),Jn),Yn(n,Jn),Yn(ie(ie(e)),Ii),e=ie(ie(e))):(e===ku(ie(e))&&(e=ie(e),t.rotateRight(e)),Yn(ie(e),Jn),Yn(ie(ie(e)),Ii),t.rotateLeft(ie(ie(e))))}this.root_.color=Jn};Ke.prototype.values=function(){var e=new F,t=this.getFirstEntry();if(t!==null)for(e.add(t.value);(t=Ke.successor(t))!==null;)e.add(t.value);return e};Ke.prototype.entrySet=function(){var e=new el,t=this.getFirstEntry();if(t!==null)for(e.add(t);(t=Ke.successor(t))!==null;)e.add(t);return e};Ke.prototype.rotateLeft=function(e){if(e!=null){var t=e.right;e.right=t.left,t.left!=null&&(t.left.parent=e),t.parent=e.parent,e.parent===null?this.root_=t:e.parent.left===e?e.parent.left=t:e.parent.right=t,t.left=e,e.parent=t}};Ke.prototype.rotateRight=function(e){if(e!=null){var t=e.left;e.left=t.right,t.right!=null&&(t.right.parent=e),t.parent=e.parent,e.parent===null?this.root_=t:e.parent.right===e?e.parent.right=t:e.parent.left=t,t.right=e,e.parent=t}};Ke.prototype.getFirstEntry=function(){var e=this.root_;if(e!=null)for(;e.left!=null;)e=e.left;return e};Ke.successor=function(e){if(e===null)return null;if(e.right!==null){for(var t=e.right;t.left!==null;)t=t.left;return t}else{for(var r=e.parent,n=e;r!==null&&n===r.right;)n=r,r=r.parent;return r}};Ke.prototype.size=function(){return this.size_};var Gs=function(){};Gs.prototype.interfaces_=function(){return[]};Gs.prototype.getClass=function(){return Gs};function hg(){}hg.prototype=new ou;function pn(){this.array_=[],arguments[0]instanceof Se&&this.addAll(arguments[0])}pn.prototype=new hg;pn.prototype.contains=function(e){for(var t=this,r=0,n=this.array_.length;r<n;r++){var i=t.array_[r];if(i.compareTo(e)===0)return!0}return!1};pn.prototype.add=function(e){var t=this;if(this.contains(e))return!1;for(var r=0,n=this.array_.length;r<n;r++){var i=t.array_[r];if(i.compareTo(e)===1)return t.array_.splice(r,0,e),!0}return this.array_.push(e),!0};pn.prototype.addAll=function(e){for(var t=this,r=e.iterator();r.hasNext();)t.add(r.next());return!0};pn.prototype.remove=function(e){throw new na};pn.prototype.size=function(){return this.array_.length};pn.prototype.isEmpty=function(){return this.array_.length===0};pn.prototype.toArray=function(){for(var e=this,t=[],r=0,n=this.array_.length;r<n;r++)t.push(e.array_[r]);return t};pn.prototype.iterator=function(){return new su(this)};var su=function(e){this.treeSet_=e,this.position_=0};su.prototype.next=function(){if(this.position_===this.treeSet_.size())throw new as;return this.treeSet_.array_[this.position_++]};su.prototype.hasNext=function(){return this.position_<this.treeSet_.size()};su.prototype.remove=function(){throw new na};var Mi=function(){};Mi.sort=function(){var t=arguments[0],r,n,i,o;if(arguments.length===1)o=function(a,u){return a.compareTo(u)},t.sort(o);else if(arguments.length===2)i=arguments[1],o=function(a,u){return i.compare(a,u)},t.sort(o);else if(arguments.length===3){n=t.slice(arguments[1],arguments[2]),n.sort();var s=t.slice(0,arguments[1]).concat(n,t.slice(arguments[2],t.length));for(t.splice(0,t.length),r=0;r<s.length;r++)t.push(s[r])}else if(arguments.length===4)for(n=t.slice(arguments[1],arguments[2]),i=arguments[3],o=function(a,u){return i.compare(a,u)},n.sort(o),s=t.slice(0,arguments[1]).concat(n,t.slice(arguments[2],t.length)),t.splice(0,t.length),r=0;r<s.length;r++)t.push(s[r])};Mi.asList=function(t){for(var r=new F,n=0,i=t.length;n<i;n++)r.add(t[n]);return r};var Yt=function(){},nn={P:{configurable:!0},L:{configurable:!0},A:{configurable:!0},FALSE:{configurable:!0},TRUE:{configurable:!0},DONTCARE:{configurable:!0},SYM_FALSE:{configurable:!0},SYM_TRUE:{configurable:!0},SYM_DONTCARE:{configurable:!0},SYM_P:{configurable:!0},SYM_L:{configurable:!0},SYM_A:{configurable:!0}};nn.P.get=function(){return 0};nn.L.get=function(){return 1};nn.A.get=function(){return 2};nn.FALSE.get=function(){return-1};nn.TRUE.get=function(){return-2};nn.DONTCARE.get=function(){return-3};nn.SYM_FALSE.get=function(){return"F"};nn.SYM_TRUE.get=function(){return"T"};nn.SYM_DONTCARE.get=function(){return"*"};nn.SYM_P.get=function(){return"0"};nn.SYM_L.get=function(){return"1"};nn.SYM_A.get=function(){return"2"};Yt.prototype.interfaces_=function(){return[]};Yt.prototype.getClass=function(){return Yt};Yt.toDimensionSymbol=function(t){switch(t){case Yt.FALSE:return Yt.SYM_FALSE;case Yt.TRUE:return Yt.SYM_TRUE;case Yt.DONTCARE:return Yt.SYM_DONTCARE;case Yt.P:return Yt.SYM_P;case Yt.L:return Yt.SYM_L;case Yt.A:return Yt.SYM_A}throw new le("Unknown dimension value: "+t)};Yt.toDimensionValue=function(t){switch(Fs.toUpperCase(t)){case Yt.SYM_FALSE:return Yt.FALSE;case Yt.SYM_TRUE:return Yt.TRUE;case Yt.SYM_DONTCARE:return Yt.DONTCARE;case Yt.SYM_P:return Yt.P;case Yt.SYM_L:return Yt.L;case Yt.SYM_A:return Yt.A}throw new le("Unknown dimension symbol: "+t)};Object.defineProperties(Yt,nn);var gn=function(){};gn.prototype.filter=function(t){};gn.prototype.interfaces_=function(){return[]};gn.prototype.getClass=function(){return gn};var Zr=function(){};Zr.prototype.filter=function(t,r){};Zr.prototype.isDone=function(){};Zr.prototype.isGeometryChanged=function(){};Zr.prototype.interfaces_=function(){return[]};Zr.prototype.getClass=function(){return Zr};var sr=function(e){function t(n,i){if(e.call(this,i),this._geometries=n||[],e.hasNullElements(this._geometries))throw new le("geometries must not contain null elements")}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var r={serialVersionUID:{configurable:!0}};return t.prototype.computeEnvelopeInternal=function(){for(var i=this,o=new Y,s=0;s<this._geometries.length;s++)o.expandToInclude(i._geometries[s].getEnvelopeInternal());return o},t.prototype.getGeometryN=function(i){return this._geometries[i]},t.prototype.getSortIndex=function(){return e.SORTINDEX_GEOMETRYCOLLECTION},t.prototype.getCoordinates=function(){for(var i=this,o=new Array(this.getNumPoints()).fill(null),s=-1,a=0;a<this._geometries.length;a++)for(var u=i._geometries[a].getCoordinates(),f=0;f<u.length;f++)s++,o[s]=u[f];return o},t.prototype.getArea=function(){for(var i=this,o=0,s=0;s<this._geometries.length;s++)o+=i._geometries[s].getArea();return o},t.prototype.equalsExact=function(){var i=this;if(arguments.length===2){var o=arguments[0],s=arguments[1];if(!this.isEquivalentClass(o))return!1;var a=o;if(this._geometries.length!==a._geometries.length)return!1;for(var u=0;u<this._geometries.length;u++)if(!i._geometries[u].equalsExact(a._geometries[u],s))return!1;return!0}else return e.prototype.equalsExact.apply(this,arguments)},t.prototype.normalize=function(){for(var i=this,o=0;o<this._geometries.length;o++)i._geometries[o].normalize();Mi.sort(this._geometries)},t.prototype.getCoordinate=function(){return this.isEmpty()?null:this._geometries[0].getCoordinate()},t.prototype.getBoundaryDimension=function(){for(var i=this,o=Yt.FALSE,s=0;s<this._geometries.length;s++)o=Math.max(o,i._geometries[s].getBoundaryDimension());return o},t.prototype.getDimension=function(){for(var i=this,o=Yt.FALSE,s=0;s<this._geometries.length;s++)o=Math.max(o,i._geometries[s].getDimension());return o},t.prototype.getLength=function(){for(var i=this,o=0,s=0;s<this._geometries.length;s++)o+=i._geometries[s].getLength();return o},t.prototype.getNumPoints=function(){for(var i=this,o=0,s=0;s<this._geometries.length;s++)o+=i._geometries[s].getNumPoints();return o},t.prototype.getNumGeometries=function(){return this._geometries.length},t.prototype.reverse=function(){for(var i=this,o=this._geometries.length,s=new Array(o).fill(null),a=0;a<this._geometries.length;a++)s[a]=i._geometries[a].reverse();return this.getFactory().createGeometryCollection(s)},t.prototype.compareToSameClass=function(){var i=this;if(arguments.length===1){var o=arguments[0],s=new pn(Mi.asList(this._geometries)),a=new pn(Mi.asList(o._geometries));return this.compare(s,a)}else if(arguments.length===2){for(var u=arguments[0],f=arguments[1],l=u,c=this.getNumGeometries(),h=l.getNumGeometries(),p=0;p<c&&p<h;){var v=i.getGeometryN(p),y=l.getGeometryN(p),E=v.compareToSameClass(y,f);if(E!==0)return E;p++}return p<c?1:p<h?-1:0}},t.prototype.apply=function(){var i=this;if(tt(arguments[0],An))for(var o=arguments[0],s=0;s<this._geometries.length;s++)i._geometries[s].apply(o);else if(tt(arguments[0],Zr)){var a=arguments[0];if(this._geometries.length===0)return null;for(var u=0;u<this._geometries.length&&(i._geometries[u].apply(a),!a.isDone());u++);a.isGeometryChanged()&&this.geometryChanged()}else if(tt(arguments[0],gn)){var f=arguments[0];f.filter(this);for(var l=0;l<this._geometries.length;l++)i._geometries[l].apply(f)}else if(tt(arguments[0],$n)){var c=arguments[0];c.filter(this);for(var h=0;h<this._geometries.length;h++)i._geometries[h].apply(c)}},t.prototype.getBoundary=function(){return this.checkNotGeometryCollection(this),ut.shouldNeverReachHere(),null},t.prototype.clone=function(){var i=this,o=e.prototype.clone.call(this);o._geometries=new Array(this._geometries.length).fill(null);for(var s=0;s<this._geometries.length;s++)o._geometries[s]=i._geometries[s].clone();return o},t.prototype.getGeometryType=function(){return"GeometryCollection"},t.prototype.copy=function(){for(var i=this,o=new Array(this._geometries.length).fill(null),s=0;s<o.length;s++)o[s]=i._geometries[s].copy();return new t(o,this._factory)},t.prototype.isEmpty=function(){for(var i=this,o=0;o<this._geometries.length;o++)if(!i._geometries[o].isEmpty())return!1;return!0},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},r.serialVersionUID.get=function(){return-5694727726395021e3},Object.defineProperties(t,r),t}($),Di=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var r={serialVersionUID:{configurable:!0}};return t.prototype.getSortIndex=function(){return $.SORTINDEX_MULTILINESTRING},t.prototype.equalsExact=function(){if(arguments.length===2){var i=arguments[0],o=arguments[1];return this.isEquivalentClass(i)?e.prototype.equalsExact.call(this,i,o):!1}else return e.prototype.equalsExact.apply(this,arguments)},t.prototype.getBoundaryDimension=function(){return this.isClosed()?Yt.FALSE:0},t.prototype.isClosed=function(){var i=this;if(this.isEmpty())return!1;for(var o=0;o<this._geometries.length;o++)if(!i._geometries[o].isClosed())return!1;return!0},t.prototype.getDimension=function(){return 1},t.prototype.reverse=function(){for(var i=this,o=this._geometries.length,s=new Array(o).fill(null),a=0;a<this._geometries.length;a++)s[o-1-a]=i._geometries[a].reverse();return this.getFactory().createMultiLineString(s)},t.prototype.getBoundary=function(){return new Dr(this).getBoundary()},t.prototype.getGeometryType=function(){return"MultiLineString"},t.prototype.copy=function(){for(var i=this,o=new Array(this._geometries.length).fill(null),s=0;s<o.length;s++)o[s]=i._geometries[s].copy();return new t(o,this._factory)},t.prototype.interfaces_=function(){return[Gs]},t.prototype.getClass=function(){return t},r.serialVersionUID.get=function(){return 8166665132445434e3},Object.defineProperties(t,r),t}(sr),Dr=function(){if(this._geom=null,this._geomFact=null,this._bnRule=null,this._endpointMap=null,arguments.length===1){var t=arguments[0],r=Gr.MOD2_BOUNDARY_RULE;this._geom=t,this._geomFact=t.getFactory(),this._bnRule=r}else if(arguments.length===2){var n=arguments[0],i=arguments[1];this._geom=n,this._geomFact=n.getFactory(),this._bnRule=i}};Dr.prototype.boundaryMultiLineString=function(t){if(this._geom.isEmpty())return this.getEmptyMultiPoint();var r=this.computeBoundaryCoordinates(t);return r.length===1?this._geomFact.createPoint(r[0]):this._geomFact.createMultiPointFromCoords(r)};Dr.prototype.getBoundary=function(){return this._geom instanceof ve?this.boundaryLineString(this._geom):this._geom instanceof Di?this.boundaryMultiLineString(this._geom):this._geom.getBoundary()};Dr.prototype.boundaryLineString=function(t){if(this._geom.isEmpty())return this.getEmptyMultiPoint();if(t.isClosed()){var r=this._bnRule.isInBoundary(2);return r?t.getStartPoint():this._geomFact.createMultiPoint()}return this._geomFact.createMultiPoint([t.getStartPoint(),t.getEndPoint()])};Dr.prototype.getEmptyMultiPoint=function(){return this._geomFact.createMultiPoint()};Dr.prototype.computeBoundaryCoordinates=function(t){var r=this,n=new F;this._endpointMap=new Ke;for(var i=0;i<t.getNumGeometries();i++){var o=t.getGeometryN(i);o.getNumPoints()!==0&&(r.addEndpoint(o.getCoordinateN(0)),r.addEndpoint(o.getCoordinateN(o.getNumPoints()-1)))}for(var s=this._endpointMap.entrySet().iterator();s.hasNext();){var a=s.next(),u=a.getValue(),f=u.count;r._bnRule.isInBoundary(f)&&n.add(a.getKey())}return ct.toCoordinateArray(n)};Dr.prototype.addEndpoint=function(t){var r=this._endpointMap.get(t);r===null&&(r=new Da,this._endpointMap.put(t,r)),r.count++};Dr.prototype.interfaces_=function(){return[]};Dr.prototype.getClass=function(){return Dr};Dr.getBoundary=function(){if(arguments.length===1){var t=arguments[0],r=new Dr(t);return r.getBoundary()}else if(arguments.length===2){var n=arguments[0],i=arguments[1],o=new Dr(n,i);return o.getBoundary()}};var Da=function(){this.count=null};Da.prototype.interfaces_=function(){return[]};Da.prototype.getClass=function(){return Da};function SE(){}function NE(){}var PE=function(){};function LE(){}function ME(){}function OE(){}var Tr=function(){},rl={NEWLINE:{configurable:!0},SIMPLE_ORDINATE_FORMAT:{configurable:!0}};Tr.prototype.interfaces_=function(){return[]};Tr.prototype.getClass=function(){return Tr};Tr.chars=function(t,r){for(var n=new Array(r).fill(null),i=0;i<r;i++)n[i]=t;return String(n)};Tr.getStackTrace=function(){if(arguments.length===1){var t=arguments[0],r=new LE,n=new SE;return t.printStackTrace(n),r.toString()}else if(arguments.length===2){var i=arguments[0],o=arguments[1],s="";new NE(Tr.getStackTrace(i));for(var a=new OE,u=0;u<o;u++)try{s+=a.readLine()+Tr.NEWLINE}catch(f){if(f instanceof ME)ut.shouldNeverReachHere();else throw f}finally{}return s}};Tr.split=function(t,r){for(var n=r.length,i=new F,o=""+t,s=o.indexOf(r);s>=0;){var a=o.substring(0,s);i.add(a),o=o.substring(s+n),s=o.indexOf(r)}o.length>0&&i.add(o);for(var u=new Array(i.size()).fill(null),f=0;f<u.length;f++)u[f]=i.get(f);return u};Tr.toString=function(){if(arguments.length===1){var t=arguments[0];return Tr.SIMPLE_ORDINATE_FORMAT.format(t)}};Tr.spaces=function(t){return Tr.chars(" ",t)};rl.NEWLINE.get=function(){return qe.getProperty("line.separator")};rl.SIMPLE_ORDINATE_FORMAT.get=function(){return new PE};Object.defineProperties(Tr,rl);var _e=function(){};_e.prototype.interfaces_=function(){return[]};_e.prototype.getClass=function(){return _e};_e.copyCoord=function(t,r,n,i){for(var o=Math.min(t.getDimension(),n.getDimension()),s=0;s<o;s++)n.setOrdinate(i,s,t.getOrdinate(r,s))};_e.isRing=function(t){var r=t.size();return r===0?!0:r<=3?!1:t.getOrdinate(0,yt.X)===t.getOrdinate(r-1,yt.X)&&t.getOrdinate(0,yt.Y)===t.getOrdinate(r-1,yt.Y)};_e.isEqual=function(t,r){var n=t.size(),i=r.size();if(n!==i)return!1;for(var o=Math.min(t.getDimension(),r.getDimension()),s=0;s<n;s++)for(var a=0;a<o;a++){var u=t.getOrdinate(s,a),f=r.getOrdinate(s,a);if(t.getOrdinate(s,a)!==r.getOrdinate(s,a)&&!(st.isNaN(u)&&st.isNaN(f)))return!1}return!0};_e.extend=function(t,r,n){var i=t.create(n,r.getDimension()),o=r.size();if(_e.copy(r,0,i,0,o),o>0)for(var s=o;s<n;s++)_e.copy(r,o-1,i,s,1);return i};_e.reverse=function(t){for(var r=t.size()-1,n=Math.trunc(r/2),i=0;i<=n;i++)_e.swap(t,i,r-i)};_e.swap=function(t,r,n){if(r===n)return null;for(var i=0;i<t.getDimension();i++){var o=t.getOrdinate(r,i);t.setOrdinate(r,i,t.getOrdinate(n,i)),t.setOrdinate(n,i,o)}};_e.copy=function(t,r,n,i,o){for(var s=0;s<o;s++)_e.copyCoord(t,r+s,n,i+s)};_e.toString=function(){if(arguments.length===1){var t=arguments[0],r=t.size();if(r===0)return"()";var n=t.getDimension(),i=new Cn;i.append("(");for(var o=0;o<r;o++){o>0&&i.append(" ");for(var s=0;s<n;s++)s>0&&i.append(","),i.append(Tr.toString(t.getOrdinate(o,s)))}return i.append(")"),i.toString()}};_e.ensureValidRing=function(t,r){var n=r.size();if(n===0)return r;if(n<=3)return _e.createClosedRing(t,r,4);var i=r.getOrdinate(0,yt.X)===r.getOrdinate(n-1,yt.X)&&r.getOrdinate(0,yt.Y)===r.getOrdinate(n-1,yt.Y);return i?r:_e.createClosedRing(t,r,n+1)};_e.createClosedRing=function(t,r,n){var i=t.create(n,r.getDimension()),o=r.size();_e.copy(r,0,i,0,o);for(var s=o;s<n;s++)_e.copy(r,0,i,s,1);return i};var ve=function(e){function t(n,i){e.call(this,i),this._points=null,this.init(n)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var r={serialVersionUID:{configurable:!0}};return t.prototype.computeEnvelopeInternal=function(){return this.isEmpty()?new Y:this._points.expandEnvelope(new Y)},t.prototype.isRing=function(){return this.isClosed()&&this.isSimple()},t.prototype.getSortIndex=function(){return e.SORTINDEX_LINESTRING},t.prototype.getCoordinates=function(){return this._points.toCoordinateArray()},t.prototype.equalsExact=function(){var i=this;if(arguments.length===2){var o=arguments[0],s=arguments[1];if(!this.isEquivalentClass(o))return!1;var a=o;if(this._points.size()!==a._points.size())return!1;for(var u=0;u<this._points.size();u++)if(!i.equal(i._points.getCoordinate(u),a._points.getCoordinate(u),s))return!1;return!0}else return e.prototype.equalsExact.apply(this,arguments)},t.prototype.normalize=function(){for(var i=this,o=0;o<Math.trunc(this._points.size()/2);o++){var s=i._points.size()-1-o;if(!i._points.getCoordinate(o).equals(i._points.getCoordinate(s)))return i._points.getCoordinate(o).compareTo(i._points.getCoordinate(s))>0&&_e.reverse(i._points),null}},t.prototype.getCoordinate=function(){return this.isEmpty()?null:this._points.getCoordinate(0)},t.prototype.getBoundaryDimension=function(){return this.isClosed()?Yt.FALSE:0},t.prototype.isClosed=function(){return this.isEmpty()?!1:this.getCoordinateN(0).equals2D(this.getCoordinateN(this.getNumPoints()-1))},t.prototype.getEndPoint=function(){return this.isEmpty()?null:this.getPointN(this.getNumPoints()-1)},t.prototype.getDimension=function(){return 1},t.prototype.getLength=function(){return G.computeLength(this._points)},t.prototype.getNumPoints=function(){return this._points.size()},t.prototype.reverse=function(){var i=this._points.copy();_e.reverse(i);var o=this.getFactory().createLineString(i);return o},t.prototype.compareToSameClass=function(){var i=this;if(arguments.length===1){for(var o=arguments[0],s=o,a=0,u=0;a<this._points.size()&&u<s._points.size();){var f=i._points.getCoordinate(a).compareTo(s._points.getCoordinate(u));if(f!==0)return f;a++,u++}return a<this._points.size()?1:u<s._points.size()?-1:0}else if(arguments.length===2){var l=arguments[0],c=arguments[1],h=l;return c.compare(this._points,h._points)}},t.prototype.apply=function(){var i=this;if(tt(arguments[0],An))for(var o=arguments[0],s=0;s<this._points.size();s++)o.filter(i._points.getCoordinate(s));else if(tt(arguments[0],Zr)){var a=arguments[0];if(this._points.size()===0)return null;for(var u=0;u<this._points.size()&&(a.filter(i._points,u),!a.isDone());u++);a.isGeometryChanged()&&this.geometryChanged()}else if(tt(arguments[0],gn)){var f=arguments[0];f.filter(this)}else if(tt(arguments[0],$n)){var l=arguments[0];l.filter(this)}},t.prototype.getBoundary=function(){return new Dr(this).getBoundary()},t.prototype.isEquivalentClass=function(i){return i instanceof t},t.prototype.clone=function(){var i=e.prototype.clone.call(this);return i._points=this._points.clone(),i},t.prototype.getCoordinateN=function(i){return this._points.getCoordinate(i)},t.prototype.getGeometryType=function(){return"LineString"},t.prototype.copy=function(){return new t(this._points.copy(),this._factory)},t.prototype.getCoordinateSequence=function(){return this._points},t.prototype.isEmpty=function(){return this._points.size()===0},t.prototype.init=function(i){if(i===null&&(i=this.getFactory().getCoordinateSequenceFactory().create([])),i.size()===1)throw new le("Invalid number of points in LineString (found "+i.size()+" - must be 0 or >= 2)");this._points=i},t.prototype.isCoordinate=function(i){for(var o=this,s=0;s<this._points.size();s++)if(o._points.getCoordinate(s).equals(i))return!0;return!1},t.prototype.getStartPoint=function(){return this.isEmpty()?null:this.getPointN(0)},t.prototype.getPointN=function(i){return this.getFactory().createPoint(this._points.getCoordinate(i))},t.prototype.interfaces_=function(){return[Gs]},t.prototype.getClass=function(){return t},r.serialVersionUID.get=function(){return 0x2b2b51ba435c8e00},Object.defineProperties(t,r),t}($),ks=function(){};ks.prototype.interfaces_=function(){return[]};ks.prototype.getClass=function(){return ks};var xr=function(e){function t(n,i){e.call(this,i),this._coordinates=n||null,this.init(this._coordinates)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var r={serialVersionUID:{configurable:!0}};return t.prototype.computeEnvelopeInternal=function(){if(this.isEmpty())return new Y;var i=new Y;return i.expandToInclude(this._coordinates.getX(0),this._coordinates.getY(0)),i},t.prototype.getSortIndex=function(){return e.SORTINDEX_POINT},t.prototype.getCoordinates=function(){return this.isEmpty()?[]:[this.getCoordinate()]},t.prototype.equalsExact=function(){if(arguments.length===2){var i=arguments[0],o=arguments[1];return this.isEquivalentClass(i)?this.isEmpty()&&i.isEmpty()?!0:this.isEmpty()!==i.isEmpty()?!1:this.equal(i.getCoordinate(),this.getCoordinate(),o):!1}else return e.prototype.equalsExact.apply(this,arguments)},t.prototype.normalize=function(){},t.prototype.getCoordinate=function(){return this._coordinates.size()!==0?this._coordinates.getCoordinate(0):null},t.prototype.getBoundaryDimension=function(){return Yt.FALSE},t.prototype.getDimension=function(){return 0},t.prototype.getNumPoints=function(){return this.isEmpty()?0:1},t.prototype.reverse=function(){return this.copy()},t.prototype.getX=function(){if(this.getCoordinate()===null)throw new Error("getX called on empty Point");return this.getCoordinate().x},t.prototype.compareToSameClass=function(){if(arguments.length===1){var i=arguments[0],o=i;return this.getCoordinate().compareTo(o.getCoordinate())}else if(arguments.length===2){var s=arguments[0],a=arguments[1],u=s;return a.compare(this._coordinates,u._coordinates)}},t.prototype.apply=function(){if(tt(arguments[0],An)){var i=arguments[0];if(this.isEmpty())return null;i.filter(this.getCoordinate())}else if(tt(arguments[0],Zr)){var o=arguments[0];if(this.isEmpty())return null;o.filter(this._coordinates,0),o.isGeometryChanged()&&this.geometryChanged()}else if(tt(arguments[0],gn)){var s=arguments[0];s.filter(this)}else if(tt(arguments[0],$n)){var a=arguments[0];a.filter(this)}},t.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},t.prototype.clone=function(){var i=e.prototype.clone.call(this);return i._coordinates=this._coordinates.clone(),i},t.prototype.getGeometryType=function(){return"Point"},t.prototype.copy=function(){return new t(this._coordinates.copy(),this._factory)},t.prototype.getCoordinateSequence=function(){return this._coordinates},t.prototype.getY=function(){if(this.getCoordinate()===null)throw new Error("getY called on empty Point");return this.getCoordinate().y},t.prototype.isEmpty=function(){return this._coordinates.size()===0},t.prototype.init=function(i){i===null&&(i=this.getFactory().getCoordinateSequenceFactory().create([])),ut.isTrue(i.size()<=1),this._coordinates=i},t.prototype.isSimple=function(){return!0},t.prototype.interfaces_=function(){return[ks]},t.prototype.getClass=function(){return t},r.serialVersionUID.get=function(){return 4902022702746615e3},Object.defineProperties(t,r),t}($),ci=function(){};ci.prototype.interfaces_=function(){return[]};ci.prototype.getClass=function(){return ci};var Re=function(e){function t(n,i,o){if(e.call(this,o),this._shell=null,this._holes=null,n===null&&(n=this.getFactory().createLinearRing()),i===null&&(i=[]),e.hasNullElements(i))throw new le("holes must not contain null elements");if(n.isEmpty()&&e.hasNonEmptyElements(i))throw new le("shell is empty but holes are not");this._shell=n,this._holes=i}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var r={serialVersionUID:{configurable:!0}};return t.prototype.computeEnvelopeInternal=function(){return this._shell.getEnvelopeInternal()},t.prototype.getSortIndex=function(){return e.SORTINDEX_POLYGON},t.prototype.getCoordinates=function(){var i=this;if(this.isEmpty())return[];for(var o=new Array(this.getNumPoints()).fill(null),s=-1,a=this._shell.getCoordinates(),u=0;u<a.length;u++)s++,o[s]=a[u];for(var f=0;f<this._holes.length;f++)for(var l=i._holes[f].getCoordinates(),c=0;c<l.length;c++)s++,o[s]=l[c];return o},t.prototype.getArea=function(){var i=this,o=0;o+=Math.abs(G.signedArea(this._shell.getCoordinateSequence()));for(var s=0;s<this._holes.length;s++)o-=Math.abs(G.signedArea(i._holes[s].getCoordinateSequence()));return o},t.prototype.isRectangle=function(){if(this.getNumInteriorRing()!==0||this._shell===null||this._shell.getNumPoints()!==5)return!1;for(var i=this._shell.getCoordinateSequence(),o=this.getEnvelopeInternal(),s=0;s<5;s++){var a=i.getX(s);if(!(a===o.getMinX()||a===o.getMaxX()))return!1;var u=i.getY(s);if(!(u===o.getMinY()||u===o.getMaxY()))return!1}for(var f=i.getX(0),l=i.getY(0),c=1;c<=4;c++){var h=i.getX(c),p=i.getY(c),v=h!==f,y=p!==l;if(v===y)return!1;f=h,l=p}return!0},t.prototype.equalsExact=function(){var i=this;if(arguments.length===2){var o=arguments[0],s=arguments[1];if(!this.isEquivalentClass(o))return!1;var a=o,u=this._shell,f=a._shell;if(!u.equalsExact(f,s)||this._holes.length!==a._holes.length)return!1;for(var l=0;l<this._holes.length;l++)if(!i._holes[l].equalsExact(a._holes[l],s))return!1;return!0}else return e.prototype.equalsExact.apply(this,arguments)},t.prototype.normalize=function(){var i=this;if(arguments.length===0){this.normalize(this._shell,!0);for(var o=0;o<this._holes.length;o++)i.normalize(i._holes[o],!1);Mi.sort(this._holes)}else if(arguments.length===2){var s=arguments[0],a=arguments[1];if(s.isEmpty())return null;var u=new Array(s.getCoordinates().length-1).fill(null);qe.arraycopy(s.getCoordinates(),0,u,0,u.length);var f=ct.minCoordinate(s.getCoordinates());ct.scroll(u,f),qe.arraycopy(u,0,s.getCoordinates(),0,u.length),s.getCoordinates()[u.length]=u[0],G.isCCW(s.getCoordinates())===a&&ct.reverse(s.getCoordinates())}},t.prototype.getCoordinate=function(){return this._shell.getCoordinate()},t.prototype.getNumInteriorRing=function(){return this._holes.length},t.prototype.getBoundaryDimension=function(){return 1},t.prototype.getDimension=function(){return 2},t.prototype.getLength=function(){var i=this,o=0;o+=this._shell.getLength();for(var s=0;s<this._holes.length;s++)o+=i._holes[s].getLength();return o},t.prototype.getNumPoints=function(){for(var i=this,o=this._shell.getNumPoints(),s=0;s<this._holes.length;s++)o+=i._holes[s].getNumPoints();return o},t.prototype.reverse=function(){var i=this,o=this.copy();o._shell=this._shell.copy().reverse(),o._holes=new Array(this._holes.length).fill(null);for(var s=0;s<this._holes.length;s++)o._holes[s]=i._holes[s].copy().reverse();return o},t.prototype.convexHull=function(){return this.getExteriorRing().convexHull()},t.prototype.compareToSameClass=function(){var i=this;if(arguments.length===1){var o=arguments[0],s=this._shell,a=o._shell;return s.compareToSameClass(a)}else if(arguments.length===2){var u=arguments[0],f=arguments[1],l=u,c=this._shell,h=l._shell,p=c.compareToSameClass(h,f);if(p!==0)return p;for(var v=this.getNumInteriorRing(),y=l.getNumInteriorRing(),E=0;E<v&&E<y;){var x=i.getInteriorRingN(E),g=l.getInteriorRingN(E),d=x.compareToSameClass(g,f);if(d!==0)return d;E++}return E<v?1:E<y?-1:0}},t.prototype.apply=function(i){var o=this;if(tt(i,An)){this._shell.apply(i);for(var s=0;s<this._holes.length;s++)o._holes[s].apply(i)}else if(tt(i,Zr)){if(this._shell.apply(i),!i.isDone())for(var a=0;a<this._holes.length&&(o._holes[a].apply(i),!i.isDone());a++);i.isGeometryChanged()&&this.geometryChanged()}else if(tt(i,gn))i.filter(this);else if(tt(i,$n)){i.filter(this),this._shell.apply(i);for(var u=0;u<this._holes.length;u++)o._holes[u].apply(i)}},t.prototype.getBoundary=function(){var i=this;if(this.isEmpty())return this.getFactory().createMultiLineString();var o=new Array(this._holes.length+1).fill(null);o[0]=this._shell;for(var s=0;s<this._holes.length;s++)o[s+1]=i._holes[s];return o.length<=1?this.getFactory().createLinearRing(o[0].getCoordinateSequence()):this.getFactory().createMultiLineString(o)},t.prototype.clone=function(){var i=this,o=e.prototype.clone.call(this);o._shell=this._shell.clone(),o._holes=new Array(this._holes.length).fill(null);for(var s=0;s<this._holes.length;s++)o._holes[s]=i._holes[s].clone();return o},t.prototype.getGeometryType=function(){return"Polygon"},t.prototype.copy=function(){for(var i=this,o=this._shell.copy(),s=new Array(this._holes.length).fill(null),a=0;a<s.length;a++)s[a]=i._holes[a].copy();return new t(o,s,this._factory)},t.prototype.getExteriorRing=function(){return this._shell},t.prototype.isEmpty=function(){return this._shell.isEmpty()},t.prototype.getInteriorRingN=function(i){return this._holes[i]},t.prototype.interfaces_=function(){return[ci]},t.prototype.getClass=function(){return t},r.serialVersionUID.get=function(){return-0x307ffefd8dc97200},Object.defineProperties(t,r),t}($),Yo=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var r={serialVersionUID:{configurable:!0}};return t.prototype.getSortIndex=function(){return $.SORTINDEX_MULTIPOINT},t.prototype.isValid=function(){return!0},t.prototype.equalsExact=function(){if(arguments.length===2){var i=arguments[0],o=arguments[1];return this.isEquivalentClass(i)?e.prototype.equalsExact.call(this,i,o):!1}else return e.prototype.equalsExact.apply(this,arguments)},t.prototype.getCoordinate=function(){if(arguments.length===1){var i=arguments[0];return this._geometries[i].getCoordinate()}else return e.prototype.getCoordinate.apply(this,arguments)},t.prototype.getBoundaryDimension=function(){return Yt.FALSE},t.prototype.getDimension=function(){return 0},t.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},t.prototype.getGeometryType=function(){return"MultiPoint"},t.prototype.copy=function(){for(var i=this,o=new Array(this._geometries.length).fill(null),s=0;s<o.length;s++)o[s]=i._geometries[s].copy();return new t(o,this._factory)},t.prototype.interfaces_=function(){return[ks]},t.prototype.getClass=function(){return t},r.serialVersionUID.get=function(){return-8048474874175356e3},Object.defineProperties(t,r),t}(sr),bn=function(e){function t(n,i){n instanceof P&&i instanceof lt&&(n=i.getCoordinateSequenceFactory().create(n)),e.call(this,n,i),this.validateConstruction()}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var r={MINIMUM_VALID_SIZE:{configurable:!0},serialVersionUID:{configurable:!0}};return t.prototype.getSortIndex=function(){return $.SORTINDEX_LINEARRING},t.prototype.getBoundaryDimension=function(){return Yt.FALSE},t.prototype.isClosed=function(){return this.isEmpty()?!0:e.prototype.isClosed.call(this)},t.prototype.reverse=function(){var i=this._points.copy();_e.reverse(i);var o=this.getFactory().createLinearRing(i);return o},t.prototype.validateConstruction=function(){if(!this.isEmpty()&&!e.prototype.isClosed.call(this))throw new le("Points of LinearRing do not form a closed linestring");if(this.getCoordinateSequence().size()>=1&&this.getCoordinateSequence().size()<t.MINIMUM_VALID_SIZE)throw new le("Invalid number of points in LinearRing (found "+this.getCoordinateSequence().size()+" - must be 0 or >= 4)")},t.prototype.getGeometryType=function(){return"LinearRing"},t.prototype.copy=function(){return new t(this._points.copy(),this._factory)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},r.MINIMUM_VALID_SIZE.get=function(){return 4},r.serialVersionUID.get=function(){return-0x3b229e262367a600},Object.defineProperties(t,r),t}(ve),On=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var r={serialVersionUID:{configurable:!0}};return t.prototype.getSortIndex=function(){return $.SORTINDEX_MULTIPOLYGON},t.prototype.equalsExact=function(){if(arguments.length===2){var i=arguments[0],o=arguments[1];return this.isEquivalentClass(i)?e.prototype.equalsExact.call(this,i,o):!1}else return e.prototype.equalsExact.apply(this,arguments)},t.prototype.getBoundaryDimension=function(){return 1},t.prototype.getDimension=function(){return 2},t.prototype.reverse=function(){for(var i=this,o=this._geometries.length,s=new Array(o).fill(null),a=0;a<this._geometries.length;a++)s[a]=i._geometries[a].reverse();return this.getFactory().createMultiPolygon(s)},t.prototype.getBoundary=function(){var i=this;if(this.isEmpty())return this.getFactory().createMultiLineString();for(var o=new F,s=0;s<this._geometries.length;s++)for(var a=i._geometries[s],u=a.getBoundary(),f=0;f<u.getNumGeometries();f++)o.add(u.getGeometryN(f));var l=new Array(o.size()).fill(null);return this.getFactory().createMultiLineString(o.toArray(l))},t.prototype.getGeometryType=function(){return"MultiPolygon"},t.prototype.copy=function(){for(var i=this,o=new Array(this._geometries.length).fill(null),s=0;s<o.length;s++)o[s]=i._geometries[s].copy();return new t(o,this._factory)},t.prototype.interfaces_=function(){return[ci]},t.prototype.getClass=function(){return t},r.serialVersionUID.get=function(){return-0x7a5aa1369171980},Object.defineProperties(t,r),t}(sr),kr=function(t){this._factory=t||null,this._isUserDataCopied=!1},au={NoOpGeometryOperation:{configurable:!0},CoordinateOperation:{configurable:!0},CoordinateSequenceOperation:{configurable:!0}};kr.prototype.setCopyUserData=function(t){this._isUserDataCopied=t};kr.prototype.edit=function(t,r){if(t===null)return null;var n=this.editInternal(t,r);return this._isUserDataCopied&&n.setUserData(t.getUserData()),n};kr.prototype.editInternal=function(t,r){return this._factory===null&&(this._factory=t.getFactory()),t instanceof sr?this.editGeometryCollection(t,r):t instanceof Re?this.editPolygon(t,r):t instanceof xr?r.edit(t,this._factory):t instanceof ve?r.edit(t,this._factory):(ut.shouldNeverReachHere("Unsupported Geometry class: "+t.getClass().getName()),null)};kr.prototype.editGeometryCollection=function(t,r){for(var n=this,i=r.edit(t,this._factory),o=new F,s=0;s<i.getNumGeometries();s++){var a=n.edit(i.getGeometryN(s),r);a===null||a.isEmpty()||o.add(a)}return i.getClass()===Yo?this._factory.createMultiPoint(o.toArray([])):i.getClass()===Di?this._factory.createMultiLineString(o.toArray([])):i.getClass()===On?this._factory.createMultiPolygon(o.toArray([])):this._factory.createGeometryCollection(o.toArray([]))};kr.prototype.editPolygon=function(t,r){var n=this,i=r.edit(t,this._factory);if(i===null&&(i=this._factory.createPolygon(null)),i.isEmpty())return i;var o=this.edit(i.getExteriorRing(),r);if(o===null||o.isEmpty())return this._factory.createPolygon();for(var s=new F,a=0;a<i.getNumInteriorRing();a++){var u=n.edit(i.getInteriorRingN(a),r);u===null||u.isEmpty()||s.add(u)}return this._factory.createPolygon(o,s.toArray([]))};kr.prototype.interfaces_=function(){return[]};kr.prototype.getClass=function(){return kr};kr.GeometryEditorOperation=function(){};au.NoOpGeometryOperation.get=function(){return qs};au.CoordinateOperation.get=function(){return zs};au.CoordinateSequenceOperation.get=function(){return Us};Object.defineProperties(kr,au);var qs=function(){};qs.prototype.edit=function(t,r){return t};qs.prototype.interfaces_=function(){return[kr.GeometryEditorOperation]};qs.prototype.getClass=function(){return qs};var zs=function(){};zs.prototype.edit=function(t,r){var n=this.editCoordinates(t.getCoordinates(),t);return n===null?t:t instanceof bn?r.createLinearRing(n):t instanceof ve?r.createLineString(n):t instanceof xr?n.length>0?r.createPoint(n[0]):r.createPoint():t};zs.prototype.interfaces_=function(){return[kr.GeometryEditorOperation]};zs.prototype.getClass=function(){return zs};var Us=function(){};Us.prototype.edit=function(t,r){return t instanceof bn?r.createLinearRing(this.edit(t.getCoordinateSequence(),t)):t instanceof ve?r.createLineString(this.edit(t.getCoordinateSequence(),t)):t instanceof xr?r.createPoint(this.edit(t.getCoordinateSequence(),t)):t};Us.prototype.interfaces_=function(){return[kr.GeometryEditorOperation]};Us.prototype.getClass=function(){return Us};var ye=function(){var t=this;if(this._dimension=3,this._coordinates=null,arguments.length===1){if(arguments[0]instanceof Array)this._coordinates=arguments[0],this._dimension=3;else if(Number.isInteger(arguments[0])){var r=arguments[0];this._coordinates=new Array(r).fill(null);for(var n=0;n<r;n++)t._coordinates[n]=new P}else if(tt(arguments[0],yt)){var i=arguments[0];if(i===null)return this._coordinates=new Array(0).fill(null),null;this._dimension=i.getDimension(),this._coordinates=new Array(i.size()).fill(null);for(var o=0;o<this._coordinates.length;o++)t._coordinates[o]=i.getCoordinateCopy(o)}}else if(arguments.length===2){if(arguments[0]instanceof Array&&Number.isInteger(arguments[1])){var s=arguments[0],a=arguments[1];this._coordinates=s,this._dimension=a,s===null&&(this._coordinates=new Array(0).fill(null))}else if(Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var u=arguments[0],f=arguments[1];this._coordinates=new Array(u).fill(null),this._dimension=f;for(var l=0;l<u;l++)t._coordinates[l]=new P}}},pg={serialVersionUID:{configurable:!0}};ye.prototype.setOrdinate=function(t,r,n){switch(r){case yt.X:this._coordinates[t].x=n;break;case yt.Y:this._coordinates[t].y=n;break;case yt.Z:this._coordinates[t].z=n;break;default:throw new le("invalid ordinateIndex")}};ye.prototype.size=function(){return this._coordinates.length};ye.prototype.getOrdinate=function(t,r){switch(r){case yt.X:return this._coordinates[t].x;case yt.Y:return this._coordinates[t].y;case yt.Z:return this._coordinates[t].z}return st.NaN};ye.prototype.getCoordinate=function(){if(arguments.length===1){var t=arguments[0];return this._coordinates[t]}else if(arguments.length===2){var r=arguments[0],n=arguments[1];n.x=this._coordinates[r].x,n.y=this._coordinates[r].y,n.z=this._coordinates[r].z}};ye.prototype.getCoordinateCopy=function(t){return new P(this._coordinates[t])};ye.prototype.getDimension=function(){return this._dimension};ye.prototype.getX=function(t){return this._coordinates[t].x};ye.prototype.clone=function(){for(var t=this,r=new Array(this.size()).fill(null),n=0;n<this._coordinates.length;n++)r[n]=t._coordinates[n].clone();return new ye(r,this._dimension)};ye.prototype.expandEnvelope=function(t){for(var r=this,n=0;n<this._coordinates.length;n++)t.expandToInclude(r._coordinates[n]);return t};ye.prototype.copy=function(){for(var t=this,r=new Array(this.size()).fill(null),n=0;n<this._coordinates.length;n++)r[n]=t._coordinates[n].copy();return new ye(r,this._dimension)};ye.prototype.toString=function(){var t=this;if(this._coordinates.length>0){var r=new Cn(17*this._coordinates.length);r.append("("),r.append(this._coordinates[0]);for(var n=1;n<this._coordinates.length;n++)r.append(", "),r.append(t._coordinates[n]);return r.append(")"),r.toString()}else return"()"};ye.prototype.getY=function(t){return this._coordinates[t].y};ye.prototype.toCoordinateArray=function(){return this._coordinates};ye.prototype.interfaces_=function(){return[yt,Ur]};ye.prototype.getClass=function(){return ye};pg.serialVersionUID.get=function(){return-0xcb44a778db18e00};Object.defineProperties(ye,pg);var Dn=function(){},nl={serialVersionUID:{configurable:!0},instanceObject:{configurable:!0}};Dn.prototype.readResolve=function(){return Dn.instance()};Dn.prototype.create=function(){if(arguments.length===1){if(arguments[0]instanceof Array){var t=arguments[0];return new ye(t)}else if(tt(arguments[0],yt)){var r=arguments[0];return new ye(r)}}else if(arguments.length===2){var n=arguments[0],i=arguments[1];return i>3&&(i=3),i<2?new ye(n):new ye(n,i)}};Dn.prototype.interfaces_=function(){return[Go,Ur]};Dn.prototype.getClass=function(){return Dn};Dn.instance=function(){return Dn.instanceObject};nl.serialVersionUID.get=function(){return-0x38e49fa6cf6f2e00};nl.instanceObject.get=function(){return new Dn};Object.defineProperties(Dn,nl);var gg=function(e){function t(){e.call(this),this.map_=new Map}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.get=function(n){return this.map_.get(n)||null},t.prototype.put=function(n,i){return this.map_.set(n,i),i},t.prototype.values=function(){for(var n=new F,i=this.map_.values(),o=i.next();!o.done;)n.add(o.value),o=i.next();return n},t.prototype.entrySet=function(){var n=new el;return this.map_.entries().forEach(function(i){return n.add(i)}),n},t.prototype.size=function(){return this.map_.size()},t}(vo),Ht=function e(){if(this._modelType=null,this._scale=null,arguments.length===0)this._modelType=e.FLOATING;else if(arguments.length===1){if(arguments[0]instanceof vn){var t=arguments[0];this._modelType=t,t===e.FIXED&&this.setScale(1)}else if(typeof arguments[0]=="number"){var r=arguments[0];this._modelType=e.FIXED,this.setScale(r)}else if(arguments[0]instanceof e){var n=arguments[0];this._modelType=n._modelType,this._scale=n._scale}}},il={serialVersionUID:{configurable:!0},maximumPreciseValue:{configurable:!0}};Ht.prototype.equals=function(t){if(!(t instanceof Ht))return!1;var r=t;return this._modelType===r._modelType&&this._scale===r._scale};Ht.prototype.compareTo=function(t){var r=t,n=this.getMaximumSignificantDigits(),i=r.getMaximumSignificantDigits();return new hn(n).compareTo(new hn(i))};Ht.prototype.getScale=function(){return this._scale};Ht.prototype.isFloating=function(){return this._modelType===Ht.FLOATING||this._modelType===Ht.FLOATING_SINGLE};Ht.prototype.getType=function(){return this._modelType};Ht.prototype.toString=function(){var t="UNKNOWN";return this._modelType===Ht.FLOATING?t="Floating":this._modelType===Ht.FLOATING_SINGLE?t="Floating-Single":this._modelType===Ht.FIXED&&(t="Fixed (Scale="+this.getScale()+")"),t};Ht.prototype.makePrecise=function(){if(typeof arguments[0]=="number"){var t=arguments[0];if(st.isNaN(t))return t;if(this._modelType===Ht.FLOATING_SINGLE){var r=t;return r}return this._modelType===Ht.FIXED?Math.round(t*this._scale)/this._scale:t}else if(arguments[0]instanceof P){var n=arguments[0];if(this._modelType===Ht.FLOATING)return null;n.x=this.makePrecise(n.x),n.y=this.makePrecise(n.y)}};Ht.prototype.getMaximumSignificantDigits=function(){var t=16;return this._modelType===Ht.FLOATING?t=16:this._modelType===Ht.FLOATING_SINGLE?t=6:this._modelType===Ht.FIXED&&(t=1+Math.trunc(Math.ceil(Math.log(this.getScale())/Math.log(10)))),t};Ht.prototype.setScale=function(t){this._scale=Math.abs(t)};Ht.prototype.interfaces_=function(){return[Ur,zr]};Ht.prototype.getClass=function(){return Ht};Ht.mostPrecise=function(t,r){return t.compareTo(r)>=0?t:r};il.serialVersionUID.get=function(){return 7777263578777804e3};il.maximumPreciseValue.get=function(){return 9007199254740992};Object.defineProperties(Ht,il);var vn=function e(t){this._name=t||null,e.nameToTypeMap.put(t,this)},ol={serialVersionUID:{configurable:!0},nameToTypeMap:{configurable:!0}};vn.prototype.readResolve=function(){return vn.nameToTypeMap.get(this._name)};vn.prototype.toString=function(){return this._name};vn.prototype.interfaces_=function(){return[Ur]};vn.prototype.getClass=function(){return vn};ol.serialVersionUID.get=function(){return-552860263173159e4};ol.nameToTypeMap.get=function(){return new gg};Object.defineProperties(vn,ol);Ht.Type=vn;Ht.FIXED=new vn("FIXED");Ht.FLOATING=new vn("FLOATING");Ht.FLOATING_SINGLE=new vn("FLOATING SINGLE");var lt=function e(){this._precisionModel=new Ht,this._SRID=0,this._coordinateSequenceFactory=e.getDefaultCoordinateSequenceFactory(),arguments.length===0||(arguments.length===1?tt(arguments[0],Go)?this._coordinateSequenceFactory=arguments[0]:arguments[0]instanceof Ht&&(this._precisionModel=arguments[0]):arguments.length===2?(this._precisionModel=arguments[0],this._SRID=arguments[1]):arguments.length===3&&(this._precisionModel=arguments[0],this._SRID=arguments[1],this._coordinateSequenceFactory=arguments[2]))},vg={serialVersionUID:{configurable:!0}};lt.prototype.toGeometry=function(t){return t.isNull()?this.createPoint(null):t.getMinX()===t.getMaxX()&&t.getMinY()===t.getMaxY()?this.createPoint(new P(t.getMinX(),t.getMinY())):t.getMinX()===t.getMaxX()||t.getMinY()===t.getMaxY()?this.createLineString([new P(t.getMinX(),t.getMinY()),new P(t.getMaxX(),t.getMaxY())]):this.createPolygon(this.createLinearRing([new P(t.getMinX(),t.getMinY()),new P(t.getMinX(),t.getMaxY()),new P(t.getMaxX(),t.getMaxY()),new P(t.getMaxX(),t.getMinY()),new P(t.getMinX(),t.getMinY())]),null)};lt.prototype.createLineString=function(t){if(t){if(t instanceof Array)return new ve(this.getCoordinateSequenceFactory().create(t),this);if(tt(t,yt))return new ve(t,this)}else return new ve(this.getCoordinateSequenceFactory().create([]),this)};lt.prototype.createMultiLineString=function(){if(arguments.length===0)return new Di(null,this);if(arguments.length===1){var t=arguments[0];return new Di(t,this)}};lt.prototype.buildGeometry=function(t){for(var r=null,n=!1,i=!1,o=t.iterator();o.hasNext();){var s=o.next(),a=s.getClass();r===null&&(r=a),a!==r&&(n=!0),s.isGeometryCollectionOrDerived()&&(i=!0)}if(r===null)return this.createGeometryCollection();if(n||i)return this.createGeometryCollection(lt.toGeometryArray(t));var u=t.iterator().next(),f=t.size()>1;if(f){if(u instanceof Re)return this.createMultiPolygon(lt.toPolygonArray(t));if(u instanceof ve)return this.createMultiLineString(lt.toLineStringArray(t));if(u instanceof xr)return this.createMultiPoint(lt.toPointArray(t));ut.shouldNeverReachHere("Unhandled class: "+u.getClass().getName())}return u};lt.prototype.createMultiPointFromCoords=function(t){return this.createMultiPoint(t!==null?this.getCoordinateSequenceFactory().create(t):null)};lt.prototype.createPoint=function(){if(arguments.length===0)return this.createPoint(this.getCoordinateSequenceFactory().create([]));if(arguments.length===1){if(arguments[0]instanceof P){var t=arguments[0];return this.createPoint(t!==null?this.getCoordinateSequenceFactory().create([t]):null)}else if(tt(arguments[0],yt)){var r=arguments[0];return new xr(r,this)}}};lt.prototype.getCoordinateSequenceFactory=function(){return this._coordinateSequenceFactory};lt.prototype.createPolygon=function(){if(arguments.length===0)return new Re(null,null,this);if(arguments.length===1){if(tt(arguments[0],yt)){var t=arguments[0];return this.createPolygon(this.createLinearRing(t))}else if(arguments[0]instanceof Array){var r=arguments[0];return this.createPolygon(this.createLinearRing(r))}else if(arguments[0]instanceof bn){var n=arguments[0];return this.createPolygon(n,null)}}else if(arguments.length===2){var i=arguments[0],o=arguments[1];return new Re(i,o,this)}};lt.prototype.getSRID=function(){return this._SRID};lt.prototype.createGeometryCollection=function(){if(arguments.length===0)return new sr(null,this);if(arguments.length===1){var t=arguments[0];return new sr(t,this)}};lt.prototype.createGeometry=function(t){var r=new kr(this);return r.edit(t,{edit:function(){if(arguments.length===2){var n=arguments[0];return this._coordinateSequenceFactory.create(n)}}})};lt.prototype.getPrecisionModel=function(){return this._precisionModel};lt.prototype.createLinearRing=function(){if(arguments.length===0)return this.createLinearRing(this.getCoordinateSequenceFactory().create([]));if(arguments.length===1){if(arguments[0]instanceof Array){var t=arguments[0];return this.createLinearRing(t!==null?this.getCoordinateSequenceFactory().create(t):null)}else if(tt(arguments[0],yt)){var r=arguments[0];return new bn(r,this)}}};lt.prototype.createMultiPolygon=function(){if(arguments.length===0)return new On(null,this);if(arguments.length===1){var t=arguments[0];return new On(t,this)}};lt.prototype.createMultiPoint=function(){var t=this;if(arguments.length===0)return new Yo(null,this);if(arguments.length===1){if(arguments[0]instanceof Array){var r=arguments[0];return new Yo(r,this)}else if(arguments[0]instanceof Array){var n=arguments[0];return this.createMultiPoint(n!==null?this.getCoordinateSequenceFactory().create(n):null)}else if(tt(arguments[0],yt)){var i=arguments[0];if(i===null)return this.createMultiPoint(new Array(0).fill(null));for(var o=new Array(i.size()).fill(null),s=0;s<i.size();s++){var a=t.getCoordinateSequenceFactory().create(1,i.getDimension());_e.copy(i,s,a,0,1),o[s]=t.createPoint(a)}return this.createMultiPoint(o)}}};lt.prototype.interfaces_=function(){return[Ur]};lt.prototype.getClass=function(){return lt};lt.toMultiPolygonArray=function(t){var r=new Array(t.size()).fill(null);return t.toArray(r)};lt.toGeometryArray=function(t){if(t===null)return null;var r=new Array(t.size()).fill(null);return t.toArray(r)};lt.getDefaultCoordinateSequenceFactory=function(){return Dn.instance()};lt.toMultiLineStringArray=function(t){var r=new Array(t.size()).fill(null);return t.toArray(r)};lt.toLineStringArray=function(t){var r=new Array(t.size()).fill(null);return t.toArray(r)};lt.toMultiPointArray=function(t){var r=new Array(t.size()).fill(null);return t.toArray(r)};lt.toLinearRingArray=function(t){var r=new Array(t.size()).fill(null);return t.toArray(r)};lt.toPointArray=function(t){var r=new Array(t.size()).fill(null);return t.toArray(r)};lt.toPolygonArray=function(t){var r=new Array(t.size()).fill(null);return t.toArray(r)};lt.createPointFromInternalCoord=function(t,r){return r.getPrecisionModel().makePrecise(t),r.getFactory().createPoint(t)};vg.serialVersionUID.get=function(){return-6820524753094096e3};Object.defineProperties(lt,vg);var RE=["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"],uu=function(t){this.geometryFactory=t||new lt};uu.prototype.read=function(t){var r;typeof t=="string"?r=JSON.parse(t):r=t;var n=r.type;if(!an[n])throw new Error("Unknown GeoJSON type: "+r.type);return RE.indexOf(n)!==-1?an[n].apply(this,[r.coordinates]):n==="GeometryCollection"?an[n].apply(this,[r.geometries]):an[n].apply(this,[r])};uu.prototype.write=function(t){var r=t.getGeometryType();if(!Hn[r])throw new Error("Geometry is not supported");return Hn[r].apply(this,[t])};var an={Feature:function(e){var t={};for(var r in e)t[r]=e[r];if(e.geometry){var n=e.geometry.type;if(!an[n])throw new Error("Unknown GeoJSON type: "+e.type);t.geometry=this.read(e.geometry)}return e.bbox&&(t.bbox=an.bbox.apply(this,[e.bbox])),t},FeatureCollection:function(e){var t=this,r={};if(e.features){r.features=[];for(var n=0;n<e.features.length;++n)r.features.push(t.read(e.features[n]))}return e.bbox&&(r.bbox=this.parse.bbox.apply(this,[e.bbox])),r},coordinates:function(e){for(var t=[],r=0;r<e.length;++r){var n=e[r];t.push(new P(n[0],n[1]))}return t},bbox:function(e){return this.geometryFactory.createLinearRing([new P(e[0],e[1]),new P(e[2],e[1]),new P(e[2],e[3]),new P(e[0],e[3]),new P(e[0],e[1])])},Point:function(e){var t=new P(e[0],e[1]);return this.geometryFactory.createPoint(t)},MultiPoint:function(e){for(var t=this,r=[],n=0;n<e.length;++n)r.push(an.Point.apply(t,[e[n]]));return this.geometryFactory.createMultiPoint(r)},LineString:function(e){var t=an.coordinates.apply(this,[e]);return this.geometryFactory.createLineString(t)},MultiLineString:function(e){for(var t=this,r=[],n=0;n<e.length;++n)r.push(an.LineString.apply(t,[e[n]]));return this.geometryFactory.createMultiLineString(r)},Polygon:function(e){for(var t=this,r=an.coordinates.apply(this,[e[0]]),n=this.geometryFactory.createLinearRing(r),i=[],o=1;o<e.length;++o){var s=e[o],a=an.coordinates.apply(t,[s]),u=t.geometryFactory.createLinearRing(a);i.push(u)}return this.geometryFactory.createPolygon(n,i)},MultiPolygon:function(e){for(var t=this,r=[],n=0;n<e.length;++n){var i=e[n];r.push(an.Polygon.apply(t,[i]))}return this.geometryFactory.createMultiPolygon(r)},GeometryCollection:function(e){for(var t=this,r=[],n=0;n<e.length;++n){var i=e[n];r.push(t.read(i))}return this.geometryFactory.createGeometryCollection(r)}},Hn={coordinate:function(e){return[e.x,e.y]},Point:function(e){var t=Hn.coordinate.apply(this,[e.getCoordinate()]);return{type:"Point",coordinates:t}},MultiPoint:function(e){for(var t=this,r=[],n=0;n<e._geometries.length;++n){var i=e._geometries[n],o=Hn.Point.apply(t,[i]);r.push(o.coordinates)}return{type:"MultiPoint",coordinates:r}},LineString:function(e){for(var t=this,r=[],n=e.getCoordinates(),i=0;i<n.length;++i){var o=n[i];r.push(Hn.coordinate.apply(t,[o]))}return{type:"LineString",coordinates:r}},MultiLineString:function(e){for(var t=this,r=[],n=0;n<e._geometries.length;++n){var i=e._geometries[n],o=Hn.LineString.apply(t,[i]);r.push(o.coordinates)}return{type:"MultiLineString",coordinates:r}},Polygon:function(e){var t=this,r=[],n=Hn.LineString.apply(this,[e._shell]);r.push(n.coordinates);for(var i=0;i<e._holes.length;++i){var o=e._holes[i],s=Hn.LineString.apply(t,[o]);r.push(s.coordinates)}return{type:"Polygon",coordinates:r}},MultiPolygon:function(e){for(var t=this,r=[],n=0;n<e._geometries.length;++n){var i=e._geometries[n],o=Hn.Polygon.apply(t,[i]);r.push(o.coordinates)}return{type:"MultiPolygon",coordinates:r}},GeometryCollection:function(e){for(var t=this,r=[],n=0;n<e._geometries.length;++n){var i=e._geometries[n],o=i.getGeometryType();r.push(Hn[o].apply(t,[i]))}return{type:"GeometryCollection",geometries:r}}},sl=function(t){this.geometryFactory=t||new lt,this.precisionModel=this.geometryFactory.getPrecisionModel(),this.parser=new uu(this.geometryFactory)};sl.prototype.read=function(t){var r=this.parser.read(t);return this.precisionModel.getType()===Ht.FIXED&&this.reducePrecision(r),r};sl.prototype.reducePrecision=function(t){var r=this,n,i;if(t.coordinate)this.precisionModel.makePrecise(t.coordinate);else if(t.points)for(n=0,i=t.points.length;n<i;n++)r.precisionModel.makePrecise(t.points[n]);else if(t.geometries)for(n=0,i=t.geometries.length;n<i;n++)r.reducePrecision(t.geometries[n])};var dg=function(){this.parser=new uu(this.geometryFactory)};dg.prototype.write=function(t){return this.parser.write(t)};var b=function(){},fu={ON:{configurable:!0},LEFT:{configurable:!0},RIGHT:{configurable:!0}};b.prototype.interfaces_=function(){return[]};b.prototype.getClass=function(){return b};b.opposite=function(t){return t===b.LEFT?b.RIGHT:t===b.RIGHT?b.LEFT:t};fu.ON.get=function(){return 0};fu.LEFT.get=function(){return 1};fu.RIGHT.get=function(){return 2};Object.defineProperties(b,fu);function lu(e){this.message=e||""}lu.prototype=new Error;lu.prototype.name="EmptyStackException";function Sn(){this.array_=[]}Sn.prototype=new Jr;Sn.prototype.add=function(e){return this.array_.push(e),!0};Sn.prototype.get=function(e){if(e<0||e>=this.size())throw new Error;return this.array_[e]};Sn.prototype.push=function(e){return this.array_.push(e),e};Sn.prototype.pop=function(e){if(this.array_.length===0)throw new lu;return this.array_.pop()};Sn.prototype.peek=function(){if(this.array_.length===0)throw new lu;return this.array_[this.array_.length-1]};Sn.prototype.empty=function(){return this.array_.length===0};Sn.prototype.isEmpty=function(){return this.empty()};Sn.prototype.search=function(e){return this.array_.indexOf(e)};Sn.prototype.size=function(){return this.array_.length};Sn.prototype.toArray=function(){for(var e=this,t=[],r=0,n=this.array_.length;r<n;r++)t.push(e.array_[r]);return t};var dn=function(){this._minIndex=-1,this._minCoord=null,this._minDe=null,this._orientedDe=null};dn.prototype.getCoordinate=function(){return this._minCoord};dn.prototype.getRightmostSide=function(t,r){var n=this.getRightmostSideOfSegment(t,r);return n<0&&(n=this.getRightmostSideOfSegment(t,r-1)),n<0&&(this._minCoord=null,this.checkForRightmostCoordinate(t)),n};dn.prototype.findRightmostEdgeAtVertex=function(){var t=this._minDe.getEdge().getCoordinates();ut.isTrue(this._minIndex>0&&this._minIndex<t.length,"rightmost point expected to be interior vertex of edge");var r=t[this._minIndex-1],n=t[this._minIndex+1],i=G.computeOrientation(this._minCoord,n,r),o=!1;(r.y<this._minCoord.y&&n.y<this._minCoord.y&&i===G.COUNTERCLOCKWISE||r.y>this._minCoord.y&&n.y>this._minCoord.y&&i===G.CLOCKWISE)&&(o=!0),o&&(this._minIndex=this._minIndex-1)};dn.prototype.getRightmostSideOfSegment=function(t,r){var n=t.getEdge(),i=n.getCoordinates();if(r<0||r+1>=i.length||i[r].y===i[r+1].y)return-1;var o=b.LEFT;return i[r].y<i[r+1].y&&(o=b.RIGHT),o};dn.prototype.getEdge=function(){return this._orientedDe};dn.prototype.checkForRightmostCoordinate=function(t){for(var r=this,n=t.getEdge().getCoordinates(),i=0;i<n.length-1;i++)(r._minCoord===null||n[i].x>r._minCoord.x)&&(r._minDe=t,r._minIndex=i,r._minCoord=n[i])};dn.prototype.findRightmostEdgeAtNode=function(){var t=this._minDe.getNode(),r=t.getEdges();this._minDe=r.getRightmostEdge(),this._minDe.isForward()||(this._minDe=this._minDe.getSym(),this._minIndex=this._minDe.getEdge().getCoordinates().length-1)};dn.prototype.findEdge=function(t){for(var r=this,n=t.iterator();n.hasNext();){var i=n.next();i.isForward()&&r.checkForRightmostCoordinate(i)}ut.isTrue(this._minIndex!==0||this._minCoord.equals(this._minDe.getCoordinate()),"inconsistency in rightmost processing"),this._minIndex===0?this.findRightmostEdgeAtNode():this.findRightmostEdgeAtVertex(),this._orientedDe=this._minDe;var o=this.getRightmostSide(this._minDe,this._minIndex);o===b.LEFT&&(this._orientedDe=this._minDe.getSym())};dn.prototype.interfaces_=function(){return[]};dn.prototype.getClass=function(){return dn};var ti=function(e){function t(r,n){e.call(this,t.msgWithCoord(r,n)),this.pt=n?new P(n):null,this.name="TopologyException"}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.getCoordinate=function(){return this.pt},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t.msgWithCoord=function(n,i){return i?n:n+" [ "+i+" ]"},t}(jn),cu=function(){this.array_=[]};cu.prototype.addLast=function(t){this.array_.push(t)};cu.prototype.removeFirst=function(){return this.array_.shift()};cu.prototype.isEmpty=function(){return this.array_.length===0};var ar=function(){this._finder=null,this._dirEdgeList=new F,this._nodes=new F,this._rightMostCoord=null,this._env=null,this._finder=new dn};ar.prototype.clearVisitedEdges=function(){for(var t=this._dirEdgeList.iterator();t.hasNext();){var r=t.next();r.setVisited(!1)}};ar.prototype.getRightmostCoordinate=function(){return this._rightMostCoord};ar.prototype.computeNodeDepth=function(t){for(var r=this,n=null,i=t.getEdges().iterator();i.hasNext();){var o=i.next();if(o.isVisited()||o.getSym().isVisited()){n=o;break}}if(n===null)throw new ti("unable to find edge to compute depths at "+t.getCoordinate());t.getEdges().computeDepths(n);for(var s=t.getEdges().iterator();s.hasNext();){var a=s.next();a.setVisited(!0),r.copySymDepths(a)}};ar.prototype.computeDepth=function(t){this.clearVisitedEdges();var r=this._finder.getEdge();r.setEdgeDepths(b.RIGHT,t),this.copySymDepths(r),this.computeDepths(r)};ar.prototype.create=function(t){this.addReachable(t),this._finder.findEdge(this._dirEdgeList),this._rightMostCoord=this._finder.getCoordinate()};ar.prototype.findResultEdges=function(){for(var t=this._dirEdgeList.iterator();t.hasNext();){var r=t.next();r.getDepth(b.RIGHT)>=1&&r.getDepth(b.LEFT)<=0&&!r.isInteriorAreaEdge()&&r.setInResult(!0)}};ar.prototype.computeDepths=function(t){var r=this,n=new el,i=new cu,o=t.getNode();for(i.addLast(o),n.add(o),t.setVisited(!0);!i.isEmpty();){var s=i.removeFirst();n.add(s),r.computeNodeDepth(s);for(var a=s.getEdges().iterator();a.hasNext();){var u=a.next(),f=u.getSym();if(!f.isVisited()){var l=f.getNode();n.contains(l)||(i.addLast(l),n.add(l))}}}};ar.prototype.compareTo=function(t){var r=t;return this._rightMostCoord.x<r._rightMostCoord.x?-1:this._rightMostCoord.x>r._rightMostCoord.x?1:0};ar.prototype.getEnvelope=function(){if(this._env===null){for(var t=new Y,r=this._dirEdgeList.iterator();r.hasNext();)for(var n=r.next(),i=n.getEdge().getCoordinates(),o=0;o<i.length-1;o++)t.expandToInclude(i[o]);this._env=t}return this._env};ar.prototype.addReachable=function(t){var r=this,n=new Sn;for(n.add(t);!n.empty();){var i=n.pop();r.add(i,n)}};ar.prototype.copySymDepths=function(t){var r=t.getSym();r.setDepth(b.LEFT,t.getDepth(b.RIGHT)),r.setDepth(b.RIGHT,t.getDepth(b.LEFT))};ar.prototype.add=function(t,r){var n=this;t.setVisited(!0),this._nodes.add(t);for(var i=t.getEdges().iterator();i.hasNext();){var o=i.next();n._dirEdgeList.add(o);var s=o.getSym(),a=s.getNode();a.isVisited()||r.push(a)}};ar.prototype.getNodes=function(){return this._nodes};ar.prototype.getDirectedEdges=function(){return this._dirEdgeList};ar.prototype.interfaces_=function(){return[zr]};ar.prototype.getClass=function(){return ar};var oe=function e(){var t=this;if(this.location=null,arguments.length===1){if(arguments[0]instanceof Array){var r=arguments[0];this.init(r.length)}else if(Number.isInteger(arguments[0])){var n=arguments[0];this.init(1),this.location[b.ON]=n}else if(arguments[0]instanceof e){var i=arguments[0];if(this.init(i.location.length),i!==null)for(var o=0;o<this.location.length;o++)t.location[o]=i.location[o]}}else if(arguments.length===3){var s=arguments[0],a=arguments[1],u=arguments[2];this.init(3),this.location[b.ON]=s,this.location[b.LEFT]=a,this.location[b.RIGHT]=u}};oe.prototype.setAllLocations=function(t){for(var r=this,n=0;n<this.location.length;n++)r.location[n]=t};oe.prototype.isNull=function(){for(var t=this,r=0;r<this.location.length;r++)if(t.location[r]!==L.NONE)return!1;return!0};oe.prototype.setAllLocationsIfNull=function(t){for(var r=this,n=0;n<this.location.length;n++)r.location[n]===L.NONE&&(r.location[n]=t)};oe.prototype.isLine=function(){return this.location.length===1};oe.prototype.merge=function(t){var r=this;if(t.location.length>this.location.length){var n=new Array(3).fill(null);n[b.ON]=this.location[b.ON],n[b.LEFT]=L.NONE,n[b.RIGHT]=L.NONE,this.location=n}for(var i=0;i<this.location.length;i++)r.location[i]===L.NONE&&i<t.location.length&&(r.location[i]=t.location[i])};oe.prototype.getLocations=function(){return this.location};oe.prototype.flip=function(){if(this.location.length<=1)return null;var t=this.location[b.LEFT];this.location[b.LEFT]=this.location[b.RIGHT],this.location[b.RIGHT]=t};oe.prototype.toString=function(){var t=new Cn;return this.location.length>1&&t.append(L.toLocationSymbol(this.location[b.LEFT])),t.append(L.toLocationSymbol(this.location[b.ON])),this.location.length>1&&t.append(L.toLocationSymbol(this.location[b.RIGHT])),t.toString()};oe.prototype.setLocations=function(t,r,n){this.location[b.ON]=t,this.location[b.LEFT]=r,this.location[b.RIGHT]=n};oe.prototype.get=function(t){return t<this.location.length?this.location[t]:L.NONE};oe.prototype.isArea=function(){return this.location.length>1};oe.prototype.isAnyNull=function(){for(var t=this,r=0;r<this.location.length;r++)if(t.location[r]===L.NONE)return!0;return!1};oe.prototype.setLocation=function(){if(arguments.length===1){var t=arguments[0];this.setLocation(b.ON,t)}else if(arguments.length===2){var r=arguments[0],n=arguments[1];this.location[r]=n}};oe.prototype.init=function(t){this.location=new Array(t).fill(null),this.setAllLocations(L.NONE)};oe.prototype.isEqualOnSide=function(t,r){return this.location[r]===t.location[r]};oe.prototype.allPositionsEqual=function(t){for(var r=this,n=0;n<this.location.length;n++)if(r.location[n]!==t)return!1;return!0};oe.prototype.interfaces_=function(){return[]};oe.prototype.getClass=function(){return oe};var Kt=function e(){if(this.elt=new Array(2).fill(null),arguments.length===1){if(Number.isInteger(arguments[0])){var t=arguments[0];this.elt[0]=new oe(t),this.elt[1]=new oe(t)}else if(arguments[0]instanceof e){var r=arguments[0];this.elt[0]=new oe(r.elt[0]),this.elt[1]=new oe(r.elt[1])}}else if(arguments.length===2){var n=arguments[0],i=arguments[1];this.elt[0]=new oe(L.NONE),this.elt[1]=new oe(L.NONE),this.elt[n].setLocation(i)}else if(arguments.length===3){var o=arguments[0],s=arguments[1],a=arguments[2];this.elt[0]=new oe(o,s,a),this.elt[1]=new oe(o,s,a)}else if(arguments.length===4){var u=arguments[0],f=arguments[1],l=arguments[2],c=arguments[3];this.elt[0]=new oe(L.NONE,L.NONE,L.NONE),this.elt[1]=new oe(L.NONE,L.NONE,L.NONE),this.elt[u].setLocations(f,l,c)}};Kt.prototype.getGeometryCount=function(){var t=0;return this.elt[0].isNull()||t++,this.elt[1].isNull()||t++,t};Kt.prototype.setAllLocations=function(t,r){this.elt[t].setAllLocations(r)};Kt.prototype.isNull=function(t){return this.elt[t].isNull()};Kt.prototype.setAllLocationsIfNull=function(){if(arguments.length===1){var t=arguments[0];this.setAllLocationsIfNull(0,t),this.setAllLocationsIfNull(1,t)}else if(arguments.length===2){var r=arguments[0],n=arguments[1];this.elt[r].setAllLocationsIfNull(n)}};Kt.prototype.isLine=function(t){return this.elt[t].isLine()};Kt.prototype.merge=function(t){for(var r=this,n=0;n<2;n++)r.elt[n]===null&&t.elt[n]!==null?r.elt[n]=new oe(t.elt[n]):r.elt[n].merge(t.elt[n])};Kt.prototype.flip=function(){this.elt[0].flip(),this.elt[1].flip()};Kt.prototype.getLocation=function(){if(arguments.length===1){var t=arguments[0];return this.elt[t].get(b.ON)}else if(arguments.length===2){var r=arguments[0],n=arguments[1];return this.elt[r].get(n)}};Kt.prototype.toString=function(){var t=new Cn;return this.elt[0]!==null&&(t.append("A:"),t.append(this.elt[0].toString())),this.elt[1]!==null&&(t.append(" B:"),t.append(this.elt[1].toString())),t.toString()};Kt.prototype.isArea=function(){if(arguments.length===0)return this.elt[0].isArea()||this.elt[1].isArea();if(arguments.length===1){var t=arguments[0];return this.elt[t].isArea()}};Kt.prototype.isAnyNull=function(t){return this.elt[t].isAnyNull()};Kt.prototype.setLocation=function(){if(arguments.length===2){var t=arguments[0],r=arguments[1];this.elt[t].setLocation(b.ON,r)}else if(arguments.length===3){var n=arguments[0],i=arguments[1],o=arguments[2];this.elt[n].setLocation(i,o)}};Kt.prototype.isEqualOnSide=function(t,r){return this.elt[0].isEqualOnSide(t.elt[0],r)&&this.elt[1].isEqualOnSide(t.elt[1],r)};Kt.prototype.allPositionsEqual=function(t,r){return this.elt[t].allPositionsEqual(r)};Kt.prototype.toLine=function(t){this.elt[t].isArea()&&(this.elt[t]=new oe(this.elt[t].location[0]))};Kt.prototype.interfaces_=function(){return[]};Kt.prototype.getClass=function(){return Kt};Kt.toLineLabel=function(t){for(var r=new Kt(L.NONE),n=0;n<2;n++)r.setLocation(n,t.getLocation(n));return r};var Ce=function(){this._startDe=null,this._maxNodeDegree=-1,this._edges=new F,this._pts=new F,this._label=new Kt(L.NONE),this._ring=null,this._isHole=null,this._shell=null,this._holes=new F,this._geometryFactory=null;var t=arguments[0],r=arguments[1];this._geometryFactory=r,this.computePoints(t),this.computeRing()};Ce.prototype.computeRing=function(){var t=this;if(this._ring!==null)return null;for(var r=new Array(this._pts.size()).fill(null),n=0;n<this._pts.size();n++)r[n]=t._pts.get(n);this._ring=this._geometryFactory.createLinearRing(r),this._isHole=G.isCCW(this._ring.getCoordinates())};Ce.prototype.isIsolated=function(){return this._label.getGeometryCount()===1};Ce.prototype.computePoints=function(t){var r=this;this._startDe=t;var n=t,i=!0;do{if(n===null)throw new ti("Found null DirectedEdge");if(n.getEdgeRing()===r)throw new ti("Directed Edge visited twice during ring-building at "+n.getCoordinate());r._edges.add(n);var o=n.getLabel();ut.isTrue(o.isArea()),r.mergeLabel(o),r.addPoints(n.getEdge(),n.isForward(),i),i=!1,r.setEdgeRing(n,r),n=r.getNext(n)}while(n!==this._startDe)};Ce.prototype.getLinearRing=function(){return this._ring};Ce.prototype.getCoordinate=function(t){return this._pts.get(t)};Ce.prototype.computeMaxNodeDegree=function(){var t=this;this._maxNodeDegree=0;var r=this._startDe;do{var n=r.getNode(),i=n.getEdges().getOutgoingDegree(t);i>t._maxNodeDegree&&(t._maxNodeDegree=i),r=t.getNext(r)}while(r!==this._startDe);this._maxNodeDegree*=2};Ce.prototype.addPoints=function(t,r,n){var i=this,o=t.getCoordinates();if(r){var s=1;n&&(s=0);for(var a=s;a<o.length;a++)i._pts.add(o[a])}else{var u=o.length-2;n&&(u=o.length-1);for(var f=u;f>=0;f--)i._pts.add(o[f])}};Ce.prototype.isHole=function(){return this._isHole};Ce.prototype.setInResult=function(){var t=this._startDe;do t.getEdge().setInResult(!0),t=t.getNext();while(t!==this._startDe)};Ce.prototype.containsPoint=function(t){var r=this.getLinearRing(),n=r.getEnvelopeInternal();if(!n.contains(t)||!G.isPointInRing(t,r.getCoordinates()))return!1;for(var i=this._holes.iterator();i.hasNext();){var o=i.next();if(o.containsPoint(t))return!1}return!0};Ce.prototype.addHole=function(t){this._holes.add(t)};Ce.prototype.isShell=function(){return this._shell===null};Ce.prototype.getLabel=function(){return this._label};Ce.prototype.getEdges=function(){return this._edges};Ce.prototype.getMaxNodeDegree=function(){return this._maxNodeDegree<0&&this.computeMaxNodeDegree(),this._maxNodeDegree};Ce.prototype.getShell=function(){return this._shell};Ce.prototype.mergeLabel=function(){if(arguments.length===1){var t=arguments[0];this.mergeLabel(t,0),this.mergeLabel(t,1)}else if(arguments.length===2){var r=arguments[0],n=arguments[1],i=r.getLocation(n,b.RIGHT);if(i===L.NONE)return null;if(this._label.getLocation(n)===L.NONE)return this._label.setLocation(n,i),null}};Ce.prototype.setShell=function(t){this._shell=t,t!==null&&t.addHole(this)};Ce.prototype.toPolygon=function(t){for(var r=this,n=new Array(this._holes.size()).fill(null),i=0;i<this._holes.size();i++)n[i]=r._holes.get(i).getLinearRing();var o=t.createPolygon(this.getLinearRing(),n);return o};Ce.prototype.interfaces_=function(){return[]};Ce.prototype.getClass=function(){return Ce};var AE=function(e){function t(){var r=arguments[0],n=arguments[1];e.call(this,r,n)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.setEdgeRing=function(n,i){n.setMinEdgeRing(i)},t.prototype.getNext=function(n){return n.getNextMin()},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(Ce),bE=function(e){function t(){var r=arguments[0],n=arguments[1];e.call(this,r,n)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.buildMinimalRings=function(){var n=this,i=new F,o=this._startDe;do{if(o.getMinEdgeRing()===null){var s=new AE(o,n._geometryFactory);i.add(s)}o=o.getNext()}while(o!==this._startDe);return i},t.prototype.setEdgeRing=function(n,i){n.setEdgeRing(i)},t.prototype.linkDirectedEdgesForMinimalEdgeRings=function(){var n=this,i=this._startDe;do{var o=i.getNode();o.getEdges().linkMinimalDirectedEdges(n),i=i.getNext()}while(i!==this._startDe)},t.prototype.getNext=function(n){return n.getNext()},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(Ce),Mr=function(){if(this._label=null,this._isInResult=!1,this._isCovered=!1,this._isCoveredSet=!1,this._isVisited=!1,arguments.length!==0){if(arguments.length===1){var t=arguments[0];this._label=t}}};Mr.prototype.setVisited=function(t){this._isVisited=t};Mr.prototype.setInResult=function(t){this._isInResult=t};Mr.prototype.isCovered=function(){return this._isCovered};Mr.prototype.isCoveredSet=function(){return this._isCoveredSet};Mr.prototype.setLabel=function(t){this._label=t};Mr.prototype.getLabel=function(){return this._label};Mr.prototype.setCovered=function(t){this._isCovered=t,this._isCoveredSet=!0};Mr.prototype.updateIM=function(t){ut.isTrue(this._label.getGeometryCount()>=2,"found partial label"),this.computeIM(t)};Mr.prototype.isInResult=function(){return this._isInResult};Mr.prototype.isVisited=function(){return this._isVisited};Mr.prototype.interfaces_=function(){return[]};Mr.prototype.getClass=function(){return Mr};var hu=function(e){function t(){e.call(this),this._coord=null,this._edges=null;var r=arguments[0],n=arguments[1];this._coord=r,this._edges=n,this._label=new Kt(0,L.NONE)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.isIncidentEdgeInResult=function(){for(var n=this.getEdges().getEdges().iterator();n.hasNext();){var i=n.next();if(i.getEdge().isInResult())return!0}return!1},t.prototype.isIsolated=function(){return this._label.getGeometryCount()===1},t.prototype.getCoordinate=function(){return this._coord},t.prototype.print=function(n){n.println("node "+this._coord+" lbl: "+this._label)},t.prototype.computeIM=function(n){},t.prototype.computeMergedLocation=function(n,i){var o=L.NONE;if(o=this._label.getLocation(i),!n.isNull(i)){var s=n.getLocation(i);o!==L.BOUNDARY&&(o=s)}return o},t.prototype.setLabel=function(){if(arguments.length===2){var n=arguments[0],i=arguments[1];this._label===null?this._label=new Kt(n,i):this._label.setLocation(n,i)}else return e.prototype.setLabel.apply(this,arguments)},t.prototype.getEdges=function(){return this._edges},t.prototype.mergeLabel=function(){var n=this;if(arguments[0]instanceof t){var i=arguments[0];this.mergeLabel(i._label)}else if(arguments[0]instanceof Kt)for(var o=arguments[0],s=0;s<2;s++){var a=n.computeMergedLocation(o,s),u=n._label.getLocation(s);u===L.NONE&&n._label.setLocation(s,a)}},t.prototype.add=function(n){this._edges.insert(n),n.setNode(this)},t.prototype.setLabelBoundary=function(n){if(this._label===null)return null;var i=L.NONE;this._label!==null&&(i=this._label.getLocation(n));var o=null;switch(i){case L.BOUNDARY:o=L.INTERIOR;break;case L.INTERIOR:o=L.BOUNDARY;break;default:o=L.BOUNDARY;break}this._label.setLocation(n,o)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(Mr),yn=function(){this.nodeMap=new Ke,this.nodeFact=null;var t=arguments[0];this.nodeFact=t};yn.prototype.find=function(t){return this.nodeMap.get(t)};yn.prototype.addNode=function(){if(arguments[0]instanceof P){var t=arguments[0],r=this.nodeMap.get(t);return r===null&&(r=this.nodeFact.createNode(t),this.nodeMap.put(t,r)),r}else if(arguments[0]instanceof hu){var n=arguments[0],i=this.nodeMap.get(n.getCoordinate());return i===null?(this.nodeMap.put(n.getCoordinate(),n),n):(i.mergeLabel(n),i)}};yn.prototype.print=function(t){for(var r=this.iterator();r.hasNext();){var n=r.next();n.print(t)}};yn.prototype.iterator=function(){return this.nodeMap.values().iterator()};yn.prototype.values=function(){return this.nodeMap.values()};yn.prototype.getBoundaryNodes=function(t){for(var r=new F,n=this.iterator();n.hasNext();){var i=n.next();i.getLabel().getLocation(t)===L.BOUNDARY&&r.add(i)}return r};yn.prototype.add=function(t){var r=t.getCoordinate(),n=this.addNode(r);n.add(t)};yn.prototype.interfaces_=function(){return[]};yn.prototype.getClass=function(){return yn};var jt=function(){},ia={NE:{configurable:!0},NW:{configurable:!0},SW:{configurable:!0},SE:{configurable:!0}};jt.prototype.interfaces_=function(){return[]};jt.prototype.getClass=function(){return jt};jt.isNorthern=function(t){return t===jt.NE||t===jt.NW};jt.isOpposite=function(t,r){if(t===r)return!1;var n=(t-r+4)%4;return n===2};jt.commonHalfPlane=function(t,r){if(t===r)return t;var n=(t-r+4)%4;if(n===2)return-1;var i=t<r?t:r,o=t>r?t:r;return i===0&&o===3?3:i};jt.isInHalfPlane=function(t,r){return r===jt.SE?t===jt.SE||t===jt.SW:t===r||t===r+1};jt.quadrant=function(){if(typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var t=arguments[0],r=arguments[1];if(t===0&&r===0)throw new le("Cannot compute the quadrant for point ( "+t+", "+r+" )");return t>=0?r>=0?jt.NE:jt.SE:r>=0?jt.NW:jt.SW}else if(arguments[0]instanceof P&&arguments[1]instanceof P){var n=arguments[0],i=arguments[1];if(i.x===n.x&&i.y===n.y)throw new le("Cannot compute the quadrant for two identical points "+n);return i.x>=n.x?i.y>=n.y?jt.NE:jt.SE:i.y>=n.y?jt.NW:jt.SW}};ia.NE.get=function(){return 0};ia.NW.get=function(){return 1};ia.SW.get=function(){return 2};ia.SE.get=function(){return 3};Object.defineProperties(jt,ia);var Ze=function(){if(this._edge=null,this._label=null,this._node=null,this._p0=null,this._p1=null,this._dx=null,this._dy=null,this._quadrant=null,arguments.length===1){var t=arguments[0];this._edge=t}else if(arguments.length===3){var r=arguments[0],n=arguments[1],i=arguments[2],o=null;this._edge=r,this.init(n,i),this._label=o}else if(arguments.length===4){var s=arguments[0],a=arguments[1],u=arguments[2],f=arguments[3];this._edge=s,this.init(a,u),this._label=f}};Ze.prototype.compareDirection=function(t){return this._dx===t._dx&&this._dy===t._dy?0:this._quadrant>t._quadrant?1:this._quadrant<t._quadrant?-1:G.computeOrientation(t._p0,t._p1,this._p1)};Ze.prototype.getDy=function(){return this._dy};Ze.prototype.getCoordinate=function(){return this._p0};Ze.prototype.setNode=function(t){this._node=t};Ze.prototype.print=function(t){var r=Math.atan2(this._dy,this._dx),n=this.getClass().getName(),i=n.lastIndexOf("."),o=n.substring(i+1);t.print("  "+o+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+r+"   "+this._label)};Ze.prototype.compareTo=function(t){var r=t;return this.compareDirection(r)};Ze.prototype.getDirectedCoordinate=function(){return this._p1};Ze.prototype.getDx=function(){return this._dx};Ze.prototype.getLabel=function(){return this._label};Ze.prototype.getEdge=function(){return this._edge};Ze.prototype.getQuadrant=function(){return this._quadrant};Ze.prototype.getNode=function(){return this._node};Ze.prototype.toString=function(){var t=Math.atan2(this._dy,this._dx),r=this.getClass().getName(),n=r.lastIndexOf("."),i=r.substring(n+1);return"  "+i+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+t+"   "+this._label};Ze.prototype.computeLabel=function(t){};Ze.prototype.init=function(t,r){this._p0=t,this._p1=r,this._dx=r.x-t.x,this._dy=r.y-t.y,this._quadrant=jt.quadrant(this._dx,this._dy),ut.isTrue(!(this._dx===0&&this._dy===0),"EdgeEnd with identical endpoints found")};Ze.prototype.interfaces_=function(){return[zr]};Ze.prototype.getClass=function(){return Ze};var pf=function(e){function t(){var r=arguments[0],n=arguments[1];if(e.call(this,r),this._isForward=null,this._isInResult=!1,this._isVisited=!1,this._sym=null,this._next=null,this._nextMin=null,this._edgeRing=null,this._minEdgeRing=null,this._depth=[0,-999,-999],this._isForward=n,n)this.init(r.getCoordinate(0),r.getCoordinate(1));else{var i=r.getNumPoints()-1;this.init(r.getCoordinate(i),r.getCoordinate(i-1))}this.computeDirectedLabel()}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.getNextMin=function(){return this._nextMin},t.prototype.getDepth=function(n){return this._depth[n]},t.prototype.setVisited=function(n){this._isVisited=n},t.prototype.computeDirectedLabel=function(){this._label=new Kt(this._edge.getLabel()),this._isForward||this._label.flip()},t.prototype.getNext=function(){return this._next},t.prototype.setDepth=function(n,i){if(this._depth[n]!==-999&&this._depth[n]!==i)throw new ti("assigned depths do not match",this.getCoordinate());this._depth[n]=i},t.prototype.isInteriorAreaEdge=function(){for(var n=this,i=!0,o=0;o<2;o++)n._label.isArea(o)&&n._label.getLocation(o,b.LEFT)===L.INTERIOR&&n._label.getLocation(o,b.RIGHT)===L.INTERIOR||(i=!1);return i},t.prototype.setNextMin=function(n){this._nextMin=n},t.prototype.print=function(n){e.prototype.print.call(this,n),n.print(" "+this._depth[b.LEFT]+"/"+this._depth[b.RIGHT]),n.print(" ("+this.getDepthDelta()+")"),this._isInResult&&n.print(" inResult")},t.prototype.setMinEdgeRing=function(n){this._minEdgeRing=n},t.prototype.isLineEdge=function(){var n=this._label.isLine(0)||this._label.isLine(1),i=!this._label.isArea(0)||this._label.allPositionsEqual(0,L.EXTERIOR),o=!this._label.isArea(1)||this._label.allPositionsEqual(1,L.EXTERIOR);return n&&i&&o},t.prototype.setEdgeRing=function(n){this._edgeRing=n},t.prototype.getMinEdgeRing=function(){return this._minEdgeRing},t.prototype.getDepthDelta=function(){var n=this._edge.getDepthDelta();return this._isForward||(n=-n),n},t.prototype.setInResult=function(n){this._isInResult=n},t.prototype.getSym=function(){return this._sym},t.prototype.isForward=function(){return this._isForward},t.prototype.getEdge=function(){return this._edge},t.prototype.printEdge=function(n){this.print(n),n.print(" "),this._isForward?this._edge.print(n):this._edge.printReverse(n)},t.prototype.setSym=function(n){this._sym=n},t.prototype.setVisitedEdge=function(n){this.setVisited(n),this._sym.setVisited(n)},t.prototype.setEdgeDepths=function(n,i){var o=this.getEdge().getDepthDelta();this._isForward||(o=-o);var s=1;n===b.LEFT&&(s=-1);var a=b.opposite(n),u=o*s,f=i+u;this.setDepth(n,i),this.setDepth(a,f)},t.prototype.getEdgeRing=function(){return this._edgeRing},t.prototype.isInResult=function(){return this._isInResult},t.prototype.setNext=function(n){this._next=n},t.prototype.isVisited=function(){return this._isVisited},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t.depthFactor=function(n,i){return n===L.EXTERIOR&&i===L.INTERIOR?1:n===L.INTERIOR&&i===L.EXTERIOR?-1:0},t}(Ze),Vo=function(){};Vo.prototype.createNode=function(t){return new hu(t,null)};Vo.prototype.interfaces_=function(){return[]};Vo.prototype.getClass=function(){return Vo};var he=function(){if(this._edges=new F,this._nodes=null,this._edgeEndList=new F,arguments.length===0)this._nodes=new yn(new Vo);else if(arguments.length===1){var t=arguments[0];this._nodes=new yn(t)}};he.prototype.printEdges=function(t){var r=this;t.println("Edges:");for(var n=0;n<this._edges.size();n++){t.println("edge "+n+":");var i=r._edges.get(n);i.print(t),i.eiList.print(t)}};he.prototype.find=function(t){return this._nodes.find(t)};he.prototype.addNode=function(){if(arguments[0]instanceof hu){var t=arguments[0];return this._nodes.addNode(t)}else if(arguments[0]instanceof P){var r=arguments[0];return this._nodes.addNode(r)}};he.prototype.getNodeIterator=function(){return this._nodes.iterator()};he.prototype.linkResultDirectedEdges=function(){for(var t=this._nodes.iterator();t.hasNext();){var r=t.next();r.getEdges().linkResultDirectedEdges()}};he.prototype.debugPrintln=function(t){qe.out.println(t)};he.prototype.isBoundaryNode=function(t,r){var n=this._nodes.find(r);if(n===null)return!1;var i=n.getLabel();return i!==null&&i.getLocation(t)===L.BOUNDARY};he.prototype.linkAllDirectedEdges=function(){for(var t=this._nodes.iterator();t.hasNext();){var r=t.next();r.getEdges().linkAllDirectedEdges()}};he.prototype.matchInSameDirection=function(t,r,n,i){return t.equals(n)?G.computeOrientation(t,r,i)===G.COLLINEAR&&jt.quadrant(t,r)===jt.quadrant(n,i):!1};he.prototype.getEdgeEnds=function(){return this._edgeEndList};he.prototype.debugPrint=function(t){qe.out.print(t)};he.prototype.getEdgeIterator=function(){return this._edges.iterator()};he.prototype.findEdgeInSameDirection=function(t,r){for(var n=this,i=0;i<this._edges.size();i++){var o=n._edges.get(i),s=o.getCoordinates();if(n.matchInSameDirection(t,r,s[0],s[1])||n.matchInSameDirection(t,r,s[s.length-1],s[s.length-2]))return o}return null};he.prototype.insertEdge=function(t){this._edges.add(t)};he.prototype.findEdgeEnd=function(t){for(var r=this.getEdgeEnds().iterator();r.hasNext();){var n=r.next();if(n.getEdge()===t)return n}return null};he.prototype.addEdges=function(t){for(var r=this,n=t.iterator();n.hasNext();){var i=n.next();r._edges.add(i);var o=new pf(i,!0),s=new pf(i,!1);o.setSym(s),s.setSym(o),r.add(o),r.add(s)}};he.prototype.add=function(t){this._nodes.add(t),this._edgeEndList.add(t)};he.prototype.getNodes=function(){return this._nodes.values()};he.prototype.findEdge=function(t,r){for(var n=this,i=0;i<this._edges.size();i++){var o=n._edges.get(i),s=o.getCoordinates();if(t.equals(s[0])&&r.equals(s[1]))return o}return null};he.prototype.interfaces_=function(){return[]};he.prototype.getClass=function(){return he};he.linkResultDirectedEdges=function(t){for(var r=t.iterator();r.hasNext();){var n=r.next();n.getEdges().linkResultDirectedEdges()}};var wr=function(){this._geometryFactory=null,this._shellList=new F;var t=arguments[0];this._geometryFactory=t};wr.prototype.sortShellsAndHoles=function(t,r,n){for(var i=t.iterator();i.hasNext();){var o=i.next();o.isHole()?n.add(o):r.add(o)}};wr.prototype.computePolygons=function(t){for(var r=this,n=new F,i=t.iterator();i.hasNext();){var o=i.next(),s=o.toPolygon(r._geometryFactory);n.add(s)}return n};wr.prototype.placeFreeHoles=function(t,r){for(var n=this,i=r.iterator();i.hasNext();){var o=i.next();if(o.getShell()===null){var s=n.findEdgeRingContaining(o,t);if(s===null)throw new ti("unable to assign hole to a shell",o.getCoordinate(0));o.setShell(s)}}};wr.prototype.buildMinimalEdgeRings=function(t,r,n){for(var i=this,o=new F,s=t.iterator();s.hasNext();){var a=s.next();if(a.getMaxNodeDegree()>2){a.linkDirectedEdgesForMinimalEdgeRings();var u=a.buildMinimalRings(),f=i.findShell(u);f!==null?(i.placePolygonHoles(f,u),r.add(f)):n.addAll(u)}else o.add(a)}return o};wr.prototype.containsPoint=function(t){for(var r=this._shellList.iterator();r.hasNext();){var n=r.next();if(n.containsPoint(t))return!0}return!1};wr.prototype.buildMaximalEdgeRings=function(t){for(var r=this,n=new F,i=t.iterator();i.hasNext();){var o=i.next();if(o.isInResult()&&o.getLabel().isArea()&&o.getEdgeRing()===null){var s=new bE(o,r._geometryFactory);n.add(s),s.setInResult()}}return n};wr.prototype.placePolygonHoles=function(t,r){for(var n=r.iterator();n.hasNext();){var i=n.next();i.isHole()&&i.setShell(t)}};wr.prototype.getPolygons=function(){var t=this.computePolygons(this._shellList);return t};wr.prototype.findEdgeRingContaining=function(t,r){for(var n=t.getLinearRing(),i=n.getEnvelopeInternal(),o=n.getCoordinateN(0),s=null,a=null,u=r.iterator();u.hasNext();){var f=u.next(),l=f.getLinearRing(),c=l.getEnvelopeInternal();s!==null&&(a=s.getLinearRing().getEnvelopeInternal());var h=!1;c.contains(i)&&G.isPointInRing(o,l.getCoordinates())&&(h=!0),h&&(s===null||a.contains(c))&&(s=f)}return s};wr.prototype.findShell=function(t){for(var r=0,n=null,i=t.iterator();i.hasNext();){var o=i.next();o.isHole()||(n=o,r++)}return ut.isTrue(r<=1,"found two shells in MinimalEdgeRing list"),n};wr.prototype.add=function(){if(arguments.length===1){var t=arguments[0];this.add(t.getEdgeEnds(),t.getNodes())}else if(arguments.length===2){var r=arguments[0],n=arguments[1];he.linkResultDirectedEdges(n);var i=this.buildMaximalEdgeRings(r),o=new F,s=this.buildMinimalEdgeRings(i,this._shellList,o);this.sortShellsAndHoles(s,this._shellList,o),this.placeFreeHoles(this._shellList,o)}};wr.prototype.interfaces_=function(){return[]};wr.prototype.getClass=function(){return wr};var Ho=function(){};Ho.prototype.getBounds=function(){};Ho.prototype.interfaces_=function(){return[]};Ho.prototype.getClass=function(){return Ho};var Qr=function(){this._bounds=null,this._item=null;var t=arguments[0],r=arguments[1];this._bounds=t,this._item=r};Qr.prototype.getItem=function(){return this._item};Qr.prototype.getBounds=function(){return this._bounds};Qr.prototype.interfaces_=function(){return[Ho,Ur]};Qr.prototype.getClass=function(){return Qr};var ei=function(){this._size=null,this._items=null,this._size=0,this._items=new F,this._items.add(null)};ei.prototype.poll=function(){if(this.isEmpty())return null;var t=this._items.get(1);return this._items.set(1,this._items.get(this._size)),this._size-=1,this.reorder(1),t};ei.prototype.size=function(){return this._size};ei.prototype.reorder=function(t){for(var r=this,n=null,i=this._items.get(t);t*2<=this._size&&(n=t*2,n!==r._size&&r._items.get(n+1).compareTo(r._items.get(n))<0&&n++,r._items.get(n).compareTo(i)<0);t=n)r._items.set(t,r._items.get(n));this._items.set(t,i)};ei.prototype.clear=function(){this._size=0,this._items.clear()};ei.prototype.isEmpty=function(){return this._size===0};ei.prototype.add=function(t){var r=this;this._items.add(null),this._size+=1;var n=this._size;for(this._items.set(0,t);t.compareTo(this._items.get(Math.trunc(n/2)))<0;n/=2)r._items.set(n,r._items.get(Math.trunc(n/2)));this._items.set(n,t)};ei.prototype.interfaces_=function(){return[]};ei.prototype.getClass=function(){return ei};var hi=function(){};hi.prototype.visitItem=function(t){};hi.prototype.interfaces_=function(){return[]};hi.prototype.getClass=function(){return hi};var to=function(){};to.prototype.insert=function(t,r){};to.prototype.remove=function(t,r){};to.prototype.query=function(){};to.prototype.interfaces_=function(){return[]};to.prototype.getClass=function(){return to};var Me=function(){if(this._childBoundables=new F,this._bounds=null,this._level=null,arguments.length!==0){if(arguments.length===1){var t=arguments[0];this._level=t}}},yg={serialVersionUID:{configurable:!0}};Me.prototype.getLevel=function(){return this._level};Me.prototype.size=function(){return this._childBoundables.size()};Me.prototype.getChildBoundables=function(){return this._childBoundables};Me.prototype.addChildBoundable=function(t){ut.isTrue(this._bounds===null),this._childBoundables.add(t)};Me.prototype.isEmpty=function(){return this._childBoundables.isEmpty()};Me.prototype.getBounds=function(){return this._bounds===null&&(this._bounds=this.computeBounds()),this._bounds};Me.prototype.interfaces_=function(){return[Ho,Ur]};Me.prototype.getClass=function(){return Me};yg.serialVersionUID.get=function(){return 6493722185909574e3};Object.defineProperties(Me,yg);var jr=function(){};jr.reverseOrder=function(){return{compare:function(r,n){return n.compareTo(r)}}};jr.min=function(t){return jr.sort(t),t.get(0)};jr.sort=function(t,r){var n=t.toArray();r?Mi.sort(n,r):Mi.sort(n);for(var i=t.iterator(),o=0,s=n.length;o<s;o++)i.next(),i.set(n[o])};jr.singletonList=function(t){var r=new F;return r.add(t),r};var we=function(){this._boundable1=null,this._boundable2=null,this._distance=null,this._itemDistance=null;var t=arguments[0],r=arguments[1],n=arguments[2];this._boundable1=t,this._boundable2=r,this._itemDistance=n,this._distance=this.distance()};we.prototype.expandToQueue=function(t,r){var n=we.isComposite(this._boundable1),i=we.isComposite(this._boundable2);if(n&&i)return we.area(this._boundable1)>we.area(this._boundable2)?(this.expand(this._boundable1,this._boundable2,t,r),null):(this.expand(this._boundable2,this._boundable1,t,r),null);if(n)return this.expand(this._boundable1,this._boundable2,t,r),null;if(i)return this.expand(this._boundable2,this._boundable1,t,r),null;throw new le("neither boundable is composite")};we.prototype.isLeaves=function(){return!(we.isComposite(this._boundable1)||we.isComposite(this._boundable2))};we.prototype.compareTo=function(t){var r=t;return this._distance<r._distance?-1:this._distance>r._distance?1:0};we.prototype.expand=function(t,r,n,i){for(var o=this,s=t.getChildBoundables(),a=s.iterator();a.hasNext();){var u=a.next(),f=new we(u,r,o._itemDistance);f.getDistance()<i&&n.add(f)}};we.prototype.getBoundable=function(t){return t===0?this._boundable1:this._boundable2};we.prototype.getDistance=function(){return this._distance};we.prototype.distance=function(){return this.isLeaves()?this._itemDistance.distance(this._boundable1,this._boundable2):this._boundable1.getBounds().distance(this._boundable2.getBounds())};we.prototype.interfaces_=function(){return[zr]};we.prototype.getClass=function(){return we};we.area=function(t){return t.getBounds().getArea()};we.isComposite=function(t){return t instanceof Me};var De=function e(){if(this._root=null,this._built=!1,this._itemBoundables=new F,this._nodeCapacity=null,arguments.length===0){var t=e.DEFAULT_NODE_CAPACITY;this._nodeCapacity=t}else if(arguments.length===1){var r=arguments[0];ut.isTrue(r>1,"Node capacity must be greater than 1"),this._nodeCapacity=r}},pu={IntersectsOp:{configurable:!0},serialVersionUID:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};De.prototype.getNodeCapacity=function(){return this._nodeCapacity};De.prototype.lastNode=function(t){return t.get(t.size()-1)};De.prototype.size=function(){var t=this;if(arguments.length===0)return this.isEmpty()?0:(this.build(),this.size(this._root));if(arguments.length===1){for(var r=arguments[0],n=0,i=r.getChildBoundables().iterator();i.hasNext();){var o=i.next();o instanceof Me?n+=t.size(o):o instanceof Qr&&(n+=1)}return n}};De.prototype.removeItem=function(t,r){for(var n=null,i=t.getChildBoundables().iterator();i.hasNext();){var o=i.next();o instanceof Qr&&o.getItem()===r&&(n=o)}return n!==null?(t.getChildBoundables().remove(n),!0):!1};De.prototype.itemsTree=function(){var t=this;if(arguments.length===0){this.build();var r=this.itemsTree(this._root);return r===null?new F:r}else if(arguments.length===1){for(var n=arguments[0],i=new F,o=n.getChildBoundables().iterator();o.hasNext();){var s=o.next();if(s instanceof Me){var a=t.itemsTree(s);a!==null&&i.add(a)}else s instanceof Qr?i.add(s.getItem()):ut.shouldNeverReachHere()}return i.size()<=0?null:i}};De.prototype.insert=function(t,r){ut.isTrue(!this._built,"Cannot insert items into an STR packed R-tree after it has been built."),this._itemBoundables.add(new Qr(t,r))};De.prototype.boundablesAtLevel=function(){var t=this;if(arguments.length===1){var r=arguments[0],n=new F;return this.boundablesAtLevel(r,this._root,n),n}else if(arguments.length===3){var i=arguments[0],o=arguments[1],s=arguments[2];if(ut.isTrue(i>-2),o.getLevel()===i)return s.add(o),null;for(var a=o.getChildBoundables().iterator();a.hasNext();){var u=a.next();u instanceof Me?t.boundablesAtLevel(i,u,s):(ut.isTrue(u instanceof Qr),i===-1&&s.add(u))}return null}};De.prototype.query=function(){var t=this;if(arguments.length===1){var r=arguments[0];this.build();var n=new F;return this.isEmpty()||this.getIntersectsOp().intersects(this._root.getBounds(),r)&&this.query(r,this._root,n),n}else if(arguments.length===2){var i=arguments[0],o=arguments[1];if(this.build(),this.isEmpty())return null;this.getIntersectsOp().intersects(this._root.getBounds(),i)&&this.query(i,this._root,o)}else if(arguments.length===3){if(tt(arguments[2],hi)&&arguments[0]instanceof Object&&arguments[1]instanceof Me)for(var s=arguments[0],a=arguments[1],u=arguments[2],f=a.getChildBoundables(),l=0;l<f.size();l++){var c=f.get(l);t.getIntersectsOp().intersects(c.getBounds(),s)&&(c instanceof Me?t.query(s,c,u):c instanceof Qr?u.visitItem(c.getItem()):ut.shouldNeverReachHere())}else if(tt(arguments[2],Jr)&&arguments[0]instanceof Object&&arguments[1]instanceof Me)for(var h=arguments[0],p=arguments[1],v=arguments[2],y=p.getChildBoundables(),E=0;E<y.size();E++){var x=y.get(E);t.getIntersectsOp().intersects(x.getBounds(),h)&&(x instanceof Me?t.query(h,x,v):x instanceof Qr?v.add(x.getItem()):ut.shouldNeverReachHere())}}};De.prototype.build=function(){if(this._built)return null;this._root=this._itemBoundables.isEmpty()?this.createNode(0):this.createHigherLevels(this._itemBoundables,-1),this._itemBoundables=null,this._built=!0};De.prototype.getRoot=function(){return this.build(),this._root};De.prototype.remove=function(){var t=this;if(arguments.length===2){var r=arguments[0],n=arguments[1];return this.build(),this.getIntersectsOp().intersects(this._root.getBounds(),r)?this.remove(r,this._root,n):!1}else if(arguments.length===3){var i=arguments[0],o=arguments[1],s=arguments[2],a=this.removeItem(o,s);if(a)return!0;for(var u=null,f=o.getChildBoundables().iterator();f.hasNext();){var l=f.next();if(t.getIntersectsOp().intersects(l.getBounds(),i)&&l instanceof Me&&(a=t.remove(i,l,s),a)){u=l;break}}return u!==null&&u.getChildBoundables().isEmpty()&&o.getChildBoundables().remove(u),a}};De.prototype.createHigherLevels=function(t,r){ut.isTrue(!t.isEmpty());var n=this.createParentBoundables(t,r+1);return n.size()===1?n.get(0):this.createHigherLevels(n,r+1)};De.prototype.depth=function(){var t=this;if(arguments.length===0)return this.isEmpty()?0:(this.build(),this.depth(this._root));if(arguments.length===1){for(var r=arguments[0],n=0,i=r.getChildBoundables().iterator();i.hasNext();){var o=i.next();if(o instanceof Me){var s=t.depth(o);s>n&&(n=s)}}return n+1}};De.prototype.createParentBoundables=function(t,r){var n=this;ut.isTrue(!t.isEmpty());var i=new F;i.add(this.createNode(r));var o=new F(t);jr.sort(o,this.getComparator());for(var s=o.iterator();s.hasNext();){var a=s.next();n.lastNode(i).getChildBoundables().size()===n.getNodeCapacity()&&i.add(n.createNode(r)),n.lastNode(i).addChildBoundable(a)}return i};De.prototype.isEmpty=function(){return this._built?this._root.isEmpty():this._itemBoundables.isEmpty()};De.prototype.interfaces_=function(){return[Ur]};De.prototype.getClass=function(){return De};De.compareDoubles=function(t,r){return t>r?1:t<r?-1:0};pu.IntersectsOp.get=function(){return DE};pu.serialVersionUID.get=function(){return-3886435814360241e3};pu.DEFAULT_NODE_CAPACITY.get=function(){return 10};Object.defineProperties(De,pu);var DE=function(){},Wo=function(){};Wo.prototype.distance=function(t,r){};Wo.prototype.interfaces_=function(){return[]};Wo.prototype.getClass=function(){return Wo};var mg=function(e){function t(n){n=n||t.DEFAULT_NODE_CAPACITY,e.call(this,n)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var r={STRtreeNode:{configurable:!0},serialVersionUID:{configurable:!0},xComparator:{configurable:!0},yComparator:{configurable:!0},intersectsOp:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};return t.prototype.createParentBoundablesFromVerticalSlices=function(i,o){var s=this;ut.isTrue(i.length>0);for(var a=new F,u=0;u<i.length;u++)a.addAll(s.createParentBoundablesFromVerticalSlice(i[u],o));return a},t.prototype.createNode=function(i){return new sh(i)},t.prototype.size=function(){return arguments.length===0?e.prototype.size.call(this):e.prototype.size.apply(this,arguments)},t.prototype.insert=function(){if(arguments.length===2){var i=arguments[0],o=arguments[1];if(i.isNull())return null;e.prototype.insert.call(this,i,o)}else return e.prototype.insert.apply(this,arguments)},t.prototype.getIntersectsOp=function(){return t.intersectsOp},t.prototype.verticalSlices=function(i,o){for(var s=Math.trunc(Math.ceil(i.size()/o)),a=new Array(o).fill(null),u=i.iterator(),f=0;f<o;f++){a[f]=new F;for(var l=0;u.hasNext()&&l<s;){var c=u.next();a[f].add(c),l++}}return a},t.prototype.query=function(){if(arguments.length===1){var i=arguments[0];return e.prototype.query.call(this,i)}else if(arguments.length===2){var o=arguments[0],s=arguments[1];e.prototype.query.call(this,o,s)}else if(arguments.length===3){if(tt(arguments[2],hi)&&arguments[0]instanceof Object&&arguments[1]instanceof Me){var a=arguments[0],u=arguments[1],f=arguments[2];e.prototype.query.call(this,a,u,f)}else if(tt(arguments[2],Jr)&&arguments[0]instanceof Object&&arguments[1]instanceof Me){var l=arguments[0],c=arguments[1],h=arguments[2];e.prototype.query.call(this,l,c,h)}}},t.prototype.getComparator=function(){return t.yComparator},t.prototype.createParentBoundablesFromVerticalSlice=function(i,o){return e.prototype.createParentBoundables.call(this,i,o)},t.prototype.remove=function(){if(arguments.length===2){var i=arguments[0],o=arguments[1];return e.prototype.remove.call(this,i,o)}else return e.prototype.remove.apply(this,arguments)},t.prototype.depth=function(){return arguments.length===0?e.prototype.depth.call(this):e.prototype.depth.apply(this,arguments)},t.prototype.createParentBoundables=function(i,o){ut.isTrue(!i.isEmpty());var s=Math.trunc(Math.ceil(i.size()/this.getNodeCapacity())),a=new F(i);jr.sort(a,t.xComparator);var u=this.verticalSlices(a,Math.trunc(Math.ceil(Math.sqrt(s))));return this.createParentBoundablesFromVerticalSlices(u,o)},t.prototype.nearestNeighbour=function(){if(arguments.length===1){if(tt(arguments[0],Wo)){var i=arguments[0],o=new we(this.getRoot(),this.getRoot(),i);return this.nearestNeighbour(o)}else if(arguments[0]instanceof we){var s=arguments[0];return this.nearestNeighbour(s,st.POSITIVE_INFINITY)}}else if(arguments.length===2){if(arguments[0]instanceof t&&tt(arguments[1],Wo)){var a=arguments[0],u=arguments[1],f=new we(this.getRoot(),a.getRoot(),u);return this.nearestNeighbour(f)}else if(arguments[0]instanceof we&&typeof arguments[1]=="number"){var l=arguments[0],c=arguments[1],h=c,p=null,v=new ei;for(v.add(l);!v.isEmpty()&&h>0;){var y=v.poll(),E=y.getDistance();if(E>=h)break;y.isLeaves()?(h=E,p=y):y.expandToQueue(v,h)}return[p.getBoundable(0).getItem(),p.getBoundable(1).getItem()]}}else if(arguments.length===3){var x=arguments[0],g=arguments[1],d=arguments[2],_=new Qr(x,g),w=new we(this.getRoot(),_,d);return this.nearestNeighbour(w)[0]}},t.prototype.interfaces_=function(){return[to,Ur]},t.prototype.getClass=function(){return t},t.centreX=function(i){return t.avg(i.getMinX(),i.getMaxX())},t.avg=function(i,o){return(i+o)/2},t.centreY=function(i){return t.avg(i.getMinY(),i.getMaxY())},r.STRtreeNode.get=function(){return sh},r.serialVersionUID.get=function(){return 0x39920f7d5f261e0},r.xComparator.get=function(){return{interfaces_:function(){return[Bo]},compare:function(n,i){return e.compareDoubles(t.centreX(n.getBounds()),t.centreX(i.getBounds()))}}},r.yComparator.get=function(){return{interfaces_:function(){return[Bo]},compare:function(n,i){return e.compareDoubles(t.centreY(n.getBounds()),t.centreY(i.getBounds()))}}},r.intersectsOp.get=function(){return{interfaces_:function(){return[e.IntersectsOp]},intersects:function(n,i){return n.intersects(i)}}},r.DEFAULT_NODE_CAPACITY.get=function(){return 10},Object.defineProperties(t,r),t}(De),sh=function(e){function t(){var r=arguments[0];e.call(this,r)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.computeBounds=function(){for(var n=null,i=this.getChildBoundables().iterator();i.hasNext();){var o=i.next();n===null?n=new Y(o.getBounds()):n.expandToInclude(o.getBounds())}return n},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(Me),hr=function(){};hr.prototype.interfaces_=function(){return[]};hr.prototype.getClass=function(){return hr};hr.relativeSign=function(t,r){return t<r?-1:t>r?1:0};hr.compare=function(t,r,n){if(r.equals2D(n))return 0;var i=hr.relativeSign(r.x,n.x),o=hr.relativeSign(r.y,n.y);switch(t){case 0:return hr.compareValue(i,o);case 1:return hr.compareValue(o,i);case 2:return hr.compareValue(o,-i);case 3:return hr.compareValue(-i,o);case 4:return hr.compareValue(-i,-o);case 5:return hr.compareValue(-o,-i);case 6:return hr.compareValue(-o,i);case 7:return hr.compareValue(i,-o)}return ut.shouldNeverReachHere("invalid octant value"),0};hr.compareValue=function(t,r){return t<0?-1:t>0?1:r<0?-1:r>0?1:0};var pi=function(){this._segString=null,this.coord=null,this.segmentIndex=null,this._segmentOctant=null,this._isInterior=null;var t=arguments[0],r=arguments[1],n=arguments[2],i=arguments[3];this._segString=t,this.coord=new P(r),this.segmentIndex=n,this._segmentOctant=i,this._isInterior=!r.equals2D(t.getCoordinate(n))};pi.prototype.getCoordinate=function(){return this.coord};pi.prototype.print=function(t){t.print(this.coord),t.print(" seg # = "+this.segmentIndex)};pi.prototype.compareTo=function(t){var r=t;return this.segmentIndex<r.segmentIndex?-1:this.segmentIndex>r.segmentIndex?1:this.coord.equals2D(r.coord)?0:hr.compare(this._segmentOctant,this.coord,r.coord)};pi.prototype.isEndPoint=function(t){return this.segmentIndex===0&&!this._isInterior||this.segmentIndex===t};pi.prototype.isInterior=function(){return this._isInterior};pi.prototype.interfaces_=function(){return[zr]};pi.prototype.getClass=function(){return pi};var ur=function(){this._nodeMap=new Ke,this._edge=null;var t=arguments[0];this._edge=t};ur.prototype.getSplitCoordinates=function(){var t=this,r=new ra;this.addEndpoints();for(var n=this.iterator(),i=n.next();n.hasNext();){var o=n.next();t.addEdgeCoordinates(i,o,r),i=o}return r.toCoordinateArray()};ur.prototype.addCollapsedNodes=function(){var t=this,r=new F;this.findCollapsesFromInsertedNodes(r),this.findCollapsesFromExistingVertices(r);for(var n=r.iterator();n.hasNext();){var i=n.next().intValue();t.add(t._edge.getCoordinate(i),i)}};ur.prototype.print=function(t){t.println("Intersections:");for(var r=this.iterator();r.hasNext();){var n=r.next();n.print(t)}};ur.prototype.findCollapsesFromExistingVertices=function(t){for(var r=this,n=0;n<this._edge.size()-2;n++){var i=r._edge.getCoordinate(n),o=r._edge.getCoordinate(n+2);i.equals2D(o)&&t.add(new hn(n+1))}};ur.prototype.addEdgeCoordinates=function(t,r,n){var i=this,o=this._edge.getCoordinate(r.segmentIndex),s=r.isInterior()||!r.coord.equals2D(o);n.add(new P(t.coord),!1);for(var a=t.segmentIndex+1;a<=r.segmentIndex;a++)n.add(i._edge.getCoordinate(a));s&&n.add(new P(r.coord))};ur.prototype.iterator=function(){return this._nodeMap.values().iterator()};ur.prototype.addSplitEdges=function(t){var r=this;this.addEndpoints(),this.addCollapsedNodes();for(var n=this.iterator(),i=n.next();n.hasNext();){var o=n.next(),s=r.createSplitEdge(i,o);t.add(s),i=o}};ur.prototype.findCollapseIndex=function(t,r,n){if(!t.coord.equals2D(r.coord))return!1;var i=r.segmentIndex-t.segmentIndex;return r.isInterior()||i--,i===1?(n[0]=t.segmentIndex+1,!0):!1};ur.prototype.findCollapsesFromInsertedNodes=function(t){for(var r=this,n=new Array(1).fill(null),i=this.iterator(),o=i.next();i.hasNext();){var s=i.next(),a=r.findCollapseIndex(o,s,n);a&&t.add(new hn(n[0])),o=s}};ur.prototype.getEdge=function(){return this._edge};ur.prototype.addEndpoints=function(){var t=this._edge.size()-1;this.add(this._edge.getCoordinate(0),0),this.add(this._edge.getCoordinate(t),t)};ur.prototype.createSplitEdge=function(t,r){var n=this,i=r.segmentIndex-t.segmentIndex+2,o=this._edge.getCoordinate(r.segmentIndex),s=r.isInterior()||!r.coord.equals2D(o);s||i--;var a=new Array(i).fill(null),u=0;a[u++]=new P(t.coord);for(var f=t.segmentIndex+1;f<=r.segmentIndex;f++)a[u++]=n._edge.getCoordinate(f);return s&&(a[u]=new P(r.coord)),new xe(a,this._edge.getData())};ur.prototype.add=function(t,r){var n=new pi(this._edge,t,r,this._edge.getSegmentOctant(r)),i=this._nodeMap.get(n);return i!==null?(ut.isTrue(i.coord.equals2D(t),"Found equal nodes with different coordinates"),i):(this._nodeMap.put(n,n),n)};ur.prototype.checkSplitEdgesCorrectness=function(t){var r=this._edge.getCoordinates(),n=t.get(0),i=n.getCoordinate(0);if(!i.equals2D(r[0]))throw new jn("bad split edge start point at "+i);var o=t.get(t.size()-1),s=o.getCoordinates(),a=s[s.length-1];if(!a.equals2D(r[r.length-1]))throw new jn("bad split edge end point at "+a)};ur.prototype.interfaces_=function(){return[]};ur.prototype.getClass=function(){return ur};var eo=function(){};eo.prototype.interfaces_=function(){return[]};eo.prototype.getClass=function(){return eo};eo.octant=function(){if(typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var t=arguments[0],r=arguments[1];if(t===0&&r===0)throw new le("Cannot compute the octant for point ( "+t+", "+r+" )");var n=Math.abs(t),i=Math.abs(r);return t>=0?r>=0?n>=i?0:1:n>=i?7:6:r>=0?n>=i?3:2:n>=i?4:5}else if(arguments[0]instanceof P&&arguments[1]instanceof P){var o=arguments[0],s=arguments[1],a=s.x-o.x,u=s.y-o.y;if(a===0&&u===0)throw new le("Cannot compute the octant for two identical points "+o);return eo.octant(a,u)}};var Tn=function(){};Tn.prototype.getCoordinates=function(){};Tn.prototype.size=function(){};Tn.prototype.getCoordinate=function(t){};Tn.prototype.isClosed=function(){};Tn.prototype.setData=function(t){};Tn.prototype.getData=function(){};Tn.prototype.interfaces_=function(){return[]};Tn.prototype.getClass=function(){return Tn};var Xs=function(){};Xs.prototype.addIntersection=function(t,r){};Xs.prototype.interfaces_=function(){return[Tn]};Xs.prototype.getClass=function(){return Xs};var xe=function(){this._nodeList=new ur(this),this._pts=null,this._data=null;var t=arguments[0],r=arguments[1];this._pts=t,this._data=r};xe.prototype.getCoordinates=function(){return this._pts};xe.prototype.size=function(){return this._pts.length};xe.prototype.getCoordinate=function(t){return this._pts[t]};xe.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])};xe.prototype.getSegmentOctant=function(t){return t===this._pts.length-1?-1:this.safeOctant(this.getCoordinate(t),this.getCoordinate(t+1))};xe.prototype.setData=function(t){this._data=t};xe.prototype.safeOctant=function(t,r){return t.equals2D(r)?0:eo.octant(t,r)};xe.prototype.getData=function(){return this._data};xe.prototype.addIntersection=function(){if(arguments.length===2){var t=arguments[0],r=arguments[1];this.addIntersectionNode(t,r)}else if(arguments.length===4){var n=arguments[0],i=arguments[1],o=arguments[3],s=new P(n.getIntersection(o));this.addIntersection(s,i)}};xe.prototype.toString=function(){return Kr.toLineString(new ye(this._pts))};xe.prototype.getNodeList=function(){return this._nodeList};xe.prototype.addIntersectionNode=function(t,r){var n=r,i=n+1;if(i<this._pts.length){var o=this._pts[i];t.equals2D(o)&&(n=i)}var s=this._nodeList.add(t,n);return s};xe.prototype.addIntersections=function(t,r,n){for(var i=this,o=0;o<t.getIntersectionNum();o++)i.addIntersection(t,r,n,o)};xe.prototype.interfaces_=function(){return[Xs]};xe.prototype.getClass=function(){return xe};xe.getNodedSubstrings=function(){if(arguments.length===1){var t=arguments[0],r=new F;return xe.getNodedSubstrings(t,r),r}else if(arguments.length===2)for(var n=arguments[0],i=arguments[1],o=n.iterator();o.hasNext();){var s=o.next();s.getNodeList().addSplitEdges(i)}};var H=function(){if(this.p0=null,this.p1=null,arguments.length===0)this.p0=new P,this.p1=new P;else if(arguments.length===1){var t=arguments[0];this.p0=new P(t.p0),this.p1=new P(t.p1)}else if(arguments.length===2)this.p0=arguments[0],this.p1=arguments[1];else if(arguments.length===4){var r=arguments[0],n=arguments[1],i=arguments[2],o=arguments[3];this.p0=new P(r,n),this.p1=new P(i,o)}},_g={serialVersionUID:{configurable:!0}};H.prototype.minX=function(){return Math.min(this.p0.x,this.p1.x)};H.prototype.orientationIndex=function(){if(arguments[0]instanceof H){var t=arguments[0],r=G.orientationIndex(this.p0,this.p1,t.p0),n=G.orientationIndex(this.p0,this.p1,t.p1);return r>=0&&n>=0||r<=0&&n<=0?Math.max(r,n):0}else if(arguments[0]instanceof P){var i=arguments[0];return G.orientationIndex(this.p0,this.p1,i)}};H.prototype.toGeometry=function(t){return t.createLineString([this.p0,this.p1])};H.prototype.isVertical=function(){return this.p0.x===this.p1.x};H.prototype.equals=function(t){if(!(t instanceof H))return!1;var r=t;return this.p0.equals(r.p0)&&this.p1.equals(r.p1)};H.prototype.intersection=function(t){var r=new Yi;return r.computeIntersection(this.p0,this.p1,t.p0,t.p1),r.hasIntersection()?r.getIntersection(0):null};H.prototype.project=function(){if(arguments[0]instanceof P){var t=arguments[0];if(t.equals(this.p0)||t.equals(this.p1))return new P(t);var r=this.projectionFactor(t),n=new P;return n.x=this.p0.x+r*(this.p1.x-this.p0.x),n.y=this.p0.y+r*(this.p1.y-this.p0.y),n}else if(arguments[0]instanceof H){var i=arguments[0],o=this.projectionFactor(i.p0),s=this.projectionFactor(i.p1);if(o>=1&&s>=1||o<=0&&s<=0)return null;var a=this.project(i.p0);o<0&&(a=this.p0),o>1&&(a=this.p1);var u=this.project(i.p1);return s<0&&(u=this.p0),s>1&&(u=this.p1),new H(a,u)}};H.prototype.normalize=function(){this.p1.compareTo(this.p0)<0&&this.reverse()};H.prototype.angle=function(){return Math.atan2(this.p1.y-this.p0.y,this.p1.x-this.p0.x)};H.prototype.getCoordinate=function(t){return t===0?this.p0:this.p1};H.prototype.distancePerpendicular=function(t){return G.distancePointLinePerpendicular(t,this.p0,this.p1)};H.prototype.minY=function(){return Math.min(this.p0.y,this.p1.y)};H.prototype.midPoint=function(){return H.midPoint(this.p0,this.p1)};H.prototype.projectionFactor=function(t){if(t.equals(this.p0))return 0;if(t.equals(this.p1))return 1;var r=this.p1.x-this.p0.x,n=this.p1.y-this.p0.y,i=r*r+n*n;if(i<=0)return st.NaN;var o=((t.x-this.p0.x)*r+(t.y-this.p0.y)*n)/i;return o};H.prototype.closestPoints=function(t){var r=this.intersection(t);if(r!==null)return[r,r];var n=new Array(2).fill(null),i=st.MAX_VALUE,o=null,s=this.closestPoint(t.p0);i=s.distance(t.p0),n[0]=s,n[1]=t.p0;var a=this.closestPoint(t.p1);o=a.distance(t.p1),o<i&&(i=o,n[0]=a,n[1]=t.p1);var u=t.closestPoint(this.p0);o=u.distance(this.p0),o<i&&(i=o,n[0]=this.p0,n[1]=u);var f=t.closestPoint(this.p1);return o=f.distance(this.p1),o<i&&(i=o,n[0]=this.p1,n[1]=f),n};H.prototype.closestPoint=function(t){var r=this.projectionFactor(t);if(r>0&&r<1)return this.project(t);var n=this.p0.distance(t),i=this.p1.distance(t);return n<i?this.p0:this.p1};H.prototype.maxX=function(){return Math.max(this.p0.x,this.p1.x)};H.prototype.getLength=function(){return this.p0.distance(this.p1)};H.prototype.compareTo=function(t){var r=t,n=this.p0.compareTo(r.p0);return n!==0?n:this.p1.compareTo(r.p1)};H.prototype.reverse=function(){var t=this.p0;this.p0=this.p1,this.p1=t};H.prototype.equalsTopo=function(t){return this.p0.equals(t.p0)&&(this.p1.equals(t.p1)||this.p0.equals(t.p1))&&this.p1.equals(t.p0)};H.prototype.lineIntersection=function(t){try{var r=Wr.intersection(this.p0,this.p1,t.p0,t.p1);return r}catch(n){if(!(n instanceof os))throw n}finally{}return null};H.prototype.maxY=function(){return Math.max(this.p0.y,this.p1.y)};H.prototype.pointAlongOffset=function(t,r){var n=this.p0.x+t*(this.p1.x-this.p0.x),i=this.p0.y+t*(this.p1.y-this.p0.y),o=this.p1.x-this.p0.x,s=this.p1.y-this.p0.y,a=Math.sqrt(o*o+s*s),u=0,f=0;if(r!==0){if(a<=0)throw new Error("Cannot compute offset from zero-length line segment");u=r*o/a,f=r*s/a}var l=n-f,c=i+u,h=new P(l,c);return h};H.prototype.setCoordinates=function(){if(arguments.length===1){var t=arguments[0];this.setCoordinates(t.p0,t.p1)}else if(arguments.length===2){var r=arguments[0],n=arguments[1];this.p0.x=r.x,this.p0.y=r.y,this.p1.x=n.x,this.p1.y=n.y}};H.prototype.segmentFraction=function(t){var r=this.projectionFactor(t);return r<0?r=0:(r>1||st.isNaN(r))&&(r=1),r};H.prototype.toString=function(){return"LINESTRING( "+this.p0.x+" "+this.p0.y+", "+this.p1.x+" "+this.p1.y+")"};H.prototype.isHorizontal=function(){return this.p0.y===this.p1.y};H.prototype.distance=function(){if(arguments[0]instanceof H){var t=arguments[0];return G.distanceLineLine(this.p0,this.p1,t.p0,t.p1)}else if(arguments[0]instanceof P){var r=arguments[0];return G.distancePointLine(r,this.p0,this.p1)}};H.prototype.pointAlong=function(t){var r=new P;return r.x=this.p0.x+t*(this.p1.x-this.p0.x),r.y=this.p0.y+t*(this.p1.y-this.p0.y),r};H.prototype.hashCode=function(){var t=st.doubleToLongBits(this.p0.x);t^=st.doubleToLongBits(this.p0.y)*31;var r=Math.trunc(t)^Math.trunc(t>>32),n=st.doubleToLongBits(this.p1.x);n^=st.doubleToLongBits(this.p1.y)*31;var i=Math.trunc(n)^Math.trunc(n>>32);return r^i};H.prototype.interfaces_=function(){return[zr,Ur]};H.prototype.getClass=function(){return H};H.midPoint=function(t,r){return new P((t.x+r.x)/2,(t.y+r.y)/2)};_g.serialVersionUID.get=function(){return 0x2d2172135f411c00};Object.defineProperties(H,_g);var Ys=function(){this.tempEnv1=new Y,this.tempEnv2=new Y,this._overlapSeg1=new H,this._overlapSeg2=new H};Ys.prototype.overlap=function(){if(arguments.length!==2){if(arguments.length===4){var t=arguments[0],r=arguments[1],n=arguments[2],i=arguments[3];t.getLineSegment(r,this._overlapSeg1),n.getLineSegment(i,this._overlapSeg2),this.overlap(this._overlapSeg1,this._overlapSeg2)}}};Ys.prototype.interfaces_=function(){return[]};Ys.prototype.getClass=function(){return Ys};var Ir=function(){this._pts=null,this._start=null,this._end=null,this._env=null,this._context=null,this._id=null;var t=arguments[0],r=arguments[1],n=arguments[2],i=arguments[3];this._pts=t,this._start=r,this._end=n,this._context=i};Ir.prototype.getLineSegment=function(t,r){r.p0=this._pts[t],r.p1=this._pts[t+1]};Ir.prototype.computeSelect=function(t,r,n,i){var o=this._pts[r],s=this._pts[n];if(i.tempEnv1.init(o,s),n-r===1)return i.select(this,r),null;if(!t.intersects(i.tempEnv1))return null;var a=Math.trunc((r+n)/2);r<a&&this.computeSelect(t,r,a,i),a<n&&this.computeSelect(t,a,n,i)};Ir.prototype.getCoordinates=function(){for(var t=this,r=new Array(this._end-this._start+1).fill(null),n=0,i=this._start;i<=this._end;i++)r[n++]=t._pts[i];return r};Ir.prototype.computeOverlaps=function(t,r){this.computeOverlapsInternal(this._start,this._end,t,t._start,t._end,r)};Ir.prototype.setId=function(t){this._id=t};Ir.prototype.select=function(t,r){this.computeSelect(t,this._start,this._end,r)};Ir.prototype.getEnvelope=function(){if(this._env===null){var t=this._pts[this._start],r=this._pts[this._end];this._env=new Y(t,r)}return this._env};Ir.prototype.getEndIndex=function(){return this._end};Ir.prototype.getStartIndex=function(){return this._start};Ir.prototype.getContext=function(){return this._context};Ir.prototype.getId=function(){return this._id};Ir.prototype.computeOverlapsInternal=function(t,r,n,i,o,s){var a=this._pts[t],u=this._pts[r],f=n._pts[i],l=n._pts[o];if(r-t===1&&o-i===1)return s.overlap(this,t,n,i),null;if(s.tempEnv1.init(a,u),s.tempEnv2.init(f,l),!s.tempEnv1.intersects(s.tempEnv2))return null;var c=Math.trunc((t+r)/2),h=Math.trunc((i+o)/2);t<c&&(i<h&&this.computeOverlapsInternal(t,c,n,i,h,s),h<o&&this.computeOverlapsInternal(t,c,n,h,o,s)),c<r&&(i<h&&this.computeOverlapsInternal(c,r,n,i,h,s),h<o&&this.computeOverlapsInternal(c,r,n,h,o,s))};Ir.prototype.interfaces_=function(){return[]};Ir.prototype.getClass=function(){return Ir};var cn=function(){};cn.prototype.interfaces_=function(){return[]};cn.prototype.getClass=function(){return cn};cn.getChainStartIndices=function(t){var r=0,n=new F;n.add(new hn(r));do{var i=cn.findChainEnd(t,r);n.add(new hn(i)),r=i}while(r<t.length-1);var o=cn.toIntArray(n);return o};cn.findChainEnd=function(t,r){for(var n=r;n<t.length-1&&t[n].equals2D(t[n+1]);)n++;if(n>=t.length-1)return t.length-1;for(var i=jt.quadrant(t[n],t[n+1]),o=r+1;o<t.length;){if(!t[o-1].equals2D(t[o])){var s=jt.quadrant(t[o-1],t[o]);if(s!==i)break}o++}return o-1};cn.getChains=function(){if(arguments.length===1){var t=arguments[0];return cn.getChains(t,null)}else if(arguments.length===2){for(var r=arguments[0],n=arguments[1],i=new F,o=cn.getChainStartIndices(r),s=0;s<o.length-1;s++){var a=new Ir(r,o[s],o[s+1],n);i.add(a)}return i}};cn.toIntArray=function(t){for(var r=new Array(t.size()).fill(null),n=0;n<r.length;n++)r[n]=t.get(n).intValue();return r};var Ti=function(){};Ti.prototype.computeNodes=function(t){};Ti.prototype.getNodedSubstrings=function(){};Ti.prototype.interfaces_=function(){return[]};Ti.prototype.getClass=function(){return Ti};var Vs=function(){if(this._segInt=null,arguments.length!==0){if(arguments.length===1){var t=arguments[0];this.setSegmentIntersector(t)}}};Vs.prototype.setSegmentIntersector=function(t){this._segInt=t};Vs.prototype.interfaces_=function(){return[Ti]};Vs.prototype.getClass=function(){return Vs};var al=function(e){function t(n){n?e.call(this,n):e.call(this),this._monoChains=new F,this._index=new mg,this._idCounter=0,this._nodedSegStrings=null,this._nOverlaps=0}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var r={SegmentOverlapAction:{configurable:!0}};return t.prototype.getMonotoneChains=function(){return this._monoChains},t.prototype.getNodedSubstrings=function(){return xe.getNodedSubstrings(this._nodedSegStrings)},t.prototype.getIndex=function(){return this._index},t.prototype.add=function(i){for(var o=this,s=cn.getChains(i.getCoordinates(),i),a=s.iterator();a.hasNext();){var u=a.next();u.setId(o._idCounter++),o._index.insert(u.getEnvelope(),u),o._monoChains.add(u)}},t.prototype.computeNodes=function(i){var o=this;this._nodedSegStrings=i;for(var s=i.iterator();s.hasNext();)o.add(s.next());this.intersectChains()},t.prototype.intersectChains=function(){for(var i=this,o=new ah(this._segInt),s=this._monoChains.iterator();s.hasNext();)for(var a=s.next(),u=i._index.query(a.getEnvelope()),f=u.iterator();f.hasNext();){var l=f.next();if(l.getId()>a.getId()&&(a.computeOverlaps(l,o),i._nOverlaps++),i._segInt.isDone())return null}},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},r.SegmentOverlapAction.get=function(){return ah},Object.defineProperties(t,r),t}(Vs),ah=function(e){function t(){e.call(this),this._si=null;var r=arguments[0];this._si=r}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.overlap=function(){if(arguments.length===4){var n=arguments[0],i=arguments[1],o=arguments[2],s=arguments[3],a=n.getContext(),u=o.getContext();this._si.processIntersections(a,i,u,s)}else return e.prototype.overlap.apply(this,arguments)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(Ys),Vt=function e(){if(this._quadrantSegments=e.DEFAULT_QUADRANT_SEGMENTS,this._endCapStyle=e.CAP_ROUND,this._joinStyle=e.JOIN_ROUND,this._mitreLimit=e.DEFAULT_MITRE_LIMIT,this._isSingleSided=!1,this._simplifyFactor=e.DEFAULT_SIMPLIFY_FACTOR,arguments.length!==0){if(arguments.length===1){var t=arguments[0];this.setQuadrantSegments(t)}else if(arguments.length===2){var r=arguments[0],n=arguments[1];this.setQuadrantSegments(r),this.setEndCapStyle(n)}else if(arguments.length===4){var i=arguments[0],o=arguments[1],s=arguments[2],a=arguments[3];this.setQuadrantSegments(i),this.setEndCapStyle(o),this.setJoinStyle(s),this.setMitreLimit(a)}}},si={CAP_ROUND:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},JOIN_ROUND:{configurable:!0},JOIN_MITRE:{configurable:!0},JOIN_BEVEL:{configurable:!0},DEFAULT_QUADRANT_SEGMENTS:{configurable:!0},DEFAULT_MITRE_LIMIT:{configurable:!0},DEFAULT_SIMPLIFY_FACTOR:{configurable:!0}};Vt.prototype.getEndCapStyle=function(){return this._endCapStyle};Vt.prototype.isSingleSided=function(){return this._isSingleSided};Vt.prototype.setQuadrantSegments=function(t){this._quadrantSegments=t,this._quadrantSegments===0&&(this._joinStyle=Vt.JOIN_BEVEL),this._quadrantSegments<0&&(this._joinStyle=Vt.JOIN_MITRE,this._mitreLimit=Math.abs(this._quadrantSegments)),t<=0&&(this._quadrantSegments=1),this._joinStyle!==Vt.JOIN_ROUND&&(this._quadrantSegments=Vt.DEFAULT_QUADRANT_SEGMENTS)};Vt.prototype.getJoinStyle=function(){return this._joinStyle};Vt.prototype.setJoinStyle=function(t){this._joinStyle=t};Vt.prototype.setSimplifyFactor=function(t){this._simplifyFactor=t<0?0:t};Vt.prototype.getSimplifyFactor=function(){return this._simplifyFactor};Vt.prototype.getQuadrantSegments=function(){return this._quadrantSegments};Vt.prototype.setEndCapStyle=function(t){this._endCapStyle=t};Vt.prototype.getMitreLimit=function(){return this._mitreLimit};Vt.prototype.setMitreLimit=function(t){this._mitreLimit=t};Vt.prototype.setSingleSided=function(t){this._isSingleSided=t};Vt.prototype.interfaces_=function(){return[]};Vt.prototype.getClass=function(){return Vt};Vt.bufferDistanceError=function(t){var r=Math.PI/2/t;return 1-Math.cos(r/2)};si.CAP_ROUND.get=function(){return 1};si.CAP_FLAT.get=function(){return 2};si.CAP_SQUARE.get=function(){return 3};si.JOIN_ROUND.get=function(){return 1};si.JOIN_MITRE.get=function(){return 2};si.JOIN_BEVEL.get=function(){return 3};si.DEFAULT_QUADRANT_SEGMENTS.get=function(){return 8};si.DEFAULT_MITRE_LIMIT.get=function(){return 5};si.DEFAULT_SIMPLIFY_FACTOR.get=function(){return .01};Object.defineProperties(Vt,si);var de=function(t){this._distanceTol=null,this._isDeleted=null,this._angleOrientation=G.COUNTERCLOCKWISE,this._inputLine=t||null},oa={INIT:{configurable:!0},DELETE:{configurable:!0},KEEP:{configurable:!0},NUM_PTS_TO_CHECK:{configurable:!0}};de.prototype.isDeletable=function(t,r,n,i){var o=this._inputLine[t],s=this._inputLine[r],a=this._inputLine[n];return!this.isConcave(o,s,a)||!this.isShallow(o,s,a,i)?!1:this.isShallowSampled(o,s,t,n,i)};de.prototype.deleteShallowConcavities=function(){for(var t=this,r=1,n=this.findNextNonDeletedIndex(r),i=this.findNextNonDeletedIndex(n),o=!1;i<this._inputLine.length;){var s=!1;t.isDeletable(r,n,i,t._distanceTol)&&(t._isDeleted[n]=de.DELETE,s=!0,o=!0),s?r=i:r=n,n=t.findNextNonDeletedIndex(r),i=t.findNextNonDeletedIndex(n)}return o};de.prototype.isShallowConcavity=function(t,r,n,i){var o=G.computeOrientation(t,r,n),s=o===this._angleOrientation;if(!s)return!1;var a=G.distancePointLine(r,t,n);return a<i};de.prototype.isShallowSampled=function(t,r,n,i,o){var s=this,a=Math.trunc((i-n)/de.NUM_PTS_TO_CHECK);a<=0&&(a=1);for(var u=n;u<i;u+=a)if(!s.isShallow(t,r,s._inputLine[u],o))return!1;return!0};de.prototype.isConcave=function(t,r,n){var i=G.computeOrientation(t,r,n),o=i===this._angleOrientation;return o};de.prototype.simplify=function(t){var r=this;this._distanceTol=Math.abs(t),t<0&&(this._angleOrientation=G.CLOCKWISE),this._isDeleted=new Array(this._inputLine.length).fill(null);var n=!1;do n=r.deleteShallowConcavities();while(n);return this.collapseLine()};de.prototype.findNextNonDeletedIndex=function(t){for(var r=t+1;r<this._inputLine.length&&this._isDeleted[r]===de.DELETE;)r++;return r};de.prototype.isShallow=function(t,r,n,i){var o=G.distancePointLine(r,t,n);return o<i};de.prototype.collapseLine=function(){for(var t=this,r=new ra,n=0;n<this._inputLine.length;n++)t._isDeleted[n]!==de.DELETE&&r.add(t._inputLine[n]);return r.toCoordinateArray()};de.prototype.interfaces_=function(){return[]};de.prototype.getClass=function(){return de};de.simplify=function(t,r){var n=new de(t);return n.simplify(r)};oa.INIT.get=function(){return 0};oa.DELETE.get=function(){return 1};oa.KEEP.get=function(){return 1};oa.NUM_PTS_TO_CHECK.get=function(){return 10};Object.defineProperties(de,oa);var Or=function(){this._ptList=null,this._precisionModel=null,this._minimimVertexDistance=0,this._ptList=new F},Eg={COORDINATE_ARRAY_TYPE:{configurable:!0}};Or.prototype.getCoordinates=function(){var t=this._ptList.toArray(Or.COORDINATE_ARRAY_TYPE);return t};Or.prototype.setPrecisionModel=function(t){this._precisionModel=t};Or.prototype.addPt=function(t){var r=new P(t);if(this._precisionModel.makePrecise(r),this.isRedundant(r))return null;this._ptList.add(r)};Or.prototype.revere=function(){};Or.prototype.addPts=function(t,r){var n=this;if(r)for(var i=0;i<t.length;i++)n.addPt(t[i]);else for(var o=t.length-1;o>=0;o--)n.addPt(t[o])};Or.prototype.isRedundant=function(t){if(this._ptList.size()<1)return!1;var r=this._ptList.get(this._ptList.size()-1),n=t.distance(r);return n<this._minimimVertexDistance};Or.prototype.toString=function(){var t=new lt,r=t.createLineString(this.getCoordinates());return r.toString()};Or.prototype.closeRing=function(){if(this._ptList.size()<1)return null;var t=new P(this._ptList.get(0)),r=this._ptList.get(this._ptList.size()-1);if(t.equals(r))return null;this._ptList.add(t)};Or.prototype.setMinimumVertexDistance=function(t){this._minimimVertexDistance=t};Or.prototype.interfaces_=function(){return[]};Or.prototype.getClass=function(){return Or};Eg.COORDINATE_ARRAY_TYPE.get=function(){return new Array(0).fill(null)};Object.defineProperties(Or,Eg);var dt=function(){},yo={PI_TIMES_2:{configurable:!0},PI_OVER_2:{configurable:!0},PI_OVER_4:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},CLOCKWISE:{configurable:!0},NONE:{configurable:!0}};dt.prototype.interfaces_=function(){return[]};dt.prototype.getClass=function(){return dt};dt.toDegrees=function(t){return t*180/Math.PI};dt.normalize=function(t){for(;t>Math.PI;)t-=dt.PI_TIMES_2;for(;t<=-Math.PI;)t+=dt.PI_TIMES_2;return t};dt.angle=function(){if(arguments.length===1){var t=arguments[0];return Math.atan2(t.y,t.x)}else if(arguments.length===2){var r=arguments[0],n=arguments[1],i=n.x-r.x,o=n.y-r.y;return Math.atan2(o,i)}};dt.isAcute=function(t,r,n){var i=t.x-r.x,o=t.y-r.y,s=n.x-r.x,a=n.y-r.y,u=i*s+o*a;return u>0};dt.isObtuse=function(t,r,n){var i=t.x-r.x,o=t.y-r.y,s=n.x-r.x,a=n.y-r.y,u=i*s+o*a;return u<0};dt.interiorAngle=function(t,r,n){var i=dt.angle(r,t),o=dt.angle(r,n);return Math.abs(o-i)};dt.normalizePositive=function(t){if(t<0){for(;t<0;)t+=dt.PI_TIMES_2;t>=dt.PI_TIMES_2&&(t=0)}else{for(;t>=dt.PI_TIMES_2;)t-=dt.PI_TIMES_2;t<0&&(t=0)}return t};dt.angleBetween=function(t,r,n){var i=dt.angle(r,t),o=dt.angle(r,n);return dt.diff(i,o)};dt.diff=function(t,r){var n=null;return t<r?n=r-t:n=t-r,n>Math.PI&&(n=2*Math.PI-n),n};dt.toRadians=function(t){return t*Math.PI/180};dt.getTurn=function(t,r){var n=Math.sin(r-t);return n>0?dt.COUNTERCLOCKWISE:n<0?dt.CLOCKWISE:dt.NONE};dt.angleBetweenOriented=function(t,r,n){var i=dt.angle(r,t),o=dt.angle(r,n),s=o-i;return s<=-Math.PI?s+dt.PI_TIMES_2:s>Math.PI?s-dt.PI_TIMES_2:s};yo.PI_TIMES_2.get=function(){return 2*Math.PI};yo.PI_OVER_2.get=function(){return Math.PI/2};yo.PI_OVER_4.get=function(){return Math.PI/4};yo.COUNTERCLOCKWISE.get=function(){return G.COUNTERCLOCKWISE};yo.CLOCKWISE.get=function(){return G.CLOCKWISE};yo.NONE.get=function(){return G.COLLINEAR};Object.defineProperties(dt,yo);var ae=function e(){this._maxCurveSegmentError=0,this._filletAngleQuantum=null,this._closingSegLengthFactor=1,this._segList=null,this._distance=0,this._precisionModel=null,this._bufParams=null,this._li=null,this._s0=null,this._s1=null,this._s2=null,this._seg0=new H,this._seg1=new H,this._offset0=new H,this._offset1=new H,this._side=0,this._hasNarrowConcaveAngle=!1;var t=arguments[0],r=arguments[1],n=arguments[2];this._precisionModel=t,this._bufParams=r,this._li=new Yi,this._filletAngleQuantum=Math.PI/2/r.getQuadrantSegments(),r.getQuadrantSegments()>=8&&r.getJoinStyle()===Vt.JOIN_ROUND&&(this._closingSegLengthFactor=e.MAX_CLOSING_SEG_LEN_FACTOR),this.init(n)},sa={OFFSET_SEGMENT_SEPARATION_FACTOR:{configurable:!0},INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},CURVE_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},MAX_CLOSING_SEG_LEN_FACTOR:{configurable:!0}};ae.prototype.addNextSegment=function(t,r){if(this._s0=this._s1,this._s1=this._s2,this._s2=t,this._seg0.setCoordinates(this._s0,this._s1),this.computeOffsetSegment(this._seg0,this._side,this._distance,this._offset0),this._seg1.setCoordinates(this._s1,this._s2),this.computeOffsetSegment(this._seg1,this._side,this._distance,this._offset1),this._s1.equals(this._s2))return null;var n=G.computeOrientation(this._s0,this._s1,this._s2),i=n===G.CLOCKWISE&&this._side===b.LEFT||n===G.COUNTERCLOCKWISE&&this._side===b.RIGHT;n===0?this.addCollinear(r):i?this.addOutsideTurn(n,r):this.addInsideTurn(n,r)};ae.prototype.addLineEndCap=function(t,r){var n=new H(t,r),i=new H;this.computeOffsetSegment(n,b.LEFT,this._distance,i);var o=new H;this.computeOffsetSegment(n,b.RIGHT,this._distance,o);var s=r.x-t.x,a=r.y-t.y,u=Math.atan2(a,s);switch(this._bufParams.getEndCapStyle()){case Vt.CAP_ROUND:this._segList.addPt(i.p1),this.addFilletArc(r,u+Math.PI/2,u-Math.PI/2,G.CLOCKWISE,this._distance),this._segList.addPt(o.p1);break;case Vt.CAP_FLAT:this._segList.addPt(i.p1),this._segList.addPt(o.p1);break;case Vt.CAP_SQUARE:var f=new P;f.x=Math.abs(this._distance)*Math.cos(u),f.y=Math.abs(this._distance)*Math.sin(u);var l=new P(i.p1.x+f.x,i.p1.y+f.y),c=new P(o.p1.x+f.x,o.p1.y+f.y);this._segList.addPt(l),this._segList.addPt(c);break}};ae.prototype.getCoordinates=function(){var t=this._segList.getCoordinates();return t};ae.prototype.addMitreJoin=function(t,r,n,i){var o=!0,s=null;try{s=Wr.intersection(r.p0,r.p1,n.p0,n.p1);var a=i<=0?1:s.distance(t)/Math.abs(i);a>this._bufParams.getMitreLimit()&&(o=!1)}catch(u){if(u instanceof os)s=new P(0,0),o=!1;else throw u}finally{}o?this._segList.addPt(s):this.addLimitedMitreJoin(r,n,i,this._bufParams.getMitreLimit())};ae.prototype.addFilletCorner=function(t,r,n,i,o){var s=r.x-t.x,a=r.y-t.y,u=Math.atan2(a,s),f=n.x-t.x,l=n.y-t.y,c=Math.atan2(l,f);i===G.CLOCKWISE?u<=c&&(u+=2*Math.PI):u>=c&&(u-=2*Math.PI),this._segList.addPt(r),this.addFilletArc(t,u,c,i,o),this._segList.addPt(n)};ae.prototype.addOutsideTurn=function(t,r){if(this._offset0.p1.distance(this._offset1.p0)<this._distance*ae.OFFSET_SEGMENT_SEPARATION_FACTOR)return this._segList.addPt(this._offset0.p1),null;this._bufParams.getJoinStyle()===Vt.JOIN_MITRE?this.addMitreJoin(this._s1,this._offset0,this._offset1,this._distance):this._bufParams.getJoinStyle()===Vt.JOIN_BEVEL?this.addBevelJoin(this._offset0,this._offset1):(r&&this._segList.addPt(this._offset0.p1),this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,t,this._distance),this._segList.addPt(this._offset1.p0))};ae.prototype.createSquare=function(t){this._segList.addPt(new P(t.x+this._distance,t.y+this._distance)),this._segList.addPt(new P(t.x+this._distance,t.y-this._distance)),this._segList.addPt(new P(t.x-this._distance,t.y-this._distance)),this._segList.addPt(new P(t.x-this._distance,t.y+this._distance)),this._segList.closeRing()};ae.prototype.addSegments=function(t,r){this._segList.addPts(t,r)};ae.prototype.addFirstSegment=function(){this._segList.addPt(this._offset1.p0)};ae.prototype.addLastSegment=function(){this._segList.addPt(this._offset1.p1)};ae.prototype.initSideSegments=function(t,r,n){this._s1=t,this._s2=r,this._side=n,this._seg1.setCoordinates(t,r),this.computeOffsetSegment(this._seg1,n,this._distance,this._offset1)};ae.prototype.addLimitedMitreJoin=function(t,r,n,i){var o=this._seg0.p1,s=dt.angle(o,this._seg0.p0),a=dt.angleBetweenOriented(this._seg0.p0,o,this._seg1.p1),u=a/2,f=dt.normalize(s+u),l=dt.normalize(f+Math.PI),c=i*n,h=c*Math.abs(Math.sin(u)),p=n-h,v=o.x+c*Math.cos(l),y=o.y+c*Math.sin(l),E=new P(v,y),x=new H(o,E),g=x.pointAlongOffset(1,p),d=x.pointAlongOffset(1,-p);this._side===b.LEFT?(this._segList.addPt(g),this._segList.addPt(d)):(this._segList.addPt(d),this._segList.addPt(g))};ae.prototype.computeOffsetSegment=function(t,r,n,i){var o=r===b.LEFT?1:-1,s=t.p1.x-t.p0.x,a=t.p1.y-t.p0.y,u=Math.sqrt(s*s+a*a),f=o*n*s/u,l=o*n*a/u;i.p0.x=t.p0.x-l,i.p0.y=t.p0.y+f,i.p1.x=t.p1.x-l,i.p1.y=t.p1.y+f};ae.prototype.addFilletArc=function(t,r,n,i,o){var s=this,a=i===G.CLOCKWISE?-1:1,u=Math.abs(r-n),f=Math.trunc(u/this._filletAngleQuantum+.5);if(f<1)return null;for(var l=0,c=u/f,h=l,p=new P;h<u;){var v=r+a*h;p.x=t.x+o*Math.cos(v),p.y=t.y+o*Math.sin(v),s._segList.addPt(p),h+=c}};ae.prototype.addInsideTurn=function(t,r){if(this._li.computeIntersection(this._offset0.p0,this._offset0.p1,this._offset1.p0,this._offset1.p1),this._li.hasIntersection())this._segList.addPt(this._li.getIntersection(0));else if(this._hasNarrowConcaveAngle=!0,this._offset0.p1.distance(this._offset1.p0)<this._distance*ae.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR)this._segList.addPt(this._offset0.p1);else{if(this._segList.addPt(this._offset0.p1),this._closingSegLengthFactor>0){var n=new P((this._closingSegLengthFactor*this._offset0.p1.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset0.p1.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(n);var i=new P((this._closingSegLengthFactor*this._offset1.p0.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset1.p0.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(i)}else this._segList.addPt(this._s1);this._segList.addPt(this._offset1.p0)}};ae.prototype.createCircle=function(t){var r=new P(t.x+this._distance,t.y);this._segList.addPt(r),this.addFilletArc(t,0,2*Math.PI,-1,this._distance),this._segList.closeRing()};ae.prototype.addBevelJoin=function(t,r){this._segList.addPt(t.p1),this._segList.addPt(r.p0)};ae.prototype.init=function(t){this._distance=t,this._maxCurveSegmentError=t*(1-Math.cos(this._filletAngleQuantum/2)),this._segList=new Or,this._segList.setPrecisionModel(this._precisionModel),this._segList.setMinimumVertexDistance(t*ae.CURVE_VERTEX_SNAP_DISTANCE_FACTOR)};ae.prototype.addCollinear=function(t){this._li.computeIntersection(this._s0,this._s1,this._s1,this._s2);var r=this._li.getIntersectionNum();r>=2&&(this._bufParams.getJoinStyle()===Vt.JOIN_BEVEL||this._bufParams.getJoinStyle()===Vt.JOIN_MITRE?(t&&this._segList.addPt(this._offset0.p1),this._segList.addPt(this._offset1.p0)):this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,G.CLOCKWISE,this._distance))};ae.prototype.closeRing=function(){this._segList.closeRing()};ae.prototype.hasNarrowConcaveAngle=function(){return this._hasNarrowConcaveAngle};ae.prototype.interfaces_=function(){return[]};ae.prototype.getClass=function(){return ae};sa.OFFSET_SEGMENT_SEPARATION_FACTOR.get=function(){return .001};sa.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return .001};sa.CURVE_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return 1e-6};sa.MAX_CLOSING_SEG_LEN_FACTOR.get=function(){return 80};Object.defineProperties(ae,sa);var vr=function(){this._distance=0,this._precisionModel=null,this._bufParams=null;var t=arguments[0],r=arguments[1];this._precisionModel=t,this._bufParams=r};vr.prototype.getOffsetCurve=function(t,r){if(this._distance=r,r===0)return null;var n=r<0,i=Math.abs(r),o=this.getSegGen(i);t.length<=1?this.computePointCurve(t[0],o):this.computeOffsetCurve(t,n,o);var s=o.getCoordinates();return n&&ct.reverse(s),s};vr.prototype.computeSingleSidedBufferCurve=function(t,r,n){var i=this.simplifyTolerance(this._distance);if(r){n.addSegments(t,!0);var o=de.simplify(t,-i),s=o.length-1;n.initSideSegments(o[s],o[s-1],b.LEFT),n.addFirstSegment();for(var a=s-2;a>=0;a--)n.addNextSegment(o[a],!0)}else{n.addSegments(t,!1);var u=de.simplify(t,i),f=u.length-1;n.initSideSegments(u[0],u[1],b.LEFT),n.addFirstSegment();for(var l=2;l<=f;l++)n.addNextSegment(u[l],!0)}n.addLastSegment(),n.closeRing()};vr.prototype.computeRingBufferCurve=function(t,r,n){var i=this.simplifyTolerance(this._distance);r===b.RIGHT&&(i=-i);var o=de.simplify(t,i),s=o.length-1;n.initSideSegments(o[s-1],o[0],r);for(var a=1;a<=s;a++){var u=a!==1;n.addNextSegment(o[a],u)}n.closeRing()};vr.prototype.computeLineBufferCurve=function(t,r){var n=this.simplifyTolerance(this._distance),i=de.simplify(t,n),o=i.length-1;r.initSideSegments(i[0],i[1],b.LEFT);for(var s=2;s<=o;s++)r.addNextSegment(i[s],!0);r.addLastSegment(),r.addLineEndCap(i[o-1],i[o]);var a=de.simplify(t,-n),u=a.length-1;r.initSideSegments(a[u],a[u-1],b.LEFT);for(var f=u-2;f>=0;f--)r.addNextSegment(a[f],!0);r.addLastSegment(),r.addLineEndCap(a[1],a[0]),r.closeRing()};vr.prototype.computePointCurve=function(t,r){switch(this._bufParams.getEndCapStyle()){case Vt.CAP_ROUND:r.createCircle(t);break;case Vt.CAP_SQUARE:r.createSquare(t);break}};vr.prototype.getLineCurve=function(t,r){if(this._distance=r,r<0&&!this._bufParams.isSingleSided()||r===0)return null;var n=Math.abs(r),i=this.getSegGen(n);if(t.length<=1)this.computePointCurve(t[0],i);else if(this._bufParams.isSingleSided()){var o=r<0;this.computeSingleSidedBufferCurve(t,o,i)}else this.computeLineBufferCurve(t,i);var s=i.getCoordinates();return s};vr.prototype.getBufferParameters=function(){return this._bufParams};vr.prototype.simplifyTolerance=function(t){return t*this._bufParams.getSimplifyFactor()};vr.prototype.getRingCurve=function(t,r,n){if(this._distance=n,t.length<=2)return this.getLineCurve(t,n);if(n===0)return vr.copyCoordinates(t);var i=this.getSegGen(n);return this.computeRingBufferCurve(t,r,i),i.getCoordinates()};vr.prototype.computeOffsetCurve=function(t,r,n){var i=this.simplifyTolerance(this._distance);if(r){var o=de.simplify(t,-i),s=o.length-1;n.initSideSegments(o[s],o[s-1],b.LEFT),n.addFirstSegment();for(var a=s-2;a>=0;a--)n.addNextSegment(o[a],!0)}else{var u=de.simplify(t,i),f=u.length-1;n.initSideSegments(u[0],u[1],b.LEFT),n.addFirstSegment();for(var l=2;l<=f;l++)n.addNextSegment(u[l],!0)}n.addLastSegment()};vr.prototype.getSegGen=function(t){return new ae(this._precisionModel,this._bufParams,t)};vr.prototype.interfaces_=function(){return[]};vr.prototype.getClass=function(){return vr};vr.copyCoordinates=function(t){for(var r=new Array(t.length).fill(null),n=0;n<r.length;n++)r[n]=new P(t[n]);return r};var ro=function(){this._subgraphs=null,this._seg=new H,this._cga=new G;var t=arguments[0];this._subgraphs=t},xg={DepthSegment:{configurable:!0}};ro.prototype.findStabbedSegments=function(){var t=this;if(arguments.length===1){for(var r=arguments[0],n=new F,i=this._subgraphs.iterator();i.hasNext();){var o=i.next(),s=o.getEnvelope();r.y<s.getMinY()||r.y>s.getMaxY()||t.findStabbedSegments(r,o.getDirectedEdges(),n)}return n}else if(arguments.length===3){if(tt(arguments[2],Jr)&&arguments[0]instanceof P&&arguments[1]instanceof pf)for(var a=arguments[0],u=arguments[1],f=arguments[2],l=u.getEdge().getCoordinates(),c=0;c<l.length-1;c++){t._seg.p0=l[c],t._seg.p1=l[c+1],t._seg.p0.y>t._seg.p1.y&&t._seg.reverse();var h=Math.max(t._seg.p0.x,t._seg.p1.x);if(!(h<a.x)&&!t._seg.isHorizontal()&&!(a.y<t._seg.p0.y||a.y>t._seg.p1.y)&&G.computeOrientation(t._seg.p0,t._seg.p1,a)!==G.RIGHT){var p=u.getDepth(b.LEFT);t._seg.p0.equals(l[c])||(p=u.getDepth(b.RIGHT));var v=new Fi(t._seg,p);f.add(v)}}else if(tt(arguments[2],Jr)&&arguments[0]instanceof P&&tt(arguments[1],Jr))for(var y=arguments[0],E=arguments[1],x=arguments[2],g=E.iterator();g.hasNext();){var d=g.next();d.isForward()&&t.findStabbedSegments(y,d,x)}}};ro.prototype.getDepth=function(t){var r=this.findStabbedSegments(t);if(r.size()===0)return 0;var n=jr.min(r);return n._leftDepth};ro.prototype.interfaces_=function(){return[]};ro.prototype.getClass=function(){return ro};xg.DepthSegment.get=function(){return Fi};Object.defineProperties(ro,xg);var Fi=function(){this._upwardSeg=null,this._leftDepth=null;var t=arguments[0],r=arguments[1];this._upwardSeg=new H(t),this._leftDepth=r};Fi.prototype.compareTo=function(t){var r=t;if(this._upwardSeg.minX()>=r._upwardSeg.maxX())return 1;if(this._upwardSeg.maxX()<=r._upwardSeg.minX())return-1;var n=this._upwardSeg.orientationIndex(r._upwardSeg);return n!==0||(n=-1*r._upwardSeg.orientationIndex(this._upwardSeg),n!==0)?n:this._upwardSeg.compareTo(r._upwardSeg)};Fi.prototype.compareX=function(t,r){var n=t.p0.compareTo(r.p0);return n!==0?n:t.p1.compareTo(r.p1)};Fi.prototype.toString=function(){return this._upwardSeg.toString()};Fi.prototype.interfaces_=function(){return[zr]};Fi.prototype.getClass=function(){return Fi};var Wt=function(t,r,n){this.p0=t||null,this.p1=r||null,this.p2=n||null};Wt.prototype.area=function(){return Wt.area(this.p0,this.p1,this.p2)};Wt.prototype.signedArea=function(){return Wt.signedArea(this.p0,this.p1,this.p2)};Wt.prototype.interpolateZ=function(t){if(t===null)throw new le("Supplied point is null.");return Wt.interpolateZ(t,this.p0,this.p1,this.p2)};Wt.prototype.longestSideLength=function(){return Wt.longestSideLength(this.p0,this.p1,this.p2)};Wt.prototype.isAcute=function(){return Wt.isAcute(this.p0,this.p1,this.p2)};Wt.prototype.circumcentre=function(){return Wt.circumcentre(this.p0,this.p1,this.p2)};Wt.prototype.area3D=function(){return Wt.area3D(this.p0,this.p1,this.p2)};Wt.prototype.centroid=function(){return Wt.centroid(this.p0,this.p1,this.p2)};Wt.prototype.inCentre=function(){return Wt.inCentre(this.p0,this.p1,this.p2)};Wt.prototype.interfaces_=function(){return[]};Wt.prototype.getClass=function(){return Wt};Wt.area=function(t,r,n){return Math.abs(((n.x-t.x)*(r.y-t.y)-(r.x-t.x)*(n.y-t.y))/2)};Wt.signedArea=function(t,r,n){return((n.x-t.x)*(r.y-t.y)-(r.x-t.x)*(n.y-t.y))/2};Wt.det=function(t,r,n,i){return t*i-r*n};Wt.interpolateZ=function(t,r,n,i){var o=r.x,s=r.y,a=n.x-o,u=i.x-o,f=n.y-s,l=i.y-s,c=a*l-u*f,h=t.x-o,p=t.y-s,v=(l*h-u*p)/c,y=(-f*h+a*p)/c,E=r.z+v*(n.z-r.z)+y*(i.z-r.z);return E};Wt.longestSideLength=function(t,r,n){var i=t.distance(r),o=r.distance(n),s=n.distance(t),a=i;return o>a&&(a=o),s>a&&(a=s),a};Wt.isAcute=function(t,r,n){return!(!dt.isAcute(t,r,n)||!dt.isAcute(r,n,t)||!dt.isAcute(n,t,r))};Wt.circumcentre=function(t,r,n){var i=n.x,o=n.y,s=t.x-i,a=t.y-o,u=r.x-i,f=r.y-o,l=2*Wt.det(s,a,u,f),c=Wt.det(a,s*s+a*a,f,u*u+f*f),h=Wt.det(s,s*s+a*a,u,u*u+f*f),p=i-c/l,v=o+h/l;return new P(p,v)};Wt.perpendicularBisector=function(t,r){var n=r.x-t.x,i=r.y-t.y,o=new Wr(t.x+n/2,t.y+i/2,1),s=new Wr(t.x-i+n/2,t.y+n+i/2,1);return new Wr(o,s)};Wt.angleBisector=function(t,r,n){var i=r.distance(t),o=r.distance(n),s=i/(i+o),a=n.x-t.x,u=n.y-t.y,f=new P(t.x+s*a,t.y+s*u);return f};Wt.area3D=function(t,r,n){var i=r.x-t.x,o=r.y-t.y,s=r.z-t.z,a=n.x-t.x,u=n.y-t.y,f=n.z-t.z,l=o*f-s*u,c=s*a-i*f,h=i*u-o*a,p=l*l+c*c+h*h,v=Math.sqrt(p)/2;return v};Wt.centroid=function(t,r,n){var i=(t.x+r.x+n.x)/3,o=(t.y+r.y+n.y)/3;return new P(i,o)};Wt.inCentre=function(t,r,n){var i=r.distance(n),o=t.distance(n),s=t.distance(r),a=i+o+s,u=(i*t.x+o*r.x+s*n.x)/a,f=(i*t.y+o*r.y+s*n.y)/a;return new P(u,f)};var qr=function(){this._inputGeom=null,this._distance=null,this._curveBuilder=null,this._curveList=new F;var t=arguments[0],r=arguments[1],n=arguments[2];this._inputGeom=t,this._distance=r,this._curveBuilder=n};qr.prototype.addPoint=function(t){if(this._distance<=0)return null;var r=t.getCoordinates(),n=this._curveBuilder.getLineCurve(r,this._distance);this.addCurve(n,L.EXTERIOR,L.INTERIOR)};qr.prototype.addPolygon=function(t){var r=this,n=this._distance,i=b.LEFT;this._distance<0&&(n=-this._distance,i=b.RIGHT);var o=t.getExteriorRing(),s=ct.removeRepeatedPoints(o.getCoordinates());if(this._distance<0&&this.isErodedCompletely(o,this._distance)||this._distance<=0&&s.length<3)return null;this.addPolygonRing(s,n,i,L.EXTERIOR,L.INTERIOR);for(var a=0;a<t.getNumInteriorRing();a++){var u=t.getInteriorRingN(a),f=ct.removeRepeatedPoints(u.getCoordinates());r._distance>0&&r.isErodedCompletely(u,-r._distance)||r.addPolygonRing(f,n,b.opposite(i),L.INTERIOR,L.EXTERIOR)}};qr.prototype.isTriangleErodedCompletely=function(t,r){var n=new Wt(t[0],t[1],t[2]),i=n.inCentre(),o=G.distancePointLine(i,n.p0,n.p1);return o<Math.abs(r)};qr.prototype.addLineString=function(t){if(this._distance<=0&&!this._curveBuilder.getBufferParameters().isSingleSided())return null;var r=ct.removeRepeatedPoints(t.getCoordinates()),n=this._curveBuilder.getLineCurve(r,this._distance);this.addCurve(n,L.EXTERIOR,L.INTERIOR)};qr.prototype.addCurve=function(t,r,n){if(t===null||t.length<2)return null;var i=new xe(t,new Kt(0,L.BOUNDARY,r,n));this._curveList.add(i)};qr.prototype.getCurves=function(){return this.add(this._inputGeom),this._curveList};qr.prototype.addPolygonRing=function(t,r,n,i,o){if(r===0&&t.length<bn.MINIMUM_VALID_SIZE)return null;var s=i,a=o;t.length>=bn.MINIMUM_VALID_SIZE&&G.isCCW(t)&&(s=o,a=i,n=b.opposite(n));var u=this._curveBuilder.getRingCurve(t,n,r);this.addCurve(u,s,a)};qr.prototype.add=function(t){if(t.isEmpty())return null;t instanceof Re?this.addPolygon(t):t instanceof ve?this.addLineString(t):t instanceof xr?this.addPoint(t):t instanceof Yo?this.addCollection(t):t instanceof Di?this.addCollection(t):t instanceof On?this.addCollection(t):t instanceof sr&&this.addCollection(t)};qr.prototype.isErodedCompletely=function(t,r){var n=t.getCoordinates();if(n.length<4)return r<0;if(n.length===4)return this.isTriangleErodedCompletely(n,r);var i=t.getEnvelopeInternal(),o=Math.min(i.getHeight(),i.getWidth());return r<0&&2*Math.abs(r)>o};qr.prototype.addCollection=function(t){for(var r=this,n=0;n<t.getNumGeometries();n++){var i=t.getGeometryN(n);r.add(i)}};qr.prototype.interfaces_=function(){return[]};qr.prototype.getClass=function(){return qr};var Jo=function(){};Jo.prototype.locate=function(t){};Jo.prototype.interfaces_=function(){return[]};Jo.prototype.getClass=function(){return Jo};var Rn=function(){this._parent=null,this._atStart=null,this._max=null,this._index=null,this._subcollectionIterator=null;var t=arguments[0];this._parent=t,this._atStart=!0,this._index=0,this._max=t.getNumGeometries()};Rn.prototype.next=function(){if(this._atStart)return this._atStart=!1,Rn.isAtomic(this._parent)&&this._index++,this._parent;if(this._subcollectionIterator!==null){if(this._subcollectionIterator.hasNext())return this._subcollectionIterator.next();this._subcollectionIterator=null}if(this._index>=this._max)throw new as;var t=this._parent.getGeometryN(this._index++);return t instanceof sr?(this._subcollectionIterator=new Rn(t),this._subcollectionIterator.next()):t};Rn.prototype.remove=function(){throw new Error(this.getClass().getName())};Rn.prototype.hasNext=function(){if(this._atStart)return!0;if(this._subcollectionIterator!==null){if(this._subcollectionIterator.hasNext())return!0;this._subcollectionIterator=null}return!(this._index>=this._max)};Rn.prototype.interfaces_=function(){return[ss]};Rn.prototype.getClass=function(){return Rn};Rn.isAtomic=function(t){return!(t instanceof sr)};var Nr=function(){this._geom=null;var t=arguments[0];this._geom=t};Nr.prototype.locate=function(t){return Nr.locate(t,this._geom)};Nr.prototype.interfaces_=function(){return[Jo]};Nr.prototype.getClass=function(){return Nr};Nr.isPointInRing=function(t,r){return r.getEnvelopeInternal().intersects(t)?G.isPointInRing(t,r.getCoordinates()):!1};Nr.containsPointInPolygon=function(t,r){if(r.isEmpty())return!1;var n=r.getExteriorRing();if(!Nr.isPointInRing(t,n))return!1;for(var i=0;i<r.getNumInteriorRing();i++){var o=r.getInteriorRingN(i);if(Nr.isPointInRing(t,o))return!1}return!0};Nr.containsPoint=function(t,r){if(r instanceof Re)return Nr.containsPointInPolygon(t,r);if(r instanceof sr)for(var n=new Rn(r);n.hasNext();){var i=n.next();if(i!==r&&Nr.containsPoint(t,i))return!0}return!1};Nr.locate=function(t,r){return r.isEmpty()?L.EXTERIOR:Nr.containsPoint(t,r)?L.INTERIOR:L.EXTERIOR};var Qe=function(){this._edgeMap=new Ke,this._edgeList=null,this._ptInAreaLocation=[L.NONE,L.NONE]};Qe.prototype.getNextCW=function(t){this.getEdges();var r=this._edgeList.indexOf(t),n=r-1;return r===0&&(n=this._edgeList.size()-1),this._edgeList.get(n)};Qe.prototype.propagateSideLabels=function(t){for(var r=L.NONE,n=this.iterator();n.hasNext();){var i=n.next(),o=i.getLabel();o.isArea(t)&&o.getLocation(t,b.LEFT)!==L.NONE&&(r=o.getLocation(t,b.LEFT))}if(r===L.NONE)return null;for(var s=r,a=this.iterator();a.hasNext();){var u=a.next(),f=u.getLabel();if(f.getLocation(t,b.ON)===L.NONE&&f.setLocation(t,b.ON,s),f.isArea(t)){var l=f.getLocation(t,b.LEFT),c=f.getLocation(t,b.RIGHT);if(c!==L.NONE){if(c!==s)throw new ti("side location conflict",u.getCoordinate());l===L.NONE&&ut.shouldNeverReachHere("found single null side (at "+u.getCoordinate()+")"),s=l}else ut.isTrue(f.getLocation(t,b.LEFT)===L.NONE,"found single null side"),f.setLocation(t,b.RIGHT,s),f.setLocation(t,b.LEFT,s)}}};Qe.prototype.getCoordinate=function(){var t=this.iterator();if(!t.hasNext())return null;var r=t.next();return r.getCoordinate()};Qe.prototype.print=function(t){qe.out.println("EdgeEndStar:   "+this.getCoordinate());for(var r=this.iterator();r.hasNext();){var n=r.next();n.print(t)}};Qe.prototype.isAreaLabelsConsistent=function(t){return this.computeEdgeEndLabels(t.getBoundaryNodeRule()),this.checkAreaLabelsConsistent(0)};Qe.prototype.checkAreaLabelsConsistent=function(t){var r=this.getEdges();if(r.size()<=0)return!0;var n=r.size()-1,i=r.get(n).getLabel(),o=i.getLocation(t,b.LEFT);ut.isTrue(o!==L.NONE,"Found unlabelled area edge");for(var s=o,a=this.iterator();a.hasNext();){var u=a.next(),f=u.getLabel();ut.isTrue(f.isArea(t),"Found non-area edge");var l=f.getLocation(t,b.LEFT),c=f.getLocation(t,b.RIGHT);if(l===c||c!==s)return!1;s=l}return!0};Qe.prototype.findIndex=function(t){var r=this;this.iterator();for(var n=0;n<this._edgeList.size();n++){var i=r._edgeList.get(n);if(i===t)return n}return-1};Qe.prototype.iterator=function(){return this.getEdges().iterator()};Qe.prototype.getEdges=function(){return this._edgeList===null&&(this._edgeList=new F(this._edgeMap.values())),this._edgeList};Qe.prototype.getLocation=function(t,r,n){return this._ptInAreaLocation[t]===L.NONE&&(this._ptInAreaLocation[t]=Nr.locate(r,n[t].getGeometry())),this._ptInAreaLocation[t]};Qe.prototype.toString=function(){var t=new Cn;t.append("EdgeEndStar:   "+this.getCoordinate()),t.append(`
`);for(var r=this.iterator();r.hasNext();){var n=r.next();t.append(n),t.append(`
`)}return t.toString()};Qe.prototype.computeEdgeEndLabels=function(t){for(var r=this.iterator();r.hasNext();){var n=r.next();n.computeLabel(t)}};Qe.prototype.computeLabelling=function(t){var r=this;this.computeEdgeEndLabels(t[0].getBoundaryNodeRule()),this.propagateSideLabels(0),this.propagateSideLabels(1);for(var n=[!1,!1],i=this.iterator();i.hasNext();)for(var o=i.next(),s=o.getLabel(),a=0;a<2;a++)s.isLine(a)&&s.getLocation(a)===L.BOUNDARY&&(n[a]=!0);for(var u=this.iterator();u.hasNext();)for(var f=u.next(),l=f.getLabel(),c=0;c<2;c++)if(l.isAnyNull(c)){var h=L.NONE;if(n[c])h=L.EXTERIOR;else{var p=f.getCoordinate();h=r.getLocation(c,p,t)}l.setAllLocationsIfNull(c,h)}};Qe.prototype.getDegree=function(){return this._edgeMap.size()};Qe.prototype.insertEdgeEnd=function(t,r){this._edgeMap.put(t,r),this._edgeList=null};Qe.prototype.interfaces_=function(){return[]};Qe.prototype.getClass=function(){return Qe};var TE=function(e){function t(){e.call(this),this._resultAreaEdgeList=null,this._label=null,this._SCANNING_FOR_INCOMING=1,this._LINKING_TO_OUTGOING=2}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.linkResultDirectedEdges=function(){var n=this;this.getResultAreaEdges();for(var i=null,o=null,s=this._SCANNING_FOR_INCOMING,a=0;a<this._resultAreaEdgeList.size();a++){var u=n._resultAreaEdgeList.get(a),f=u.getSym();if(u.getLabel().isArea())switch(i===null&&u.isInResult()&&(i=u),s){case n._SCANNING_FOR_INCOMING:if(!f.isInResult())continue;o=f,s=n._LINKING_TO_OUTGOING;break;case n._LINKING_TO_OUTGOING:if(!u.isInResult())continue;o.setNext(u),s=n._SCANNING_FOR_INCOMING;break}}if(s===this._LINKING_TO_OUTGOING){if(i===null)throw new ti("no outgoing dirEdge found",this.getCoordinate());ut.isTrue(i.isInResult(),"unable to link last incoming dirEdge"),o.setNext(i)}},t.prototype.insert=function(n){var i=n;this.insertEdgeEnd(i,i)},t.prototype.getRightmostEdge=function(){var n=this.getEdges(),i=n.size();if(i<1)return null;var o=n.get(0);if(i===1)return o;var s=n.get(i-1),a=o.getQuadrant(),u=s.getQuadrant();return jt.isNorthern(a)&&jt.isNorthern(u)?o:!jt.isNorthern(a)&&!jt.isNorthern(u)?s:o.getDy()!==0?o:s.getDy()!==0?s:(ut.shouldNeverReachHere("found two horizontal edges incident on node"),null)},t.prototype.print=function(n){qe.out.println("DirectedEdgeStar: "+this.getCoordinate());for(var i=this.iterator();i.hasNext();){var o=i.next();n.print("out "),o.print(n),n.println(),n.print("in "),o.getSym().print(n),n.println()}},t.prototype.getResultAreaEdges=function(){var n=this;if(this._resultAreaEdgeList!==null)return this._resultAreaEdgeList;this._resultAreaEdgeList=new F;for(var i=this.iterator();i.hasNext();){var o=i.next();(o.isInResult()||o.getSym().isInResult())&&n._resultAreaEdgeList.add(o)}return this._resultAreaEdgeList},t.prototype.updateLabelling=function(n){for(var i=this.iterator();i.hasNext();){var o=i.next(),s=o.getLabel();s.setAllLocationsIfNull(0,n.getLocation(0)),s.setAllLocationsIfNull(1,n.getLocation(1))}},t.prototype.linkAllDirectedEdges=function(){var n=this;this.getEdges();for(var i=null,o=null,s=this._edgeList.size()-1;s>=0;s--){var a=n._edgeList.get(s),u=a.getSym();o===null&&(o=u),i!==null&&u.setNext(i),i=a}o.setNext(i)},t.prototype.computeDepths=function(){var n=this;if(arguments.length===1){var i=arguments[0],o=this.findIndex(i),s=i.getDepth(b.LEFT),a=i.getDepth(b.RIGHT),u=this.computeDepths(o+1,this._edgeList.size(),s),f=this.computeDepths(0,o,u);if(f!==a)throw new ti("depth mismatch at "+i.getCoordinate())}else if(arguments.length===3){for(var l=arguments[0],c=arguments[1],h=arguments[2],p=h,v=l;v<c;v++){var y=n._edgeList.get(v);y.setEdgeDepths(b.RIGHT,p),p=y.getDepth(b.LEFT)}return p}},t.prototype.mergeSymLabels=function(){for(var n=this.iterator();n.hasNext();){var i=n.next(),o=i.getLabel();o.merge(i.getSym().getLabel())}},t.prototype.linkMinimalDirectedEdges=function(n){for(var i=this,o=null,s=null,a=this._SCANNING_FOR_INCOMING,u=this._resultAreaEdgeList.size()-1;u>=0;u--){var f=i._resultAreaEdgeList.get(u),l=f.getSym();switch(o===null&&f.getEdgeRing()===n&&(o=f),a){case i._SCANNING_FOR_INCOMING:if(l.getEdgeRing()!==n)continue;s=l,a=i._LINKING_TO_OUTGOING;break;case i._LINKING_TO_OUTGOING:if(f.getEdgeRing()!==n)continue;s.setNextMin(f),a=i._SCANNING_FOR_INCOMING;break}}a===this._LINKING_TO_OUTGOING&&(ut.isTrue(o!==null,"found null for first outgoing dirEdge"),ut.isTrue(o.getEdgeRing()===n,"unable to link last incoming dirEdge"),s.setNextMin(o))},t.prototype.getOutgoingDegree=function(){if(arguments.length===0){for(var n=0,i=this.iterator();i.hasNext();){var o=i.next();o.isInResult()&&n++}return n}else if(arguments.length===1){for(var s=arguments[0],a=0,u=this.iterator();u.hasNext();){var f=u.next();f.getEdgeRing()===s&&a++}return a}},t.prototype.getLabel=function(){return this._label},t.prototype.findCoveredLineEdges=function(){for(var n=L.NONE,i=this.iterator();i.hasNext();){var o=i.next(),s=o.getSym();if(!o.isLineEdge()){if(o.isInResult()){n=L.INTERIOR;break}if(s.isInResult()){n=L.EXTERIOR;break}}}if(n===L.NONE)return null;for(var a=n,u=this.iterator();u.hasNext();){var f=u.next(),l=f.getSym();f.isLineEdge()?f.getEdge().setCovered(a===L.INTERIOR):(f.isInResult()&&(a=L.EXTERIOR),l.isInResult()&&(a=L.INTERIOR))}},t.prototype.computeLabelling=function(n){var i=this;e.prototype.computeLabelling.call(this,n),this._label=new Kt(L.NONE);for(var o=this.iterator();o.hasNext();)for(var s=o.next(),a=s.getEdge(),u=a.getLabel(),f=0;f<2;f++){var l=u.getLocation(f);(l===L.INTERIOR||l===L.BOUNDARY)&&i._label.setLocation(f,L.INTERIOR)}},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(Qe),wg=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.createNode=function(n){return new hu(n,new TE)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(Vo),gi=function e(){this._pts=null,this._orientation=null;var t=arguments[0];this._pts=t,this._orientation=e.orientation(t)};gi.prototype.compareTo=function(t){var r=t,n=gi.compareOriented(this._pts,this._orientation,r._pts,r._orientation);return n};gi.prototype.interfaces_=function(){return[zr]};gi.prototype.getClass=function(){return gi};gi.orientation=function(t){return ct.increasingDirection(t)===1};gi.compareOriented=function(t,r,n,i){for(var o=r?1:-1,s=i?1:-1,a=r?t.length:-1,u=i?n.length:-1,f=r?0:t.length-1,l=i?0:n.length-1;;){var c=t[f].compareTo(n[l]);if(c!==0)return c;f+=o,l+=s;var h=f===a,p=l===u;if(h&&!p)return-1;if(!h&&p)return 1;if(h&&p)return 0}};var $r=function(){this._edges=new F,this._ocaMap=new Ke};$r.prototype.print=function(t){var r=this;t.print("MULTILINESTRING ( ");for(var n=0;n<this._edges.size();n++){var i=r._edges.get(n);n>0&&t.print(","),t.print("(");for(var o=i.getCoordinates(),s=0;s<o.length;s++)s>0&&t.print(","),t.print(o[s].x+" "+o[s].y);t.println(")")}t.print(")  ")};$r.prototype.addAll=function(t){for(var r=this,n=t.iterator();n.hasNext();)r.add(n.next())};$r.prototype.findEdgeIndex=function(t){for(var r=this,n=0;n<this._edges.size();n++)if(r._edges.get(n).equals(t))return n;return-1};$r.prototype.iterator=function(){return this._edges.iterator()};$r.prototype.getEdges=function(){return this._edges};$r.prototype.get=function(t){return this._edges.get(t)};$r.prototype.findEqualEdge=function(t){var r=new gi(t.getCoordinates()),n=this._ocaMap.get(r);return n};$r.prototype.add=function(t){this._edges.add(t);var r=new gi(t.getCoordinates());this._ocaMap.put(r,t)};$r.prototype.interfaces_=function(){return[]};$r.prototype.getClass=function(){return $r};var Bi=function(){};Bi.prototype.processIntersections=function(t,r,n,i){};Bi.prototype.isDone=function(){};Bi.prototype.interfaces_=function(){return[]};Bi.prototype.getClass=function(){return Bi};var Rr=function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._hasInterior=!1,this._properIntersectionPoint=null,this._li=null,this._isSelfIntersection=null,this.numIntersections=0,this.numInteriorIntersections=0,this.numProperIntersections=0,this.numTests=0;var t=arguments[0];this._li=t};Rr.prototype.isTrivialIntersection=function(t,r,n,i){if(t===n&&this._li.getIntersectionNum()===1){if(Rr.isAdjacentSegments(r,i))return!0;if(t.isClosed()){var o=t.size()-1;if(r===0&&i===o||i===0&&r===o)return!0}}return!1};Rr.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint};Rr.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior};Rr.prototype.getLineIntersector=function(){return this._li};Rr.prototype.hasProperIntersection=function(){return this._hasProper};Rr.prototype.processIntersections=function(t,r,n,i){if(t===n&&r===i)return null;this.numTests++;var o=t.getCoordinates()[r],s=t.getCoordinates()[r+1],a=n.getCoordinates()[i],u=n.getCoordinates()[i+1];this._li.computeIntersection(o,s,a,u),this._li.hasIntersection()&&(this.numIntersections++,this._li.isInteriorIntersection()&&(this.numInteriorIntersections++,this._hasInterior=!0),this.isTrivialIntersection(t,r,n,i)||(this._hasIntersection=!0,t.addIntersections(this._li,r,0),n.addIntersections(this._li,i,1),this._li.isProper()&&(this.numProperIntersections++,this._hasProper=!0,this._hasProperInterior=!0)))};Rr.prototype.hasIntersection=function(){return this._hasIntersection};Rr.prototype.isDone=function(){return!1};Rr.prototype.hasInteriorIntersection=function(){return this._hasInterior};Rr.prototype.interfaces_=function(){return[Bi]};Rr.prototype.getClass=function(){return Rr};Rr.isAdjacentSegments=function(t,r){return Math.abs(t-r)===1};var mn=function(){this.coord=null,this.segmentIndex=null,this.dist=null;var t=arguments[0],r=arguments[1],n=arguments[2];this.coord=new P(t),this.segmentIndex=r,this.dist=n};mn.prototype.getSegmentIndex=function(){return this.segmentIndex};mn.prototype.getCoordinate=function(){return this.coord};mn.prototype.print=function(t){t.print(this.coord),t.print(" seg # = "+this.segmentIndex),t.println(" dist = "+this.dist)};mn.prototype.compareTo=function(t){var r=t;return this.compare(r.segmentIndex,r.dist)};mn.prototype.isEndPoint=function(t){return this.segmentIndex===0&&this.dist===0||this.segmentIndex===t};mn.prototype.toString=function(){return this.coord+" seg # = "+this.segmentIndex+" dist = "+this.dist};mn.prototype.getDistance=function(){return this.dist};mn.prototype.compare=function(t,r){return this.segmentIndex<t?-1:this.segmentIndex>t?1:this.dist<r?-1:this.dist>r?1:0};mn.prototype.interfaces_=function(){return[zr]};mn.prototype.getClass=function(){return mn};var Fn=function(){this._nodeMap=new Ke,this.edge=null;var t=arguments[0];this.edge=t};Fn.prototype.print=function(t){t.println("Intersections:");for(var r=this.iterator();r.hasNext();){var n=r.next();n.print(t)}};Fn.prototype.iterator=function(){return this._nodeMap.values().iterator()};Fn.prototype.addSplitEdges=function(t){var r=this;this.addEndpoints();for(var n=this.iterator(),i=n.next();n.hasNext();){var o=n.next(),s=r.createSplitEdge(i,o);t.add(s),i=o}};Fn.prototype.addEndpoints=function(){var t=this.edge.pts.length-1;this.add(this.edge.pts[0],0,0),this.add(this.edge.pts[t],t,0)};Fn.prototype.createSplitEdge=function(t,r){var n=this,i=r.segmentIndex-t.segmentIndex+2,o=this.edge.pts[r.segmentIndex],s=r.dist>0||!r.coord.equals2D(o);s||i--;var a=new Array(i).fill(null),u=0;a[u++]=new P(t.coord);for(var f=t.segmentIndex+1;f<=r.segmentIndex;f++)a[u++]=n.edge.pts[f];return s&&(a[u]=r.coord),new Ta(a,new Kt(this.edge._label))};Fn.prototype.add=function(t,r,n){var i=new mn(t,r,n),o=this._nodeMap.get(i);return o!==null?o:(this._nodeMap.put(i,i),i)};Fn.prototype.isIntersection=function(t){for(var r=this.iterator();r.hasNext();){var n=r.next();if(n.coord.equals(t))return!0}return!1};Fn.prototype.interfaces_=function(){return[]};Fn.prototype.getClass=function(){return Fn};var Gi=function(){};Gi.prototype.getChainStartIndices=function(t){var r=this,n=0,i=new F;i.add(new hn(n));do{var o=r.findChainEnd(t,n);i.add(new hn(o)),n=o}while(n<t.length-1);var s=Gi.toIntArray(i);return s};Gi.prototype.findChainEnd=function(t,r){for(var n=jt.quadrant(t[r],t[r+1]),i=r+1;i<t.length;){var o=jt.quadrant(t[i-1],t[i]);if(o!==n)break;i++}return i-1};Gi.prototype.interfaces_=function(){return[]};Gi.prototype.getClass=function(){return Gi};Gi.toIntArray=function(t){for(var r=new Array(t.size()).fill(null),n=0;n<r.length;n++)r[n]=t.get(n).intValue();return r};var ri=function(){this.e=null,this.pts=null,this.startIndex=null,this.env1=new Y,this.env2=new Y;var t=arguments[0];this.e=t,this.pts=t.getCoordinates();var r=new Gi;this.startIndex=r.getChainStartIndices(this.pts)};ri.prototype.getCoordinates=function(){return this.pts};ri.prototype.getMaxX=function(t){var r=this.pts[this.startIndex[t]].x,n=this.pts[this.startIndex[t+1]].x;return r>n?r:n};ri.prototype.getMinX=function(t){var r=this.pts[this.startIndex[t]].x,n=this.pts[this.startIndex[t+1]].x;return r<n?r:n};ri.prototype.computeIntersectsForChain=function(){if(arguments.length===4){var t=arguments[0],r=arguments[1],n=arguments[2],i=arguments[3];this.computeIntersectsForChain(this.startIndex[t],this.startIndex[t+1],r,r.startIndex[n],r.startIndex[n+1],i)}else if(arguments.length===6){var o=arguments[0],s=arguments[1],a=arguments[2],u=arguments[3],f=arguments[4],l=arguments[5],c=this.pts[o],h=this.pts[s],p=a.pts[u],v=a.pts[f];if(s-o===1&&f-u===1)return l.addIntersections(this.e,o,a.e,u),null;if(this.env1.init(c,h),this.env2.init(p,v),!this.env1.intersects(this.env2))return null;var y=Math.trunc((o+s)/2),E=Math.trunc((u+f)/2);o<y&&(u<E&&this.computeIntersectsForChain(o,y,a,u,E,l),E<f&&this.computeIntersectsForChain(o,y,a,E,f,l)),y<s&&(u<E&&this.computeIntersectsForChain(y,s,a,u,E,l),E<f&&this.computeIntersectsForChain(y,s,a,E,f,l))}};ri.prototype.getStartIndexes=function(){return this.startIndex};ri.prototype.computeIntersects=function(t,r){for(var n=this,i=0;i<this.startIndex.length-1;i++)for(var o=0;o<t.startIndex.length-1;o++)n.computeIntersectsForChain(i,t,o,r)};ri.prototype.interfaces_=function(){return[]};ri.prototype.getClass=function(){return ri};var ke=function e(){var t=this;this._depth=Array(2).fill().map(function(){return Array(3)});for(var r=0;r<2;r++)for(var n=0;n<3;n++)t._depth[r][n]=e.NULL_VALUE},Ig={NULL_VALUE:{configurable:!0}};ke.prototype.getDepth=function(t,r){return this._depth[t][r]};ke.prototype.setDepth=function(t,r,n){this._depth[t][r]=n};ke.prototype.isNull=function(){var t=this;if(arguments.length===0){for(var r=0;r<2;r++)for(var n=0;n<3;n++)if(t._depth[r][n]!==ke.NULL_VALUE)return!1;return!0}else if(arguments.length===1){var i=arguments[0];return this._depth[i][1]===ke.NULL_VALUE}else if(arguments.length===2){var o=arguments[0],s=arguments[1];return this._depth[o][s]===ke.NULL_VALUE}};ke.prototype.normalize=function(){for(var t=this,r=0;r<2;r++)if(!t.isNull(r)){var n=t._depth[r][1];t._depth[r][2]<n&&(n=t._depth[r][2]),n<0&&(n=0);for(var i=1;i<3;i++){var o=0;t._depth[r][i]>n&&(o=1),t._depth[r][i]=o}}};ke.prototype.getDelta=function(t){return this._depth[t][b.RIGHT]-this._depth[t][b.LEFT]};ke.prototype.getLocation=function(t,r){return this._depth[t][r]<=0?L.EXTERIOR:L.INTERIOR};ke.prototype.toString=function(){return"A: "+this._depth[0][1]+","+this._depth[0][2]+" B: "+this._depth[1][1]+","+this._depth[1][2]};ke.prototype.add=function(){var t=this;if(arguments.length===1)for(var r=arguments[0],n=0;n<2;n++)for(var i=1;i<3;i++){var o=r.getLocation(n,i);(o===L.EXTERIOR||o===L.INTERIOR)&&(t.isNull(n,i)?t._depth[n][i]=ke.depthAtLocation(o):t._depth[n][i]+=ke.depthAtLocation(o))}else if(arguments.length===3){var s=arguments[0],a=arguments[1],u=arguments[2];u===L.INTERIOR&&this._depth[s][a]++}};ke.prototype.interfaces_=function(){return[]};ke.prototype.getClass=function(){return ke};ke.depthAtLocation=function(t){return t===L.EXTERIOR?0:t===L.INTERIOR?1:ke.NULL_VALUE};Ig.NULL_VALUE.get=function(){return-1};Object.defineProperties(ke,Ig);var Ta=function(e){function t(){if(e.call(this),this.pts=null,this._env=null,this.eiList=new Fn(this),this._name=null,this._mce=null,this._isIsolated=!0,this._depth=new ke,this._depthDelta=0,arguments.length===1){var r=arguments[0];t.call(this,r,null)}else if(arguments.length===2){var n=arguments[0],i=arguments[1];this.pts=n,this._label=i}}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.getDepth=function(){return this._depth},t.prototype.getCollapsedEdge=function(){var n=new Array(2).fill(null);n[0]=this.pts[0],n[1]=this.pts[1];var i=new t(n,Kt.toLineLabel(this._label));return i},t.prototype.isIsolated=function(){return this._isIsolated},t.prototype.getCoordinates=function(){return this.pts},t.prototype.setIsolated=function(n){this._isIsolated=n},t.prototype.setName=function(n){this._name=n},t.prototype.equals=function(n){var i=this;if(!(n instanceof t))return!1;var o=n;if(this.pts.length!==o.pts.length)return!1;for(var s=!0,a=!0,u=this.pts.length,f=0;f<this.pts.length;f++)if(i.pts[f].equals2D(o.pts[f])||(s=!1),i.pts[f].equals2D(o.pts[--u])||(a=!1),!s&&!a)return!1;return!0},t.prototype.getCoordinate=function(){if(arguments.length===0)return this.pts.length>0?this.pts[0]:null;if(arguments.length===1){var n=arguments[0];return this.pts[n]}},t.prototype.print=function(n){var i=this;n.print("edge "+this._name+": "),n.print("LINESTRING (");for(var o=0;o<this.pts.length;o++)o>0&&n.print(","),n.print(i.pts[o].x+" "+i.pts[o].y);n.print(")  "+this._label+" "+this._depthDelta)},t.prototype.computeIM=function(n){t.updateIM(this._label,n)},t.prototype.isCollapsed=function(){return!this._label.isArea()||this.pts.length!==3?!1:!!this.pts[0].equals(this.pts[2])},t.prototype.isClosed=function(){return this.pts[0].equals(this.pts[this.pts.length-1])},t.prototype.getMaximumSegmentIndex=function(){return this.pts.length-1},t.prototype.getDepthDelta=function(){return this._depthDelta},t.prototype.getNumPoints=function(){return this.pts.length},t.prototype.printReverse=function(n){var i=this;n.print("edge "+this._name+": ");for(var o=this.pts.length-1;o>=0;o--)n.print(i.pts[o]+" ");n.println("")},t.prototype.getMonotoneChainEdge=function(){return this._mce===null&&(this._mce=new ri(this)),this._mce},t.prototype.getEnvelope=function(){var n=this;if(this._env===null){this._env=new Y;for(var i=0;i<this.pts.length;i++)n._env.expandToInclude(n.pts[i])}return this._env},t.prototype.addIntersection=function(n,i,o,s){var a=new P(n.getIntersection(s)),u=i,f=n.getEdgeDistance(o,s),l=u+1;if(l<this.pts.length){var c=this.pts[l];a.equals2D(c)&&(u=l,f=0)}this.eiList.add(a,u,f)},t.prototype.toString=function(){var n=this,i=new Cn;i.append("edge "+this._name+": "),i.append("LINESTRING (");for(var o=0;o<this.pts.length;o++)o>0&&i.append(","),i.append(n.pts[o].x+" "+n.pts[o].y);return i.append(")  "+this._label+" "+this._depthDelta),i.toString()},t.prototype.isPointwiseEqual=function(n){var i=this;if(this.pts.length!==n.pts.length)return!1;for(var o=0;o<this.pts.length;o++)if(!i.pts[o].equals2D(n.pts[o]))return!1;return!0},t.prototype.setDepthDelta=function(n){this._depthDelta=n},t.prototype.getEdgeIntersectionList=function(){return this.eiList},t.prototype.addIntersections=function(n,i,o){for(var s=this,a=0;a<n.getIntersectionNum();a++)s.addIntersection(n,i,o,a)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t.updateIM=function(){if(arguments.length===2){var n=arguments[0],i=arguments[1];i.setAtLeastIfValid(n.getLocation(0,b.ON),n.getLocation(1,b.ON),1),n.isArea()&&(i.setAtLeastIfValid(n.getLocation(0,b.LEFT),n.getLocation(1,b.LEFT),2),i.setAtLeastIfValid(n.getLocation(0,b.RIGHT),n.getLocation(1,b.RIGHT),2))}else return e.prototype.updateIM.apply(this,arguments)},t}(Mr),ir=function(t){this._workingPrecisionModel=null,this._workingNoder=null,this._geomFact=null,this._graph=null,this._edgeList=new $r,this._bufParams=t||null};ir.prototype.setWorkingPrecisionModel=function(t){this._workingPrecisionModel=t};ir.prototype.insertUniqueEdge=function(t){var r=this._edgeList.findEqualEdge(t);if(r!==null){var n=r.getLabel(),i=t.getLabel();r.isPointwiseEqual(t)||(i=new Kt(t.getLabel()),i.flip()),n.merge(i);var o=ir.depthDelta(i),s=r.getDepthDelta(),a=s+o;r.setDepthDelta(a)}else this._edgeList.add(t),t.setDepthDelta(ir.depthDelta(t.getLabel()))};ir.prototype.buildSubgraphs=function(t,r){for(var n=new F,i=t.iterator();i.hasNext();){var o=i.next(),s=o.getRightmostCoordinate(),a=new ro(n),u=a.getDepth(s);o.computeDepth(u),o.findResultEdges(),n.add(o),r.add(o.getDirectedEdges(),o.getNodes())}};ir.prototype.createSubgraphs=function(t){for(var r=new F,n=t.getNodes().iterator();n.hasNext();){var i=n.next();if(!i.isVisited()){var o=new ar;o.create(i),r.add(o)}}return jr.sort(r,jr.reverseOrder()),r};ir.prototype.createEmptyResultGeometry=function(){var t=this._geomFact.createPolygon();return t};ir.prototype.getNoder=function(t){if(this._workingNoder!==null)return this._workingNoder;var r=new al,n=new Yi;return n.setPrecisionModel(t),r.setSegmentIntersector(new Rr(n)),r};ir.prototype.buffer=function(t,r){var n=this._workingPrecisionModel;n===null&&(n=t.getPrecisionModel()),this._geomFact=t.getFactory();var i=new vr(n,this._bufParams),o=new qr(t,r,i),s=o.getCurves();if(s.size()<=0)return this.createEmptyResultGeometry();this.computeNodedEdges(s,n),this._graph=new he(new wg),this._graph.addEdges(this._edgeList.getEdges());var a=this.createSubgraphs(this._graph),u=new wr(this._geomFact);this.buildSubgraphs(a,u);var f=u.getPolygons();if(f.size()<=0)return this.createEmptyResultGeometry();var l=this._geomFact.buildGeometry(f);return l};ir.prototype.computeNodedEdges=function(t,r){var n=this,i=this.getNoder(r);i.computeNodes(t);for(var o=i.getNodedSubstrings(),s=o.iterator();s.hasNext();){var a=s.next(),u=a.getCoordinates();if(!(u.length===2&&u[0].equals2D(u[1]))){var f=a.getData(),l=new Ta(a.getCoordinates(),new Kt(f));n.insertUniqueEdge(l)}}};ir.prototype.setNoder=function(t){this._workingNoder=t};ir.prototype.interfaces_=function(){return[]};ir.prototype.getClass=function(){return ir};ir.depthDelta=function(t){var r=t.getLocation(0,b.LEFT),n=t.getLocation(0,b.RIGHT);return r===L.INTERIOR&&n===L.EXTERIOR?1:r===L.EXTERIOR&&n===L.INTERIOR?-1:0};ir.convertSegStrings=function(t){for(var r=new lt,n=new F;t.hasNext();){var i=t.next(),o=r.createLineString(i.getCoordinates());n.add(o)}return r.buildGeometry(n)};var vi=function(){if(this._noder=null,this._scaleFactor=null,this._offsetX=null,this._offsetY=null,this._isScaled=!1,arguments.length===2){var t=arguments[0],r=arguments[1];this._noder=t,this._scaleFactor=r,this._offsetX=0,this._offsetY=0,this._isScaled=!this.isIntegerPrecision()}else if(arguments.length===4){var n=arguments[0],i=arguments[1],o=arguments[2],s=arguments[3];this._noder=n,this._scaleFactor=i,this._offsetX=o,this._offsetY=s,this._isScaled=!this.isIntegerPrecision()}};vi.prototype.rescale=function(){var t=this;if(tt(arguments[0],Se))for(var r=arguments[0],n=r.iterator();n.hasNext();){var i=n.next();t.rescale(i.getCoordinates())}else if(arguments[0]instanceof Array){for(var o=arguments[0],s=0;s<o.length;s++)o[s].x=o[s].x/t._scaleFactor+t._offsetX,o[s].y=o[s].y/t._scaleFactor+t._offsetY;o.length===2&&o[0].equals2D(o[1])&&qe.out.println(o)}};vi.prototype.scale=function(){var t=this;if(tt(arguments[0],Se)){for(var r=arguments[0],n=new F,i=r.iterator();i.hasNext();){var o=i.next();n.add(new xe(t.scale(o.getCoordinates()),o.getData()))}return n}else if(arguments[0]instanceof Array){for(var s=arguments[0],a=new Array(s.length).fill(null),u=0;u<s.length;u++)a[u]=new P(Math.round((s[u].x-t._offsetX)*t._scaleFactor),Math.round((s[u].y-t._offsetY)*t._scaleFactor),s[u].z);var f=ct.removeRepeatedPoints(a);return f}};vi.prototype.isIntegerPrecision=function(){return this._scaleFactor===1};vi.prototype.getNodedSubstrings=function(){var t=this._noder.getNodedSubstrings();return this._isScaled&&this.rescale(t),t};vi.prototype.computeNodes=function(t){var r=t;this._isScaled&&(r=this.scale(t)),this._noder.computeNodes(r)};vi.prototype.interfaces_=function(){return[Ti]};vi.prototype.getClass=function(){return vi};var _n=function(){this._li=new Yi,this._segStrings=null;var t=arguments[0];this._segStrings=t},Cg={fact:{configurable:!0}};_n.prototype.checkEndPtVertexIntersections=function(){var t=this;if(arguments.length===0)for(var r=this._segStrings.iterator();r.hasNext();){var n=r.next(),i=n.getCoordinates();t.checkEndPtVertexIntersections(i[0],t._segStrings),t.checkEndPtVertexIntersections(i[i.length-1],t._segStrings)}else if(arguments.length===2){for(var o=arguments[0],s=arguments[1],a=s.iterator();a.hasNext();)for(var u=a.next(),f=u.getCoordinates(),l=1;l<f.length-1;l++)if(f[l].equals(o))throw new jn("found endpt/interior pt intersection at index "+l+" :pt "+o)}};_n.prototype.checkInteriorIntersections=function(){var t=this;if(arguments.length===0)for(var r=this._segStrings.iterator();r.hasNext();)for(var n=r.next(),i=this._segStrings.iterator();i.hasNext();){var o=i.next();t.checkInteriorIntersections(n,o)}else if(arguments.length===2)for(var s=arguments[0],a=arguments[1],u=s.getCoordinates(),f=a.getCoordinates(),l=0;l<u.length-1;l++)for(var c=0;c<f.length-1;c++)t.checkInteriorIntersections(s,l,a,c);else if(arguments.length===4){var h=arguments[0],p=arguments[1],v=arguments[2],y=arguments[3];if(h===v&&p===y)return null;var E=h.getCoordinates()[p],x=h.getCoordinates()[p+1],g=v.getCoordinates()[y],d=v.getCoordinates()[y+1];if(this._li.computeIntersection(E,x,g,d),this._li.hasIntersection()&&(this._li.isProper()||this.hasInteriorIntersection(this._li,E,x)||this.hasInteriorIntersection(this._li,g,d)))throw new jn("found non-noded intersection at "+E+"-"+x+" and "+g+"-"+d)}};_n.prototype.checkValid=function(){this.checkEndPtVertexIntersections(),this.checkInteriorIntersections(),this.checkCollapses()};_n.prototype.checkCollapses=function(){var t=this;if(arguments.length===0)for(var r=this._segStrings.iterator();r.hasNext();){var n=r.next();t.checkCollapses(n)}else if(arguments.length===1)for(var i=arguments[0],o=i.getCoordinates(),s=0;s<o.length-2;s++)t.checkCollapse(o[s],o[s+1],o[s+2])};_n.prototype.hasInteriorIntersection=function(t,r,n){for(var i=0;i<t.getIntersectionNum();i++){var o=t.getIntersection(i);if(!(o.equals(r)||o.equals(n)))return!0}return!1};_n.prototype.checkCollapse=function(t,r,n){if(t.equals(n))throw new jn("found non-noded collapse at "+_n.fact.createLineString([t,r,n]))};_n.prototype.interfaces_=function(){return[]};_n.prototype.getClass=function(){return _n};Cg.fact.get=function(){return new lt};Object.defineProperties(_n,Cg);var dr=function(){this._li=null,this._pt=null,this._originalPt=null,this._ptScaled=null,this._p0Scaled=null,this._p1Scaled=null,this._scaleFactor=null,this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,this._corner=new Array(4).fill(null),this._safeEnv=null;var t=arguments[0],r=arguments[1],n=arguments[2];if(this._originalPt=t,this._pt=t,this._scaleFactor=r,this._li=n,r<=0)throw new le("Scale factor must be non-zero");r!==1&&(this._pt=new P(this.scale(t.x),this.scale(t.y)),this._p0Scaled=new P,this._p1Scaled=new P),this.initCorners(this._pt)},Sg={SAFE_ENV_EXPANSION_FACTOR:{configurable:!0}};dr.prototype.intersectsScaled=function(t,r){var n=Math.min(t.x,r.x),i=Math.max(t.x,r.x),o=Math.min(t.y,r.y),s=Math.max(t.y,r.y),a=this._maxx<n||this._minx>i||this._maxy<o||this._miny>s;if(a)return!1;var u=this.intersectsToleranceSquare(t,r);return ut.isTrue(!(a&&u),"Found bad envelope test"),u};dr.prototype.initCorners=function(t){var r=.5;this._minx=t.x-r,this._maxx=t.x+r,this._miny=t.y-r,this._maxy=t.y+r,this._corner[0]=new P(this._maxx,this._maxy),this._corner[1]=new P(this._minx,this._maxy),this._corner[2]=new P(this._minx,this._miny),this._corner[3]=new P(this._maxx,this._miny)};dr.prototype.intersects=function(t,r){return this._scaleFactor===1?this.intersectsScaled(t,r):(this.copyScaled(t,this._p0Scaled),this.copyScaled(r,this._p1Scaled),this.intersectsScaled(this._p0Scaled,this._p1Scaled))};dr.prototype.scale=function(t){return Math.round(t*this._scaleFactor)};dr.prototype.getCoordinate=function(){return this._originalPt};dr.prototype.copyScaled=function(t,r){r.x=this.scale(t.x),r.y=this.scale(t.y)};dr.prototype.getSafeEnvelope=function(){if(this._safeEnv===null){var t=dr.SAFE_ENV_EXPANSION_FACTOR/this._scaleFactor;this._safeEnv=new Y(this._originalPt.x-t,this._originalPt.x+t,this._originalPt.y-t,this._originalPt.y+t)}return this._safeEnv};dr.prototype.intersectsPixelClosure=function(t,r){return this._li.computeIntersection(t,r,this._corner[0],this._corner[1]),!!(this._li.hasIntersection()||(this._li.computeIntersection(t,r,this._corner[1],this._corner[2]),this._li.hasIntersection())||(this._li.computeIntersection(t,r,this._corner[2],this._corner[3]),this._li.hasIntersection())||(this._li.computeIntersection(t,r,this._corner[3],this._corner[0]),this._li.hasIntersection()))};dr.prototype.intersectsToleranceSquare=function(t,r){var n=!1,i=!1;return this._li.computeIntersection(t,r,this._corner[0],this._corner[1]),!!(this._li.isProper()||(this._li.computeIntersection(t,r,this._corner[1],this._corner[2]),this._li.isProper())||(this._li.hasIntersection()&&(n=!0),this._li.computeIntersection(t,r,this._corner[2],this._corner[3]),this._li.isProper())||(this._li.hasIntersection()&&(i=!0),this._li.computeIntersection(t,r,this._corner[3],this._corner[0]),this._li.isProper())||n&&i||t.equals(this._pt)||r.equals(this._pt))};dr.prototype.addSnappedNode=function(t,r){var n=t.getCoordinate(r),i=t.getCoordinate(r+1);return this.intersects(n,i)?(t.addIntersection(this.getCoordinate(),r),!0):!1};dr.prototype.interfaces_=function(){return[]};dr.prototype.getClass=function(){return dr};Sg.SAFE_ENV_EXPANSION_FACTOR.get=function(){return .75};Object.defineProperties(dr,Sg);var Hs=function(){this.tempEnv1=new Y,this.selectedSegment=new H};Hs.prototype.select=function(){if(arguments.length!==1){if(arguments.length===2){var t=arguments[0],r=arguments[1];t.getLineSegment(r,this.selectedSegment),this.select(this.selectedSegment)}}};Hs.prototype.interfaces_=function(){return[]};Hs.prototype.getClass=function(){return Hs};var Ko=function(){this._index=null;var t=arguments[0];this._index=t},Ng={HotPixelSnapAction:{configurable:!0}};Ko.prototype.snap=function(){if(arguments.length===1){var t=arguments[0];return this.snap(t,null,-1)}else if(arguments.length===3){var r=arguments[0],n=arguments[1],i=arguments[2],o=r.getSafeEnvelope(),s=new Pg(r,n,i);return this._index.query(o,{interfaces_:function(){return[hi]},visitItem:function(a){var u=a;u.select(o,s)}}),s.isNodeAdded()}};Ko.prototype.interfaces_=function(){return[]};Ko.prototype.getClass=function(){return Ko};Ng.HotPixelSnapAction.get=function(){return Pg};Object.defineProperties(Ko,Ng);var Pg=function(e){function t(){e.call(this),this._hotPixel=null,this._parentEdge=null,this._hotPixelVertexIndex=null,this._isNodeAdded=!1;var r=arguments[0],n=arguments[1],i=arguments[2];this._hotPixel=r,this._parentEdge=n,this._hotPixelVertexIndex=i}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.isNodeAdded=function(){return this._isNodeAdded},t.prototype.select=function(){if(arguments.length===2){var n=arguments[0],i=arguments[1],o=n.getContext();if(this._parentEdge!==null&&o===this._parentEdge&&i===this._hotPixelVertexIndex)return null;this._isNodeAdded=this._hotPixel.addSnappedNode(o,i)}else return e.prototype.select.apply(this,arguments)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(Hs),no=function(){this._li=null,this._interiorIntersections=null;var t=arguments[0];this._li=t,this._interiorIntersections=new F};no.prototype.processIntersections=function(t,r,n,i){var o=this;if(t===n&&r===i)return null;var s=t.getCoordinates()[r],a=t.getCoordinates()[r+1],u=n.getCoordinates()[i],f=n.getCoordinates()[i+1];if(this._li.computeIntersection(s,a,u,f),this._li.hasIntersection()&&this._li.isInteriorIntersection()){for(var l=0;l<this._li.getIntersectionNum();l++)o._interiorIntersections.add(o._li.getIntersection(l));t.addIntersections(this._li,r,0),n.addIntersections(this._li,i,1)}};no.prototype.isDone=function(){return!1};no.prototype.getInteriorIntersections=function(){return this._interiorIntersections};no.prototype.interfaces_=function(){return[Bi]};no.prototype.getClass=function(){return no};var Bn=function(){this._pm=null,this._li=null,this._scaleFactor=null,this._noder=null,this._pointSnapper=null,this._nodedSegStrings=null;var t=arguments[0];this._pm=t,this._li=new Yi,this._li.setPrecisionModel(t),this._scaleFactor=t.getScale()};Bn.prototype.checkCorrectness=function(t){var r=xe.getNodedSubstrings(t),n=new _n(r);try{n.checkValid()}catch(i){if(i instanceof lg)i.printStackTrace();else throw i}finally{}};Bn.prototype.getNodedSubstrings=function(){return xe.getNodedSubstrings(this._nodedSegStrings)};Bn.prototype.snapRound=function(t,r){var n=this.findInteriorIntersections(t,r);this.computeIntersectionSnaps(n),this.computeVertexSnaps(t)};Bn.prototype.findInteriorIntersections=function(t,r){var n=new no(r);return this._noder.setSegmentIntersector(n),this._noder.computeNodes(t),n.getInteriorIntersections()};Bn.prototype.computeVertexSnaps=function(){var t=this;if(tt(arguments[0],Se))for(var r=arguments[0],n=r.iterator();n.hasNext();){var i=n.next();t.computeVertexSnaps(i)}else if(arguments[0]instanceof xe)for(var o=arguments[0],s=o.getCoordinates(),a=0;a<s.length;a++){var u=new dr(s[a],t._scaleFactor,t._li),f=t._pointSnapper.snap(u,o,a);f&&o.addIntersection(s[a],a)}};Bn.prototype.computeNodes=function(t){this._nodedSegStrings=t,this._noder=new al,this._pointSnapper=new Ko(this._noder.getIndex()),this.snapRound(t,this._li)};Bn.prototype.computeIntersectionSnaps=function(t){for(var r=this,n=t.iterator();n.hasNext();){var i=n.next(),o=new dr(i,r._scaleFactor,r._li);r._pointSnapper.snap(o)}};Bn.prototype.interfaces_=function(){return[Ti]};Bn.prototype.getClass=function(){return Bn};var Ge=function(){if(this._argGeom=null,this._distance=null,this._bufParams=new Vt,this._resultGeometry=null,this._saveException=null,arguments.length===1){var t=arguments[0];this._argGeom=t}else if(arguments.length===2){var r=arguments[0],n=arguments[1];this._argGeom=r,this._bufParams=n}},us={CAP_ROUND:{configurable:!0},CAP_BUTT:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},MAX_PRECISION_DIGITS:{configurable:!0}};Ge.prototype.bufferFixedPrecision=function(t){var r=new vi(new Bn(new Ht(1)),t.getScale()),n=new ir(this._bufParams);n.setWorkingPrecisionModel(t),n.setNoder(r),this._resultGeometry=n.buffer(this._argGeom,this._distance)};Ge.prototype.bufferReducedPrecision=function(){var t=this;if(arguments.length===0){for(var r=Ge.MAX_PRECISION_DIGITS;r>=0;r--){try{t.bufferReducedPrecision(r)}catch(s){if(s instanceof ti)t._saveException=s;else throw s}finally{}if(t._resultGeometry!==null)return null}throw this._saveException}else if(arguments.length===1){var n=arguments[0],i=Ge.precisionScaleFactor(this._argGeom,this._distance,n),o=new Ht(i);this.bufferFixedPrecision(o)}};Ge.prototype.computeGeometry=function(){if(this.bufferOriginalPrecision(),this._resultGeometry!==null)return null;var t=this._argGeom.getFactory().getPrecisionModel();t.getType()===Ht.FIXED?this.bufferFixedPrecision(t):this.bufferReducedPrecision()};Ge.prototype.setQuadrantSegments=function(t){this._bufParams.setQuadrantSegments(t)};Ge.prototype.bufferOriginalPrecision=function(){try{var t=new ir(this._bufParams);this._resultGeometry=t.buffer(this._argGeom,this._distance)}catch(r){if(r instanceof jn)this._saveException=r;else throw r}finally{}};Ge.prototype.getResultGeometry=function(t){return this._distance=t,this.computeGeometry(),this._resultGeometry};Ge.prototype.setEndCapStyle=function(t){this._bufParams.setEndCapStyle(t)};Ge.prototype.interfaces_=function(){return[]};Ge.prototype.getClass=function(){return Ge};Ge.bufferOp=function(){if(arguments.length===2){var t=arguments[0],r=arguments[1],n=new Ge(t),i=n.getResultGeometry(r);return i}else if(arguments.length===3){if(Number.isInteger(arguments[2])&&arguments[0]instanceof $&&typeof arguments[1]=="number"){var o=arguments[0],s=arguments[1],a=arguments[2],u=new Ge(o);u.setQuadrantSegments(a);var f=u.getResultGeometry(s);return f}else if(arguments[2]instanceof Vt&&arguments[0]instanceof $&&typeof arguments[1]=="number"){var l=arguments[0],c=arguments[1],h=arguments[2],p=new Ge(l,h),v=p.getResultGeometry(c);return v}}else if(arguments.length===4){var y=arguments[0],E=arguments[1],x=arguments[2],g=arguments[3],d=new Ge(y);d.setQuadrantSegments(x),d.setEndCapStyle(g);var _=d.getResultGeometry(E);return _}};Ge.precisionScaleFactor=function(t,r,n){var i=t.getEnvelopeInternal(),o=Lr.max(Math.abs(i.getMaxX()),Math.abs(i.getMaxY()),Math.abs(i.getMinX()),Math.abs(i.getMinY())),s=r>0?r:0,a=o+2*s,u=Math.trunc(Math.log(a)/Math.log(10)+1),f=n-u,l=Math.pow(10,f);return l};us.CAP_ROUND.get=function(){return Vt.CAP_ROUND};us.CAP_BUTT.get=function(){return Vt.CAP_FLAT};us.CAP_FLAT.get=function(){return Vt.CAP_FLAT};us.CAP_SQUARE.get=function(){return Vt.CAP_SQUARE};us.MAX_PRECISION_DIGITS.get=function(){return 12};Object.defineProperties(Ge,us);var er=function(){this._pt=[new P,new P],this._distance=st.NaN,this._isNull=!0};er.prototype.getCoordinates=function(){return this._pt};er.prototype.getCoordinate=function(t){return this._pt[t]};er.prototype.setMinimum=function(){if(arguments.length===1){var t=arguments[0];this.setMinimum(t._pt[0],t._pt[1])}else if(arguments.length===2){var r=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(r,n),null;var i=r.distance(n);i<this._distance&&this.initialize(r,n,i)}};er.prototype.initialize=function(){if(arguments.length===0)this._isNull=!0;else if(arguments.length===2){var t=arguments[0],r=arguments[1];this._pt[0].setCoordinate(t),this._pt[1].setCoordinate(r),this._distance=t.distance(r),this._isNull=!1}else if(arguments.length===3){var n=arguments[0],i=arguments[1],o=arguments[2];this._pt[0].setCoordinate(n),this._pt[1].setCoordinate(i),this._distance=o,this._isNull=!1}};er.prototype.getDistance=function(){return this._distance};er.prototype.setMaximum=function(){if(arguments.length===1){var t=arguments[0];this.setMaximum(t._pt[0],t._pt[1])}else if(arguments.length===2){var r=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(r,n),null;var i=r.distance(n);i>this._distance&&this.initialize(r,n,i)}};er.prototype.interfaces_=function(){return[]};er.prototype.getClass=function(){return er};var Ln=function(){};Ln.prototype.interfaces_=function(){return[]};Ln.prototype.getClass=function(){return Ln};Ln.computeDistance=function(){if(arguments[2]instanceof er&&arguments[0]instanceof ve&&arguments[1]instanceof P)for(var t=arguments[0],r=arguments[1],n=arguments[2],i=t.getCoordinates(),o=new H,s=0;s<i.length-1;s++){o.setCoordinates(i[s],i[s+1]);var a=o.closestPoint(r);n.setMinimum(a,r)}else if(arguments[2]instanceof er&&arguments[0]instanceof Re&&arguments[1]instanceof P){var u=arguments[0],f=arguments[1],l=arguments[2];Ln.computeDistance(u.getExteriorRing(),f,l);for(var c=0;c<u.getNumInteriorRing();c++)Ln.computeDistance(u.getInteriorRingN(c),f,l)}else if(arguments[2]instanceof er&&arguments[0]instanceof $&&arguments[1]instanceof P){var h=arguments[0],p=arguments[1],v=arguments[2];if(h instanceof ve)Ln.computeDistance(h,p,v);else if(h instanceof Re)Ln.computeDistance(h,p,v);else if(h instanceof sr)for(var y=h,E=0;E<y.getNumGeometries();E++){var x=y.getGeometryN(E);Ln.computeDistance(x,p,v)}else v.setMinimum(h.getCoordinate(),p)}else if(arguments[2]instanceof er&&arguments[0]instanceof H&&arguments[1]instanceof P){var g=arguments[0],d=arguments[1],_=arguments[2],w=g.closestPoint(d);_.setMinimum(w,d)}};var ki=function(t){this._maxPtDist=new er,this._inputGeom=t||null},ul={MaxPointDistanceFilter:{configurable:!0},MaxMidpointDistanceFilter:{configurable:!0}};ki.prototype.computeMaxMidpointDistance=function(t){var r=new di(this._inputGeom);t.apply(r),this._maxPtDist.setMaximum(r.getMaxPointDistance())};ki.prototype.computeMaxVertexDistance=function(t){var r=new io(this._inputGeom);t.apply(r),this._maxPtDist.setMaximum(r.getMaxPointDistance())};ki.prototype.findDistance=function(t){return this.computeMaxVertexDistance(t),this.computeMaxMidpointDistance(t),this._maxPtDist.getDistance()};ki.prototype.getDistancePoints=function(){return this._maxPtDist};ki.prototype.interfaces_=function(){return[]};ki.prototype.getClass=function(){return ki};ul.MaxPointDistanceFilter.get=function(){return io};ul.MaxMidpointDistanceFilter.get=function(){return di};Object.defineProperties(ki,ul);var io=function(t){this._maxPtDist=new er,this._minPtDist=new er,this._geom=t||null};io.prototype.filter=function(t){this._minPtDist.initialize(),Ln.computeDistance(this._geom,t,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)};io.prototype.getMaxPointDistance=function(){return this._maxPtDist};io.prototype.interfaces_=function(){return[An]};io.prototype.getClass=function(){return io};var di=function(t){this._maxPtDist=new er,this._minPtDist=new er,this._geom=t||null};di.prototype.filter=function(t,r){if(r===0)return null;var n=t.getCoordinate(r-1),i=t.getCoordinate(r),o=new P((n.x+i.x)/2,(n.y+i.y)/2);this._minPtDist.initialize(),Ln.computeDistance(this._geom,o,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)};di.prototype.isDone=function(){return!1};di.prototype.isGeometryChanged=function(){return!1};di.prototype.getMaxPointDistance=function(){return this._maxPtDist};di.prototype.interfaces_=function(){return[Zr]};di.prototype.getClass=function(){return di};var Zn=function(t){this._comps=t||null};Zn.prototype.filter=function(t){t instanceof Re&&this._comps.add(t)};Zn.prototype.interfaces_=function(){return[gn]};Zn.prototype.getClass=function(){return Zn};Zn.getPolygons=function(){if(arguments.length===1){var t=arguments[0];return Zn.getPolygons(t,new F)}else if(arguments.length===2){var r=arguments[0],n=arguments[1];return r instanceof Re?n.add(r):r instanceof sr&&r.apply(new Zn(n)),n}};var Be=function(){if(this._lines=null,this._isForcedToLineString=!1,arguments.length===1){var t=arguments[0];this._lines=t}else if(arguments.length===2){var r=arguments[0],n=arguments[1];this._lines=r,this._isForcedToLineString=n}};Be.prototype.filter=function(t){if(this._isForcedToLineString&&t instanceof bn){var r=t.getFactory().createLineString(t.getCoordinateSequence());return this._lines.add(r),null}t instanceof ve&&this._lines.add(t)};Be.prototype.setForceToLineString=function(t){this._isForcedToLineString=t};Be.prototype.interfaces_=function(){return[$n]};Be.prototype.getClass=function(){return Be};Be.getGeometry=function(){if(arguments.length===1){var t=arguments[0];return t.getFactory().buildGeometry(Be.getLines(t))}else if(arguments.length===2){var r=arguments[0],n=arguments[1];return r.getFactory().buildGeometry(Be.getLines(r,n))}};Be.getLines=function(){if(arguments.length===1){var t=arguments[0];return Be.getLines(t,!1)}else if(arguments.length===2){if(tt(arguments[0],Se)&&tt(arguments[1],Se)){for(var r=arguments[0],n=arguments[1],i=r.iterator();i.hasNext();){var o=i.next();Be.getLines(o,n)}return n}else if(arguments[0]instanceof $&&typeof arguments[1]=="boolean"){var s=arguments[0],a=arguments[1],u=new F;return s.apply(new Be(u,a)),u}else if(arguments[0]instanceof $&&tt(arguments[1],Se)){var f=arguments[0],l=arguments[1];return f instanceof ve?l.add(f):f.apply(new Be(l)),l}}else if(arguments.length===3){if(typeof arguments[2]=="boolean"&&tt(arguments[0],Se)&&tt(arguments[1],Se)){for(var c=arguments[0],h=arguments[1],p=arguments[2],v=c.iterator();v.hasNext();){var y=v.next();Be.getLines(y,h,p)}return h}else if(typeof arguments[2]=="boolean"&&arguments[0]instanceof $&&tt(arguments[1],Se)){var E=arguments[0],x=arguments[1],g=arguments[2];return E.apply(new Be(x,g)),x}}};var tn=function(){if(this._boundaryRule=Gr.OGC_SFS_BOUNDARY_RULE,this._isIn=null,this._numBoundaries=null,arguments.length!==0){if(arguments.length===1){var t=arguments[0];if(t===null)throw new le("Rule must be non-null");this._boundaryRule=t}}};tn.prototype.locateInternal=function(){var t=this;if(arguments[0]instanceof P&&arguments[1]instanceof Re){var r=arguments[0],n=arguments[1];if(n.isEmpty())return L.EXTERIOR;var i=n.getExteriorRing(),o=this.locateInPolygonRing(r,i);if(o===L.EXTERIOR)return L.EXTERIOR;if(o===L.BOUNDARY)return L.BOUNDARY;for(var s=0;s<n.getNumInteriorRing();s++){var a=n.getInteriorRingN(s),u=t.locateInPolygonRing(r,a);if(u===L.INTERIOR)return L.EXTERIOR;if(u===L.BOUNDARY)return L.BOUNDARY}return L.INTERIOR}else if(arguments[0]instanceof P&&arguments[1]instanceof ve){var f=arguments[0],l=arguments[1];if(!l.getEnvelopeInternal().intersects(f))return L.EXTERIOR;var c=l.getCoordinates();return!l.isClosed()&&(f.equals(c[0])||f.equals(c[c.length-1]))?L.BOUNDARY:G.isOnLine(f,c)?L.INTERIOR:L.EXTERIOR}else if(arguments[0]instanceof P&&arguments[1]instanceof xr){var h=arguments[0],p=arguments[1],v=p.getCoordinate();return v.equals2D(h)?L.INTERIOR:L.EXTERIOR}};tn.prototype.locateInPolygonRing=function(t,r){return r.getEnvelopeInternal().intersects(t)?G.locatePointInRing(t,r.getCoordinates()):L.EXTERIOR};tn.prototype.intersects=function(t,r){return this.locate(t,r)!==L.EXTERIOR};tn.prototype.updateLocationInfo=function(t){t===L.INTERIOR&&(this._isIn=!0),t===L.BOUNDARY&&this._numBoundaries++};tn.prototype.computeLocation=function(t,r){var n=this;if(r instanceof xr&&this.updateLocationInfo(this.locateInternal(t,r)),r instanceof ve)this.updateLocationInfo(this.locateInternal(t,r));else if(r instanceof Re)this.updateLocationInfo(this.locateInternal(t,r));else if(r instanceof Di)for(var i=r,o=0;o<i.getNumGeometries();o++){var s=i.getGeometryN(o);n.updateLocationInfo(n.locateInternal(t,s))}else if(r instanceof On)for(var a=r,u=0;u<a.getNumGeometries();u++){var f=a.getGeometryN(u);n.updateLocationInfo(n.locateInternal(t,f))}else if(r instanceof sr)for(var l=new Rn(r);l.hasNext();){var c=l.next();c!==r&&n.computeLocation(t,c)}};tn.prototype.locate=function(t,r){return r.isEmpty()?L.EXTERIOR:r instanceof ve?this.locateInternal(t,r):r instanceof Re?this.locateInternal(t,r):(this._isIn=!1,this._numBoundaries=0,this.computeLocation(t,r),this._boundaryRule.isInBoundary(this._numBoundaries)?L.BOUNDARY:this._numBoundaries>0||this._isIn?L.INTERIOR:L.EXTERIOR)};tn.prototype.interfaces_=function(){return[]};tn.prototype.getClass=function(){return tn};var rr=function e(){if(this._component=null,this._segIndex=null,this._pt=null,arguments.length===2){var t=arguments[0],r=arguments[1];e.call(this,t,e.INSIDE_AREA,r)}else if(arguments.length===3){var n=arguments[0],i=arguments[1],o=arguments[2];this._component=n,this._segIndex=i,this._pt=o}},Lg={INSIDE_AREA:{configurable:!0}};rr.prototype.isInsideArea=function(){return this._segIndex===rr.INSIDE_AREA};rr.prototype.getCoordinate=function(){return this._pt};rr.prototype.getGeometryComponent=function(){return this._component};rr.prototype.getSegmentIndex=function(){return this._segIndex};rr.prototype.interfaces_=function(){return[]};rr.prototype.getClass=function(){return rr};Lg.INSIDE_AREA.get=function(){return-1};Object.defineProperties(rr,Lg);var ui=function(t){this._pts=t||null};ui.prototype.filter=function(t){t instanceof xr&&this._pts.add(t)};ui.prototype.interfaces_=function(){return[gn]};ui.prototype.getClass=function(){return ui};ui.getPoints=function(){if(arguments.length===1){var t=arguments[0];return t instanceof xr?jr.singletonList(t):ui.getPoints(t,new F)}else if(arguments.length===2){var r=arguments[0],n=arguments[1];return r instanceof xr?n.add(r):r instanceof sr&&r.apply(new ui(n)),n}};var oo=function(){this._locations=null;var t=arguments[0];this._locations=t};oo.prototype.filter=function(t){(t instanceof xr||t instanceof ve||t instanceof Re)&&this._locations.add(new rr(t,0,t.getCoordinate()))};oo.prototype.interfaces_=function(){return[gn]};oo.prototype.getClass=function(){return oo};oo.getLocations=function(t){var r=new F;return t.apply(new oo(r)),r};var Ue=function(){if(this._geom=null,this._terminateDistance=0,this._ptLocator=new tn,this._minDistanceLocation=null,this._minDistance=st.MAX_VALUE,arguments.length===2){var t=arguments[0],r=arguments[1];this._geom=[t,r],this._terminateDistance=0}else if(arguments.length===3){var n=arguments[0],i=arguments[1],o=arguments[2];this._geom=new Array(2).fill(null),this._geom[0]=n,this._geom[1]=i,this._terminateDistance=o}};Ue.prototype.computeContainmentDistance=function(){var t=this;if(arguments.length===0){var r=new Array(2).fill(null);if(this.computeContainmentDistance(0,r),this._minDistance<=this._terminateDistance)return null;this.computeContainmentDistance(1,r)}else if(arguments.length===2){var n=arguments[0],i=arguments[1],o=1-n,s=Zn.getPolygons(this._geom[n]);if(s.size()>0){var a=oo.getLocations(this._geom[o]);if(this.computeContainmentDistance(a,s,i),this._minDistance<=this._terminateDistance)return this._minDistanceLocation[o]=i[0],this._minDistanceLocation[n]=i[1],null}}else if(arguments.length===3){if(arguments[2]instanceof Array&&tt(arguments[0],Jr)&&tt(arguments[1],Jr)){for(var u=arguments[0],f=arguments[1],l=arguments[2],c=0;c<u.size();c++)for(var h=u.get(c),p=0;p<f.size();p++)if(t.computeContainmentDistance(h,f.get(p),l),t._minDistance<=t._terminateDistance)return null}else if(arguments[2]instanceof Array&&arguments[0]instanceof rr&&arguments[1]instanceof Re){var v=arguments[0],y=arguments[1],E=arguments[2],x=v.getCoordinate();if(L.EXTERIOR!==this._ptLocator.locate(x,y))return this._minDistance=0,E[0]=v,E[1]=new rr(y,x),null}}};Ue.prototype.computeMinDistanceLinesPoints=function(t,r,n){for(var i=this,o=0;o<t.size();o++)for(var s=t.get(o),a=0;a<r.size();a++){var u=r.get(a);if(i.computeMinDistance(s,u,n),i._minDistance<=i._terminateDistance)return null}};Ue.prototype.computeFacetDistance=function(){var t=new Array(2).fill(null),r=Be.getLines(this._geom[0]),n=Be.getLines(this._geom[1]),i=ui.getPoints(this._geom[0]),o=ui.getPoints(this._geom[1]);if(this.computeMinDistanceLines(r,n,t),this.updateMinDistance(t,!1),this._minDistance<=this._terminateDistance||(t[0]=null,t[1]=null,this.computeMinDistanceLinesPoints(r,o,t),this.updateMinDistance(t,!1),this._minDistance<=this._terminateDistance)||(t[0]=null,t[1]=null,this.computeMinDistanceLinesPoints(n,i,t),this.updateMinDistance(t,!0),this._minDistance<=this._terminateDistance))return null;t[0]=null,t[1]=null,this.computeMinDistancePoints(i,o,t),this.updateMinDistance(t,!1)};Ue.prototype.nearestLocations=function(){return this.computeMinDistance(),this._minDistanceLocation};Ue.prototype.updateMinDistance=function(t,r){if(t[0]===null)return null;r?(this._minDistanceLocation[0]=t[1],this._minDistanceLocation[1]=t[0]):(this._minDistanceLocation[0]=t[0],this._minDistanceLocation[1]=t[1])};Ue.prototype.nearestPoints=function(){this.computeMinDistance();var t=[this._minDistanceLocation[0].getCoordinate(),this._minDistanceLocation[1].getCoordinate()];return t};Ue.prototype.computeMinDistance=function(){var t=this;if(arguments.length===0){if(this._minDistanceLocation!==null||(this._minDistanceLocation=new Array(2).fill(null),this.computeContainmentDistance(),this._minDistance<=this._terminateDistance))return null;this.computeFacetDistance()}else if(arguments.length===3){if(arguments[2]instanceof Array&&arguments[0]instanceof ve&&arguments[1]instanceof xr){var r=arguments[0],n=arguments[1],i=arguments[2];if(r.getEnvelopeInternal().distance(n.getEnvelopeInternal())>this._minDistance)return null;for(var o=r.getCoordinates(),s=n.getCoordinate(),a=0;a<o.length-1;a++){var u=G.distancePointLine(s,o[a],o[a+1]);if(u<t._minDistance){t._minDistance=u;var f=new H(o[a],o[a+1]),l=f.closestPoint(s);i[0]=new rr(r,a,l),i[1]=new rr(n,0,s)}if(t._minDistance<=t._terminateDistance)return null}}else if(arguments[2]instanceof Array&&arguments[0]instanceof ve&&arguments[1]instanceof ve){var c=arguments[0],h=arguments[1],p=arguments[2];if(c.getEnvelopeInternal().distance(h.getEnvelopeInternal())>this._minDistance)return null;for(var v=c.getCoordinates(),y=h.getCoordinates(),E=0;E<v.length-1;E++)for(var x=0;x<y.length-1;x++){var g=G.distanceLineLine(v[E],v[E+1],y[x],y[x+1]);if(g<t._minDistance){t._minDistance=g;var d=new H(v[E],v[E+1]),_=new H(y[x],y[x+1]),w=d.closestPoints(_);p[0]=new rr(c,E,w[0]),p[1]=new rr(h,x,w[1])}if(t._minDistance<=t._terminateDistance)return null}}}};Ue.prototype.computeMinDistancePoints=function(t,r,n){for(var i=this,o=0;o<t.size();o++)for(var s=t.get(o),a=0;a<r.size();a++){var u=r.get(a),f=s.getCoordinate().distance(u.getCoordinate());if(f<i._minDistance&&(i._minDistance=f,n[0]=new rr(s,0,s.getCoordinate()),n[1]=new rr(u,0,u.getCoordinate())),i._minDistance<=i._terminateDistance)return null}};Ue.prototype.distance=function(){if(this._geom[0]===null||this._geom[1]===null)throw new le("null geometries are not supported");return this._geom[0].isEmpty()||this._geom[1].isEmpty()?0:(this.computeMinDistance(),this._minDistance)};Ue.prototype.computeMinDistanceLines=function(t,r,n){for(var i=this,o=0;o<t.size();o++)for(var s=t.get(o),a=0;a<r.size();a++){var u=r.get(a);if(i.computeMinDistance(s,u,n),i._minDistance<=i._terminateDistance)return null}};Ue.prototype.interfaces_=function(){return[]};Ue.prototype.getClass=function(){return Ue};Ue.distance=function(t,r){var n=new Ue(t,r);return n.distance()};Ue.isWithinDistance=function(t,r,n){var i=new Ue(t,r,n);return i.distance()<=n};Ue.nearestPoints=function(t,r){var n=new Ue(t,r);return n.nearestPoints()};var We=function(){this._pt=[new P,new P],this._distance=st.NaN,this._isNull=!0};We.prototype.getCoordinates=function(){return this._pt};We.prototype.getCoordinate=function(t){return this._pt[t]};We.prototype.setMinimum=function(){if(arguments.length===1){var t=arguments[0];this.setMinimum(t._pt[0],t._pt[1])}else if(arguments.length===2){var r=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(r,n),null;var i=r.distance(n);i<this._distance&&this.initialize(r,n,i)}};We.prototype.initialize=function(){if(arguments.length===0)this._isNull=!0;else if(arguments.length===2){var t=arguments[0],r=arguments[1];this._pt[0].setCoordinate(t),this._pt[1].setCoordinate(r),this._distance=t.distance(r),this._isNull=!1}else if(arguments.length===3){var n=arguments[0],i=arguments[1],o=arguments[2];this._pt[0].setCoordinate(n),this._pt[1].setCoordinate(i),this._distance=o,this._isNull=!1}};We.prototype.toString=function(){return Kr.toLineString(this._pt[0],this._pt[1])};We.prototype.getDistance=function(){return this._distance};We.prototype.setMaximum=function(){if(arguments.length===1){var t=arguments[0];this.setMaximum(t._pt[0],t._pt[1])}else if(arguments.length===2){var r=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(r,n),null;var i=r.distance(n);i>this._distance&&this.initialize(r,n,i)}};We.prototype.interfaces_=function(){return[]};We.prototype.getClass=function(){return We};var un=function(){};un.prototype.interfaces_=function(){return[]};un.prototype.getClass=function(){return un};un.computeDistance=function(){if(arguments[2]instanceof We&&arguments[0]instanceof ve&&arguments[1]instanceof P)for(var t=arguments[0],r=arguments[1],n=arguments[2],i=new H,o=t.getCoordinates(),s=0;s<o.length-1;s++){i.setCoordinates(o[s],o[s+1]);var a=i.closestPoint(r);n.setMinimum(a,r)}else if(arguments[2]instanceof We&&arguments[0]instanceof Re&&arguments[1]instanceof P){var u=arguments[0],f=arguments[1],l=arguments[2];un.computeDistance(u.getExteriorRing(),f,l);for(var c=0;c<u.getNumInteriorRing();c++)un.computeDistance(u.getInteriorRingN(c),f,l)}else if(arguments[2]instanceof We&&arguments[0]instanceof $&&arguments[1]instanceof P){var h=arguments[0],p=arguments[1],v=arguments[2];if(h instanceof ve)un.computeDistance(h,p,v);else if(h instanceof Re)un.computeDistance(h,p,v);else if(h instanceof sr)for(var y=h,E=0;E<y.getNumGeometries();E++){var x=y.getGeometryN(E);un.computeDistance(x,p,v)}else v.setMinimum(h.getCoordinate(),p)}else if(arguments[2]instanceof We&&arguments[0]instanceof H&&arguments[1]instanceof P){var g=arguments[0],d=arguments[1],_=arguments[2],w=g.closestPoint(d);_.setMinimum(w,d)}};var Fr=function(){this._g0=null,this._g1=null,this._ptDist=new We,this._densifyFrac=0;var t=arguments[0],r=arguments[1];this._g0=t,this._g1=r},fl={MaxPointDistanceFilter:{configurable:!0},MaxDensifiedByFractionDistanceFilter:{configurable:!0}};Fr.prototype.getCoordinates=function(){return this._ptDist.getCoordinates()};Fr.prototype.setDensifyFraction=function(t){if(t>1||t<=0)throw new le("Fraction is not in range (0.0 - 1.0]");this._densifyFrac=t};Fr.prototype.compute=function(t,r){this.computeOrientedDistance(t,r,this._ptDist),this.computeOrientedDistance(r,t,this._ptDist)};Fr.prototype.distance=function(){return this.compute(this._g0,this._g1),this._ptDist.getDistance()};Fr.prototype.computeOrientedDistance=function(t,r,n){var i=new so(r);if(t.apply(i),n.setMaximum(i.getMaxPointDistance()),this._densifyFrac>0){var o=new yi(r,this._densifyFrac);t.apply(o),n.setMaximum(o.getMaxPointDistance())}};Fr.prototype.orientedDistance=function(){return this.computeOrientedDistance(this._g0,this._g1,this._ptDist),this._ptDist.getDistance()};Fr.prototype.interfaces_=function(){return[]};Fr.prototype.getClass=function(){return Fr};Fr.distance=function(){if(arguments.length===2){var t=arguments[0],r=arguments[1],n=new Fr(t,r);return n.distance()}else if(arguments.length===3){var i=arguments[0],o=arguments[1],s=arguments[2],a=new Fr(i,o);return a.setDensifyFraction(s),a.distance()}};fl.MaxPointDistanceFilter.get=function(){return so};fl.MaxDensifiedByFractionDistanceFilter.get=function(){return yi};Object.defineProperties(Fr,fl);var so=function(){this._maxPtDist=new We,this._minPtDist=new We,this._euclideanDist=new un,this._geom=null;var t=arguments[0];this._geom=t};so.prototype.filter=function(t){this._minPtDist.initialize(),un.computeDistance(this._geom,t,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)};so.prototype.getMaxPointDistance=function(){return this._maxPtDist};so.prototype.interfaces_=function(){return[An]};so.prototype.getClass=function(){return so};var yi=function(){this._maxPtDist=new We,this._minPtDist=new We,this._geom=null,this._numSubSegs=0;var t=arguments[0],r=arguments[1];this._geom=t,this._numSubSegs=Math.trunc(Math.round(1/r))};yi.prototype.filter=function(t,r){var n=this;if(r===0)return null;for(var i=t.getCoordinate(r-1),o=t.getCoordinate(r),s=(o.x-i.x)/this._numSubSegs,a=(o.y-i.y)/this._numSubSegs,u=0;u<this._numSubSegs;u++){var f=i.x+u*s,l=i.y+u*a,c=new P(f,l);n._minPtDist.initialize(),un.computeDistance(n._geom,c,n._minPtDist),n._maxPtDist.setMaximum(n._minPtDist)}};yi.prototype.isDone=function(){return!1};yi.prototype.isGeometryChanged=function(){return!1};yi.prototype.getMaxPointDistance=function(){return this._maxPtDist};yi.prototype.interfaces_=function(){return[Zr]};yi.prototype.getClass=function(){return yi};var Er=function(t,r,n){this._minValidDistance=null,this._maxValidDistance=null,this._minDistanceFound=null,this._maxDistanceFound=null,this._isValid=!0,this._errMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=t||null,this._bufDistance=r||null,this._result=n||null},ll={VERBOSE:{configurable:!0},MAX_DISTANCE_DIFF_FRAC:{configurable:!0}};Er.prototype.checkMaximumDistance=function(t,r,n){var i=new Fr(r,t);if(i.setDensifyFraction(.25),this._maxDistanceFound=i.orientedDistance(),this._maxDistanceFound>n){this._isValid=!1;var o=i.getCoordinates();this._errorLocation=o[1],this._errorIndicator=t.getFactory().createLineString(o),this._errMsg="Distance between buffer curve and input is too large ("+this._maxDistanceFound+" at "+Kr.toLineString(o[0],o[1])+")"}};Er.prototype.isValid=function(){var t=Math.abs(this._bufDistance),r=Er.MAX_DISTANCE_DIFF_FRAC*t;return this._minValidDistance=t-r,this._maxValidDistance=t+r,this._input.isEmpty()||this._result.isEmpty()?!0:(this._bufDistance>0?this.checkPositiveValid():this.checkNegativeValid(),Er.VERBOSE&&qe.out.println("Min Dist= "+this._minDistanceFound+"  err= "+(1-this._minDistanceFound/this._bufDistance)+"  Max Dist= "+this._maxDistanceFound+"  err= "+(this._maxDistanceFound/this._bufDistance-1)),this._isValid)};Er.prototype.checkNegativeValid=function(){if(!(this._input instanceof Re||this._input instanceof On||this._input instanceof sr))return null;var t=this.getPolygonLines(this._input);if(this.checkMinimumDistance(t,this._result,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(t,this._result,this._maxValidDistance)};Er.prototype.getErrorIndicator=function(){return this._errorIndicator};Er.prototype.checkMinimumDistance=function(t,r,n){var i=new Ue(t,r,n);if(this._minDistanceFound=i.distance(),this._minDistanceFound<n){this._isValid=!1;var o=i.nearestPoints();this._errorLocation=i.nearestPoints()[1],this._errorIndicator=t.getFactory().createLineString(o),this._errMsg="Distance between buffer curve and input is too small ("+this._minDistanceFound+" at "+Kr.toLineString(o[0],o[1])+" )"}};Er.prototype.checkPositiveValid=function(){var t=this._result.getBoundary();if(this.checkMinimumDistance(this._input,t,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(this._input,t,this._maxValidDistance)};Er.prototype.getErrorLocation=function(){return this._errorLocation};Er.prototype.getPolygonLines=function(t){for(var r=new F,n=new Be(r),i=Zn.getPolygons(t),o=i.iterator();o.hasNext();){var s=o.next();s.apply(n)}return t.getFactory().buildGeometry(r)};Er.prototype.getErrorMessage=function(){return this._errMsg};Er.prototype.interfaces_=function(){return[]};Er.prototype.getClass=function(){return Er};ll.VERBOSE.get=function(){return!1};ll.MAX_DISTANCE_DIFF_FRAC.get=function(){return .012};Object.defineProperties(Er,ll);var Xe=function(t,r,n){this._isValid=!0,this._errorMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=t||null,this._distance=r||null,this._result=n||null},cl={VERBOSE:{configurable:!0},MAX_ENV_DIFF_FRAC:{configurable:!0}};Xe.prototype.isValid=function(){return this.checkPolygonal(),this._isValid?(this.checkExpectedEmpty(),this._isValid?(this.checkEnvelope(),this._isValid?(this.checkArea(),this._isValid?(this.checkDistance(),this._isValid):this._isValid):this._isValid):this._isValid):this._isValid};Xe.prototype.checkEnvelope=function(){if(this._distance<0)return null;var t=this._distance*Xe.MAX_ENV_DIFF_FRAC;t===0&&(t=.001);var r=new Y(this._input.getEnvelopeInternal());r.expandBy(this._distance);var n=new Y(this._result.getEnvelopeInternal());n.expandBy(t),n.contains(r)||(this._isValid=!1,this._errorMsg="Buffer envelope is incorrect",this._errorIndicator=this._input.getFactory().toGeometry(n)),this.report("Envelope")};Xe.prototype.checkDistance=function(){var t=new Er(this._input,this._distance,this._result);t.isValid()||(this._isValid=!1,this._errorMsg=t.getErrorMessage(),this._errorLocation=t.getErrorLocation(),this._errorIndicator=t.getErrorIndicator()),this.report("Distance")};Xe.prototype.checkArea=function(){var t=this._input.getArea(),r=this._result.getArea();this._distance>0&&t>r&&(this._isValid=!1,this._errorMsg="Area of positive buffer is smaller than input",this._errorIndicator=this._result),this._distance<0&&t<r&&(this._isValid=!1,this._errorMsg="Area of negative buffer is larger than input",this._errorIndicator=this._result),this.report("Area")};Xe.prototype.checkPolygonal=function(){this._result instanceof Re||this._result instanceof On||(this._isValid=!1),this._errorMsg="Result is not polygonal",this._errorIndicator=this._result,this.report("Polygonal")};Xe.prototype.getErrorIndicator=function(){return this._errorIndicator};Xe.prototype.getErrorLocation=function(){return this._errorLocation};Xe.prototype.checkExpectedEmpty=function(){if(this._input.getDimension()>=2||this._distance>0)return null;this._result.isEmpty()||(this._isValid=!1,this._errorMsg="Result is non-empty",this._errorIndicator=this._result),this.report("ExpectedEmpty")};Xe.prototype.report=function(t){if(!Xe.VERBOSE)return null;qe.out.println("Check "+t+": "+(this._isValid?"passed":"FAILED"))};Xe.prototype.getErrorMessage=function(){return this._errorMsg};Xe.prototype.interfaces_=function(){return[]};Xe.prototype.getClass=function(){return Xe};Xe.isValidMsg=function(t,r,n){var i=new Xe(t,r,n);return i.isValid()?null:i.getErrorMessage()};Xe.isValid=function(t,r,n){var i=new Xe(t,r,n);return!!i.isValid()};cl.VERBOSE.get=function(){return!1};cl.MAX_ENV_DIFF_FRAC.get=function(){return .012};Object.defineProperties(Xe,cl);var En=function(){this._pts=null,this._data=null;var t=arguments[0],r=arguments[1];this._pts=t,this._data=r};En.prototype.getCoordinates=function(){return this._pts};En.prototype.size=function(){return this._pts.length};En.prototype.getCoordinate=function(t){return this._pts[t]};En.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])};En.prototype.getSegmentOctant=function(t){return t===this._pts.length-1?-1:eo.octant(this.getCoordinate(t),this.getCoordinate(t+1))};En.prototype.setData=function(t){this._data=t};En.prototype.getData=function(){return this._data};En.prototype.toString=function(){return Kr.toLineString(new ye(this._pts))};En.prototype.interfaces_=function(){return[Tn]};En.prototype.getClass=function(){return En};var Te=function(){this._findAllIntersections=!1,this._isCheckEndSegmentsOnly=!1,this._li=null,this._interiorIntersection=null,this._intSegments=null,this._intersections=new F,this._intersectionCount=0,this._keepIntersections=!0;var t=arguments[0];this._li=t,this._interiorIntersection=null};Te.prototype.getInteriorIntersection=function(){return this._interiorIntersection};Te.prototype.setCheckEndSegmentsOnly=function(t){this._isCheckEndSegmentsOnly=t};Te.prototype.getIntersectionSegments=function(){return this._intSegments};Te.prototype.count=function(){return this._intersectionCount};Te.prototype.getIntersections=function(){return this._intersections};Te.prototype.setFindAllIntersections=function(t){this._findAllIntersections=t};Te.prototype.setKeepIntersections=function(t){this._keepIntersections=t};Te.prototype.processIntersections=function(t,r,n,i){if(!this._findAllIntersections&&this.hasIntersection()||t===n&&r===i)return null;if(this._isCheckEndSegmentsOnly){var o=this.isEndSegment(t,r)||this.isEndSegment(n,i);if(!o)return null}var s=t.getCoordinates()[r],a=t.getCoordinates()[r+1],u=n.getCoordinates()[i],f=n.getCoordinates()[i+1];this._li.computeIntersection(s,a,u,f),this._li.hasIntersection()&&this._li.isInteriorIntersection()&&(this._intSegments=new Array(4).fill(null),this._intSegments[0]=s,this._intSegments[1]=a,this._intSegments[2]=u,this._intSegments[3]=f,this._interiorIntersection=this._li.getIntersection(0),this._keepIntersections&&this._intersections.add(this._interiorIntersection),this._intersectionCount++)};Te.prototype.isEndSegment=function(t,r){return r===0||r>=t.size()-2};Te.prototype.hasIntersection=function(){return this._interiorIntersection!==null};Te.prototype.isDone=function(){return this._findAllIntersections?!1:this._interiorIntersection!==null};Te.prototype.interfaces_=function(){return[Bi]};Te.prototype.getClass=function(){return Te};Te.createAllIntersectionsFinder=function(t){var r=new Te(t);return r.setFindAllIntersections(!0),r};Te.createAnyIntersectionFinder=function(t){return new Te(t)};Te.createIntersectionCounter=function(t){var r=new Te(t);return r.setFindAllIntersections(!0),r.setKeepIntersections(!1),r};var en=function(){this._li=new Yi,this._segStrings=null,this._findAllIntersections=!1,this._segInt=null,this._isValid=!0;var t=arguments[0];this._segStrings=t};en.prototype.execute=function(){if(this._segInt!==null)return null;this.checkInteriorIntersections()};en.prototype.getIntersections=function(){return this._segInt.getIntersections()};en.prototype.isValid=function(){return this.execute(),this._isValid};en.prototype.setFindAllIntersections=function(t){this._findAllIntersections=t};en.prototype.checkInteriorIntersections=function(){this._isValid=!0,this._segInt=new Te(this._li),this._segInt.setFindAllIntersections(this._findAllIntersections);var t=new al;if(t.setSegmentIntersector(this._segInt),t.computeNodes(this._segStrings),this._segInt.hasIntersection())return this._isValid=!1,null};en.prototype.checkValid=function(){if(this.execute(),!this._isValid)throw new ti(this.getErrorMessage(),this._segInt.getInteriorIntersection())};en.prototype.getErrorMessage=function(){if(this._isValid)return"no intersections found";var t=this._segInt.getIntersectionSegments();return"found non-noded intersection between "+Kr.toLineString(t[0],t[1])+" and "+Kr.toLineString(t[2],t[3])};en.prototype.interfaces_=function(){return[]};en.prototype.getClass=function(){return en};en.computeIntersections=function(t){var r=new en(t);return r.setFindAllIntersections(!0),r.isValid(),r.getIntersections()};var qi=function e(){this._nv=null;var t=arguments[0];this._nv=new en(e.toSegmentStrings(t))};qi.prototype.checkValid=function(){this._nv.checkValid()};qi.prototype.interfaces_=function(){return[]};qi.prototype.getClass=function(){return qi};qi.toSegmentStrings=function(t){for(var r=new F,n=t.iterator();n.hasNext();){var i=n.next();r.add(new En(i.getCoordinates(),i))}return r};qi.checkValid=function(t){var r=new qi(t);r.checkValid()};var ao=function(t){this._mapOp=t};ao.prototype.map=function(t){for(var r=this,n=new F,i=0;i<t.getNumGeometries();i++){var o=r._mapOp.map(t.getGeometryN(i));o.isEmpty()||n.add(o)}return t.getFactory().createGeometryCollection(lt.toGeometryArray(n))};ao.prototype.interfaces_=function(){return[]};ao.prototype.getClass=function(){return ao};ao.map=function(t,r){var n=new ao(r);return n.map(t)};var xn=function(){this._op=null,this._geometryFactory=null,this._ptLocator=null,this._lineEdgesList=new F,this._resultLineList=new F;var t=arguments[0],r=arguments[1],n=arguments[2];this._op=t,this._geometryFactory=r,this._ptLocator=n};xn.prototype.collectLines=function(t){for(var r=this,n=this._op.getGraph().getEdgeEnds().iterator();n.hasNext();){var i=n.next();r.collectLineEdge(i,t,r._lineEdgesList),r.collectBoundaryTouchEdge(i,t,r._lineEdgesList)}};xn.prototype.labelIsolatedLine=function(t,r){var n=this._ptLocator.locate(t.getCoordinate(),this._op.getArgGeometry(r));t.getLabel().setLocation(r,n)};xn.prototype.build=function(t){return this.findCoveredLineEdges(),this.collectLines(t),this.buildLines(t),this._resultLineList};xn.prototype.collectLineEdge=function(t,r,n){var i=t.getLabel(),o=t.getEdge();t.isLineEdge()&&!t.isVisited()&&at.isResultOfOp(i,r)&&!o.isCovered()&&(n.add(o),t.setVisitedEdge(!0))};xn.prototype.findCoveredLineEdges=function(){for(var t=this,r=this._op.getGraph().getNodes().iterator();r.hasNext();){var n=r.next();n.getEdges().findCoveredLineEdges()}for(var i=this._op.getGraph().getEdgeEnds().iterator();i.hasNext();){var o=i.next(),s=o.getEdge();if(o.isLineEdge()&&!s.isCoveredSet()){var a=t._op.isCoveredByA(o.getCoordinate());s.setCovered(a)}}};xn.prototype.labelIsolatedLines=function(t){for(var r=this,n=t.iterator();n.hasNext();){var i=n.next(),o=i.getLabel();i.isIsolated()&&(o.isNull(0)?r.labelIsolatedLine(i,0):r.labelIsolatedLine(i,1))}};xn.prototype.buildLines=function(t){for(var r=this,n=this._lineEdgesList.iterator();n.hasNext();){var i=n.next(),o=r._geometryFactory.createLineString(i.getCoordinates());r._resultLineList.add(o),i.setInResult(!0)}};xn.prototype.collectBoundaryTouchEdge=function(t,r,n){var i=t.getLabel();if(t.isLineEdge()||t.isVisited()||t.isInteriorAreaEdge()||t.getEdge().isInResult())return null;ut.isTrue(!(t.isInResult()||t.getSym().isInResult())||!t.getEdge().isInResult()),at.isResultOfOp(i,r)&&r===at.INTERSECTION&&(n.add(t.getEdge()),t.setVisitedEdge(!0))};xn.prototype.interfaces_=function(){return[]};xn.prototype.getClass=function(){return xn};var uo=function(){this._op=null,this._geometryFactory=null,this._resultPointList=new F;var t=arguments[0],r=arguments[1];this._op=t,this._geometryFactory=r};uo.prototype.filterCoveredNodeToPoint=function(t){var r=t.getCoordinate();if(!this._op.isCoveredByLA(r)){var n=this._geometryFactory.createPoint(r);this._resultPointList.add(n)}};uo.prototype.extractNonCoveredResultNodes=function(t){for(var r=this,n=this._op.getGraph().getNodes().iterator();n.hasNext();){var i=n.next();if(!i.isInResult()&&!i.isIncidentEdgeInResult()&&(i.getEdges().getDegree()===0||t===at.INTERSECTION)){var o=i.getLabel();at.isResultOfOp(o,t)&&r.filterCoveredNodeToPoint(i)}}};uo.prototype.build=function(t){return this.extractNonCoveredResultNodes(t),this._resultPointList};uo.prototype.interfaces_=function(){return[]};uo.prototype.getClass=function(){return uo};var yr=function(){this._inputGeom=null,this._factory=null,this._pruneEmptyGeometry=!0,this._preserveGeometryCollectionType=!0,this._preserveCollections=!1,this._preserveType=!1};yr.prototype.transformPoint=function(t,r){return this._factory.createPoint(this.transformCoordinates(t.getCoordinateSequence(),t))};yr.prototype.transformPolygon=function(t,r){var n=this,i=!0,o=this.transformLinearRing(t.getExteriorRing(),t);(o===null||!(o instanceof bn)||o.isEmpty())&&(i=!1);for(var s=new F,a=0;a<t.getNumInteriorRing();a++){var u=n.transformLinearRing(t.getInteriorRingN(a),t);u===null||u.isEmpty()||(u instanceof bn||(i=!1),s.add(u))}if(i)return this._factory.createPolygon(o,s.toArray([]));var f=new F;return o!==null&&f.add(o),f.addAll(s),this._factory.buildGeometry(f)};yr.prototype.createCoordinateSequence=function(t){return this._factory.getCoordinateSequenceFactory().create(t)};yr.prototype.getInputGeometry=function(){return this._inputGeom};yr.prototype.transformMultiLineString=function(t,r){for(var n=this,i=new F,o=0;o<t.getNumGeometries();o++){var s=n.transformLineString(t.getGeometryN(o),t);s!==null&&(s.isEmpty()||i.add(s))}return this._factory.buildGeometry(i)};yr.prototype.transformCoordinates=function(t,r){return this.copy(t)};yr.prototype.transformLineString=function(t,r){return this._factory.createLineString(this.transformCoordinates(t.getCoordinateSequence(),t))};yr.prototype.transformMultiPoint=function(t,r){for(var n=this,i=new F,o=0;o<t.getNumGeometries();o++){var s=n.transformPoint(t.getGeometryN(o),t);s!==null&&(s.isEmpty()||i.add(s))}return this._factory.buildGeometry(i)};yr.prototype.transformMultiPolygon=function(t,r){for(var n=this,i=new F,o=0;o<t.getNumGeometries();o++){var s=n.transformPolygon(t.getGeometryN(o),t);s!==null&&(s.isEmpty()||i.add(s))}return this._factory.buildGeometry(i)};yr.prototype.copy=function(t){return t.copy()};yr.prototype.transformGeometryCollection=function(t,r){for(var n=this,i=new F,o=0;o<t.getNumGeometries();o++){var s=n.transform(t.getGeometryN(o));s!==null&&(n._pruneEmptyGeometry&&s.isEmpty()||i.add(s))}return this._preserveGeometryCollectionType?this._factory.createGeometryCollection(lt.toGeometryArray(i)):this._factory.buildGeometry(i)};yr.prototype.transform=function(t){if(this._inputGeom=t,this._factory=t.getFactory(),t instanceof xr)return this.transformPoint(t,null);if(t instanceof Yo)return this.transformMultiPoint(t,null);if(t instanceof bn)return this.transformLinearRing(t,null);if(t instanceof ve)return this.transformLineString(t,null);if(t instanceof Di)return this.transformMultiLineString(t,null);if(t instanceof Re)return this.transformPolygon(t,null);if(t instanceof On)return this.transformMultiPolygon(t,null);if(t instanceof sr)return this.transformGeometryCollection(t,null);throw new le("Unknown Geometry subtype: "+t.getClass().getName())};yr.prototype.transformLinearRing=function(t,r){var n=this.transformCoordinates(t.getCoordinateSequence(),t);if(n===null)return this._factory.createLinearRing(null);var i=n.size();return i>0&&i<4&&!this._preserveType?this._factory.createLineString(n):this._factory.createLinearRing(n)};yr.prototype.interfaces_=function(){return[]};yr.prototype.getClass=function(){return yr};var Gn=function e(){if(this._snapTolerance=0,this._srcPts=null,this._seg=new H,this._allowSnappingToSourceVertices=!1,this._isClosed=!1,arguments[0]instanceof ve&&typeof arguments[1]=="number"){var t=arguments[0],r=arguments[1];e.call(this,t.getCoordinates(),r)}else if(arguments[0]instanceof Array&&typeof arguments[1]=="number"){var n=arguments[0],i=arguments[1];this._srcPts=n,this._isClosed=e.isClosed(n),this._snapTolerance=i}};Gn.prototype.snapVertices=function(t,r){for(var n=this,i=this._isClosed?t.size()-1:t.size(),o=0;o<i;o++){var s=t.get(o),a=n.findSnapForVertex(s,r);a!==null&&(t.set(o,new P(a)),o===0&&n._isClosed&&t.set(t.size()-1,new P(a)))}};Gn.prototype.findSnapForVertex=function(t,r){for(var n=this,i=0;i<r.length;i++){if(t.equals2D(r[i]))return null;if(t.distance(r[i])<n._snapTolerance)return r[i]}return null};Gn.prototype.snapTo=function(t){var r=new ra(this._srcPts);this.snapVertices(r,t),this.snapSegments(r,t);var n=r.toCoordinateArray();return n};Gn.prototype.snapSegments=function(t,r){var n=this;if(r.length===0)return null;var i=r.length;r[0].equals2D(r[r.length-1])&&(i=r.length-1);for(var o=0;o<i;o++){var s=r[o],a=n.findSegmentIndexToSnap(s,t);a>=0&&t.add(a+1,new P(s),!1)}};Gn.prototype.findSegmentIndexToSnap=function(t,r){for(var n=this,i=st.MAX_VALUE,o=-1,s=0;s<r.size()-1;s++){if(n._seg.p0=r.get(s),n._seg.p1=r.get(s+1),n._seg.p0.equals2D(t)||n._seg.p1.equals2D(t)){if(n._allowSnappingToSourceVertices)continue;return-1}var a=n._seg.distance(t);a<n._snapTolerance&&a<i&&(i=a,o=s)}return o};Gn.prototype.setAllowSnappingToSourceVertices=function(t){this._allowSnappingToSourceVertices=t};Gn.prototype.interfaces_=function(){return[]};Gn.prototype.getClass=function(){return Gn};Gn.isClosed=function(t){return t.length<=1?!1:t[0].equals2D(t[t.length-1])};var me=function(t){this._srcGeom=t||null},Mg={SNAP_PRECISION_FACTOR:{configurable:!0}};me.prototype.snapTo=function(t,r){var n=this.extractTargetCoordinates(t),i=new Og(r,n);return i.transform(this._srcGeom)};me.prototype.snapToSelf=function(t,r){var n=this.extractTargetCoordinates(this._srcGeom),i=new Og(t,n,!0),o=i.transform(this._srcGeom),s=o;return r&&tt(s,ci)&&(s=o.buffer(0)),s};me.prototype.computeSnapTolerance=function(t){var r=this.computeMinimumSegmentLength(t),n=r/10;return n};me.prototype.extractTargetCoordinates=function(t){for(var r=new pn,n=t.getCoordinates(),i=0;i<n.length;i++)r.add(n[i]);return r.toArray(new Array(0).fill(null))};me.prototype.computeMinimumSegmentLength=function(t){for(var r=st.MAX_VALUE,n=0;n<t.length-1;n++){var i=t[n].distance(t[n+1]);i<r&&(r=i)}return r};me.prototype.interfaces_=function(){return[]};me.prototype.getClass=function(){return me};me.snap=function(t,r,n){var i=new Array(2).fill(null),o=new me(t);i[0]=o.snapTo(r,n);var s=new me(r);return i[1]=s.snapTo(i[0],n),i};me.computeOverlaySnapTolerance=function(){if(arguments.length===1){var t=arguments[0],r=me.computeSizeBasedSnapTolerance(t),n=t.getPrecisionModel();if(n.getType()===Ht.FIXED){var i=1/n.getScale()*2/1.415;i>r&&(r=i)}return r}else if(arguments.length===2){var o=arguments[0],s=arguments[1];return Math.min(me.computeOverlaySnapTolerance(o),me.computeOverlaySnapTolerance(s))}};me.computeSizeBasedSnapTolerance=function(t){var r=t.getEnvelopeInternal(),n=Math.min(r.getHeight(),r.getWidth()),i=n*me.SNAP_PRECISION_FACTOR;return i};me.snapToSelf=function(t,r,n){var i=new me(t);return i.snapToSelf(r,n)};Mg.SNAP_PRECISION_FACTOR.get=function(){return 1e-9};Object.defineProperties(me,Mg);var Og=function(e){function t(r,n,i){e.call(this),this._snapTolerance=r||null,this._snapPts=n||null,this._isSelfSnap=i!==void 0?i:!1}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.snapLine=function(n,i){var o=new Gn(n,this._snapTolerance);return o.setAllowSnappingToSourceVertices(this._isSelfSnap),o.snapTo(i)},t.prototype.transformCoordinates=function(n,i){var o=n.toCoordinateArray(),s=this.snapLine(o,this._snapPts);return this._factory.getCoordinateSequenceFactory().create(s)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(yr),$e=function(){this._isFirst=!0,this._commonMantissaBitsCount=53,this._commonBits=0,this._commonSignExp=null};$e.prototype.getCommon=function(){return st.longBitsToDouble(this._commonBits)};$e.prototype.add=function(t){var r=st.doubleToLongBits(t);if(this._isFirst)return this._commonBits=r,this._commonSignExp=$e.signExpBits(this._commonBits),this._isFirst=!1,null;var n=$e.signExpBits(r);if(n!==this._commonSignExp)return this._commonBits=0,null;this._commonMantissaBitsCount=$e.numCommonMostSigMantissaBits(this._commonBits,r),this._commonBits=$e.zeroLowerBits(this._commonBits,64-(12+this._commonMantissaBitsCount))};$e.prototype.toString=function(){if(arguments.length===1){var t=arguments[0],r=st.longBitsToDouble(t),n=st.toBinaryString(t),i="0000000000000000000000000000000000000000000000000000000000000000"+n,o=i.substring(i.length-64),s=o.substring(0,1)+"  "+o.substring(1,12)+"(exp) "+o.substring(12)+" [ "+r+" ]";return s}};$e.prototype.interfaces_=function(){return[]};$e.prototype.getClass=function(){return $e};$e.getBit=function(t,r){var n=1<<r;return t&n?1:0};$e.signExpBits=function(t){return t>>52};$e.zeroLowerBits=function(t,r){var n=(1<<r)-1,i=~n,o=t&i;return o};$e.numCommonMostSigMantissaBits=function(t,r){for(var n=0,i=52;i>=0;i--){if($e.getBit(t,i)!==$e.getBit(r,i))return n;n++}return 52};var mi=function(){this._commonCoord=null,this._ccFilter=new fo},hl={CommonCoordinateFilter:{configurable:!0},Translater:{configurable:!0}};mi.prototype.addCommonBits=function(t){var r=new _i(this._commonCoord);t.apply(r),t.geometryChanged()};mi.prototype.removeCommonBits=function(t){if(this._commonCoord.x===0&&this._commonCoord.y===0)return t;var r=new P(this._commonCoord);r.x=-r.x,r.y=-r.y;var n=new _i(r);return t.apply(n),t.geometryChanged(),t};mi.prototype.getCommonCoordinate=function(){return this._commonCoord};mi.prototype.add=function(t){t.apply(this._ccFilter),this._commonCoord=this._ccFilter.getCommonCoordinate()};mi.prototype.interfaces_=function(){return[]};mi.prototype.getClass=function(){return mi};hl.CommonCoordinateFilter.get=function(){return fo};hl.Translater.get=function(){return _i};Object.defineProperties(mi,hl);var fo=function(){this._commonBitsX=new $e,this._commonBitsY=new $e};fo.prototype.filter=function(t){this._commonBitsX.add(t.x),this._commonBitsY.add(t.y)};fo.prototype.getCommonCoordinate=function(){return new P(this._commonBitsX.getCommon(),this._commonBitsY.getCommon())};fo.prototype.interfaces_=function(){return[An]};fo.prototype.getClass=function(){return fo};var _i=function(){this.trans=null;var t=arguments[0];this.trans=t};_i.prototype.filter=function(t,r){var n=t.getOrdinate(r,0)+this.trans.x,i=t.getOrdinate(r,1)+this.trans.y;t.setOrdinate(r,0,n),t.setOrdinate(r,1,i)};_i.prototype.isDone=function(){return!1};_i.prototype.isGeometryChanged=function(){return!0};_i.prototype.interfaces_=function(){return[Zr]};_i.prototype.getClass=function(){return _i};var Fe=function(t,r){this._geom=new Array(2).fill(null),this._snapTolerance=null,this._cbr=null,this._geom[0]=t,this._geom[1]=r,this.computeSnapTolerance()};Fe.prototype.selfSnap=function(t){var r=new me(t),n=r.snapTo(t,this._snapTolerance);return n};Fe.prototype.removeCommonBits=function(t){this._cbr=new mi,this._cbr.add(t[0]),this._cbr.add(t[1]);var r=new Array(2).fill(null);return r[0]=this._cbr.removeCommonBits(t[0].copy()),r[1]=this._cbr.removeCommonBits(t[1].copy()),r};Fe.prototype.prepareResult=function(t){return this._cbr.addCommonBits(t),t};Fe.prototype.getResultGeometry=function(t){var r=this.snap(this._geom),n=at.overlayOp(r[0],r[1],t);return this.prepareResult(n)};Fe.prototype.checkValid=function(t){t.isValid()||qe.out.println("Snapped geometry is invalid")};Fe.prototype.computeSnapTolerance=function(){this._snapTolerance=me.computeOverlaySnapTolerance(this._geom[0],this._geom[1])};Fe.prototype.snap=function(t){var r=this.removeCommonBits(t),n=me.snap(r[0],r[1],this._snapTolerance);return n};Fe.prototype.interfaces_=function(){return[]};Fe.prototype.getClass=function(){return Fe};Fe.overlayOp=function(t,r,n){var i=new Fe(t,r);return i.getResultGeometry(n)};Fe.union=function(t,r){return Fe.overlayOp(t,r,at.UNION)};Fe.intersection=function(t,r){return Fe.overlayOp(t,r,at.INTERSECTION)};Fe.symDifference=function(t,r){return Fe.overlayOp(t,r,at.SYMDIFFERENCE)};Fe.difference=function(t,r){return Fe.overlayOp(t,r,at.DIFFERENCE)};var fr=function(t,r){this._geom=new Array(2).fill(null),this._geom[0]=t,this._geom[1]=r};fr.prototype.getResultGeometry=function(t){var r=null,n=!1,i=null;try{r=at.overlayOp(this._geom[0],this._geom[1],t);var o=!0;o&&(n=!0)}catch(s){if(s instanceof jn)i=s;else throw s}finally{}if(!n)try{r=Fe.overlayOp(this._geom[0],this._geom[1],t)}catch(s){throw s instanceof jn?i:s}finally{}return r};fr.prototype.interfaces_=function(){return[]};fr.prototype.getClass=function(){return fr};fr.overlayOp=function(t,r,n){var i=new fr(t,r);return i.getResultGeometry(n)};fr.union=function(t,r){return fr.overlayOp(t,r,at.UNION)};fr.intersection=function(t,r){return fr.overlayOp(t,r,at.INTERSECTION)};fr.symDifference=function(t,r){return fr.overlayOp(t,r,at.SYMDIFFERENCE)};fr.difference=function(t,r){return fr.overlayOp(t,r,at.DIFFERENCE)};var Ws=function(){this.mce=null,this.chainIndex=null;var t=arguments[0],r=arguments[1];this.mce=t,this.chainIndex=r};Ws.prototype.computeIntersections=function(t,r){this.mce.computeIntersectsForChain(this.chainIndex,t.mce,t.chainIndex,r)};Ws.prototype.interfaces_=function(){return[]};Ws.prototype.getClass=function(){return Ws};var Cr=function e(){if(this._label=null,this._xValue=null,this._eventType=null,this._insertEvent=null,this._deleteEventIndex=null,this._obj=null,arguments.length===2){var t=arguments[0],r=arguments[1];this._eventType=e.DELETE,this._xValue=t,this._insertEvent=r}else if(arguments.length===3){var n=arguments[0],i=arguments[1],o=arguments[2];this._eventType=e.INSERT,this._label=n,this._xValue=i,this._obj=o}},pl={INSERT:{configurable:!0},DELETE:{configurable:!0}};Cr.prototype.isDelete=function(){return this._eventType===Cr.DELETE};Cr.prototype.setDeleteEventIndex=function(t){this._deleteEventIndex=t};Cr.prototype.getObject=function(){return this._obj};Cr.prototype.compareTo=function(t){var r=t;return this._xValue<r._xValue?-1:this._xValue>r._xValue?1:this._eventType<r._eventType?-1:this._eventType>r._eventType?1:0};Cr.prototype.getInsertEvent=function(){return this._insertEvent};Cr.prototype.isInsert=function(){return this._eventType===Cr.INSERT};Cr.prototype.isSameLabel=function(t){return this._label===null?!1:this._label===t._label};Cr.prototype.getDeleteEventIndex=function(){return this._deleteEventIndex};Cr.prototype.interfaces_=function(){return[zr]};Cr.prototype.getClass=function(){return Cr};pl.INSERT.get=function(){return 1};pl.DELETE.get=function(){return 2};Object.defineProperties(Cr,pl);var Fa=function(){};Fa.prototype.interfaces_=function(){return[]};Fa.prototype.getClass=function(){return Fa};var Ye=function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._properIntersectionPoint=null,this._li=null,this._includeProper=null,this._recordIsolated=null,this._isSelfIntersection=null,this._numIntersections=0,this.numTests=0,this._bdyNodes=null,this._isDone=!1,this._isDoneWhenProperInt=!1;var t=arguments[0],r=arguments[1],n=arguments[2];this._li=t,this._includeProper=r,this._recordIsolated=n};Ye.prototype.isTrivialIntersection=function(t,r,n,i){if(t===n&&this._li.getIntersectionNum()===1){if(Ye.isAdjacentSegments(r,i))return!0;if(t.isClosed()){var o=t.getNumPoints()-1;if(r===0&&i===o||i===0&&r===o)return!0}}return!1};Ye.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint};Ye.prototype.setIsDoneIfProperInt=function(t){this._isDoneWhenProperInt=t};Ye.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior};Ye.prototype.isBoundaryPointInternal=function(t,r){for(var n=r.iterator();n.hasNext();){var i=n.next(),o=i.getCoordinate();if(t.isIntersection(o))return!0}return!1};Ye.prototype.hasProperIntersection=function(){return this._hasProper};Ye.prototype.hasIntersection=function(){return this._hasIntersection};Ye.prototype.isDone=function(){return this._isDone};Ye.prototype.isBoundaryPoint=function(t,r){return r===null?!1:!!(this.isBoundaryPointInternal(t,r[0])||this.isBoundaryPointInternal(t,r[1]))};Ye.prototype.setBoundaryNodes=function(t,r){this._bdyNodes=new Array(2).fill(null),this._bdyNodes[0]=t,this._bdyNodes[1]=r};Ye.prototype.addIntersections=function(t,r,n,i){if(t===n&&r===i)return null;this.numTests++;var o=t.getCoordinates()[r],s=t.getCoordinates()[r+1],a=n.getCoordinates()[i],u=n.getCoordinates()[i+1];this._li.computeIntersection(o,s,a,u),this._li.hasIntersection()&&(this._recordIsolated&&(t.setIsolated(!1),n.setIsolated(!1)),this._numIntersections++,this.isTrivialIntersection(t,r,n,i)||(this._hasIntersection=!0,(this._includeProper||!this._li.isProper())&&(t.addIntersections(this._li,r,0),n.addIntersections(this._li,i,1)),this._li.isProper()&&(this._properIntersectionPoint=this._li.getIntersection(0).copy(),this._hasProper=!0,this._isDoneWhenProperInt&&(this._isDone=!0),this.isBoundaryPoint(this._li,this._bdyNodes)||(this._hasProperInterior=!0))))};Ye.prototype.interfaces_=function(){return[]};Ye.prototype.getClass=function(){return Ye};Ye.isAdjacentSegments=function(t,r){return Math.abs(t-r)===1};var FE=function(e){function t(){e.call(this),this.events=new F,this.nOverlaps=null}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.prepareEvents=function(){var n=this;jr.sort(this.events);for(var i=0;i<this.events.size();i++){var o=n.events.get(i);o.isDelete()&&o.getInsertEvent().setDeleteEventIndex(i)}},t.prototype.computeIntersections=function(){var n=this;if(arguments.length===1){var i=arguments[0];this.nOverlaps=0,this.prepareEvents();for(var o=0;o<this.events.size();o++){var s=n.events.get(o);if(s.isInsert()&&n.processOverlaps(o,s.getDeleteEventIndex(),s,i),i.isDone())break}}else if(arguments.length===3){if(arguments[2]instanceof Ye&&tt(arguments[0],Jr)&&tt(arguments[1],Jr)){var a=arguments[0],u=arguments[1],f=arguments[2];this.addEdges(a,a),this.addEdges(u,u),this.computeIntersections(f)}else if(typeof arguments[2]=="boolean"&&tt(arguments[0],Jr)&&arguments[1]instanceof Ye){var l=arguments[0],c=arguments[1],h=arguments[2];h?this.addEdges(l,null):this.addEdges(l),this.computeIntersections(c)}}},t.prototype.addEdge=function(n,i){for(var o=this,s=n.getMonotoneChainEdge(),a=s.getStartIndexes(),u=0;u<a.length-1;u++){var f=new Ws(s,u),l=new Cr(i,s.getMinX(u),f);o.events.add(l),o.events.add(new Cr(s.getMaxX(u),l))}},t.prototype.processOverlaps=function(n,i,o,s){for(var a=this,u=o.getObject(),f=n;f<i;f++){var l=a.events.get(f);if(l.isInsert()){var c=l.getObject();o.isSameLabel(l)||(u.computeIntersections(c,s),a.nOverlaps++)}}},t.prototype.addEdges=function(){var n=this;if(arguments.length===1)for(var i=arguments[0],o=i.iterator();o.hasNext();){var s=o.next();n.addEdge(s,s)}else if(arguments.length===2)for(var a=arguments[0],u=arguments[1],f=a.iterator();f.hasNext();){var l=f.next();n.addEdge(l,u)}},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(Fa),kn=function(){this._min=st.POSITIVE_INFINITY,this._max=st.NEGATIVE_INFINITY},Rg={NodeComparator:{configurable:!0}};kn.prototype.getMin=function(){return this._min};kn.prototype.intersects=function(t,r){return!(this._min>r||this._max<t)};kn.prototype.getMax=function(){return this._max};kn.prototype.toString=function(){return Kr.toLineString(new P(this._min,0),new P(this._max,0))};kn.prototype.interfaces_=function(){return[]};kn.prototype.getClass=function(){return kn};Rg.NodeComparator.get=function(){return Js};Object.defineProperties(kn,Rg);var Js=function(){};Js.prototype.compare=function(t,r){var n=t,i=r,o=(n._min+n._max)/2,s=(i._min+i._max)/2;return o<s?-1:o>s?1:0};Js.prototype.interfaces_=function(){return[Bo]};Js.prototype.getClass=function(){return Js};var BE=function(e){function t(){e.call(this),this._item=null;var r=arguments[0],n=arguments[1],i=arguments[2];this._min=r,this._max=n,this._item=i}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.query=function(n,i,o){if(!this.intersects(n,i))return null;o.visitItem(this._item)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(kn),GE=function(e){function t(){e.call(this),this._node1=null,this._node2=null;var r=arguments[0],n=arguments[1];this._node1=r,this._node2=n,this.buildExtent(this._node1,this._node2)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.buildExtent=function(n,i){this._min=Math.min(n._min,i._min),this._max=Math.max(n._max,i._max)},t.prototype.query=function(n,i,o){if(!this.intersects(n,i))return null;this._node1!==null&&this._node1.query(n,i,o),this._node2!==null&&this._node2.query(n,i,o)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(kn),qn=function(){this._leaves=new F,this._root=null,this._level=0};qn.prototype.buildTree=function(){var t=this;jr.sort(this._leaves,new kn.NodeComparator);for(var r=this._leaves,n=null,i=new F;;){if(t.buildLevel(r,i),i.size()===1)return i.get(0);n=r,r=i,i=n}};qn.prototype.insert=function(t,r,n){if(this._root!==null)throw new Error("Index cannot be added to once it has been queried");this._leaves.add(new BE(t,r,n))};qn.prototype.query=function(t,r,n){this.init(),this._root.query(t,r,n)};qn.prototype.buildRoot=function(){if(this._root!==null)return null;this._root=this.buildTree()};qn.prototype.printNode=function(t){qe.out.println(Kr.toLineString(new P(t._min,this._level),new P(t._max,this._level)))};qn.prototype.init=function(){if(this._root!==null)return null;this.buildRoot()};qn.prototype.buildLevel=function(t,r){this._level++,r.clear();for(var n=0;n<t.size();n+=2){var i=t.get(n),o=n+1<t.size()?t.get(n):null;if(o===null)r.add(i);else{var s=new GE(t.get(n),t.get(n+1));r.add(s)}}};qn.prototype.interfaces_=function(){return[]};qn.prototype.getClass=function(){return qn};var Zo=function(){this._items=new F};Zo.prototype.visitItem=function(t){this._items.add(t)};Zo.prototype.getItems=function(){return this._items};Zo.prototype.interfaces_=function(){return[hi]};Zo.prototype.getClass=function(){return Zo};var Qo=function(){this._index=null;var t=arguments[0];if(!tt(t,ci))throw new le("Argument must be Polygonal");this._index=new zi(t)},gl={SegmentVisitor:{configurable:!0},IntervalIndexedGeometry:{configurable:!0}};Qo.prototype.locate=function(t){var r=new ln(t),n=new jo(r);return this._index.query(t.y,t.y,n),r.getLocation()};Qo.prototype.interfaces_=function(){return[Jo]};Qo.prototype.getClass=function(){return Qo};gl.SegmentVisitor.get=function(){return jo};gl.IntervalIndexedGeometry.get=function(){return zi};Object.defineProperties(Qo,gl);var jo=function(){this._counter=null;var t=arguments[0];this._counter=t};jo.prototype.visitItem=function(t){var r=t;this._counter.countSegment(r.getCoordinate(0),r.getCoordinate(1))};jo.prototype.interfaces_=function(){return[hi]};jo.prototype.getClass=function(){return jo};var zi=function(){this._index=new qn;var t=arguments[0];this.init(t)};zi.prototype.init=function(t){for(var r=this,n=Be.getLines(t),i=n.iterator();i.hasNext();){var o=i.next(),s=o.getCoordinates();r.addLine(s)}};zi.prototype.addLine=function(t){for(var r=this,n=1;n<t.length;n++){var i=new H(t[n-1],t[n]),o=Math.min(i.p0.y,i.p1.y),s=Math.max(i.p0.y,i.p1.y);r._index.insert(o,s,i)}};zi.prototype.query=function(){if(arguments.length===2){var t=arguments[0],r=arguments[1],n=new Zo;return this._index.query(t,r,n),n.getItems()}else if(arguments.length===3){var i=arguments[0],o=arguments[1],s=arguments[2];this._index.query(i,o,s)}};zi.prototype.interfaces_=function(){return[]};zi.prototype.getClass=function(){return zi};var vs=function(e){function t(){if(e.call(this),this._parentGeom=null,this._lineEdgeMap=new gg,this._boundaryNodeRule=null,this._useBoundaryDeterminationRule=!0,this._argIndex=null,this._boundaryNodes=null,this._hasTooFewPoints=!1,this._invalidPoint=null,this._areaPtLocator=null,this._ptLocator=new tn,arguments.length===2){var r=arguments[0],n=arguments[1],i=Gr.OGC_SFS_BOUNDARY_RULE;this._argIndex=r,this._parentGeom=n,this._boundaryNodeRule=i,n!==null&&this.add(n)}else if(arguments.length===3){var o=arguments[0],s=arguments[1],a=arguments[2];this._argIndex=o,this._parentGeom=s,this._boundaryNodeRule=a,s!==null&&this.add(s)}}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.insertBoundaryPoint=function(n,i){var o=this._nodes.addNode(i),s=o.getLabel(),a=1,u=L.NONE;u=s.getLocation(n,b.ON),u===L.BOUNDARY&&a++;var f=t.determineBoundary(this._boundaryNodeRule,a);s.setLocation(n,f)},t.prototype.computeSelfNodes=function(){if(arguments.length===2){var n=arguments[0],i=arguments[1];return this.computeSelfNodes(n,i,!1)}else if(arguments.length===3){var o=arguments[0],s=arguments[1],a=arguments[2],u=new Ye(o,!0,!1);u.setIsDoneIfProperInt(a);var f=this.createEdgeSetIntersector(),l=this._parentGeom instanceof bn||this._parentGeom instanceof Re||this._parentGeom instanceof On,c=s||!l;return f.computeIntersections(this._edges,u,c),this.addSelfIntersectionNodes(this._argIndex),u}},t.prototype.computeSplitEdges=function(n){for(var i=this._edges.iterator();i.hasNext();){var o=i.next();o.eiList.addSplitEdges(n)}},t.prototype.computeEdgeIntersections=function(n,i,o){var s=new Ye(i,o,!0);s.setBoundaryNodes(this.getBoundaryNodes(),n.getBoundaryNodes());var a=this.createEdgeSetIntersector();return a.computeIntersections(this._edges,n._edges,s),s},t.prototype.getGeometry=function(){return this._parentGeom},t.prototype.getBoundaryNodeRule=function(){return this._boundaryNodeRule},t.prototype.hasTooFewPoints=function(){return this._hasTooFewPoints},t.prototype.addPoint=function(){if(arguments[0]instanceof xr){var n=arguments[0],i=n.getCoordinate();this.insertPoint(this._argIndex,i,L.INTERIOR)}else if(arguments[0]instanceof P){var o=arguments[0];this.insertPoint(this._argIndex,o,L.INTERIOR)}},t.prototype.addPolygon=function(n){var i=this;this.addPolygonRing(n.getExteriorRing(),L.EXTERIOR,L.INTERIOR);for(var o=0;o<n.getNumInteriorRing();o++){var s=n.getInteriorRingN(o);i.addPolygonRing(s,L.INTERIOR,L.EXTERIOR)}},t.prototype.addEdge=function(n){this.insertEdge(n);var i=n.getCoordinates();this.insertPoint(this._argIndex,i[0],L.BOUNDARY),this.insertPoint(this._argIndex,i[i.length-1],L.BOUNDARY)},t.prototype.addLineString=function(n){var i=ct.removeRepeatedPoints(n.getCoordinates());if(i.length<2)return this._hasTooFewPoints=!0,this._invalidPoint=i[0],null;var o=new Ta(i,new Kt(this._argIndex,L.INTERIOR));this._lineEdgeMap.put(n,o),this.insertEdge(o),ut.isTrue(i.length>=2,"found LineString with single point"),this.insertBoundaryPoint(this._argIndex,i[0]),this.insertBoundaryPoint(this._argIndex,i[i.length-1])},t.prototype.getInvalidPoint=function(){return this._invalidPoint},t.prototype.getBoundaryPoints=function(){for(var n=this.getBoundaryNodes(),i=new Array(n.size()).fill(null),o=0,s=n.iterator();s.hasNext();){var a=s.next();i[o++]=a.getCoordinate().copy()}return i},t.prototype.getBoundaryNodes=function(){return this._boundaryNodes===null&&(this._boundaryNodes=this._nodes.getBoundaryNodes(this._argIndex)),this._boundaryNodes},t.prototype.addSelfIntersectionNode=function(n,i,o){if(this.isBoundaryNode(n,i))return null;o===L.BOUNDARY&&this._useBoundaryDeterminationRule?this.insertBoundaryPoint(n,i):this.insertPoint(n,i,o)},t.prototype.addPolygonRing=function(n,i,o){if(n.isEmpty())return null;var s=ct.removeRepeatedPoints(n.getCoordinates());if(s.length<4)return this._hasTooFewPoints=!0,this._invalidPoint=s[0],null;var a=i,u=o;G.isCCW(s)&&(a=o,u=i);var f=new Ta(s,new Kt(this._argIndex,L.BOUNDARY,a,u));this._lineEdgeMap.put(n,f),this.insertEdge(f),this.insertPoint(this._argIndex,s[0],L.BOUNDARY)},t.prototype.insertPoint=function(n,i,o){var s=this._nodes.addNode(i),a=s.getLabel();a===null?s._label=new Kt(n,o):a.setLocation(n,o)},t.prototype.createEdgeSetIntersector=function(){return new FE},t.prototype.addSelfIntersectionNodes=function(n){for(var i=this,o=this._edges.iterator();o.hasNext();)for(var s=o.next(),a=s.getLabel().getLocation(n),u=s.eiList.iterator();u.hasNext();){var f=u.next();i.addSelfIntersectionNode(n,f.coord,a)}},t.prototype.add=function(){if(arguments.length===1){var n=arguments[0];if(n.isEmpty())return null;if(n instanceof On&&(this._useBoundaryDeterminationRule=!1),n instanceof Re)this.addPolygon(n);else if(n instanceof ve)this.addLineString(n);else if(n instanceof xr)this.addPoint(n);else if(n instanceof Yo)this.addCollection(n);else if(n instanceof Di)this.addCollection(n);else if(n instanceof On)this.addCollection(n);else if(n instanceof sr)this.addCollection(n);else throw new Error(n.getClass().getName())}else return e.prototype.add.apply(this,arguments)},t.prototype.addCollection=function(n){for(var i=this,o=0;o<n.getNumGeometries();o++){var s=n.getGeometryN(o);i.add(s)}},t.prototype.locate=function(n){return tt(this._parentGeom,ci)&&this._parentGeom.getNumGeometries()>50?(this._areaPtLocator===null&&(this._areaPtLocator=new Qo(this._parentGeom)),this._areaPtLocator.locate(n)):this._ptLocator.locate(n,this._parentGeom)},t.prototype.findEdge=function(){if(arguments.length===1){var n=arguments[0];return this._lineEdgeMap.get(n)}else return e.prototype.findEdge.apply(this,arguments)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t.determineBoundary=function(n,i){return n.isInBoundary(i)?L.BOUNDARY:L.INTERIOR},t}(he),$o=function(){if(this._li=new Yi,this._resultPrecisionModel=null,this._arg=null,arguments.length===1){var t=arguments[0];this.setComputationPrecision(t.getPrecisionModel()),this._arg=new Array(1).fill(null),this._arg[0]=new vs(0,t)}else if(arguments.length===2){var r=arguments[0],n=arguments[1],i=Gr.OGC_SFS_BOUNDARY_RULE;r.getPrecisionModel().compareTo(n.getPrecisionModel())>=0?this.setComputationPrecision(r.getPrecisionModel()):this.setComputationPrecision(n.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new vs(0,r,i),this._arg[1]=new vs(1,n,i)}else if(arguments.length===3){var o=arguments[0],s=arguments[1],a=arguments[2];o.getPrecisionModel().compareTo(s.getPrecisionModel())>=0?this.setComputationPrecision(o.getPrecisionModel()):this.setComputationPrecision(s.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new vs(0,o,a),this._arg[1]=new vs(1,s,a)}};$o.prototype.getArgGeometry=function(t){return this._arg[t].getGeometry()};$o.prototype.setComputationPrecision=function(t){this._resultPrecisionModel=t,this._li.setPrecisionModel(this._resultPrecisionModel)};$o.prototype.interfaces_=function(){return[]};$o.prototype.getClass=function(){return $o};var Oi=function(){};Oi.prototype.interfaces_=function(){return[]};Oi.prototype.getClass=function(){return Oi};Oi.map=function(){if(arguments[0]instanceof $&&tt(arguments[1],Oi.MapOp)){for(var t=arguments[0],r=arguments[1],n=new F,i=0;i<t.getNumGeometries();i++){var o=r.map(t.getGeometryN(i));o!==null&&n.add(o)}return t.getFactory().buildGeometry(n)}else if(tt(arguments[0],Se)&&tt(arguments[1],Oi.MapOp)){for(var s=arguments[0],a=arguments[1],u=new F,f=s.iterator();f.hasNext();){var l=f.next(),c=a.map(l);c!==null&&u.add(c)}return u}};Oi.MapOp=function(){};var at=function(e){function t(){var r=arguments[0],n=arguments[1];e.call(this,r,n),this._ptLocator=new tn,this._geomFact=null,this._resultGeom=null,this._graph=null,this._edgeList=new $r,this._resultPolyList=new F,this._resultLineList=new F,this._resultPointList=new F,this._graph=new he(new wg),this._geomFact=r.getFactory()}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.insertUniqueEdge=function(n){var i=this._edgeList.findEqualEdge(n);if(i!==null){var o=i.getLabel(),s=n.getLabel();i.isPointwiseEqual(n)||(s=new Kt(n.getLabel()),s.flip());var a=i.getDepth();a.isNull()&&a.add(o),a.add(s),o.merge(s)}else this._edgeList.add(n)},t.prototype.getGraph=function(){return this._graph},t.prototype.cancelDuplicateResultEdges=function(){for(var n=this._graph.getEdgeEnds().iterator();n.hasNext();){var i=n.next(),o=i.getSym();i.isInResult()&&o.isInResult()&&(i.setInResult(!1),o.setInResult(!1))}},t.prototype.isCoveredByLA=function(n){return!!(this.isCovered(n,this._resultLineList)||this.isCovered(n,this._resultPolyList))},t.prototype.computeGeometry=function(n,i,o,s){var a=new F;return a.addAll(n),a.addAll(i),a.addAll(o),a.isEmpty()?t.createEmptyResult(s,this._arg[0].getGeometry(),this._arg[1].getGeometry(),this._geomFact):this._geomFact.buildGeometry(a)},t.prototype.mergeSymLabels=function(){for(var n=this._graph.getNodes().iterator();n.hasNext();){var i=n.next();i.getEdges().mergeSymLabels()}},t.prototype.isCovered=function(n,i){for(var o=this,s=i.iterator();s.hasNext();){var a=s.next(),u=o._ptLocator.locate(n,a);if(u!==L.EXTERIOR)return!0}return!1},t.prototype.replaceCollapsedEdges=function(){for(var n=new F,i=this._edgeList.iterator();i.hasNext();){var o=i.next();o.isCollapsed()&&(i.remove(),n.add(o.getCollapsedEdge()))}this._edgeList.addAll(n)},t.prototype.updateNodeLabelling=function(){for(var n=this._graph.getNodes().iterator();n.hasNext();){var i=n.next(),o=i.getEdges().getLabel();i.getLabel().merge(o)}},t.prototype.getResultGeometry=function(n){return this.computeOverlay(n),this._resultGeom},t.prototype.insertUniqueEdges=function(n){for(var i=this,o=n.iterator();o.hasNext();){var s=o.next();i.insertUniqueEdge(s)}},t.prototype.computeOverlay=function(n){this.copyPoints(0),this.copyPoints(1),this._arg[0].computeSelfNodes(this._li,!1),this._arg[1].computeSelfNodes(this._li,!1),this._arg[0].computeEdgeIntersections(this._arg[1],this._li,!0);var i=new F;this._arg[0].computeSplitEdges(i),this._arg[1].computeSplitEdges(i),this.insertUniqueEdges(i),this.computeLabelsFromDepths(),this.replaceCollapsedEdges(),qi.checkValid(this._edgeList.getEdges()),this._graph.addEdges(this._edgeList.getEdges()),this.computeLabelling(),this.labelIncompleteNodes(),this.findResultAreaEdges(n),this.cancelDuplicateResultEdges();var o=new wr(this._geomFact);o.add(this._graph),this._resultPolyList=o.getPolygons();var s=new xn(this,this._geomFact,this._ptLocator);this._resultLineList=s.build(n);var a=new uo(this,this._geomFact,this._ptLocator);this._resultPointList=a.build(n),this._resultGeom=this.computeGeometry(this._resultPointList,this._resultLineList,this._resultPolyList,n)},t.prototype.labelIncompleteNode=function(n,i){var o=this._ptLocator.locate(n.getCoordinate(),this._arg[i].getGeometry());n.getLabel().setLocation(i,o)},t.prototype.copyPoints=function(n){for(var i=this,o=this._arg[n].getNodeIterator();o.hasNext();){var s=o.next(),a=i._graph.addNode(s.getCoordinate());a.setLabel(n,s.getLabel().getLocation(n))}},t.prototype.findResultAreaEdges=function(n){for(var i=this._graph.getEdgeEnds().iterator();i.hasNext();){var o=i.next(),s=o.getLabel();s.isArea()&&!o.isInteriorAreaEdge()&&t.isResultOfOp(s.getLocation(0,b.RIGHT),s.getLocation(1,b.RIGHT),n)&&o.setInResult(!0)}},t.prototype.computeLabelsFromDepths=function(){for(var n=this._edgeList.iterator();n.hasNext();){var i=n.next(),o=i.getLabel(),s=i.getDepth();if(!s.isNull()){s.normalize();for(var a=0;a<2;a++)!o.isNull(a)&&o.isArea()&&!s.isNull(a)&&(s.getDelta(a)===0?o.toLine(a):(ut.isTrue(!s.isNull(a,b.LEFT),"depth of LEFT side has not been initialized"),o.setLocation(a,b.LEFT,s.getLocation(a,b.LEFT)),ut.isTrue(!s.isNull(a,b.RIGHT),"depth of RIGHT side has not been initialized"),o.setLocation(a,b.RIGHT,s.getLocation(a,b.RIGHT))))}}},t.prototype.computeLabelling=function(){for(var n=this,i=this._graph.getNodes().iterator();i.hasNext();){var o=i.next();o.getEdges().computeLabelling(n._arg)}this.mergeSymLabels(),this.updateNodeLabelling()},t.prototype.labelIncompleteNodes=function(){for(var n=this,i=this._graph.getNodes().iterator();i.hasNext();){var o=i.next(),s=o.getLabel();o.isIsolated()&&(s.isNull(0)?n.labelIncompleteNode(o,0):n.labelIncompleteNode(o,1)),o.getEdges().updateLabelling(s)}},t.prototype.isCoveredByA=function(n){return!!this.isCovered(n,this._resultPolyList)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}($o);at.overlayOp=function(e,t,r){var n=new at(e,t),i=n.getResultGeometry(r);return i};at.intersection=function(e,t){if(e.isEmpty()||t.isEmpty())return at.createEmptyResult(at.INTERSECTION,e,t,e.getFactory());if(e.isGeometryCollection()){var r=t;return ao.map(e,{interfaces_:function(){return[Oi.MapOp]},map:function(n){return n.intersection(r)}})}return e.checkNotGeometryCollection(e),e.checkNotGeometryCollection(t),fr.overlayOp(e,t,at.INTERSECTION)};at.symDifference=function(e,t){if(e.isEmpty()||t.isEmpty()){if(e.isEmpty()&&t.isEmpty())return at.createEmptyResult(at.SYMDIFFERENCE,e,t,e.getFactory());if(e.isEmpty())return t.copy();if(t.isEmpty())return e.copy()}return e.checkNotGeometryCollection(e),e.checkNotGeometryCollection(t),fr.overlayOp(e,t,at.SYMDIFFERENCE)};at.resultDimension=function(e,t,r){var n=t.getDimension(),i=r.getDimension(),o=-1;switch(e){case at.INTERSECTION:o=Math.min(n,i);break;case at.UNION:o=Math.max(n,i);break;case at.DIFFERENCE:o=n;break;case at.SYMDIFFERENCE:o=Math.max(n,i);break}return o};at.createEmptyResult=function(e,t,r,n){var i=null;switch(at.resultDimension(e,t,r)){case-1:i=n.createGeometryCollection(new Array(0).fill(null));break;case 0:i=n.createPoint();break;case 1:i=n.createLineString();break;case 2:i=n.createPolygon();break}return i};at.difference=function(e,t){return e.isEmpty()?at.createEmptyResult(at.DIFFERENCE,e,t,e.getFactory()):t.isEmpty()?e.copy():(e.checkNotGeometryCollection(e),e.checkNotGeometryCollection(t),fr.overlayOp(e,t,at.DIFFERENCE))};at.isResultOfOp=function(){if(arguments.length===2){var e=arguments[0],t=arguments[1],r=e.getLocation(0),n=e.getLocation(1);return at.isResultOfOp(r,n,t)}else if(arguments.length===3){var i=arguments[0],o=arguments[1],s=arguments[2];switch(i===L.BOUNDARY&&(i=L.INTERIOR),o===L.BOUNDARY&&(o=L.INTERIOR),s){case at.INTERSECTION:return i===L.INTERIOR&&o===L.INTERIOR;case at.UNION:return i===L.INTERIOR||o===L.INTERIOR;case at.DIFFERENCE:return i===L.INTERIOR&&o!==L.INTERIOR;case at.SYMDIFFERENCE:return i===L.INTERIOR&&o!==L.INTERIOR||i!==L.INTERIOR&&o===L.INTERIOR}return!1}};at.INTERSECTION=1;at.UNION=2;at.DIFFERENCE=3;at.SYMDIFFERENCE=4;var fi=function(){this._g=null,this._boundaryDistanceTolerance=null,this._linework=null,this._ptLocator=new tn,this._seg=new H;var t=arguments[0],r=arguments[1];this._g=t,this._boundaryDistanceTolerance=r,this._linework=this.extractLinework(t)};fi.prototype.isWithinToleranceOfBoundary=function(t){for(var r=this,n=0;n<this._linework.getNumGeometries();n++)for(var i=r._linework.getGeometryN(n),o=i.getCoordinateSequence(),s=0;s<o.size()-1;s++){o.getCoordinate(s,r._seg.p0),o.getCoordinate(s+1,r._seg.p1);var a=r._seg.distance(t);if(a<=r._boundaryDistanceTolerance)return!0}return!1};fi.prototype.getLocation=function(t){return this.isWithinToleranceOfBoundary(t)?L.BOUNDARY:this._ptLocator.locate(t,this._g)};fi.prototype.extractLinework=function(t){var r=new ts;t.apply(r);var n=r.getLinework(),i=lt.toLineStringArray(n);return t.getFactory().createMultiLineString(i)};fi.prototype.interfaces_=function(){return[]};fi.prototype.getClass=function(){return fi};var ts=function(){this._linework=null,this._linework=new F};ts.prototype.getLinework=function(){return this._linework};ts.prototype.filter=function(t){var r=this;if(t instanceof Re){var n=t;this._linework.add(n.getExteriorRing());for(var i=0;i<n.getNumInteriorRing();i++)r._linework.add(n.getInteriorRingN(i))}};ts.prototype.interfaces_=function(){return[gn]};ts.prototype.getClass=function(){return ts};var Ui=function(){this._g=null,this._doLeft=!0,this._doRight=!0;var t=arguments[0];this._g=t};Ui.prototype.extractPoints=function(t,r,n){for(var i=this,o=t.getCoordinates(),s=0;s<o.length-1;s++)i.computeOffsetPoints(o[s],o[s+1],r,n)};Ui.prototype.setSidesToGenerate=function(t,r){this._doLeft=t,this._doRight=r};Ui.prototype.getPoints=function(t){for(var r=this,n=new F,i=Be.getLines(this._g),o=i.iterator();o.hasNext();){var s=o.next();r.extractPoints(s,t,n)}return n};Ui.prototype.computeOffsetPoints=function(t,r,n,i){var o=r.x-t.x,s=r.y-t.y,a=Math.sqrt(o*o+s*s),u=n*o/a,f=n*s/a,l=(r.x+t.x)/2,c=(r.y+t.y)/2;if(this._doLeft){var h=new P(l-f,c+u);i.add(h)}if(this._doRight){var p=new P(l+f,c-u);i.add(p)}};Ui.prototype.interfaces_=function(){return[]};Ui.prototype.getClass=function(){return Ui};var Ar=function e(){this._geom=null,this._locFinder=null,this._location=new Array(3).fill(null),this._invalidLocation=null,this._boundaryDistanceTolerance=e.TOLERANCE,this._testCoords=new F;var t=arguments[0],r=arguments[1],n=arguments[2];this._boundaryDistanceTolerance=e.computeBoundaryDistanceTolerance(t,r),this._geom=[t,r,n],this._locFinder=[new fi(this._geom[0],this._boundaryDistanceTolerance),new fi(this._geom[1],this._boundaryDistanceTolerance),new fi(this._geom[2],this._boundaryDistanceTolerance)]},Ag={TOLERANCE:{configurable:!0}};Ar.prototype.reportResult=function(t,r,n){qe.out.println("Overlay result invalid - A:"+L.toLocationSymbol(r[0])+" B:"+L.toLocationSymbol(r[1])+" expected:"+(n?"i":"e")+" actual:"+L.toLocationSymbol(r[2]))};Ar.prototype.isValid=function(t){this.addTestPts(this._geom[0]),this.addTestPts(this._geom[1]);var r=this.checkValid(t);return r};Ar.prototype.checkValid=function(){var t=this;if(arguments.length===1){for(var r=arguments[0],n=0;n<this._testCoords.size();n++){var i=t._testCoords.get(n);if(!t.checkValid(r,i))return t._invalidLocation=i,!1}return!0}else if(arguments.length===2){var o=arguments[0],s=arguments[1];return this._location[0]=this._locFinder[0].getLocation(s),this._location[1]=this._locFinder[1].getLocation(s),this._location[2]=this._locFinder[2].getLocation(s),Ar.hasLocation(this._location,L.BOUNDARY)?!0:this.isValidResult(o,this._location)}};Ar.prototype.addTestPts=function(t){var r=new Ui(t);this._testCoords.addAll(r.getPoints(5*this._boundaryDistanceTolerance))};Ar.prototype.isValidResult=function(t,r){var n=at.isResultOfOp(r[0],r[1],t),i=r[2]===L.INTERIOR,o=!(n^i);return o||this.reportResult(t,r,n),o};Ar.prototype.getInvalidLocation=function(){return this._invalidLocation};Ar.prototype.interfaces_=function(){return[]};Ar.prototype.getClass=function(){return Ar};Ar.hasLocation=function(t,r){for(var n=0;n<3;n++)if(t[n]===r)return!0;return!1};Ar.computeBoundaryDistanceTolerance=function(t,r){return Math.min(me.computeSizeBasedSnapTolerance(t),me.computeSizeBasedSnapTolerance(r))};Ar.isValid=function(t,r,n,i){var o=new Ar(t,r,i);return o.isValid(n)};Ag.TOLERANCE.get=function(){return 1e-6};Object.defineProperties(Ar,Ag);var Sr=function e(t){this._geomFactory=null,this._skipEmpty=!1,this._inputGeoms=null,this._geomFactory=e.extractFactory(t),this._inputGeoms=t};Sr.prototype.extractElements=function(t,r){var n=this;if(t===null)return null;for(var i=0;i<t.getNumGeometries();i++){var o=t.getGeometryN(i);n._skipEmpty&&o.isEmpty()||r.add(o)}};Sr.prototype.combine=function(){for(var t=this,r=new F,n=this._inputGeoms.iterator();n.hasNext();){var i=n.next();t.extractElements(i,r)}return r.size()===0?this._geomFactory!==null?this._geomFactory.createGeometryCollection(null):null:this._geomFactory.buildGeometry(r)};Sr.prototype.interfaces_=function(){return[]};Sr.prototype.getClass=function(){return Sr};Sr.combine=function(){if(arguments.length===1){var t=arguments[0],r=new Sr(t);return r.combine()}else if(arguments.length===2){var n=arguments[0],i=arguments[1],o=new Sr(Sr.createList(n,i));return o.combine()}else if(arguments.length===3){var s=arguments[0],a=arguments[1],u=arguments[2],f=new Sr(Sr.createList(s,a,u));return f.combine()}};Sr.extractFactory=function(t){return t.isEmpty()?null:t.iterator().next().getFactory()};Sr.createList=function(){if(arguments.length===2){var t=arguments[0],r=arguments[1],n=new F;return n.add(t),n.add(r),n}else if(arguments.length===3){var i=arguments[0],o=arguments[1],s=arguments[2],a=new F;return a.add(i),a.add(o),a.add(s),a}};var Ie=function(){this._inputPolys=null,this._geomFactory=null;var t=arguments[0];this._inputPolys=t,this._inputPolys===null&&(this._inputPolys=new F)},bg={STRTREE_NODE_CAPACITY:{configurable:!0}};Ie.prototype.reduceToGeometries=function(t){for(var r=this,n=new F,i=t.iterator();i.hasNext();){var o=i.next(),s=null;tt(o,Jr)?s=r.unionTree(o):o instanceof $&&(s=o),n.add(s)}return n};Ie.prototype.extractByEnvelope=function(t,r,n){for(var i=new F,o=0;o<r.getNumGeometries();o++){var s=r.getGeometryN(o);s.getEnvelopeInternal().intersects(t)?i.add(s):n.add(s)}return this._geomFactory.buildGeometry(i)};Ie.prototype.unionOptimized=function(t,r){var n=t.getEnvelopeInternal(),i=r.getEnvelopeInternal();if(!n.intersects(i)){var o=Sr.combine(t,r);return o}if(t.getNumGeometries()<=1&&r.getNumGeometries()<=1)return this.unionActual(t,r);var s=n.intersection(i);return this.unionUsingEnvelopeIntersection(t,r,s)};Ie.prototype.union=function(){if(this._inputPolys===null)throw new Error("union() method cannot be called twice");if(this._inputPolys.isEmpty())return null;this._geomFactory=this._inputPolys.iterator().next().getFactory();for(var t=new mg(Ie.STRTREE_NODE_CAPACITY),r=this._inputPolys.iterator();r.hasNext();){var n=r.next();t.insert(n.getEnvelopeInternal(),n)}this._inputPolys=null;var i=t.itemsTree(),o=this.unionTree(i);return o};Ie.prototype.binaryUnion=function(){if(arguments.length===1){var t=arguments[0];return this.binaryUnion(t,0,t.size())}else if(arguments.length===3){var r=arguments[0],n=arguments[1],i=arguments[2];if(i-n<=1){var o=Ie.getGeometry(r,n);return this.unionSafe(o,null)}else{if(i-n===2)return this.unionSafe(Ie.getGeometry(r,n),Ie.getGeometry(r,n+1));var s=Math.trunc((i+n)/2),a=this.binaryUnion(r,n,s),u=this.binaryUnion(r,s,i);return this.unionSafe(a,u)}}};Ie.prototype.repeatedUnion=function(t){for(var r=null,n=t.iterator();n.hasNext();){var i=n.next();r===null?r=i.copy():r=r.union(i)}return r};Ie.prototype.unionSafe=function(t,r){return t===null&&r===null?null:t===null?r.copy():r===null?t.copy():this.unionOptimized(t,r)};Ie.prototype.unionActual=function(t,r){return Ie.restrictToPolygons(t.union(r))};Ie.prototype.unionTree=function(t){var r=this.reduceToGeometries(t),n=this.binaryUnion(r);return n};Ie.prototype.unionUsingEnvelopeIntersection=function(t,r,n){var i=new F,o=this.extractByEnvelope(n,t,i),s=this.extractByEnvelope(n,r,i),a=this.unionActual(o,s);i.add(a);var u=Sr.combine(i);return u};Ie.prototype.bufferUnion=function(){if(arguments.length===1){var t=arguments[0],r=t.get(0).getFactory(),n=r.buildGeometry(t),i=n.buffer(0);return i}else if(arguments.length===2){var o=arguments[0],s=arguments[1],a=o.getFactory(),u=a.createGeometryCollection([o,s]),f=u.buffer(0);return f}};Ie.prototype.interfaces_=function(){return[]};Ie.prototype.getClass=function(){return Ie};Ie.restrictToPolygons=function(t){if(tt(t,ci))return t;var r=Zn.getPolygons(t);return r.size()===1?r.get(0):t.getFactory().createMultiPolygon(lt.toPolygonArray(r))};Ie.getGeometry=function(t,r){return r>=t.size()?null:t.get(r)};Ie.union=function(t){var r=new Ie(t);return r.union()};bg.STRTREE_NODE_CAPACITY.get=function(){return 4};Object.defineProperties(Ie,bg);var Ba=function(){};Ba.prototype.interfaces_=function(){return[]};Ba.prototype.getClass=function(){return Ba};Ba.union=function(t,r){if(t.isEmpty()||r.isEmpty()){if(t.isEmpty()&&r.isEmpty())return at.createEmptyResult(at.UNION,t,r,t.getFactory());if(t.isEmpty())return r.copy();if(r.isEmpty())return t.copy()}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(r),fr.overlayOp(t,r,at.UNION)};function Vi(){return new Ga}function Ga(){this.reset()}Ga.prototype={constructor:Ga,reset:function(){this.s=this.t=0},add:function(e){uh(va,e,this.t),uh(this,va.s,this.s),this.s?this.t+=va.t:this.s=va.t},valueOf:function(){return this.s}};var va=new Ga;function uh(e,t,r){var n=e.s=t+r,i=n-t,o=n-i;e.t=t-o+(r-i)}var pe=1e-6,te=Math.PI,Kn=te/2,fh=te/4,ni=te*2,Ci=180/te,sn=te/180,nr=Math.abs,kE=Math.atan,es=Math.atan2,Ne=Math.cos,Pe=Math.sin,fs=Math.sqrt;function Dg(e){return e>1?0:e<-1?te:Math.acos(e)}function lo(e){return e>1?Kn:e<-1?-Kn:Math.asin(e)}function ws(){}function ka(e,t){e&&ch.hasOwnProperty(e.type)&&ch[e.type](e,t)}var lh={Feature:function(e,t){ka(e.geometry,t)},FeatureCollection:function(e,t){for(var r=e.features,n=-1,i=r.length;++n<i;)ka(r[n].geometry,t)}},ch={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var r=e.coordinates,n=-1,i=r.length;++n<i;)e=r[n],t.point(e[0],e[1],e[2])},LineString:function(e,t){gf(e.coordinates,t,0)},MultiLineString:function(e,t){for(var r=e.coordinates,n=-1,i=r.length;++n<i;)gf(r[n],t,0)},Polygon:function(e,t){hh(e.coordinates,t)},MultiPolygon:function(e,t){for(var r=e.coordinates,n=-1,i=r.length;++n<i;)hh(r[n],t)},GeometryCollection:function(e,t){for(var r=e.geometries,n=-1,i=r.length;++n<i;)ka(r[n],t)}};function gf(e,t,r){var n=-1,i=e.length-r,o;for(t.lineStart();++n<i;)o=e[n],t.point(o[0],o[1],o[2]);t.lineEnd()}function hh(e,t){var r=-1,n=e.length;for(t.polygonStart();++r<n;)gf(e[r],t,1);t.polygonEnd()}function qE(e,t){e&&lh.hasOwnProperty(e.type)?lh[e.type](e,t):ka(e,t)}Vi();Vi();function vf(e){return[es(e[1],e[0]),lo(e[2])]}function rs(e){var t=e[0],r=e[1],n=Ne(r);return[n*Ne(t),n*Pe(t),Pe(r)]}function da(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function qa(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function qu(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function ya(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function df(e){var t=fs(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}Vi();function Tg(e,t){function r(n,i){return n=e(n,i),t(n[0],n[1])}return e.invert&&t.invert&&(r.invert=function(n,i){return n=t.invert(n,i),n&&e.invert(n[0],n[1])}),r}function yf(e,t){return[e>te?e-ni:e<-te?e+ni:e,t]}yf.invert=yf;function zE(e,t,r){return(e%=ni)?t||r?Tg(gh(e),vh(t,r)):gh(e):t||r?vh(t,r):yf}function ph(e){return function(t,r){return t+=e,[t>te?t-ni:t<-te?t+ni:t,r]}}function gh(e){var t=ph(e);return t.invert=ph(-e),t}function vh(e,t){var r=Ne(e),n=Pe(e),i=Ne(t),o=Pe(t);function s(a,u){var f=Ne(u),l=Ne(a)*f,c=Pe(a)*f,h=Pe(u),p=h*r+l*n;return[es(c*i-p*o,l*r-h*n),lo(p*i+c*o)]}return s.invert=function(a,u){var f=Ne(u),l=Ne(a)*f,c=Pe(a)*f,h=Pe(u),p=h*i-c*o;return[es(c*i+h*o,l*r+p*n),lo(p*r-l*n)]},s}function UE(e,t,r,n,i,o){if(r){var s=Ne(t),a=Pe(t),u=n*r;i==null?(i=t+n*ni,o=t-u/2):(i=dh(s,i),o=dh(s,o),(n>0?i<o:i>o)&&(i+=n*ni));for(var f,l=i;n>0?l>o:l<o;l-=u)f=vf([s,-a*Ne(l),-a*Pe(l)]),e.point(f[0],f[1])}}function dh(e,t){t=rs(t),t[0]-=e,df(t);var r=Dg(-t[1]);return((-t[2]<0?-r:r)+ni-pe)%ni}function Fg(){var e=[],t;return{point:function(r,n){t.push([r,n])},lineStart:function(){e.push(t=[])},lineEnd:ws,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var r=e;return e=[],t=null,r}}}function XE(e,t,r,n,i,o){var s=e[0],a=e[1],u=t[0],f=t[1],l=0,c=1,h=u-s,p=f-a,v;if(v=r-s,!(!h&&v>0)){if(v/=h,h<0){if(v<l)return;v<c&&(c=v)}else if(h>0){if(v>c)return;v>l&&(l=v)}if(v=i-s,!(!h&&v<0)){if(v/=h,h<0){if(v>c)return;v>l&&(l=v)}else if(h>0){if(v<l)return;v<c&&(c=v)}if(v=n-a,!(!p&&v>0)){if(v/=p,p<0){if(v<l)return;v<c&&(c=v)}else if(p>0){if(v>c)return;v>l&&(l=v)}if(v=o-a,!(!p&&v<0)){if(v/=p,p<0){if(v>c)return;v>l&&(l=v)}else if(p>0){if(v<l)return;v<c&&(c=v)}return l>0&&(e[0]=s+l*h,e[1]=a+l*p),c<1&&(t[0]=s+c*h,t[1]=a+c*p),!0}}}}}function Ia(e,t){return nr(e[0]-t[0])<pe&&nr(e[1]-t[1])<pe}function ma(e,t,r,n){this.x=e,this.z=t,this.o=r,this.e=n,this.v=!1,this.n=this.p=null}function Bg(e,t,r,n,i){var o=[],s=[],a,u;if(e.forEach(function(v){if(!((y=v.length-1)<=0)){var y,E=v[0],x=v[y],g;if(Ia(E,x)){for(i.lineStart(),a=0;a<y;++a)i.point((E=v[a])[0],E[1]);i.lineEnd();return}o.push(g=new ma(E,v,null,!0)),s.push(g.o=new ma(E,null,g,!1)),o.push(g=new ma(x,v,null,!1)),s.push(g.o=new ma(x,null,g,!0))}}),!!o.length){for(s.sort(t),yh(o),yh(s),a=0,u=s.length;a<u;++a)s[a].e=r=!r;for(var f=o[0],l,c;;){for(var h=f,p=!0;h.v;)if((h=h.n)===f)return;l=h.z,i.lineStart();do{if(h.v=h.o.v=!0,h.e){if(p)for(a=0,u=l.length;a<u;++a)i.point((c=l[a])[0],c[1]);else n(h.x,h.n.x,1,i);h=h.n}else{if(p)for(l=h.p.z,a=l.length-1;a>=0;--a)i.point((c=l[a])[0],c[1]);else n(h.x,h.p.x,-1,i);h=h.p}h=h.o,l=h.z,p=!p}while(!h.v);i.lineEnd()}}}function yh(e){if(t=e.length){for(var t,r=0,n=e[0],i;++r<t;)n.n=i=e[r],i.p=n,n=i;n.n=i=e[0],i.p=n}}function Gg(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function YE(e){return e.length===1&&(e=VE(e)),{left:function(t,r,n,i){for(n==null&&(n=0),i==null&&(i=t.length);n<i;){var o=n+i>>>1;e(t[o],r)<0?n=o+1:i=o}return n},right:function(t,r,n,i){for(n==null&&(n=0),i==null&&(i=t.length);n<i;){var o=n+i>>>1;e(t[o],r)>0?i=o:n=o+1}return n}}}function VE(e){return function(t,r){return Gg(e(t),r)}}YE(Gg);function kg(e){for(var t=e.length,r,n=-1,i=0,o,s;++n<t;)i+=e[n].length;for(o=new Array(i);--t>=0;)for(s=e[t],r=s.length;--r>=0;)o[--i]=s[r];return o}var Is=1e9,_a=-Is;function HE(e,t,r,n){function i(f,l){return e<=f&&f<=r&&t<=l&&l<=n}function o(f,l,c,h){var p=0,v=0;if(f==null||(p=s(f,c))!==(v=s(l,c))||u(f,l)<0^c>0)do h.point(p===0||p===3?e:r,p>1?n:t);while((p=(p+c+4)%4)!==v);else h.point(l[0],l[1])}function s(f,l){return nr(f[0]-e)<pe?l>0?0:3:nr(f[0]-r)<pe?l>0?2:1:nr(f[1]-t)<pe?l>0?1:0:l>0?3:2}function a(f,l){return u(f.x,l.x)}function u(f,l){var c=s(f,1),h=s(l,1);return c!==h?c-h:c===0?l[1]-f[1]:c===1?f[0]-l[0]:c===2?f[1]-l[1]:l[0]-f[0]}return function(f){var l=f,c=Fg(),h,p,v,y,E,x,g,d,_,w,S,C={point:N,lineStart:D,lineEnd:T,polygonStart:A,polygonEnd:O};function N(q,B){i(q,B)&&l.point(q,B)}function I(){for(var q=0,B=0,j=p.length;B<j;++B)for(var Z=p[B],J=1,z=Z.length,V=Z[0],K,ft,it=V[0],vt=V[1];J<z;++J)K=it,ft=vt,V=Z[J],it=V[0],vt=V[1],ft<=n?vt>n&&(it-K)*(n-ft)>(vt-ft)*(e-K)&&++q:vt<=n&&(it-K)*(n-ft)<(vt-ft)*(e-K)&&--q;return q}function A(){l=c,h=[],p=[],S=!0}function O(){var q=I(),B=S&&q,j=(h=kg(h)).length;(B||j)&&(f.polygonStart(),B&&(f.lineStart(),o(null,null,1,f),f.lineEnd()),j&&Bg(h,a,q,o,f),f.polygonEnd()),l=f,h=p=v=null}function D(){C.point=R,p&&p.push(v=[]),w=!0,_=!1,g=d=NaN}function T(){h&&(R(y,E),x&&_&&c.rejoin(),h.push(c.result())),C.point=N,_&&l.lineEnd()}function R(q,B){var j=i(q,B);if(p&&v.push([q,B]),w)y=q,E=B,x=j,w=!1,j&&(l.lineStart(),l.point(q,B));else if(j&&_)l.point(q,B);else{var Z=[g=Math.max(_a,Math.min(Is,g)),d=Math.max(_a,Math.min(Is,d))],J=[q=Math.max(_a,Math.min(Is,q)),B=Math.max(_a,Math.min(Is,B))];XE(Z,J,e,t,r,n)?(_||(l.lineStart(),l.point(Z[0],Z[1])),l.point(J[0],J[1]),j||l.lineEnd(),S=!1):j&&(l.lineStart(),l.point(q,B),S=!1)}g=q,d=B,_=j}return C}}var zu=Vi();function WE(e,t){var r=t[0],n=t[1],i=[Pe(r),-Ne(r),0],o=0,s=0;zu.reset();for(var a=0,u=e.length;a<u;++a)if(l=(f=e[a]).length)for(var f,l,c=f[l-1],h=c[0],p=c[1]/2+fh,v=Pe(p),y=Ne(p),E=0;E<l;++E,h=g,v=_,y=w,c=x){var x=f[E],g=x[0],d=x[1]/2+fh,_=Pe(d),w=Ne(d),S=g-h,C=S>=0?1:-1,N=C*S,I=N>te,A=v*_;if(zu.add(es(A*C*Pe(N),y*w+A*Ne(N))),o+=I?S+C*ni:S,I^h>=r^g>=r){var O=qa(rs(c),rs(x));df(O);var D=qa(i,O);df(D);var T=(I^S>=0?-1:1)*lo(D[2]);(n>T||n===T&&(O[0]||O[1]))&&(s+=I^S>=0?1:-1)}}return(o<-pe||o<pe&&zu<-pe)^s&1}Vi();function mh(e){return e}Vi();Vi();var ns=1/0,za=ns,Ks=-ns,Ua=Ks,_h={point:JE,lineStart:ws,lineEnd:ws,polygonStart:ws,polygonEnd:ws,result:function(){var e=[[ns,za],[Ks,Ua]];return Ks=Ua=-(za=ns=1/0),e}};function JE(e,t){e<ns&&(ns=e),e>Ks&&(Ks=e),t<za&&(za=t),t>Ua&&(Ua=t)}Vi();function qg(e,t,r,n){return function(i,o){var s=t(o),a=i.invert(n[0],n[1]),u=Fg(),f=t(u),l=!1,c,h,p,v={point:y,lineStart:x,lineEnd:g,polygonStart:function(){v.point=d,v.lineStart=_,v.lineEnd=w,h=[],c=[]},polygonEnd:function(){v.point=y,v.lineStart=x,v.lineEnd=g,h=kg(h);var S=WE(c,a);h.length?(l||(o.polygonStart(),l=!0),Bg(h,ZE,S,r,o)):S&&(l||(o.polygonStart(),l=!0),o.lineStart(),r(null,null,1,o),o.lineEnd()),l&&(o.polygonEnd(),l=!1),h=c=null},sphere:function(){o.polygonStart(),o.lineStart(),r(null,null,1,o),o.lineEnd(),o.polygonEnd()}};function y(S,C){var N=i(S,C);e(S=N[0],C=N[1])&&o.point(S,C)}function E(S,C){var N=i(S,C);s.point(N[0],N[1])}function x(){v.point=E,s.lineStart()}function g(){v.point=y,s.lineEnd()}function d(S,C){p.push([S,C]);var N=i(S,C);f.point(N[0],N[1])}function _(){f.lineStart(),p=[]}function w(){d(p[0][0],p[0][1]),f.lineEnd();var S=f.clean(),C=u.result(),N,I=C.length,A,O,D;if(p.pop(),c.push(p),p=null,!!I){if(S&1){if(O=C[0],(A=O.length-1)>0){for(l||(o.polygonStart(),l=!0),o.lineStart(),N=0;N<A;++N)o.point((D=O[N])[0],D[1]);o.lineEnd()}return}I>1&&S&2&&C.push(C.pop().concat(C.shift())),h.push(C.filter(KE))}}return v}}function KE(e){return e.length>1}function ZE(e,t){return((e=e.x)[0]<0?e[1]-Kn-pe:Kn-e[1])-((t=t.x)[0]<0?t[1]-Kn-pe:Kn-t[1])}const Eh=qg(function(){return!0},QE,$E,[-te,-Kn]);function QE(e){var t=NaN,r=NaN,n=NaN,i;return{lineStart:function(){e.lineStart(),i=1},point:function(o,s){var a=o>0?te:-te,u=nr(o-t);nr(u-te)<pe?(e.point(t,r=(r+s)/2>0?Kn:-Kn),e.point(n,r),e.lineEnd(),e.lineStart(),e.point(a,r),e.point(o,r),i=0):n!==a&&u>=te&&(nr(t-n)<pe&&(t-=n*pe),nr(o-a)<pe&&(o-=a*pe),r=jE(t,r,o,s),e.point(n,r),e.lineEnd(),e.lineStart(),e.point(a,r),i=0),e.point(t=o,r=s),n=a},lineEnd:function(){e.lineEnd(),t=r=NaN},clean:function(){return 2-i}}}function jE(e,t,r,n){var i,o,s=Pe(e-r);return nr(s)>pe?kE((Pe(t)*(o=Ne(n))*Pe(r)-Pe(n)*(i=Ne(t))*Pe(e))/(i*o*s)):(t+n)/2}function $E(e,t,r,n){var i;if(e==null)i=r*Kn,n.point(-te,i),n.point(0,i),n.point(te,i),n.point(te,0),n.point(te,-i),n.point(0,-i),n.point(-te,-i),n.point(-te,0),n.point(-te,i);else if(nr(e[0]-t[0])>pe){var o=e[0]<t[0]?te:-te;i=r*o/2,n.point(-o,i),n.point(0,i),n.point(o,i)}else n.point(t[0],t[1])}function tx(e,t){var r=Ne(e),n=r>0,i=nr(r)>pe;function o(l,c,h,p){UE(p,e,t,h,l,c)}function s(l,c){return Ne(l)*Ne(c)>r}function a(l){var c,h,p,v,y;return{lineStart:function(){v=p=!1,y=1},point:function(E,x){var g=[E,x],d,_=s(E,x),w=n?_?0:f(E,x):_?f(E+(E<0?te:-te),x):0;if(!c&&(v=p=_)&&l.lineStart(),_!==p&&(d=u(c,g),(!d||Ia(c,d)||Ia(g,d))&&(g[0]+=pe,g[1]+=pe,_=s(g[0],g[1]))),_!==p)y=0,_?(l.lineStart(),d=u(g,c),l.point(d[0],d[1])):(d=u(c,g),l.point(d[0],d[1]),l.lineEnd()),c=d;else if(i&&c&&n^_){var S;!(w&h)&&(S=u(g,c,!0))&&(y=0,n?(l.lineStart(),l.point(S[0][0],S[0][1]),l.point(S[1][0],S[1][1]),l.lineEnd()):(l.point(S[1][0],S[1][1]),l.lineEnd(),l.lineStart(),l.point(S[0][0],S[0][1])))}_&&(!c||!Ia(c,g))&&l.point(g[0],g[1]),c=g,p=_,h=w},lineEnd:function(){p&&l.lineEnd(),c=null},clean:function(){return y|(v&&p)<<1}}}function u(l,c,h){var p=rs(l),v=rs(c),y=[1,0,0],E=qa(p,v),x=da(E,E),g=E[0],d=x-g*g;if(!d)return!h&&l;var _=r*x/d,w=-r*g/d,S=qa(y,E),C=ya(y,_),N=ya(E,w);qu(C,N);var I=S,A=da(C,I),O=da(I,I),D=A*A-O*(da(C,C)-1);if(!(D<0)){var T=fs(D),R=ya(I,(-A-T)/O);if(qu(R,C),R=vf(R),!h)return R;var q=l[0],B=c[0],j=l[1],Z=c[1],J;B<q&&(J=q,q=B,B=J);var z=B-q,V=nr(z-te)<pe,K=V||z<pe;if(!V&&Z<j&&(J=j,j=Z,Z=J),K?V?j+Z>0^R[1]<(nr(R[0]-q)<pe?j:Z):j<=R[1]&&R[1]<=Z:z>te^(q<=R[0]&&R[0]<=B)){var ft=ya(I,(-A+T)/O);return qu(ft,C),[R,vf(ft)]}}}function f(l,c){var h=n?e:te-e,p=0;return l<-h?p|=1:l>h&&(p|=2),c<-h?p|=4:c>h&&(p|=8),p}return qg(s,a,o,n?[0,-e]:[-te,e-te])}function zg(e){return function(t){var r=new mf;for(var n in e)r[n]=e[n];return r.stream=t,r}}function mf(){}mf.prototype={constructor:mf,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function Ug(e,t,r){var n=t[1][0]-t[0][0],i=t[1][1]-t[0][1],o=e.clipExtent&&e.clipExtent();e.scale(150).translate([0,0]),o!=null&&e.clipExtent(null),qE(r,e.stream(_h));var s=_h.result(),a=Math.min(n/(s[1][0]-s[0][0]),i/(s[1][1]-s[0][1])),u=+t[0][0]+(n-a*(s[1][0]+s[0][0]))/2,f=+t[0][1]+(i-a*(s[1][1]+s[0][1]))/2;return o!=null&&e.clipExtent(o),e.scale(a*150).translate([u,f])}function ex(e,t,r){return Ug(e,[[0,0],t],r)}var xh=16,rx=Ne(30*sn);function wh(e,t){return+t?ix(e,t):nx(e)}function nx(e){return zg({point:function(t,r){t=e(t,r),this.stream.point(t[0],t[1])}})}function ix(e,t){function r(n,i,o,s,a,u,f,l,c,h,p,v,y,E){var x=f-n,g=l-i,d=x*x+g*g;if(d>4*t&&y--){var _=s+h,w=a+p,S=u+v,C=fs(_*_+w*w+S*S),N=lo(S/=C),I=nr(nr(S)-1)<pe||nr(o-c)<pe?(o+c)/2:es(w,_),A=e(I,N),O=A[0],D=A[1],T=O-n,R=D-i,q=g*T-x*R;(q*q/d>t||nr((x*T+g*R)/d-.5)>.3||s*h+a*p+u*v<rx)&&(r(n,i,o,s,a,u,O,D,I,_/=C,w/=C,S,y,E),E.point(O,D),r(O,D,I,_,w,S,f,l,c,h,p,v,y,E))}}return function(n){var i,o,s,a,u,f,l,c,h,p,v,y,E={point:x,lineStart:g,lineEnd:_,polygonStart:function(){n.polygonStart(),E.lineStart=w},polygonEnd:function(){n.polygonEnd(),E.lineStart=g}};function x(N,I){N=e(N,I),n.point(N[0],N[1])}function g(){c=NaN,E.point=d,n.lineStart()}function d(N,I){var A=rs([N,I]),O=e(N,I);r(c,h,l,p,v,y,c=O[0],h=O[1],l=N,p=A[0],v=A[1],y=A[2],xh,n),n.point(c,h)}function _(){E.point=x,n.lineEnd()}function w(){g(),E.point=S,E.lineEnd=C}function S(N,I){d(i=N,I),o=c,s=h,a=p,u=v,f=y,E.point=d}function C(){r(c,h,l,p,v,y,o,s,i,a,u,f,xh,n),E.lineEnd=_,_()}return E}}var ox=zg({point:function(e,t){this.stream.point(e*sn,t*sn)}});function sx(e){return ax(function(){return e})()}function ax(e){var t,r=150,n=480,i=250,o,s,a=0,u=0,f=0,l=0,c=0,h,p,v=null,y=Eh,E=null,x,g,d,_=mh,w=.5,S=wh(O,w),C,N;function I(R){return R=p(R[0]*sn,R[1]*sn),[R[0]*r+o,s-R[1]*r]}function A(R){return R=p.invert((R[0]-o)/r,(s-R[1])/r),R&&[R[0]*Ci,R[1]*Ci]}function O(R,q){return R=t(R,q),[R[0]*r+o,s-R[1]*r]}I.stream=function(R){return C&&N===R?C:C=ox(y(h,S(_(N=R))))},I.clipAngle=function(R){return arguments.length?(y=+R?tx(v=R*sn,6*sn):(v=null,Eh),T()):v*Ci},I.clipExtent=function(R){return arguments.length?(_=R==null?(E=x=g=d=null,mh):HE(E=+R[0][0],x=+R[0][1],g=+R[1][0],d=+R[1][1]),T()):E==null?null:[[E,x],[g,d]]},I.scale=function(R){return arguments.length?(r=+R,D()):r},I.translate=function(R){return arguments.length?(n=+R[0],i=+R[1],D()):[n,i]},I.center=function(R){return arguments.length?(a=R[0]%360*sn,u=R[1]%360*sn,D()):[a*Ci,u*Ci]},I.rotate=function(R){return arguments.length?(f=R[0]%360*sn,l=R[1]%360*sn,c=R.length>2?R[2]%360*sn:0,D()):[f*Ci,l*Ci,c*Ci]},I.precision=function(R){return arguments.length?(S=wh(O,w=R*R),T()):fs(w)},I.fitExtent=function(R,q){return Ug(I,R,q)},I.fitSize=function(R,q){return ex(I,R,q)};function D(){p=Tg(h=zE(f,l,c),t);var R=t(a,u);return o=n-R[0]*r,s=i+R[1]*r,T()}function T(){return C=N=null,I}return function(){return t=e.apply(this,arguments),I.invert=t.invert&&A,D()}}function Xg(e){return function(t,r){var n=Ne(t),i=Ne(r),o=e(n*i);return[o*i*Pe(t),o*Pe(r)]}}function Yg(e){return function(t,r){var n=fs(t*t+r*r),i=e(n),o=Pe(i),s=Ne(i);return[es(t*o,n*s),lo(n&&r*o/n)]}}var ux=Xg(function(e){return fs(2/(1+e))});ux.invert=Yg(function(e){return 2*lo(e/2)});var Vg=Xg(function(e){return(e=Dg(e))&&e/Pe(e)});Vg.invert=Yg(function(e){return e});function fx(){return sx(Vg).scale(79.4188).clipAngle(180-.001)}function Ih(e,t){return[e,t]}Ih.invert=Ih;function Ew(e,t,r){r=r||{};var n=r.units||"kilometers",i=r.steps||8;if(!e)throw new Error("geojson is required");if(typeof r!="object")throw new Error("options must be an object");if(typeof i!="number")throw new Error("steps must be an number");if(t===void 0)throw new Error("radius is required");if(i<=0)throw new Error("steps must be greater than 0");var o=[];switch(e.type){case"GeometryCollection":return wn(e,function(s){var a=Ca(s,t,n,i);a&&o.push(a)}),et(o);case"FeatureCollection":return Qt(e,function(s){var a=Ca(s,t,n,i);a&&Qt(a,function(u){u&&o.push(u)})}),et(o)}return Ca(e,t,n,i)}function Ca(e,t,r,n){var i=e.properties||{},o=e.type==="Feature"?e.geometry:e;if(o.type==="GeometryCollection"){var s=[];return wn(e,function(y){var E=Ca(y,t,r,n);E&&s.push(E)}),et(s)}var a=lx(o),u={type:o.type,coordinates:Wg(o.coordinates,a)},f=new sl,l=f.read(u),c=Va(Zs(t,r),"meters"),h=Ge.bufferOp(l,c,n),p=new dg;if(h=p.write(h),!Hg(h.coordinates)){var v={type:h.type,coordinates:Jg(h.coordinates,a)};return ze(v,i)}}function Hg(e){return Array.isArray(e[0])?Hg(e[0]):isNaN(e[0])}function Wg(e,t){return typeof e[0]!="object"?t(e):e.map(function(r){return Wg(r,t)})}function Jg(e,t){return typeof e[0]!="object"?t.invert(e):e.map(function(r){return Jg(r,t)})}function lx(e){var t=Lf(e).geometry.coordinates,r=[-t[0],-t[1]];return fx().rotate(r).scale(Ve)}function Kg(e,t,r){r===void 0&&(r={});var n=fe(e),i=fe(t),o=jf.union(n.coordinates,i.coordinates);return o.length===0?null:o.length===1?pt(o[0],r.properties):Qn(o,r.properties)}function Xa(e,t,r){r===void 0&&(r={});var n=fe(e),i=fe(t),o=jf.intersection(n.coordinates,i.coordinates);return o.length===0?null:o.length===1?pt(o[0],r.properties):Qn(o,r.properties)}/**
 * @license get-closest https://github.com/cosmosio/get-closest
 *
 * The MIT License (MIT)
 *
 * Copyright (c) 2014-2017 Olivier Scherrer <pode.fr@gmail.com>
 */function cx(e,t,r){var n,i;if(!Array.isArray(t))throw new Error("Get closest expects an array as second argument");return t.forEach(function(o,s){var a=r(o,e);a>=0&&(typeof i>"u"||a<i)&&(i=a,n=s)}),n}function hx(e,t){return cx(e,t,function(r,n){return r-n})}function xw(e,t){if(t=t||{},!re(t))throw new Error("options is invalid");var r=t.propertyName;Xi(e,"Polygon","dissolve");var n=or(e),i=n.features,o=[];i.forEach(function(l,c){l.properties.origIndexPosition=c});var s=js();s.load(n);for(var a in i){var u=i[a],f=!1;if(s.search(u).features.forEach(function(l){u=i[a];var c=l.properties.origIndexPosition;if(o.length>0&&c!==0)if(c>o[o.length-1])c=c-o.length;else{var h=hx(c,o);h!==0&&(c=c-h)}if(c!==+a){var p=i[c];!p||!u||r!==void 0&&p.properties[r]!==u.properties[r]||!j_(u,p)||!px(u,p)||(i[a]=Kg(u,p),o.push(l.properties.origIndexPosition),o.sort(function(v,y){return v-y}),s.remove(l),i.splice(c,1),u.properties.origIndexPosition=a,s.remove(u,function(v,y){return v.properties.origIndexPosition===y.properties.origIndexPosition}),f=!0)}}),f){if(!u)continue;u.properties.origIndexPosition=a,s.insert(u),a--}}return i.forEach(function(l){delete l.properties.origIndexPosition,delete l.bbox}),n}function px(e,t){var r=Jt(Zi(e)),n=Jt(Zi(t)),i=xi(r,n).features;return i.length>0}function gx(e,t,r){r===void 0&&(r={});var n=JSON.stringify(r.properties||{}),i=e[0],o=e[1],s=e[2],a=e[3],u=(o+a)/2,f=(i+s)/2,l=t*2/ee([i,u],[s,u],r),c=l*(s-i),h=t*2/ee([f,o],[f,a],r),p=h*(a-o),v=c/2,y=v*2,E=Math.sqrt(3)/2*p,x=s-i,g=a-o,d=3/4*y,_=E,w=(x-y)/(y-v/2),S=Math.floor(w),C=(S*d-v/2-x)/2-v/2+d/2,N=Math.floor((g-E)/E),I=(g-N*E)/2,A=N*E-g>E/2;A&&(I-=E/4);for(var O=[],D=[],T=0;T<6;T++){var R=2*Math.PI/6*T;O.push(Math.cos(R)),D.push(Math.sin(R))}for(var q=[],B=0;B<=S;B++)for(var j=0;j<=N;j++){var Z=B%2===1;if(!(j===0&&Z)&&!(j===0&&A)){var J=B*d+i-C,z=j*_+o+I;if(Z&&(z-=E/2),r.triangles===!0)dx([J,z],c/2,p/2,JSON.parse(n),O,D).forEach(function(K){r.mask?Xa(r.mask,K)&&q.push(K):q.push(K)});else{var V=vx([J,z],c/2,p/2,JSON.parse(n),O,D);r.mask?Xa(r.mask,V)&&q.push(V):q.push(V)}}}return et(q)}function vx(e,t,r,n,i,o){for(var s=[],a=0;a<6;a++){var u=e[0]+t*i[a],f=e[1]+r*o[a];s.push([u,f])}return s.push(s[0].slice()),pt([s],n)}function dx(e,t,r,n,i,o){for(var s=[],a=0;a<6;a++){var u=[];u.push(e),u.push([e[0]+t*i[a],e[1]+r*o[a]]),u.push([e[0]+t*i[(a+1)%6],e[1]+r*o[(a+1)%6]]),u.push(e),s.push(pt([u],n))}return s}function ww(e,t){var r=_x(t),n=mx(e),i=n[0],o=n[1];i=Ch(i),o=Ch(o);var s=yx(r,i,o);return s}function yx(e,t,r){var n=[];return n.push(e.geometry.coordinates[0]),Oe(t,function(i){n.push(i.geometry.coordinates[0])}),Oe(r,function(i){n.push(i.geometry.coordinates[0])}),pt(n)}function mx(e){var t=[],r=[];return Oe(e,function(n){var i=n.geometry.coordinates,o=i[0],s=i.slice(1);t.push(pt([o])),s.forEach(function(a){r.push(pt([a]))})}),[et(t),et(r)]}function _x(e){var t=[[[180,90],[-180,90],[-180,-90],[180,-90],[180,90]]],r=e&&e.geometry.coordinates||t;return pt(r)}function Ch(e){if(e.features.length<=1)return e;var t=Ex(e),r=[],n={};return Oe(e,function(i,o){if(n[o])return!0;for(t.remove({index:o},Sh),n[o]=!0;;){var s=Ee(i),a=t.search({minX:s[0],minY:s[1],maxX:s[2],maxY:s[3]});if(a.length>0)for(var u=a.map(function(c){return n[c.index]=!0,t.remove({index:c.index},Sh),c.geojson}),f=0,l=u.length;f<l;f++)i=Kg(i,u[f]);if(a.length===0)break}r.push(i)}),et(r)}function Sh(e,t){return e.index===t.index}function Ex(e){var t=Wa(),r=[];return Oe(e,function(n,i){var o=Ee(n);r.push({minX:o[0],minY:o[1],maxX:o[2],maxY:o[3],geojson:n,index:i})}),t.load(r),t}function xx(e,t,r,n){n===void 0&&(n={});for(var i=[],o=e[0],s=e[1],a=e[2],u=e[3],f=t/ee([o,s],[a,s],n),l=f*(a-o),c=r/ee([o,s],[o,u],n),h=c*(u-s),p=a-o,v=u-s,y=Math.floor(p/l),E=Math.floor(v/h),x=(p-y*l)/2,g=(v-E*h)/2,d=o+x,_=0;_<y;_++){for(var w=s+g,S=0;S<E;S++){var C=pt([[[d,w],[d,w+h],[d+l,w+h],[d+l,w],[d,w]]],n.properties);n.mask?$_(n.mask,C)&&i.push(C):i.push(C),w+=h}d+=l}return et(i)}function wx(e,t,r){return r===void 0&&(r={}),xx(e,t,t,r)}function Ix(e,t,r){r===void 0&&(r={});for(var n=[],i=t/ee([e[0],e[1]],[e[2],e[1]],r),o=i*(e[2]-e[0]),s=t/ee([e[0],e[1]],[e[0],e[3]],r),a=s*(e[3]-e[1]),u=0,f=e[0];f<=e[2];){for(var l=0,c=e[1];c<=e[3];){var h=null,p=null;u%2===0&&l%2===0?(h=pt([[[f,c],[f,c+a],[f+o,c],[f,c]]],r.properties),p=pt([[[f,c+a],[f+o,c+a],[f+o,c],[f,c+a]]],r.properties)):u%2===0&&l%2===1?(h=pt([[[f,c],[f+o,c+a],[f+o,c],[f,c]]],r.properties),p=pt([[[f,c],[f,c+a],[f+o,c+a],[f,c]]],r.properties)):l%2===0&&u%2===1?(h=pt([[[f,c],[f,c+a],[f+o,c+a],[f,c]]],r.properties),p=pt([[[f,c],[f+o,c+a],[f+o,c],[f,c]]],r.properties)):l%2===1&&u%2===1&&(h=pt([[[f,c],[f,c+a],[f+o,c],[f,c]]],r.properties),p=pt([[[f,c+a],[f+o,c+a],[f+o,c],[f,c+a]]],r.properties)),r.mask?(Xa(r.mask,h)&&n.push(h),Xa(r.mask,p)&&n.push(p)):(n.push(h),n.push(p)),c+=a,l++}u++,f+=o}return et(n)}function Iw(e,t,r){if(r=r||{},typeof r!="object")throw new Error("options is invalid");var n=r.gridType,i=r.property,o=r.weight;if(!e)throw new Error("points is required");if(Xi(e,"Point","input must contain Points"),!t)throw new Error("cellSize is required");if(o!==void 0&&typeof o!="number")throw new Error("weight must be a number");i=i||"elevation",n=n||"square",o=o||1;var s=Ee(e),a;switch(n){case"point":case"points":a=Uy(s,t,r);break;case"square":case"squares":a=wx(s,t,r);break;case"hex":case"hexes":a=gx(s,t,r);break;case"triangle":case"triangles":a=Ix(s,t,r);break;default:throw new Error("invalid gridType")}var u=[];return Qt(a,function(f){var l=0,c=0;Qt(e,function(p){var v=n==="point"?f:Qi(f),y=ee(v,p,r),E;if(i!==void 0&&(E=p.properties[i]),E===void 0&&(E=p.geometry.coordinates[2]),E===void 0)throw new Error("zValue is missing");y===0&&(l=E);var x=1/Math.pow(y,o);c+=x,l+=x*E});var h=or(f);h.properties[i]=l/c,u.push(h)}),et(u)}export{zx as along,pw as angle,Zf as applyFilter,ip as area,Uu as areaFactors,Ee as bbox,Kx as bboxClip,Kh as bboxPolygon,Ri as bearing,Ss as bearingToAngle,Ss as bearingToAzimuth,Rx as bezier,Rx as bezierSpline,nf as booleanClockwise,nw as booleanContains,iw as booleanCrosses,D_ as booleanDisjoint,ow as booleanEqual,$_ as booleanIntersects,j_ as booleanOverlap,uw as booleanParallel,ge as booleanPointInPolygon,Hr as booleanPointOnLine,by as booleanWithin,Ew as buffer,Lf as center,Qp as centerMean,cw as centerMedian,Zd as centerOfMass,Qi as centroid,Zh as circle,Do as cleanCoords,or as clone,rg as clusterEach,$1 as clusterReduce,mw as clusters,sw as clustersDbscan,aw as clustersKmeans,Lx as collect,Xi as collectionOf,Tx as combine,Px as concave,Lh as containsNumber,sv as convertArea,Qs as convertDistance,Qs as convertLength,jv as convex,Zi as coordAll,be as coordEach,Mh as coordReduce,ng as createBins,tr as degrees2radians,tr as degreesToRadians,li as destination,_w as difference,xw as dissolve,ee as distance,Ph as distanceToDegrees,Zs as distanceToRadians,z1 as distanceWeight,Ve as earthRadius,B1 as ellipse,Wd as envelope,Mf as explode,Ef as factors,ze as feature,et as featureCollection,Qt as featureEach,Sa as featureOf,Rh as featureReduce,tE as filterProperties,gv as findPoint,pv as findSegment,Xx as flatten,Oe as flattenEach,hv as flattenReduce,Mx as flip,lv as geojsonType,wn as geomEach,Ah as geomReduce,ev as geometry,Nh as geometryCollection,j1 as getCluster,se as getCoord,ot as getCoords,fe as getGeom,Br as getType,Hx as greatCircle,fv as helpers,gx as hexGrid,ge as inside,Iw as interpolate,Xa as intersect,Sx as invariant,Je as isNumber,re as isObject,$x as isobands,Nx as isolines,kx as kinks,Oy as length,Ph as lengthToDegrees,Zs as lengthToRadians,Qy as lineArc,Yx as lineChunk,Oy as lineDistance,Dh as lineEach,xi as lineIntersect,ew as lineOffset,Em as lineOverlap,Th as lineReduce,To as lineSegment,Ux as lineSlice,Ry as lineSliceAlong,Wx as lineSplit,Jt as lineString,Jx as lineStringToPolygon,iv as lineStrings,Jx as lineToPolygon,ww as mask,vv as meta,Dx as midpoint,vw as moranIndex,co as multiLineString,xf as multiPoint,Qn as multiPolygon,tp as nearest,tp as nearestPoint,Ji as nearestPointOnLine,Bx as nearestPointToLine,Gx as planepoint,gt as point,Uy as pointGrid,qx as pointOnFeature,Ji as pointOnLine,qx as pointOnSurface,Cy as pointToLineDistance,rv as points,td as pointsWithinPolygon,pt as polygon,gw as polygonSmooth,Qx as polygonTangents,Qu as polygonToLine,Qu as polygonToLineString,rw as polygonize,nv as polygons,dw as projection,Oh as propEach,cv as propReduce,ig as propertiesContainsFilter,bo as radians2degrees,bo as radiansToDegrees,Va as radiansToDistance,Va as radiansToLength,yw as random,J1 as randomLineString,H1 as randomPoint,W1 as randomPolygon,eu as randomPosition,jx as rewind,Fo as rhumbBearing,As as rhumbDestination,Af as rhumbDistance,ov as round,bx as sample,Zx as sector,Pi as segmentEach,bh as segmentReduce,fw as shortestPath,Ox as simplify,Jd as square,wx as squareGrid,hw as standardDeviationalEllipse,Ax as tag,Fx as tesselate,ed as tin,X1 as toMercator,Y1 as toWgs84,m_ as transformRotate,__ as transformScale,tw as transformTranslate,Ix as triangleGrid,Xy as truncate,Kg as union,tv as unitsFactors,Vx as unkinkPolygon,av as validateBBox,uv as validateId,lw as voronoi,td as within};
