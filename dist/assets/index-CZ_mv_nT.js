(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))o(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&o(a)}).observe(document,{childList:!0,subtree:!0});function t(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function o(n){if(n.ep)return;n.ep=!0;const i=t(n);fetch(n.href,i)}})();const J=[{id:"gl-draw-line-inactive",type:"line",filter:["all",["==","active","false"],["==","$type","LineString"],["!=","mode","static"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#e74230","line-width":2}},{id:"gl-draw-line-active",type:"line",filter:["all",["==","$type","LineString"],["==","active","true"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#e74230","line-dasharray":[.2,2],"line-width":2}}],$=(r=!0)=>({id:"app-vertice",type:"symbol",source:"app-vertice",filter:["all",["has","cumulative_length"]],paint:{"text-color":"#000","text-halo-color":"#FFF","text-halo-width":2},layout:{"text-field":["format",["to-string",["/",["round",["*",100,["get","cumulative_length"]]],100]],{"font-scale":1}," km",{"font-scale":1},...r?[" (EL.",{"font-scale":.8},["get","elevation_str"],{"font-scale":.8},")",{"font-scale":.8}]:[]],"text-size":16,"text-font":["Noto Sans Regular"],"text-offset":[0,1],"text-variable-anchor":["bottom","top"],"text-allow-overlap":!1}}),H={id:"app-end-circle",type:"circle",source:"app-vertice",filter:["all",["==","isEnd",!0]],paint:{"circle-radius":8,"circle-color":"#e74230"}},D=new URLSearchParams(window.location.search),k=document.getElementById("url"),T=r=>{D.set("g",r.geometry.coordinates.map(e=>e.join(",")).join(";")),window.history.replaceState({},"",`?${D.toString()}${window.location.hash}`),k.value=window.location.href},K=()=>{k.value=window.location.href;let r;const e=D.get("g");if(e){try{r=e.split(";").map(t=>t.split(",").map(o=>parseFloat(o)))}catch(t){console.error(t)}if(r){const t={type:"LineString",coordinates:r};try{return{type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:t}]}}catch(o){return console.error(o),null}}}},Q=`<?xml version="1.0" encoding="UTF-8"?>
<svg width="20px" height="20px" viewBox="0 0 84 84" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
    <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
        <g id="Group-2" transform="translate(-9.000000, -8.000000)" fill="#000000" fill-rule="nonzero">
            <g id="Group" transform="translate(51.073130, 50.399487) scale(-1, 1) rotate(45.000000) translate(-51.073130, -50.399487) translate(0.073130, 30.399487)">
                <path d="M41.1538462,0 C51.9871239,0 60.7692308,8.80468294 60.7692308,19.6658098 C60.7692308,30.4183253 52.1618879,39.1553202 41.4782224,39.3289849 L41.1538462,39.3316195 L19.6153846,39.3316195 C8.78210683,39.3316195 0,30.5269366 0,19.6658098 C0,17.5361771 1.72198173,15.8097686 3.84615385,15.8097686 C5.94343771,15.8097686 7.64864877,17.4927471 7.69148263,19.5851342 L7.69230769,19.6658098 C7.69230769,26.2016526 12.924222,31.512375 19.4182147,31.6179358 L19.6153846,31.6195373 L41.1538462,31.6195373 C47.7387797,31.6195373 53.0769231,26.2676712 53.0769231,19.6658098 C53.0769231,13.129967 47.8450088,7.81924458 41.351016,7.71368372 L41.1538462,7.71208226 L19.6153846,7.71208226 C17.4912125,7.71208226 15.7692308,5.98567384 15.7692308,3.85604113 C15.7692308,1.7533658 17.4478939,0.0437711512 19.5349159,0.000827187325 L19.6153846,0 L41.1538462,0 Z" id="Rectangle" transform="translate(30.384615, 19.665810) scale(-1, -1) translate(-30.384615, -19.665810) "></path>
                <path d="M81.9230769,0 C92.7563547,0 101.538462,8.80468294 101.538462,19.6658098 C101.538462,30.4183253 92.9311186,39.1553202 82.2474532,39.3289849 L81.9230769,39.3316195 L60.3846154,39.3316195 C49.5513376,39.3316195 40.7692308,30.5269366 40.7692308,19.6658098 C40.7692308,17.5361771 42.4912125,15.8097686 44.6153846,15.8097686 C46.7126685,15.8097686 48.4178795,17.4927471 48.4607134,19.5851342 L48.4615385,19.6658098 C48.4615385,26.2016526 53.6934528,31.512375 60.1874455,31.6179358 L60.3846154,31.6195373 L81.9230769,31.6195373 C88.5080105,31.6195373 93.8461538,26.2676712 93.8461538,19.6658098 C93.8461538,13.129967 88.6142395,7.81924458 82.1202468,7.71368372 L81.9230769,7.71208226 L60.3846154,7.71208226 C58.2604433,7.71208226 56.5384615,5.98567384 56.5384615,3.85604113 C56.5384615,1.7533658 58.2171247,0.0437711512 60.3041466,0.000827187325 L60.3846154,0 L81.9230769,0 Z" id="Rectangle"></path>
            </g>
        </g>
    </g>
</svg>`;class X{constructor(e){this.options=e}onAdd(){this.container=document.createElement("div"),this.container.className="maplibregl-ctrl maplibregl-ctrl-group";const e=document.createElement("button");e.className="maplibregl-ctrl-icon mapbox-gl-copy-to-clipboard",e.style.display="flex",e.style.justifyContent="center",e.style.alignItems="center",e.type="button",e.setAttribute("aria-label","copy url to clipboard"),e.innerHTML=Q,this.container.appendChild(e);const t=()=>{k.select(),k.setSelectionRange(0,99999),document.execCommand("copy"),k.setSelectionRange(0,0),k.blur(),typeof this.options.callback=="function"&&this.options.callback()};return e.addEventListener("click",t),e.addEventListener("touchstart",o=>{o.preventDefault(),t()}),this.container}onRemove(){this.container.parentNode.removeChild(this.container)}}class Y{constructor(e){this.options=e}onAdd(){this.container=document.createElement("div"),this.container.className="maplibregl-ctrl maplibregl-ctrl-group";const e=document.createElement("button");return e.className="maplibregl-ctrl-icon mapbox-gl-switch-style",e.style.display="flex",e.style.justifyContent="center",e.style.alignItems="center",e.type="button",e.setAttribute("aria-label","switch style"),e.innerHTML="EL.",this.container.appendChild(e),e.addEventListener("click",this.options.onClick),e.addEventListener("touchstart",t=>{t.preventDefault(),this.options.onClick(t)}),this.container}onRemove(){this.container.parentNode.removeChild(this.container)}}const ee=()=>{const r="geoloniamaps/basic-v1",e="https://raw.githubusercontent.com/%s/gh-pages/style.json";let t;const o=new URLSearchParams(location.search).get("style");if(o)if(o.match(/^https:\/\//))t=o;else{const n=o.split(/\//);t=e.replace("%s",n.join("/"))}else t=e.replace("%s",r);return t};class te{constructor(){this._input=null,this._map=null,this._search=()=>{!this._input||!this._map||this._input.value&&window.getLatLng(this._input.value,e=>{this._map.flyTo({center:e})},e=>{alert(e.messge||"見つかりませんでした。もっと詳細な住所を入力してみてください。")})}}onAdd(e){return this._map=e,this._container=document.createElement("div"),this._container.style.display="flex",this._container.className="maplibregl-ctrl maplibregl-ctrl-group",this._input=document.createElement("input"),this._input.placeholder="例: 東京都千代田区霞が関1-3-1",this._button=document.createElement("button"),this._button.innerText="検索",this._button.style.width="50px",this._button.addEventListener("click",()=>this._search()),this._container.appendChild(this._input),this._container.appendChild(this._button),this._container}onRemove(){this._container.parentNode.removeChild(this._container)}}const oe="modulepreload",ne=function(r){return"/"+r},U={},re=function(e,t,o){let n=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),d=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));n=Promise.allSettled(t.map(s=>{if(s=ne(s),s in U)return;U[s]=!0;const l=s.endsWith(".css"),f=l?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${s}"]${f}`))return;const u=document.createElement("link");if(u.rel=l?"stylesheet":oe,l||(u.as="script"),u.crossOrigin="",u.href=s,d&&u.setAttribute("nonce",d),document.head.appendChild(u),l)return new Promise((h,w)=>{u.addEventListener("load",h),u.addEventListener("error",()=>w(new Error(`Unable to preload CSS for ${s}`)))})}))}function i(a){const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=a,window.dispatchEvent(d),!d.defaultPrevented)throw a}return n.then(a=>{for(const d of a||[])d.status==="rejected"&&i(d.reason);return e().catch(i)})},R=async r=>{const e=await re(()=>import("./index-D2ZDMBwI.js"),[]),{coordinates:t}=r,o={type:"FeatureCollection",features:[{type:"Feature",properties:{cumulative_length:0,isEnd:!0},geometry:{type:"Point",coordinates:t[0]}}]};let n=0;for(let a=1;a<t.length;a++){const d=e.point(t[a-1]),s=e.point(t[a]),l=e.distance(d,s);n+=l,o.features.push({type:"Feature",properties:{cumulative_length:n,isEnd:a===t.length-1},geometry:{type:"Point",coordinates:t[a]}})}return(await ie(o)).reduce((a,d,s)=>{if(d&&d.elevation){const{elevation:l,hsrc:f}=d;o.features[s].properties.elevation=l,o.features[s].properties.elevation_str=`${Math.round((typeof l=="number"?l:0)*100)/100}m`,o.features[s].properties.hsrc=f;let u="";if(a!==null){const h=s===0?0:l-a;o.features[s].properties.elevation_diff=h,h>0?u=`(+${Math.round(h*100)/100}m)`:h<0&&(u=`(-${Math.round(Math.abs(h)*100)/100}m)`)}return o.features[s].properties.elevation_diff_str=u,l}return null},0),{vertice:o}},A={},ie=r=>Promise.all(r.features.map(e=>{const[t,o]=e.geometry.coordinates,n=`${t}/${o}`;return A[n]?A[n]:fetch(`https://cyberjapandata2.gsi.go.jp/general/dem/scripts/getelevation.php?lon=${t}&lat=${o}&outtype=JSON`).then(i=>{if(i.status<300)return i.json();throw i}).then(i=>(A[n]=i,i)).catch(i=>(console.error(i),!1))})),ae=document.getElementById("wizard-trail"),se=document.getElementById("wizard-switch"),le=document.getElementById("wizard-download"),ce=document.getElementById("wizard-copy"),de=document.getElementById("wizard-copied"),y=(r,e,t=0)=>{const o=e?"block":"none";let n=null;switch(r){case"trail":n=ae;break;case"switch":n=se;break;case"download":n=le;break;case"copy":n=ce;break;case"copied":n=de;break}n&&setTimeout(()=>n.style.display=o,t)};var E=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ce(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}function Le(r){if(r.__esModule)return r;var e=r.default;if(typeof e=="function"){var t=function o(){return this instanceof o?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(r).forEach(function(o){var n=Object.getOwnPropertyDescriptor(r,o);Object.defineProperty(t,o,n.get?n:{enumerable:!0,get:function(){return r[o]}})}),t}var G={};/*! @source http://purl.eligrey.com/github/canvas-toBlob.js/blob/master/canvas-toBlob.js */(function(r){var e=r.Uint8Array,t=r.HTMLCanvasElement,o=t&&t.prototype,n=/\s*;\s*base64\s*(?:;|$)/i,i="toDataURL",a,d=function(s){for(var l=s.length,f=new e(l/4*3|0),u=0,h=0,w=[0,0],_=0,g=0,C,m,P;l--;)m=s.charCodeAt(u++),C=a[m-43],C!==255&&C!==P&&(w[1]=w[0],w[0]=m,g=g<<6|C,_++,_===4&&(f[h++]=g>>>16,w[1]!==61&&(f[h++]=g>>>8),w[0]!==61&&(f[h++]=g),_=0));return f};e&&(a=new e([62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,0,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51])),t&&(!o.toBlob||!o.toBlobHD)&&(o.toBlob||(o.toBlob=function(s,l){if(l||(l="image/png"),this.mozGetAsFile){s(this.mozGetAsFile("canvas",l));return}if(this.msToBlob&&/^\s*image\/png\s*(?:$|;)/i.test(l)){s(this.msToBlob());return}var f=Array.prototype.slice.call(arguments,1),u=this[i].apply(this,f),h=u.indexOf(","),w=u.substring(h+1),_=n.test(u.substring(0,h)),g;Blob.fake?(g=new Blob,_?g.encoding="base64":g.encoding="URI",g.data=w,g.size=w.length):e&&(_?g=new Blob([d(w)],{type:l}):g=new Blob([decodeURIComponent(w)],{type:l})),s(g)}),!o.toBlobHD&&o.toDataURLHD?o.toBlobHD=function(){i="toDataURLHD";var s=this.toBlob();return i="toDataURL",s}:o.toBlobHD=o.toBlob)})(typeof self<"u"&&self||typeof window<"u"&&window||E.content||E);var Z={exports:{}};(function(r){/*! @source http://purl.eligrey.com/github/FileSaver.js/blob/master/FileSaver.js */var e=e||function(t){if(!(typeof t>"u"||typeof navigator<"u"&&/MSIE [1-9]\./.test(navigator.userAgent))){var o=t.document,n=function(){return t.URL||t.webkitURL||t},i=o.createElementNS("http://www.w3.org/1999/xhtml","a"),a="download"in i,d=function(c){var v=new MouseEvent("click");c.dispatchEvent(v)},s=/constructor/i.test(t.HTMLElement)||t.safari,l=/CriOS\/[\d]+/.test(navigator.userAgent),f=function(c){(t.setImmediate||t.setTimeout)(function(){throw c},0)},u="application/octet-stream",h=1e3*40,w=function(c){var v=function(){typeof c=="string"?n().revokeObjectURL(c):c.remove()};setTimeout(v,h)},_=function(c,v,S){v=[].concat(v);for(var b=v.length;b--;){var F=c["on"+v[b]];if(typeof F=="function")try{F.call(c,S||c)}catch(O){f(O)}}},g=function(c){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(c.type)?new Blob(["\uFEFF",c],{type:c.type}):c},C=function(c,v,S){S||(c=g(c));var b=this,F=c.type,O=F===u,L,B=function(){_(b,"writestart progress write writeend".split(" "))},q=function(){if((l||O&&s)&&t.FileReader){var N=new FileReader;N.onloadend=function(){var I=l?N.result:N.result.replace(/^data:[^;]*;/,"data:attachment/file;"),W=t.open(I,"_blank");W||(t.location.href=I),I=void 0,b.readyState=b.DONE,B()},N.readAsDataURL(c),b.readyState=b.INIT;return}if(L||(L=n().createObjectURL(c)),O)t.location.href=L;else{var V=t.open(L,"_blank");V||(t.location.href=L)}b.readyState=b.DONE,B(),w(L)};if(b.readyState=b.INIT,a){L=n().createObjectURL(c),setTimeout(function(){i.href=L,i.download=v,d(i),B(),w(L),b.readyState=b.DONE});return}q()},m=C.prototype,P=function(c,v,S){return new C(c,v||c.name||"download",S)};return typeof navigator<"u"&&navigator.msSaveOrOpenBlob?function(c,v,S){return v=v||c.name||"download",S||(c=g(c)),navigator.msSaveOrOpenBlob(c,v)}:(m.abort=function(){},m.readyState=m.INIT=0,m.WRITING=1,m.DONE=2,m.error=m.onwritestart=m.onprogress=m.onwrite=m.onabort=m.onerror=m.onwriteend=null,P)}}(typeof self<"u"&&self||typeof window<"u"&&window||E.content);r.exports&&(r.exports.saveAs=e)})(Z);var ue=Z.exports,M={};Object.defineProperty(M,"__esModule",{value:!0});M.download=M.loading=void 0;M.loading=`
  <svg style="width: 100%; height: 100%;" width="45" height="45" viewBox="0 0 45 45" stroke="#fff">
    <g fill="none" fill-rule="evenodd" transform="translate(1 1)" stroke-width="2">
      <circle cx="22" cy="22" r="6" stroke-opacity="0">
        <animate attributeName="r"
              begin="1.5s" dur="3s"
              values="6;22"
              calcMode="linear"
              repeatCount="indefinite" />
        <animate attributeName="stroke-opacity"
              begin="1.5s" dur="3s"
              values="1;0" calcMode="linear"
              repeatCount="indefinite" />
        <animate attributeName="stroke-width"
              begin="1.5s" dur="3s"
              values="2;0" calcMode="linear"
              repeatCount="indefinite" />
      </circle>
      <circle cx="22" cy="22" r="6" stroke-opacity="0">
        <animate attributeName="r"
              begin="3s" dur="3s"
              values="6;22"
              calcMode="linear"
              repeatCount="indefinite" />
        <animate attributeName="stroke-opacity"
              begin="3s" dur="3s"
              values="1;0" calcMode="linear"
              repeatCount="indefinite" />
        <animate attributeName="stroke-width"
              begin="3s" dur="3s"
              values="2;0" calcMode="linear"
              repeatCount="indefinite" />
      </circle>
      <circle cx="22" cy="22" r="8">
        <animate attributeName="r"
              begin="0s" dur="1.5s"
              values="6;1;2;3;4;5;6"
              calcMode="linear"
              repeatCount="indefinite" />
      </circle>
    </g>
  </svg>
  `;M.download=`
  <svg height="19px" viewBox="0 0 14 19" width="14px" xmlns="http://www.w3.org/2000/svg">
    <title/><desc/><defs/>
    <g fill="none" fill-rule="evenodd" id="Page-1" stroke="none" stroke-width="1">
      <g fill="#000000" id="Core" transform="translate(-383.000000, -213.000000)">
        <g id="file-download" transform="translate(383.000000, 213.500000)">
          <path d="M14,6 L10,6 L10,0 L4,0 L4,6 L0,6 L7,13 L14,6 L14,6 Z M0,15 L0,17 L14,17 L14,15 L0,15 L0,15 Z" id="Shape"/>
        </g>
      </g>
    </g>
  </svg>
  `;var pe=E&&E.__awaiter||function(r,e,t,o){function n(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function d(f){try{l(o.next(f))}catch(u){a(u)}}function s(f){try{l(o.throw(f))}catch(u){a(u)}}function l(f){f.done?i(f.value):n(f.value).then(d,s)}l((o=o.apply(r,e||[])).next())})},fe=E&&E.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(G,"__esModule",{value:!0});const he=fe(ue),z=M,ge={dpi:300,attribution:"© OpenStreetMap Contributors",textFont:[]};class me{constructor(e={}){this.container=null,this.options=Object.assign(Object.assign({},ge),e)}onAdd(e){this.container=document.createElement("div"),this.container.className="mapboxgl-ctrl mapboxgl-ctrl-group maplibregl-ctrl maplibregl-ctrl-group";const t=document.createElement("button");return t.className="mapboxgl-ctrl-icon mapbox-gl-download maplibregl-ctrl-icon maplibre-gl-download",t.type="button",t.setAttribute("aria-label","Download"),t.innerHTML=z.download,this.container.appendChild(t),t.addEventListener("click",()=>pe(this,void 0,void 0,function*(){const o=window.devicePixelRatio;Object.defineProperty(window,"devicePixelRatio",{get:()=>this.options.dpi/96});const n=this.loading(),i=document.createElement("div");document.body.appendChild(i);const a=e.getContainer().offsetWidth,d=e.getContainer().offsetHeight,s=e.unproject([a,d]).toArray();this.setStyles(i,{visibility:"hidden",position:"absolute",top:"0",bottom:"0",width:`${a}px`,height:`${d}px`});let l="Noto Sans Regular";e.style.glyphManager&&e.style.glyphManager.localIdeographFontFamily&&(l=e.style.glyphManager.localIdeographFontFamily);let f;typeof window.geolonia<"u"?f=window.geolonia.Map:f=mapboxgl.Map;const u=JSON.parse(JSON.stringify(e.getStyle())),h=new f({container:i,center:e.getCenter(),zoom:e.getZoom(),bearing:e.getBearing(),pitch:e.getPitch(),style:u,localIdeographFontFamily:l,hash:!1,preserveDrawingBuffer:!0,interactive:!1,attributionControl:!1});h.once("load",()=>{const w={type:"FeatureCollection",features:[{type:"Feature",geometry:{type:"Point",coordinates:s},properties:{text:this.options.attribution}}]};h.addSource("attribution-for-image",{type:"geojson",data:w});let _=[];if(this.options.textFont.length)_=this.options.textFont;else{const g=e.getStyle().layers;for(let C=0;C<g.length;C++)try{const m=e.getLayoutProperty(g[C].id,"text-font");if(m&&m.length){_=m;break}}catch{}}h.addLayer({id:"markers",type:"symbol",source:"attribution-for-image",paint:{"text-color":"#000000","text-halo-color":"rgba(255, 255, 255, 1)","text-halo-width":2},layout:{"text-field":"{text}","text-font":_,"text-size":18,"text-anchor":"bottom-right","text-max-width":28,"text-offset":[-.5,-.5],"text-allow-overlap":!0}}),setTimeout(()=>{h.getCanvas().toBlob(g=>{g&&he.default.saveAs(g,`${h.getCenter().toArray().join("-")}.png`),h.remove(),i.parentNode.removeChild(i),n.parentNode.removeChild(n),Object.defineProperty(window,"devicePixelRatio",{get:()=>o})})},3e3)})})),this.container}onRemove(){this.container&&this.container.parentNode&&this.container.parentNode.removeChild(this.container)}loading(){const e=document.createElement("div");document.body.appendChild(e),this.setStyles(e,{position:"absolute",top:"0",bottom:"0",width:"100%",backgroundColor:"rgba(0, 0, 0, 0.6)",zIndex:"9999"});const t=document.createElement("div");return t.innerHTML=z.loading,this.setStyles(t,{position:"absolute",top:"0",bottom:"0",left:"0",right:"0",zIndex:"9999",margin:"auto",width:"120px",height:"120px"}),e.appendChild(t),e}setStyles(e,t){for(const o in t)e.style[o]=t[o]}}var ye=G.default=me;const p=new geolonia.Map({container:"#map",style:ee()}),x=new MapboxDraw({controls:{point:!1,polygon:!1,combine_features:!1,uncombine_features:!1},styles:J}),we=new ye({dpi:300,attribution:"© Geolonia | © OpenStreetMap"});let j=!0;const ve=new Y({onClick:()=>{j=!j;const r=$(j);p.removeLayer(r.id),p.removeLayer("app-end-circle"),p.addLayer(r),p.addLayer(H)}}),be=new X({callback:()=>{y("copy",!1,0),y("copied",!0,0),y("copied",!1,3e3)}}),_e=new te;p.addControl(x,"top-right");p.addControl(ve);p.addControl(we);p.addControl(be);p.addControl(_e,"bottom-left");p.on("load",async()=>{const r=K(),e=document.querySelector("button.mapbox-gl-download");e.addEventListener("click",()=>y("download",!1)),e.addEventListener("touchstart",()=>{y("switch",!1),y("download",!1)});const t=o=>{const n=$(j);o?(p.getSource("app-vertice")&&(p.removeLayer(n.id),p.removeLayer("app-end-circle"),p.removeSource("app-vertice")),p.addSource("app-vertice",{type:"geojson",data:o}),p.addLayer(n),p.addLayer(H)):(p.removeLayer(n.id),p.removeLayer("app-end-circle"),p.removeSource("app-vertice"))};if(r){x.set(r);const o=r.features[0],{vertice:n}=await R(o.geometry);t(n)}if(y("trail",!0,1e3),p.on("draw.create",async o=>{const n=o.features[0];x.deleteAll(),x.set({type:"FeatureCollection",features:[n]}),y("trail",!1),y("copied",!1),y("switch",!0,1e3),y("download",!0,1e3),y("copy",!0,1e3),y("switch",!1,11e3),y("download",!1,11e3),y("copy",!1,11e3);const{vertice:i}=await R(n.geometry);T(n),t(i)}),p.on("draw.update",async o=>{if(o.action==="move"||o.action==="change_coordinates"){y("trail",!1);const n=x.getAll().features[0],{vertice:i}=await R(n.geometry);T(n),t(i)}}),p.on("draw.delete",()=>{t(!1),y("copied",!1),y("copy",!1),y("switch",!1),y("download",!1),y("trail",!0,1e3)}),p.on("click",async()=>{if(x.getMode()==="draw_line_string"){const{features:n}=x.getAll(),i=n[n.length-1];if(i.geometry.coordinates.length<3)return;{const a=i.geometry.coordinates.slice(0,i.geometry.coordinates.length-1),d={...i.geometry,coordinates:a},{vertice:s}=await R(d);t(s)}}}),"ontouchstart"in window){const o=document.getElementById("done");o.addEventListener("touchstart",()=>{o.style.display="none",x.changeMode("simple_select")}),p.on("draw.modechange",n=>{n.mode==="draw_line_string"?o.style.display="block":o.style.display="none"})}});export{Le as a,E as c,Ce as g};
